#!/usr/bin/env node
var Rb=Object.create;var Oc=Object.defineProperty;var Ab=Object.getOwnPropertyDescriptor;var kb=Object.getOwnPropertyNames;var Tb=Object.getPrototypeOf,Cb=Object.prototype.hasOwnProperty;var me=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),Db=(a,e)=>{for(var t in e)Oc(a,t,{get:e[t],enumerable:!0})},Ob=(a,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of kb(e))!Cb.call(a,r)&&r!==t&&Oc(a,r,{get:()=>e[r],enumerable:!(s=Ab(e,r))||s.enumerable});return a};var $c=(a,e,t)=>(t=a!=null?Rb(Tb(a)):{},Ob(e||!a||!a.__esModule?Oc(t,"default",{value:a,enumerable:!0}):t,a));var Sf=me((ys,Ef)=>{(function(a,e){typeof ys=="object"&&typeof Ef<"u"?e(ys):typeof define=="function"&&define.amd?define(["exports"],e):e(a.URI=a.URI||{})})(ys,(function(a){"use strict";function e(){for(var k=arguments.length,P=Array(k),C=0;C<k;C++)P[C]=arguments[C];if(P.length>1){P[0]=P[0].slice(0,-1);for(var L=P.length-1,N=1;N<L;++N)P[N]=P[N].slice(1,-1);return P[L]=P[L].slice(1),P.join("")}else return P[0]}function t(k){return"(?:"+k+")"}function s(k){return k===void 0?"undefined":k===null?"null":Object.prototype.toString.call(k).split(" ").pop().split("]").shift().toLowerCase()}function r(k){return k.toUpperCase()}function c(k){return k!=null?k instanceof Array?k:typeof k.length!="number"||k.split||k.setInterval||k.call?[k]:Array.prototype.slice.call(k):[]}function l(k,P){var C=k;if(P)for(var L in P)C[L]=P[L];return C}function u(k){var P="[A-Za-z]",C="[\\x0D]",L="[0-9]",N="[\\x22]",re=e(L,"[A-Fa-f]"),be="[\\x0A]",$e="[\\x20]",qe=t(t("%[EFef]"+re+"%"+re+re+"%"+re+re)+"|"+t("%[89A-Fa-f]"+re+"%"+re+re)+"|"+t("%"+re+re)),lt="[\\:\\/\\?\\#\\[\\]\\@]",De="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",nt=e(lt,De),ft=k?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Xe=k?"[\\uE000-\\uF8FF]":"[]",Fe=e(P,L,"[\\-\\.\\_\\~]",ft),at=t(P+e(P,L,"[\\+\\-\\.]")+"*"),je=t(t(qe+"|"+e(Fe,De,"[\\:]"))+"*"),Gr=t(t("25[0-5]")+"|"+t("2[0-4]"+L)+"|"+t("1"+L+L)+"|"+t("[1-9]"+L)+"|"+L),St=t(t("25[0-5]")+"|"+t("2[0-4]"+L)+"|"+t("1"+L+L)+"|"+t("0?[1-9]"+L)+"|0?0?"+L),Gt=t(St+"\\."+St+"\\."+St+"\\."+St),Ve=t(re+"{1,4}"),Nt=t(t(Ve+"\\:"+Ve)+"|"+Gt),jt=t(t(Ve+"\\:")+"{6}"+Nt),rr=t("\\:\\:"+t(Ve+"\\:")+"{5}"+Nt),Nr=t(t(Ve)+"?\\:\\:"+t(Ve+"\\:")+"{4}"+Nt),Sr=t(t(t(Ve+"\\:")+"{0,1}"+Ve)+"?\\:\\:"+t(Ve+"\\:")+"{3}"+Nt),On=t(t(t(Ve+"\\:")+"{0,2}"+Ve)+"?\\:\\:"+t(Ve+"\\:")+"{2}"+Nt),Xn=t(t(t(Ve+"\\:")+"{0,3}"+Ve)+"?\\:\\:"+Ve+"\\:"+Nt),ea=t(t(t(Ve+"\\:")+"{0,4}"+Ve)+"?\\:\\:"+Nt),Kr=t(t(t(Ve+"\\:")+"{0,5}"+Ve)+"?\\:\\:"+Ve),Yr=t(t(t(Ve+"\\:")+"{0,6}"+Ve)+"?\\:\\:"),fr=t([jt,rr,Nr,Sr,On,Xn,ea,Kr,Yr].join("|")),jr=t(t(Fe+"|"+qe)+"+"),Ca=t(fr+"\\%25"+jr),zr=t(fr+t("\\%25|\\%(?!"+re+"{2})")+jr),ta=t("[vV]"+re+"+\\."+e(Fe,De,"[\\:]")+"+"),ui=t("\\["+t(zr+"|"+fr+"|"+ta)+"\\]"),di=t(t(qe+"|"+e(Fe,De))+"*"),pn=t(ui+"|"+Gt+"(?!"+di+")|"+di),mn=t(L+"*"),ra=t(t(je+"@")+"?"+pn+t("\\:"+mn)+"?"),$n=t(qe+"|"+e(Fe,De,"[\\:\\@]")),fi=t($n+"*"),na=t($n+"+"),Da=t(t(qe+"|"+e(Fe,De,"[\\@]"))+"+"),Ot=t(t("\\/"+fi)+"*"),Qr=t("\\/"+t(na+Ot)+"?"),aa=t(Da+Ot),ia=t(na+Ot),Jr="(?!"+$n+")",So=t(Ot+"|"+Qr+"|"+aa+"|"+ia+"|"+Jr),Xr=t(t($n+"|"+e("[\\/\\?]",Xe))+"*"),gn=t(t($n+"|[\\/\\?]")+"*"),hi=t(t("\\/\\/"+ra+Ot)+"|"+Qr+"|"+ia+"|"+Jr),Po=t(at+"\\:"+hi+t("\\?"+Xr)+"?"+t("\\#"+gn)+"?"),Ro=t(t("\\/\\/"+ra+Ot)+"|"+Qr+"|"+aa+"|"+Jr),pi=t(Ro+t("\\?"+Xr)+"?"+t("\\#"+gn)+"?"),Zl=t(Po+"|"+pi),Bl=t(at+"\\:"+hi+t("\\?"+Xr)+"?"),Vl="^("+at+")\\:"+t(t("\\/\\/("+t("("+je+")@")+"?("+pn+")"+t("\\:("+mn+")")+"?)")+"?("+Ot+"|"+Qr+"|"+ia+"|"+Jr+")")+t("\\?("+Xr+")")+"?"+t("\\#("+gn+")")+"?$",Wl="^(){0}"+t(t("\\/\\/("+t("("+je+")@")+"?("+pn+")"+t("\\:("+mn+")")+"?)")+"?("+Ot+"|"+Qr+"|"+aa+"|"+Jr+")")+t("\\?("+Xr+")")+"?"+t("\\#("+gn+")")+"?$",mi="^("+at+")\\:"+t(t("\\/\\/("+t("("+je+")@")+"?("+pn+")"+t("\\:("+mn+")")+"?)")+"?("+Ot+"|"+Qr+"|"+ia+"|"+Jr+")")+t("\\?("+Xr+")")+"?$",Gl="^"+t("\\#("+gn+")")+"?$",Kl="^"+t("("+je+")@")+"?("+pn+")"+t("\\:("+mn+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",P,L,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",Fe,De),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",Fe,De),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",Fe,De),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",Fe,De),"g"),NOT_QUERY:new RegExp(e("[^\\%]",Fe,De,"[\\:\\@\\/\\?]",Xe),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",Fe,De,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",Fe,De),"g"),UNRESERVED:new RegExp(Fe,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",Fe,nt),"g"),PCT_ENCODED:new RegExp(qe,"g"),IPV4ADDRESS:new RegExp("^("+Gt+")$"),IPV6ADDRESS:new RegExp("^\\[?("+fr+")"+t(t("\\%25|\\%(?!"+re+"{2})")+"("+jr+")")+"?\\]?$")}}var d=u(!1),h=u(!0),m=(function(){function k(P,C){var L=[],N=!0,re=!1,be=void 0;try{for(var $e=P[Symbol.iterator](),qe;!(N=(qe=$e.next()).done)&&(L.push(qe.value),!(C&&L.length===C));N=!0);}catch(lt){re=!0,be=lt}finally{try{!N&&$e.return&&$e.return()}finally{if(re)throw be}}return L}return function(P,C){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return k(P,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),g=function(k){if(Array.isArray(k)){for(var P=0,C=Array(k.length);P<k.length;P++)C[P]=k[P];return C}else return Array.from(k)},v=2147483647,p=36,y=1,E=26,b=38,R=700,q=72,$=128,j="-",M=/^xn--/,I=/[^\0-\x7E]/,H=/[\x2E\u3002\uFF0E\uFF61]/g,W={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},B=p-y,J=Math.floor,te=String.fromCharCode;function ie(k){throw new RangeError(W[k])}function G(k,P){for(var C=[],L=k.length;L--;)C[L]=P(k[L]);return C}function Q(k,P){var C=k.split("@"),L="";C.length>1&&(L=C[0]+"@",k=C[1]),k=k.replace(H,".");var N=k.split("."),re=G(N,P).join(".");return L+re}function se(k){for(var P=[],C=0,L=k.length;C<L;){var N=k.charCodeAt(C++);if(N>=55296&&N<=56319&&C<L){var re=k.charCodeAt(C++);(re&64512)==56320?P.push(((N&1023)<<10)+(re&1023)+65536):(P.push(N),C--)}else P.push(N)}return P}var Ue=function(P){return String.fromCodePoint.apply(String,g(P))},ge=function(P){return P-48<10?P-22:P-65<26?P-65:P-97<26?P-97:p},_e=function(P,C){return P+22+75*(P<26)-((C!=0)<<5)},Ee=function(P,C,L){var N=0;for(P=L?J(P/R):P>>1,P+=J(P/C);P>B*E>>1;N+=p)P=J(P/B);return J(N+(B+1)*P/(P+b))},le=function(P){var C=[],L=P.length,N=0,re=$,be=q,$e=P.lastIndexOf(j);$e<0&&($e=0);for(var qe=0;qe<$e;++qe)P.charCodeAt(qe)>=128&&ie("not-basic"),C.push(P.charCodeAt(qe));for(var lt=$e>0?$e+1:0;lt<L;){for(var De=N,nt=1,ft=p;;ft+=p){lt>=L&&ie("invalid-input");var Xe=ge(P.charCodeAt(lt++));(Xe>=p||Xe>J((v-N)/nt))&&ie("overflow"),N+=Xe*nt;var Fe=ft<=be?y:ft>=be+E?E:ft-be;if(Xe<Fe)break;var at=p-Fe;nt>J(v/at)&&ie("overflow"),nt*=at}var je=C.length+1;be=Ee(N-De,je,De==0),J(N/je)>v-re&&ie("overflow"),re+=J(N/je),N%=je,C.splice(N++,0,re)}return String.fromCodePoint.apply(String,C)},Ne=function(P){var C=[];P=se(P);var L=P.length,N=$,re=0,be=q,$e=!0,qe=!1,lt=void 0;try{for(var De=P[Symbol.iterator](),nt;!($e=(nt=De.next()).done);$e=!0){var ft=nt.value;ft<128&&C.push(te(ft))}}catch(zr){qe=!0,lt=zr}finally{try{!$e&&De.return&&De.return()}finally{if(qe)throw lt}}var Xe=C.length,Fe=Xe;for(Xe&&C.push(j);Fe<L;){var at=v,je=!0,Gr=!1,St=void 0;try{for(var Gt=P[Symbol.iterator](),Ve;!(je=(Ve=Gt.next()).done);je=!0){var Nt=Ve.value;Nt>=N&&Nt<at&&(at=Nt)}}catch(zr){Gr=!0,St=zr}finally{try{!je&&Gt.return&&Gt.return()}finally{if(Gr)throw St}}var jt=Fe+1;at-N>J((v-re)/jt)&&ie("overflow"),re+=(at-N)*jt,N=at;var rr=!0,Nr=!1,Sr=void 0;try{for(var On=P[Symbol.iterator](),Xn;!(rr=(Xn=On.next()).done);rr=!0){var ea=Xn.value;if(ea<N&&++re>v&&ie("overflow"),ea==N){for(var Kr=re,Yr=p;;Yr+=p){var fr=Yr<=be?y:Yr>=be+E?E:Yr-be;if(Kr<fr)break;var jr=Kr-fr,Ca=p-fr;C.push(te(_e(fr+jr%Ca,0))),Kr=J(jr/Ca)}C.push(te(_e(Kr,0))),be=Ee(re,jt,Fe==Xe),re=0,++Fe}}}catch(zr){Nr=!0,Sr=zr}finally{try{!rr&&On.return&&On.return()}finally{if(Nr)throw Sr}}++re,++N}return C.join("")},xt=function(P){return Q(P,function(C){return M.test(C)?le(C.slice(4).toLowerCase()):C})},At=function(P){return Q(P,function(C){return I.test(C)?"xn--"+Ne(C):C})},Le={version:"2.1.0",ucs2:{decode:se,encode:Ue},decode:le,encode:Ne,toASCII:At,toUnicode:xt},Ke={};function ct(k){var P=k.charCodeAt(0),C=void 0;return P<16?C="%0"+P.toString(16).toUpperCase():P<128?C="%"+P.toString(16).toUpperCase():P<2048?C="%"+(P>>6|192).toString(16).toUpperCase()+"%"+(P&63|128).toString(16).toUpperCase():C="%"+(P>>12|224).toString(16).toUpperCase()+"%"+(P>>6&63|128).toString(16).toUpperCase()+"%"+(P&63|128).toString(16).toUpperCase(),C}function kt(k){for(var P="",C=0,L=k.length;C<L;){var N=parseInt(k.substr(C+1,2),16);if(N<128)P+=String.fromCharCode(N),C+=3;else if(N>=194&&N<224){if(L-C>=6){var re=parseInt(k.substr(C+4,2),16);P+=String.fromCharCode((N&31)<<6|re&63)}else P+=k.substr(C,6);C+=6}else if(N>=224){if(L-C>=9){var be=parseInt(k.substr(C+4,2),16),$e=parseInt(k.substr(C+7,2),16);P+=String.fromCharCode((N&15)<<12|(be&63)<<6|$e&63)}else P+=k.substr(C,9);C+=9}else P+=k.substr(C,3),C+=3}return P}function Bt(k,P){function C(L){var N=kt(L);return N.match(P.UNRESERVED)?N:L}return k.scheme&&(k.scheme=String(k.scheme).replace(P.PCT_ENCODED,C).toLowerCase().replace(P.NOT_SCHEME,"")),k.userinfo!==void 0&&(k.userinfo=String(k.userinfo).replace(P.PCT_ENCODED,C).replace(P.NOT_USERINFO,ct).replace(P.PCT_ENCODED,r)),k.host!==void 0&&(k.host=String(k.host).replace(P.PCT_ENCODED,C).toLowerCase().replace(P.NOT_HOST,ct).replace(P.PCT_ENCODED,r)),k.path!==void 0&&(k.path=String(k.path).replace(P.PCT_ENCODED,C).replace(k.scheme?P.NOT_PATH:P.NOT_PATH_NOSCHEME,ct).replace(P.PCT_ENCODED,r)),k.query!==void 0&&(k.query=String(k.query).replace(P.PCT_ENCODED,C).replace(P.NOT_QUERY,ct).replace(P.PCT_ENCODED,r)),k.fragment!==void 0&&(k.fragment=String(k.fragment).replace(P.PCT_ENCODED,C).replace(P.NOT_FRAGMENT,ct).replace(P.PCT_ENCODED,r)),k}function Mt(k){return k.replace(/^0*(.*)/,"$1")||"0"}function dt(k,P){var C=k.match(P.IPV4ADDRESS)||[],L=m(C,2),N=L[1];return N?N.split(".").map(Mt).join("."):k}function Ye(k,P){var C=k.match(P.IPV6ADDRESS)||[],L=m(C,3),N=L[1],re=L[2];if(N){for(var be=N.toLowerCase().split("::").reverse(),$e=m(be,2),qe=$e[0],lt=$e[1],De=lt?lt.split(":").map(Mt):[],nt=qe.split(":").map(Mt),ft=P.IPV4ADDRESS.test(nt[nt.length-1]),Xe=ft?7:8,Fe=nt.length-Xe,at=Array(Xe),je=0;je<Xe;++je)at[je]=De[je]||nt[Fe+je]||"";ft&&(at[Xe-1]=dt(at[Xe-1],P));var Gr=at.reduce(function(jt,rr,Nr){if(!rr||rr==="0"){var Sr=jt[jt.length-1];Sr&&Sr.index+Sr.length===Nr?Sr.length++:jt.push({index:Nr,length:1})}return jt},[]),St=Gr.sort(function(jt,rr){return rr.length-jt.length})[0],Gt=void 0;if(St&&St.length>1){var Ve=at.slice(0,St.index),Nt=at.slice(St.index+St.length);Gt=Ve.join(":")+"::"+Nt.join(":")}else Gt=at.join(":");return re&&(Gt+="%"+re),Gt}else return k}var ur=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,_t="".match(/(){0}/)[1]===void 0;function ye(k){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},C={},L=P.iri!==!1?h:d;P.reference==="suffix"&&(k=(P.scheme?P.scheme+":":"")+"//"+k);var N=k.match(ur);if(N){_t?(C.scheme=N[1],C.userinfo=N[3],C.host=N[4],C.port=parseInt(N[5],10),C.path=N[6]||"",C.query=N[7],C.fragment=N[8],isNaN(C.port)&&(C.port=N[5])):(C.scheme=N[1]||void 0,C.userinfo=k.indexOf("@")!==-1?N[3]:void 0,C.host=k.indexOf("//")!==-1?N[4]:void 0,C.port=parseInt(N[5],10),C.path=N[6]||"",C.query=k.indexOf("?")!==-1?N[7]:void 0,C.fragment=k.indexOf("#")!==-1?N[8]:void 0,isNaN(C.port)&&(C.port=k.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?N[4]:void 0)),C.host&&(C.host=Ye(dt(C.host,L),L)),C.scheme===void 0&&C.userinfo===void 0&&C.host===void 0&&C.port===void 0&&!C.path&&C.query===void 0?C.reference="same-document":C.scheme===void 0?C.reference="relative":C.fragment===void 0?C.reference="absolute":C.reference="uri",P.reference&&P.reference!=="suffix"&&P.reference!==C.reference&&(C.error=C.error||"URI is not a "+P.reference+" reference.");var re=Ke[(P.scheme||C.scheme||"").toLowerCase()];if(!P.unicodeSupport&&(!re||!re.unicodeSupport)){if(C.host&&(P.domainHost||re&&re.domainHost))try{C.host=Le.toASCII(C.host.replace(L.PCT_ENCODED,kt).toLowerCase())}catch(be){C.error=C.error||"Host's domain name can not be converted to ASCII via punycode: "+be}Bt(C,d)}else Bt(C,L);re&&re.parse&&re.parse(C,P)}else C.error=C.error||"URI can not be parsed.";return C}function Vt(k,P){var C=P.iri!==!1?h:d,L=[];return k.userinfo!==void 0&&(L.push(k.userinfo),L.push("@")),k.host!==void 0&&L.push(Ye(dt(String(k.host),C),C).replace(C.IPV6ADDRESS,function(N,re,be){return"["+re+(be?"%25"+be:"")+"]"})),(typeof k.port=="number"||typeof k.port=="string")&&(L.push(":"),L.push(String(k.port))),L.length?L.join(""):void 0}var Er=/^\.\.?\//,Tt=/^\/\.(\/|$)/,Lr=/^\/\.\.(\/|$)/,yt=/^\/?(?:.|\n)*?(?=\/|$)/;function Et(k){for(var P=[];k.length;)if(k.match(Er))k=k.replace(Er,"");else if(k.match(Tt))k=k.replace(Tt,"/");else if(k.match(Lr))k=k.replace(Lr,"/"),P.pop();else if(k==="."||k==="..")k="";else{var C=k.match(yt);if(C){var L=C[0];k=k.slice(L.length),P.push(L)}else throw new Error("Unexpected dot segment condition")}return P.join("")}function Je(k){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},C=P.iri?h:d,L=[],N=Ke[(P.scheme||k.scheme||"").toLowerCase()];if(N&&N.serialize&&N.serialize(k,P),k.host&&!C.IPV6ADDRESS.test(k.host)){if(P.domainHost||N&&N.domainHost)try{k.host=P.iri?Le.toUnicode(k.host):Le.toASCII(k.host.replace(C.PCT_ENCODED,kt).toLowerCase())}catch($e){k.error=k.error||"Host's domain name can not be converted to "+(P.iri?"Unicode":"ASCII")+" via punycode: "+$e}}Bt(k,C),P.reference!=="suffix"&&k.scheme&&(L.push(k.scheme),L.push(":"));var re=Vt(k,P);if(re!==void 0&&(P.reference!=="suffix"&&L.push("//"),L.push(re),k.path&&k.path.charAt(0)!=="/"&&L.push("/")),k.path!==void 0){var be=k.path;!P.absolutePath&&(!N||!N.absolutePath)&&(be=Et(be)),re===void 0&&(be=be.replace(/^\/\//,"/%2F")),L.push(be)}return k.query!==void 0&&(L.push("?"),L.push(k.query)),k.fragment!==void 0&&(L.push("#"),L.push(k.fragment)),L.join("")}function mt(k,P){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},L=arguments[3],N={};return L||(k=ye(Je(k,C),C),P=ye(Je(P,C),C)),C=C||{},!C.tolerant&&P.scheme?(N.scheme=P.scheme,N.userinfo=P.userinfo,N.host=P.host,N.port=P.port,N.path=Et(P.path||""),N.query=P.query):(P.userinfo!==void 0||P.host!==void 0||P.port!==void 0?(N.userinfo=P.userinfo,N.host=P.host,N.port=P.port,N.path=Et(P.path||""),N.query=P.query):(P.path?(P.path.charAt(0)==="/"?N.path=Et(P.path):((k.userinfo!==void 0||k.host!==void 0||k.port!==void 0)&&!k.path?N.path="/"+P.path:k.path?N.path=k.path.slice(0,k.path.lastIndexOf("/")+1)+P.path:N.path=P.path,N.path=Et(N.path)),N.query=P.query):(N.path=k.path,P.query!==void 0?N.query=P.query:N.query=k.query),N.userinfo=k.userinfo,N.host=k.host,N.port=k.port),N.scheme=k.scheme),N.fragment=P.fragment,N}function Lt(k,P,C){var L=l({scheme:"null"},C);return Je(mt(ye(k,L),ye(P,L),L,!0),L)}function Ft(k,P){return typeof k=="string"?k=Je(ye(k,P),P):s(k)==="object"&&(k=ye(Je(k,P),P)),k}function Fr(k,P,C){return typeof k=="string"?k=Je(ye(k,C),C):s(k)==="object"&&(k=Je(k,C)),typeof P=="string"?P=Je(ye(P,C),C):s(P)==="object"&&(P=Je(P,C)),k===P}function Pa(k,P){return k&&k.toString().replace(!P||!P.iri?d.ESCAPE:h.ESCAPE,ct)}function Ct(k,P){return k&&k.toString().replace(!P||!P.iri?d.PCT_ENCODED:h.PCT_ENCODED,kt)}var dr={scheme:"http",domainHost:!0,parse:function(P,C){return P.host||(P.error=P.error||"HTTP URIs must have a host."),P},serialize:function(P,C){var L=String(P.scheme).toLowerCase()==="https";return(P.port===(L?443:80)||P.port==="")&&(P.port=void 0),P.path||(P.path="/"),P}},Gn={scheme:"https",domainHost:dr.domainHost,parse:dr.parse,serialize:dr.serialize};function Kn(k){return typeof k.secure=="boolean"?k.secure:String(k.scheme).toLowerCase()==="wss"}var Wr={scheme:"ws",domainHost:!0,parse:function(P,C){var L=P;return L.secure=Kn(L),L.resourceName=(L.path||"/")+(L.query?"?"+L.query:""),L.path=void 0,L.query=void 0,L},serialize:function(P,C){if((P.port===(Kn(P)?443:80)||P.port==="")&&(P.port=void 0),typeof P.secure=="boolean"&&(P.scheme=P.secure?"wss":"ws",P.secure=void 0),P.resourceName){var L=P.resourceName.split("?"),N=m(L,2),re=N[0],be=N[1];P.path=re&&re!=="/"?re:void 0,P.query=be,P.resourceName=void 0}return P.fragment=void 0,P}},Yn={scheme:"wss",domainHost:Wr.domainHost,parse:Wr.parse,serialize:Wr.serialize},Ra={},Aa=!0,Qn="[A-Za-z0-9\\-\\.\\_\\~"+(Aa?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",Wt="[0-9A-Fa-f]",ka=t(t("%[EFef]"+Wt+"%"+Wt+Wt+"%"+Wt+Wt)+"|"+t("%[89A-Fa-f]"+Wt+"%"+Wt+Wt)+"|"+t("%"+Wt+Wt)),_o="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",yo="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",bo=e(yo,'[\\"\\\\]'),ai="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",ii=new RegExp(Qn,"g"),hn=new RegExp(ka,"g"),wo=new RegExp(e("[^]",_o,"[\\.]",'[\\"]',bo),"g"),si=new RegExp(e("[^]",Qn,ai),"g"),xo=si;function Jn(k){var P=kt(k);return P.match(ii)?P:k}var oi={scheme:"mailto",parse:function(P,C){var L=P,N=L.to=L.path?L.path.split(","):[];if(L.path=void 0,L.query){for(var re=!1,be={},$e=L.query.split("&"),qe=0,lt=$e.length;qe<lt;++qe){var De=$e[qe].split("=");switch(De[0]){case"to":for(var nt=De[1].split(","),ft=0,Xe=nt.length;ft<Xe;++ft)N.push(nt[ft]);break;case"subject":L.subject=Ct(De[1],C);break;case"body":L.body=Ct(De[1],C);break;default:re=!0,be[Ct(De[0],C)]=Ct(De[1],C);break}}re&&(L.headers=be)}L.query=void 0;for(var Fe=0,at=N.length;Fe<at;++Fe){var je=N[Fe].split("@");if(je[0]=Ct(je[0]),C.unicodeSupport)je[1]=Ct(je[1],C).toLowerCase();else try{je[1]=Le.toASCII(Ct(je[1],C).toLowerCase())}catch(Gr){L.error=L.error||"Email address's domain name can not be converted to ASCII via punycode: "+Gr}N[Fe]=je.join("@")}return L},serialize:function(P,C){var L=P,N=c(P.to);if(N){for(var re=0,be=N.length;re<be;++re){var $e=String(N[re]),qe=$e.lastIndexOf("@"),lt=$e.slice(0,qe).replace(hn,Jn).replace(hn,r).replace(wo,ct),De=$e.slice(qe+1);try{De=C.iri?Le.toUnicode(De):Le.toASCII(Ct(De,C).toLowerCase())}catch(Fe){L.error=L.error||"Email address's domain name can not be converted to "+(C.iri?"Unicode":"ASCII")+" via punycode: "+Fe}N[re]=lt+"@"+De}L.path=N.join(",")}var nt=P.headers=P.headers||{};P.subject&&(nt.subject=P.subject),P.body&&(nt.body=P.body);var ft=[];for(var Xe in nt)nt[Xe]!==Ra[Xe]&&ft.push(Xe.replace(hn,Jn).replace(hn,r).replace(si,ct)+"="+nt[Xe].replace(hn,Jn).replace(hn,r).replace(xo,ct));return ft.length&&(L.query=ft.join("&")),L}},Eo=/^([^\:]+)\:(.*)/,ci={scheme:"urn",parse:function(P,C){var L=P.path&&P.path.match(Eo),N=P;if(L){var re=C.scheme||N.scheme||"urn",be=L[1].toLowerCase(),$e=L[2],qe=re+":"+(C.nid||be),lt=Ke[qe];N.nid=be,N.nss=$e,N.path=void 0,lt&&(N=lt.parse(N,C))}else N.error=N.error||"URN can not be parsed.";return N},serialize:function(P,C){var L=C.scheme||P.scheme||"urn",N=P.nid,re=L+":"+(C.nid||N),be=Ke[re];be&&(P=be.serialize(P,C));var $e=P,qe=P.nss;return $e.path=(N||C.nid)+":"+qe,$e}},Ta=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,li={scheme:"urn:uuid",parse:function(P,C){var L=P;return L.uuid=L.nss,L.nss=void 0,!C.tolerant&&(!L.uuid||!L.uuid.match(Ta))&&(L.error=L.error||"UUID is not valid."),L},serialize:function(P,C){var L=P;return L.nss=(P.uuid||"").toLowerCase(),L}};Ke[dr.scheme]=dr,Ke[Gn.scheme]=Gn,Ke[Wr.scheme]=Wr,Ke[Yn.scheme]=Yn,Ke[oi.scheme]=oi,Ke[ci.scheme]=ci,Ke[li.scheme]=li,a.SCHEMES=Ke,a.pctEncChar=ct,a.pctDecChars=kt,a.parse=ye,a.removeDotSegments=Et,a.serialize=Je,a.resolveComponents=mt,a.resolve=Lt,a.normalize=Ft,a.equal=Fr,a.escapeComponent=Pa,a.unescapeComponent=Ct,Object.defineProperty(a,"__esModule",{value:!0})}))});var bs=me((eP,Pf)=>{"use strict";Pf.exports=function a(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var s,r,c;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(r=s;r--!==0;)if(!a(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(c=Object.keys(e),s=c.length,s!==Object.keys(t).length)return!1;for(r=s;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,c[r]))return!1;for(r=s;r--!==0;){var l=c[r];if(!a(e[l],t[l]))return!1}return!0}return e!==e&&t!==t}});var Af=me((tP,Rf)=>{"use strict";Rf.exports=function(e){for(var t=0,s=e.length,r=0,c;r<s;)t++,c=e.charCodeAt(r++),c>=55296&&c<=56319&&r<s&&(c=e.charCodeAt(r),(c&64512)==56320&&r++);return t}});var Hn=me((rP,Cf)=>{"use strict";Cf.exports={copy:xw,checkDataType:Vc,checkDataTypes:Ew,coerceToTypes:Sw,toHash:Gc,getProperty:Kc,escapeQuotes:Yc,equal:bs(),ucs2length:Af(),varOccurences:Aw,varReplace:kw,schemaHasRules:Tw,schemaHasRulesExcept:Cw,schemaUnknownRules:Dw,toQuotedString:Wc,getPathExpr:Ow,getPath:$w,getData:Lw,unescapeFragment:Fw,unescapeJsonPointer:Jc,escapeFragment:Nw,escapeJsonPointer:Qc};function xw(a,e){e=e||{};for(var t in a)e[t]=a[t];return e}function Vc(a,e,t,s){var r=s?" !== ":" === ",c=s?" || ":" && ",l=s?"!":"",u=s?"":"!";switch(a){case"null":return e+r+"null";case"array":return l+"Array.isArray("+e+")";case"object":return"("+l+e+c+"typeof "+e+r+'"object"'+c+u+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+r+'"number"'+c+u+"("+e+" % 1)"+c+e+r+e+(t?c+l+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+r+'"'+a+'"'+(t?c+l+"isFinite("+e+")":"")+")";default:return"typeof "+e+r+'"'+a+'"'}}function Ew(a,e,t){switch(a.length){case 1:return Vc(a[0],e,t,!0);default:var s="",r=Gc(a);r.array&&r.object&&(s=r.null?"(":"(!"+e+" || ",s+="typeof "+e+' !== "object")',delete r.null,delete r.array,delete r.object),r.number&&delete r.integer;for(var c in r)s+=(s?" && ":"")+Vc(c,e,t,!0);return s}}var kf=Gc(["string","number","integer","boolean","null"]);function Sw(a,e){if(Array.isArray(e)){for(var t=[],s=0;s<e.length;s++){var r=e[s];(kf[r]||a==="array"&&r==="array")&&(t[t.length]=r)}if(t.length)return t}else{if(kf[e])return[e];if(a==="array"&&e==="array")return["array"]}}function Gc(a){for(var e={},t=0;t<a.length;t++)e[a[t]]=!0;return e}var Pw=/^[a-z$_][a-z$_0-9]*$/i,Rw=/'|\\/g;function Kc(a){return typeof a=="number"?"["+a+"]":Pw.test(a)?"."+a:"['"+Yc(a)+"']"}function Yc(a){return a.replace(Rw,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function Aw(a,e){e+="[^0-9]";var t=a.match(new RegExp(e,"g"));return t?t.length:0}function kw(a,e,t){return e+="([^0-9])",t=t.replace(/\$/g,"$$$$"),a.replace(new RegExp(e,"g"),t+"$1")}function Tw(a,e){if(typeof a=="boolean")return!a;for(var t in a)if(e[t])return!0}function Cw(a,e,t){if(typeof a=="boolean")return!a&&t!="not";for(var s in a)if(s!=t&&e[s])return!0}function Dw(a,e){if(typeof a!="boolean"){for(var t in a)if(!e[t])return t}}function Wc(a){return"'"+Yc(a)+"'"}function Ow(a,e,t,s){var r=t?"'/' + "+e+(s?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):s?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return Tf(a,r)}function $w(a,e,t){var s=Wc(t?"/"+Qc(e):Kc(e));return Tf(a,s)}var Iw=/^\/(?:[^~]|~0|~1)*$/,Mw=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Lw(a,e,t){var s,r,c,l;if(a==="")return"rootData";if(a[0]=="/"){if(!Iw.test(a))throw new Error("Invalid JSON-pointer: "+a);r=a,c="rootData"}else{if(l=a.match(Mw),!l)throw new Error("Invalid JSON-pointer: "+a);if(s=+l[1],r=l[2],r=="#"){if(s>=e)throw new Error("Cannot access property/index "+s+" levels up, current level is "+e);return t[e-s]}if(s>e)throw new Error("Cannot access data "+s+" levels up, current level is "+e);if(c="data"+(e-s||""),!r)return c}for(var u=c,d=r.split("/"),h=0;h<d.length;h++){var m=d[h];m&&(c+=Kc(Jc(m)),u+=" && "+c)}return u}function Tf(a,e){return a=='""'?e:(a+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function Fw(a){return Jc(decodeURIComponent(a))}function Nw(a){return encodeURIComponent(Qc(a))}function Qc(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}function Jc(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")}});var Xc=me((nP,Df)=>{"use strict";var jw=Hn();Df.exports=zw;function zw(a){jw.copy(a,this)}});var $f=me((aP,Of)=>{"use strict";var An=Of.exports=function(a,e,t){typeof e=="function"&&(t=e,e={}),t=e.cb||t;var s=typeof t=="function"?t:t.pre||function(){},r=t.post||function(){};ws(e,s,r,a,"",a)};An.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};An.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};An.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};An.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function ws(a,e,t,s,r,c,l,u,d,h){if(s&&typeof s=="object"&&!Array.isArray(s)){e(s,r,c,l,u,d,h);for(var m in s){var g=s[m];if(Array.isArray(g)){if(m in An.arrayKeywords)for(var v=0;v<g.length;v++)ws(a,e,t,g[v],r+"/"+m+"/"+v,c,r,m,s,v)}else if(m in An.propsKeywords){if(g&&typeof g=="object")for(var p in g)ws(a,e,t,g[p],r+"/"+m+"/"+qw(p),c,r,m,s,p)}else(m in An.keywords||a.allKeys&&!(m in An.skipKeywords))&&ws(a,e,t,g,r+"/"+m,c,r,m,s)}t(s,r,c,l,u,d,h)}}function qw(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}});var As=me((iP,Ff)=>{"use strict";var Ya=Sf(),If=bs(),Ps=Hn(),xs=Xc(),Uw=$f();Ff.exports=Tn;Tn.normalizeId=kn;Tn.fullPath=Es;Tn.url=Ss;Tn.ids=Ww;Tn.inlineRef=el;Tn.schema=Rs;function Tn(a,e,t){var s=this._refs[t];if(typeof s=="string")if(this._refs[s])s=this._refs[s];else return Tn.call(this,a,e,s);if(s=s||this._schemas[t],s instanceof xs)return el(s.schema,this._opts.inlineRefs)?s.schema:s.validate||this._compile(s);var r=Rs.call(this,e,t),c,l,u;return r&&(c=r.schema,e=r.root,u=r.baseId),c instanceof xs?l=c.validate||a.call(this,c.schema,e,void 0,u):c!==void 0&&(l=el(c,this._opts.inlineRefs)?c:a.call(this,c,e,void 0,u)),l}function Rs(a,e){var t=Ya.parse(e),s=Lf(t),r=Es(this._getId(a.schema));if(Object.keys(a.schema).length===0||s!==r){var c=kn(s),l=this._refs[c];if(typeof l=="string")return Hw.call(this,a,l,t);if(l instanceof xs)l.validate||this._compile(l),a=l;else if(l=this._schemas[c],l instanceof xs){if(l.validate||this._compile(l),c==kn(e))return{schema:l,root:a,baseId:r};a=l}else return;if(!a.schema)return;r=Es(this._getId(a.schema))}return Mf.call(this,t,r,a.schema,a)}function Hw(a,e,t){var s=Rs.call(this,a,e);if(s){var r=s.schema,c=s.baseId;a=s.root;var l=this._getId(r);return l&&(c=Ss(c,l)),Mf.call(this,t,c,r,a)}}var Zw=Ps.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function Mf(a,e,t,s){if(a.fragment=a.fragment||"",a.fragment.slice(0,1)=="/"){for(var r=a.fragment.split("/"),c=1;c<r.length;c++){var l=r[c];if(l){if(l=Ps.unescapeFragment(l),t=t[l],t===void 0)break;var u;if(!Zw[l]&&(u=this._getId(t),u&&(e=Ss(e,u)),t.$ref)){var d=Ss(e,t.$ref),h=Rs.call(this,s,d);h&&(t=h.schema,s=h.root,e=h.baseId)}}}if(t!==void 0&&t!==s.schema)return{schema:t,root:s,baseId:e}}}var Bw=Ps.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function el(a,e){if(e===!1)return!1;if(e===void 0||e===!0)return tl(a);if(e)return rl(a)<=e}function tl(a){var e;if(Array.isArray(a)){for(var t=0;t<a.length;t++)if(e=a[t],typeof e=="object"&&!tl(e))return!1}else for(var s in a)if(s=="$ref"||(e=a[s],typeof e=="object"&&!tl(e)))return!1;return!0}function rl(a){var e=0,t;if(Array.isArray(a)){for(var s=0;s<a.length;s++)if(t=a[s],typeof t=="object"&&(e+=rl(t)),e==1/0)return 1/0}else for(var r in a){if(r=="$ref")return 1/0;if(Bw[r])e++;else if(t=a[r],typeof t=="object"&&(e+=rl(t)+1),e==1/0)return 1/0}return e}function Es(a,e){e!==!1&&(a=kn(a));var t=Ya.parse(a);return Lf(t)}function Lf(a){return Ya.serialize(a).split("#")[0]+"#"}var Vw=/#\/?$/;function kn(a){return a?a.replace(Vw,""):""}function Ss(a,e){return e=kn(e),Ya.resolve(a,e)}function Ww(a){var e=kn(this._getId(a)),t={"":e},s={"":Es(e,!1)},r={},c=this;return Uw(a,{allKeys:!0},function(l,u,d,h,m,g,v){if(u!==""){var p=c._getId(l),y=t[h],E=s[h]+"/"+m;if(v!==void 0&&(E+="/"+(typeof v=="number"?v:Ps.escapeFragment(v))),typeof p=="string"){p=y=kn(y?Ya.resolve(y,p):p);var b=c._refs[p];if(typeof b=="string"&&(b=c._refs[b]),b&&b.schema){if(!If(l,b.schema))throw new Error('id "'+p+'" resolves to more than one schema')}else if(p!=kn(E))if(p[0]=="#"){if(r[p]&&!If(l,r[p]))throw new Error('id "'+p+'" resolves to more than one schema');r[p]=l}else c._refs[p]=E}t[u]=y,s[u]=E}}),r}});var ks=me((sP,jf)=>{"use strict";var nl=As();jf.exports={Validation:Nf(Gw),MissingRef:Nf(al)};function Gw(a){this.message="validation failed",this.errors=a,this.ajv=this.validation=!0}al.message=function(a,e){return"can't resolve reference "+e+" from id "+a};function al(a,e,t){this.message=t||al.message(a,e),this.missingRef=nl.url(a,e),this.missingSchema=nl.normalizeId(nl.fullPath(this.missingRef))}function Nf(a){return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}});var il=me((oP,zf)=>{"use strict";zf.exports=function(a,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var t=typeof e.cycles=="boolean"?e.cycles:!1,s=e.cmp&&(function(c){return function(l){return function(u,d){var h={key:u,value:l[u]},m={key:d,value:l[d]};return c(h,m)}}})(e.cmp),r=[];return(function c(l){if(l&&l.toJSON&&typeof l.toJSON=="function"&&(l=l.toJSON()),l!==void 0){if(typeof l=="number")return isFinite(l)?""+l:"null";if(typeof l!="object")return JSON.stringify(l);var u,d;if(Array.isArray(l)){for(d="[",u=0;u<l.length;u++)u&&(d+=","),d+=c(l[u])||"null";return d+"]"}if(l===null)return"null";if(r.indexOf(l)!==-1){if(t)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var h=r.push(l)-1,m=Object.keys(l).sort(s&&s(l));for(d="",u=0;u<m.length;u++){var g=m[u],v=c(l[g]);v&&(d&&(d+=","),d+=JSON.stringify(g)+":"+v)}return r.splice(h,1),"{"+d+"}"}})(a)}});var sl=me((cP,qf)=>{"use strict";qf.exports=function(e,t,s){var r="",c=e.schema.$async===!0,l=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),u=e.self._getId(e.schema);if(e.opts.strictKeywords){var d=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(d){var h="unknown keyword: "+d;if(e.opts.strictKeywords==="log")e.logger.warn(h);else throw new Error(h)}}if(e.isTop&&(r+=" var validate = ",c&&(e.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",u&&(e.opts.sourceCode||e.opts.processCode)&&(r+=" "+("/*# sourceURL="+u+" */")+" ")),typeof e.schema=="boolean"||!(l||e.schema.$ref)){var t="false schema",m=e.level,g=e.dataLevel,v=e.schema[t],p=e.schemaPath+e.util.getProperty(t),y=e.errSchemaPath+"/"+t,M=!e.opts.allErrors,W,E="data"+(g||""),j="valid"+m;if(e.schema===!1){e.isTop?M=!0:r+=" var "+j+" = false; ";var b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(W||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'boolean schema is false' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var R=r;r=b.pop(),!e.compositeRule&&M?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?c?r+=" return data; ":r+=" validate.errors = null; return true; ":r+=" var "+j+" = true; ";return e.isTop&&(r+=" }; return validate; "),r}if(e.isTop){var q=e.isTop,m=e.level=0,g=e.dataLevel=0,E="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var $="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn($);else throw new Error($)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{var m=e.level,g=e.dataLevel,E="data"+(g||"");if(u&&(e.baseId=e.resolve.url(e.baseId,u)),c&&!e.async)throw new Error("async schema in sync schema");r+=" var errs_"+m+" = errors;"}var j="valid"+m,M=!e.opts.allErrors,I="",H="",W,B=e.schema.type,J=Array.isArray(B);if(B&&e.opts.nullable&&e.schema.nullable===!0&&(J?B.indexOf("null")==-1&&(B=B.concat("null")):B!="null"&&(B=[B,"null"],J=!0)),J&&B.length==1&&(B=B[0],J=!1),e.schema.$ref&&l){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(l=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(r+=" "+e.RULES.all.$comment.code(e,"$comment")),B){if(e.opts.coerceTypes)var te=e.util.coerceToTypes(e.opts.coerceTypes,B);var ie=e.RULES.types[B];if(te||J||ie===!0||ie&&!yt(ie)){var p=e.schemaPath+".type",y=e.errSchemaPath+"/type",p=e.schemaPath+".type",y=e.errSchemaPath+"/type",G=J?"checkDataTypes":"checkDataType";if(r+=" if ("+e.util[G](B,E,e.opts.strictNumbers,!0)+") { ",te){var Q="dataType"+m,se="coerced"+m;r+=" var "+Q+" = typeof "+E+"; var "+se+" = undefined; ",e.opts.coerceTypes=="array"&&(r+=" if ("+Q+" == 'object' && Array.isArray("+E+") && "+E+".length == 1) { "+E+" = "+E+"[0]; "+Q+" = typeof "+E+"; if ("+e.util.checkDataType(e.schema.type,E,e.opts.strictNumbers)+") "+se+" = "+E+"; } "),r+=" if ("+se+" !== undefined) ; ";var Ue=te;if(Ue)for(var ge,_e=-1,Ee=Ue.length-1;_e<Ee;)ge=Ue[_e+=1],ge=="string"?r+=" else if ("+Q+" == 'number' || "+Q+" == 'boolean') "+se+" = '' + "+E+"; else if ("+E+" === null) "+se+" = ''; ":ge=="number"||ge=="integer"?(r+=" else if ("+Q+" == 'boolean' || "+E+" === null || ("+Q+" == 'string' && "+E+" && "+E+" == +"+E+" ",ge=="integer"&&(r+=" && !("+E+" % 1)"),r+=")) "+se+" = +"+E+"; "):ge=="boolean"?r+=" else if ("+E+" === 'false' || "+E+" === 0 || "+E+" === null) "+se+" = false; else if ("+E+" === 'true' || "+E+" === 1) "+se+" = true; ":ge=="null"?r+=" else if ("+E+" === '' || "+E+" === 0 || "+E+" === false) "+se+" = null; ":e.opts.coerceTypes=="array"&&ge=="array"&&(r+=" else if ("+Q+" == 'string' || "+Q+" == 'number' || "+Q+" == 'boolean' || "+E+" == null) "+se+" = ["+E+"]; ");r+=" else {   ";var b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(W||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",J?r+=""+B.join(","):r+=""+B,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",J?r+=""+B.join(","):r+=""+B,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var R=r;r=b.pop(),!e.compositeRule&&M?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } if ("+se+" !== undefined) {  ";var le=g?"data"+(g-1||""):"parentData",Ne=g?e.dataPathArr[g]:"parentDataProperty";r+=" "+E+" = "+se+"; ",g||(r+="if ("+le+" !== undefined)"),r+=" "+le+"["+Ne+"] = "+se+"; } "}else{var b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(W||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",J?r+=""+B.join(","):r+=""+B,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",J?r+=""+B.join(","):r+=""+B,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var R=r;r=b.pop(),!e.compositeRule&&M?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(e.schema.$ref&&!l)r+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",M&&(r+=" } if (errors === ",q?r+="0":r+="errs_"+m,r+=") { ",H+="}");else{var xt=e.RULES;if(xt){for(var ie,At=-1,Le=xt.length-1;At<Le;)if(ie=xt[At+=1],yt(ie)){if(ie.type&&(r+=" if ("+e.util.checkDataType(ie.type,E,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(ie.type=="object"&&e.schema.properties){var v=e.schema.properties,Ke=Object.keys(v),ct=Ke;if(ct)for(var kt,Bt=-1,Mt=ct.length-1;Bt<Mt;){kt=ct[Bt+=1];var dt=v[kt];if(dt.default!==void 0){var Ye=E+e.util.getProperty(kt);if(e.compositeRule){if(e.opts.strictDefaults){var $="default is ignored for: "+Ye;if(e.opts.strictDefaults==="log")e.logger.warn($);else throw new Error($)}}else r+=" if ("+Ye+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+Ye+" === null || "+Ye+" === '' "),r+=" ) "+Ye+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(dt.default)+" ":r+=" "+JSON.stringify(dt.default)+" ",r+="; "}}}else if(ie.type=="array"&&Array.isArray(e.schema.items)){var ur=e.schema.items;if(ur){for(var dt,_e=-1,_t=ur.length-1;_e<_t;)if(dt=ur[_e+=1],dt.default!==void 0){var Ye=E+"["+_e+"]";if(e.compositeRule){if(e.opts.strictDefaults){var $="default is ignored for: "+Ye;if(e.opts.strictDefaults==="log")e.logger.warn($);else throw new Error($)}}else r+=" if ("+Ye+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+Ye+" === null || "+Ye+" === '' "),r+=" ) "+Ye+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(dt.default)+" ":r+=" "+JSON.stringify(dt.default)+" ",r+="; "}}}}var ye=ie.rules;if(ye){for(var Vt,Er=-1,Tt=ye.length-1;Er<Tt;)if(Vt=ye[Er+=1],Et(Vt)){var Lr=Vt.code(e,Vt.keyword,ie.type);Lr&&(r+=" "+Lr+" ",M&&(I+="}"))}}if(M&&(r+=" "+I+" ",I=""),ie.type&&(r+=" } ",B&&B===ie.type&&!te)){r+=" else { ";var p=e.schemaPath+".type",y=e.errSchemaPath+"/type",b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(W||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",J?r+=""+B.join(","):r+=""+B,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",J?r+=""+B.join(","):r+=""+B,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var R=r;r=b.pop(),!e.compositeRule&&M?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}M&&(r+=" if (errors === ",q?r+="0":r+="errs_"+m,r+=") { ",H+="}")}}}M&&(r+=" "+H+" "),q?(c?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+j+" = errors === errs_"+m+";";function yt(mt){for(var Lt=mt.rules,Ft=0;Ft<Lt.length;Ft++)if(Et(Lt[Ft]))return!0}function Et(mt){return e.schema[mt.keyword]!==void 0||mt.implements&&Je(mt)}function Je(mt){for(var Lt=mt.implements,Ft=0;Ft<Lt.length;Ft++)if(e.schema[Lt[Ft]]!==void 0)return!0}return r}});var Vf=me((lP,Bf)=>{"use strict";var Ts=As(),Ds=Hn(),Hf=ks(),Kw=il(),Uf=sl(),Yw=Ds.ucs2length,Qw=bs(),Jw=Hf.Validation;Bf.exports=ol;function ol(a,e,t,s){var r=this,c=this._opts,l=[void 0],u={},d=[],h={},m=[],g={},v=[];e=e||{schema:a,refVal:l,refs:u};var p=Xw.call(this,a,e,s),y=this._compilations[p.index];if(p.compiling)return y.callValidate=$;var E=this._formats,b=this.RULES;try{var R=j(a,e,t,s);y.validate=R;var q=y.callValidate;return q&&(q.schema=R.schema,q.errors=null,q.refs=R.refs,q.refVal=R.refVal,q.root=R.root,q.$async=R.$async,c.sourceCode&&(q.source=R.source)),R}finally{ex.call(this,a,e,s)}function $(){var G=y.validate,Q=G.apply(this,arguments);return $.errors=G.errors,Q}function j(G,Q,se,Ue){var ge=!Q||Q&&Q.schema==G;if(Q.schema!=e.schema)return ol.call(r,G,Q,se,Ue);var _e=G.$async===!0,Ee=Uf({isTop:!0,schema:G,isRoot:ge,baseId:Ue,root:Q,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Hf.MissingRef,RULES:b,validate:Uf,util:Ds,resolve:Ts,resolveRef:M,usePattern:J,useDefault:te,useCustomRule:ie,opts:c,formats:E,logger:r.logger,self:r});Ee=Cs(l,nx)+Cs(d,tx)+Cs(m,rx)+Cs(v,ax)+Ee,c.processCode&&(Ee=c.processCode(Ee,G));var le;try{var Ne=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",Ee);le=Ne(r,b,E,e,l,m,v,Qw,Yw,Jw),l[0]=le}catch(xt){throw r.logger.error("Error compiling schema, function code:",Ee),xt}return le.schema=G,le.errors=null,le.refs=u,le.refVal=l,le.root=ge?le:Q,_e&&(le.$async=!0),c.sourceCode===!0&&(le.source={code:Ee,patterns:d,defaults:m}),le}function M(G,Q,se){Q=Ts.url(G,Q);var Ue=u[Q],ge,_e;if(Ue!==void 0)return ge=l[Ue],_e="refVal["+Ue+"]",B(ge,_e);if(!se&&e.refs){var Ee=e.refs[Q];if(Ee!==void 0)return ge=e.refVal[Ee],_e=I(Q,ge),B(ge,_e)}_e=I(Q);var le=Ts.call(r,j,e,Q);if(le===void 0){var Ne=t&&t[Q];Ne&&(le=Ts.inlineRef(Ne,c.inlineRefs)?Ne:ol.call(r,Ne,e,t,G))}if(le===void 0)H(Q);else return W(Q,le),B(le,_e)}function I(G,Q){var se=l.length;return l[se]=Q,u[G]=se,"refVal"+se}function H(G){delete u[G]}function W(G,Q){var se=u[G];l[se]=Q}function B(G,Q){return typeof G=="object"||typeof G=="boolean"?{code:Q,schema:G,inline:!0}:{code:Q,$async:G&&!!G.$async}}function J(G){var Q=h[G];return Q===void 0&&(Q=h[G]=d.length,d[Q]=G),"pattern"+Q}function te(G){switch(typeof G){case"boolean":case"number":return""+G;case"string":return Ds.toQuotedString(G);case"object":if(G===null)return"null";var Q=Kw(G),se=g[Q];return se===void 0&&(se=g[Q]=m.length,m[se]=G),"default"+se}}function ie(G,Q,se,Ue){if(r._opts.validateSchema!==!1){var ge=G.definition.dependencies;if(ge&&!ge.every(function(ct){return Object.prototype.hasOwnProperty.call(se,ct)}))throw new Error("parent schema must have all required keywords: "+ge.join(","));var _e=G.definition.validateSchema;if(_e){var Ee=_e(Q);if(!Ee){var le="keyword schema is invalid: "+r.errorsText(_e.errors);if(r._opts.validateSchema=="log")r.logger.error(le);else throw new Error(le)}}}var Ne=G.definition.compile,xt=G.definition.inline,At=G.definition.macro,Le;if(Ne)Le=Ne.call(r,Q,se,Ue);else if(At)Le=At.call(r,Q,se,Ue),c.validateSchema!==!1&&r.validateSchema(Le,!0);else if(xt)Le=xt.call(r,Ue,G.keyword,Q,se);else if(Le=G.definition.validate,!Le)return;if(Le===void 0)throw new Error('custom keyword "'+G.keyword+'"failed to compile');var Ke=v.length;return v[Ke]=Le,{code:"customRule"+Ke,validate:Le}}}function Xw(a,e,t){var s=Zf.call(this,a,e,t);return s>=0?{index:s,compiling:!0}:(s=this._compilations.length,this._compilations[s]={schema:a,root:e,baseId:t},{index:s,compiling:!1})}function ex(a,e,t){var s=Zf.call(this,a,e,t);s>=0&&this._compilations.splice(s,1)}function Zf(a,e,t){for(var s=0;s<this._compilations.length;s++){var r=this._compilations[s];if(r.schema==a&&r.root==e&&r.baseId==t)return s}return-1}function tx(a,e){return"var pattern"+a+" = new RegExp("+Ds.toQuotedString(e[a])+");"}function rx(a){return"var default"+a+" = defaults["+a+"];"}function nx(a,e){return e[a]===void 0?"":"var refVal"+a+" = refVal["+a+"];"}function ax(a){return"var customRule"+a+" = customRules["+a+"];"}function Cs(a,e){if(!a.length)return"";for(var t="",s=0;s<a.length;s++)t+=e(s,a);return t}});var Gf=me((uP,Wf)=>{"use strict";var Os=Wf.exports=function(){this._cache={}};Os.prototype.put=function(e,t){this._cache[e]=t};Os.prototype.get=function(e){return this._cache[e]};Os.prototype.del=function(e){delete this._cache[e]};Os.prototype.clear=function(){this._cache={}}});var sh=me((dP,ih)=>{"use strict";var ix=Hn(),sx=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,ox=[0,31,28,31,30,31,30,31,31,30,31,30,31],cx=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Kf=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,lx=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,ux=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Yf=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Qf=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,Jf=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Xf=/^(?:\/(?:[^~/]|~0|~1)*)*$/,eh=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,th=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;ih.exports=$s;function $s(a){return a=a=="full"?"full":"fast",ix.copy($s[a])}$s.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":Yf,url:Qf,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:Kf,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:ah,uuid:Jf,"json-pointer":Xf,"json-pointer-uri-fragment":eh,"relative-json-pointer":th};$s.full={date:rh,time:nh,"date-time":hx,uri:mx,"uri-reference":ux,"uri-template":Yf,url:Qf,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:Kf,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:ah,uuid:Jf,"json-pointer":Xf,"json-pointer-uri-fragment":eh,"relative-json-pointer":th};function dx(a){return a%4===0&&(a%100!==0||a%400===0)}function rh(a){var e=a.match(sx);if(!e)return!1;var t=+e[1],s=+e[2],r=+e[3];return s>=1&&s<=12&&r>=1&&r<=(s==2&&dx(t)?29:ox[s])}function nh(a,e){var t=a.match(cx);if(!t)return!1;var s=t[1],r=t[2],c=t[3],l=t[5];return(s<=23&&r<=59&&c<=59||s==23&&r==59&&c==60)&&(!e||l)}var fx=/t|\s/i;function hx(a){var e=a.split(fx);return e.length==2&&rh(e[0])&&nh(e[1],!0)}var px=/\/|:/;function mx(a){return px.test(a)&&lx.test(a)}var gx=/[^\\]\\Z/;function ah(a){if(gx.test(a))return!1;try{return new RegExp(a),!0}catch{return!1}}});var ch=me((fP,oh)=>{"use strict";oh.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(l||""),g="valid"+c,v,p;if(u=="#"||u=="#/")e.isRoot?(v=e.async,p="validate"):(v=e.root.schema.$async===!0,p="root.refVal[0]");else{var y=e.resolveRef(e.baseId,u,e.isRoot);if(y===void 0){var E=e.MissingRefError.message(e.baseId,u);if(e.opts.missingRefs=="fail"){e.logger.error(E);var b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { ref: '"+e.util.escapeQuotes(u)+"' } ",e.opts.messages!==!1&&(r+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(u)+"' "),e.opts.verbose&&(r+=" , schema: "+e.util.toQuotedString(u)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var R=r;r=b.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h&&(r+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(E),h&&(r+=" if (true) { ");else throw new e.MissingRefError(e.baseId,u,E)}else if(y.inline){var q=e.util.copy(e);q.level++;var $="valid"+q.level;q.schema=y.schema,q.schemaPath="",q.errSchemaPath=u;var j=e.validate(q).replace(/validate\.schema/g,y.code);r+=" "+j+" ",h&&(r+=" if ("+$+") { ")}else v=y.$async===!0||e.async&&y.$async!==!1,p=y.code}if(p){var b=b||[];b.push(r),r="",e.opts.passContext?r+=" "+p+".call(this, ":r+=" "+p+"( ",r+=" "+m+", (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var M=l?"data"+(l-1||""):"parentData",I=l?e.dataPathArr[l]:"parentDataProperty";r+=" , "+M+" , "+I+", rootData)  ";var H=r;if(r=b.pop(),v){if(!e.async)throw new Error("async schema referenced by sync schema");h&&(r+=" var "+g+"; "),r+=" try { await "+H+"; ",h&&(r+=" "+g+" = true; "),r+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",h&&(r+=" "+g+" = false; "),r+=" } ",h&&(r+=" if ("+g+") { ")}else r+=" if (!"+H+") { if (vErrors === null) vErrors = "+p+".errors; else vErrors = vErrors.concat("+p+".errors); errors = vErrors.length; } ",h&&(r+=" else { ")}return r}});var uh=me((hP,lh)=>{"use strict";lh.exports=function(e,t,s){var r=" ",c=e.schema[t],l=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,h=e.util.copy(e),m="";h.level++;var g="valid"+h.level,v=h.baseId,p=!0,y=c;if(y)for(var E,b=-1,R=y.length-1;b<R;)E=y[b+=1],(e.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:e.util.schemaHasRules(E,e.RULES.all))&&(p=!1,h.schema=E,h.schemaPath=l+"["+b+"]",h.errSchemaPath=u+"/"+b,r+="  "+e.validate(h)+" ",h.baseId=v,d&&(r+=" if ("+g+") { ",m+="}"));return d&&(p?r+=" if (true) { ":r+=" "+m.slice(0,-1)+" "),r}});var fh=me((pP,dh)=>{"use strict";dh.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(l||""),v="valid"+c,p="errs__"+c,y=e.util.copy(e),E="";y.level++;var b="valid"+y.level,R=u.every(function(W){return e.opts.strictKeywords?typeof W=="object"&&Object.keys(W).length>0||W===!1:e.util.schemaHasRules(W,e.RULES.all)});if(R){var q=y.baseId;r+=" var "+p+" = errors; var "+v+" = false;  ";var $=e.compositeRule;e.compositeRule=y.compositeRule=!0;var j=u;if(j)for(var M,I=-1,H=j.length-1;I<H;)M=j[I+=1],y.schema=M,y.schemaPath=d+"["+I+"]",y.errSchemaPath=h+"/"+I,r+="  "+e.validate(y)+" ",y.baseId=q,r+=" "+v+" = "+v+" || "+b+"; if (!"+v+") { ",E+="}";e.compositeRule=y.compositeRule=$,r+=" "+E+" if (!"+v+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else m&&(r+=" if (true) { ");return r}});var ph=me((mP,hh)=>{"use strict";hh.exports=function(e,t,s){var r=" ",c=e.schema[t],l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d=e.util.toQuotedString(c);return e.opts.$comment===!0?r+=" console.log("+d+");":typeof e.opts.$comment=="function"&&(r+=" self._opts.$comment("+d+", "+e.util.toQuotedString(l)+", validate.root.schema);"),r}});var gh=me((gP,mh)=>{"use strict";mh.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(l||""),v="valid"+c,p=e.opts.$data&&u&&u.$data,y;p?(r+=" var schema"+c+" = "+e.util.getData(u.$data,l,e.dataPathArr)+"; ",y="schema"+c):y=u,p||(r+=" var schema"+c+" = validate.schema"+d+";"),r+="var "+v+" = equal("+g+", schema"+c+"); if (!"+v+") {   ";var E=E||[];E.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { allowedValue: schema"+c+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to constant' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var b=r;return r=E.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",m&&(r+=" else { "),r}});var _h=me((vP,vh)=>{"use strict";vh.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(l||""),v="valid"+c,p="errs__"+c,y=e.util.copy(e),E="";y.level++;var b="valid"+y.level,R="i"+c,q=y.dataLevel=e.dataLevel+1,$="data"+q,j=e.baseId,M=e.opts.strictKeywords?typeof u=="object"&&Object.keys(u).length>0||u===!1:e.util.schemaHasRules(u,e.RULES.all);if(r+="var "+p+" = errors;var "+v+";",M){var I=e.compositeRule;e.compositeRule=y.compositeRule=!0,y.schema=u,y.schemaPath=d,y.errSchemaPath=h,r+=" var "+b+" = false; for (var "+R+" = 0; "+R+" < "+g+".length; "+R+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,R,e.opts.jsonPointers,!0);var H=g+"["+R+"]";y.dataPathArr[q]=R;var W=e.validate(y);y.baseId=j,e.util.varOccurences(W,$)<2?r+=" "+e.util.varReplace(W,$,H)+" ":r+=" var "+$+" = "+H+"; "+W+" ",r+=" if ("+b+") break; }  ",e.compositeRule=y.compositeRule=I,r+=" "+E+" if (!"+b+") {"}else r+=" if ("+g+".length == 0) {";var B=B||[];B.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should contain a valid item' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var J=r;return r=B.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+J+"]); ":r+=" validate.errors = ["+J+"]; return false; ":r+=" var err = "+J+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",M&&(r+="  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } "),e.opts.allErrors&&(r+=" } "),r}});var bh=me((_P,yh)=>{"use strict";yh.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(l||""),v="errs__"+c,p=e.util.copy(e),y="";p.level++;var E="valid"+p.level,b={},R={},q=e.opts.ownProperties;for(I in u)if(I!="__proto__"){var $=u[I],j=Array.isArray($)?R:b;j[I]=$}r+="var "+v+" = errors;";var M=e.errorPath;r+="var missing"+c+";";for(var I in R)if(j=R[I],j.length){if(r+=" if ( "+g+e.util.getProperty(I)+" !== undefined ",q&&(r+=" && Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(I)+"') "),m){r+=" && ( ";var H=j;if(H)for(var W,B=-1,J=H.length-1;B<J;){W=H[B+=1],B&&(r+=" || ");var te=e.util.getProperty(W),ie=g+te;r+=" ( ( "+ie+" === undefined ",q&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(W)+"') "),r+=") && (missing"+c+" = "+e.util.toQuotedString(e.opts.jsonPointers?W:te)+") ) "}r+=")) {  ";var G="missing"+c,Q="' + "+G+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(M,G,!0):M+" + "+G);var se=se||[];se.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { property: '"+e.util.escapeQuotes(I)+"', missingProperty: '"+Q+"', depsCount: "+j.length+", deps: '"+e.util.escapeQuotes(j.length==1?j[0]:j.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",j.length==1?r+="property "+e.util.escapeQuotes(j[0]):r+="properties "+e.util.escapeQuotes(j.join(", ")),r+=" when property "+e.util.escapeQuotes(I)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var Ue=r;r=se.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+Ue+"]); ":r+=" validate.errors = ["+Ue+"]; return false; ":r+=" var err = "+Ue+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var ge=j;if(ge)for(var W,_e=-1,Ee=ge.length-1;_e<Ee;){W=ge[_e+=1];var te=e.util.getProperty(W),Q=e.util.escapeQuotes(W),ie=g+te;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(M,W,e.opts.jsonPointers)),r+=" if ( "+ie+" === undefined ",q&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(W)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { property: '"+e.util.escapeQuotes(I)+"', missingProperty: '"+Q+"', depsCount: "+j.length+", deps: '"+e.util.escapeQuotes(j.length==1?j[0]:j.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",j.length==1?r+="property "+e.util.escapeQuotes(j[0]):r+="properties "+e.util.escapeQuotes(j.join(", ")),r+=" when property "+e.util.escapeQuotes(I)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",m&&(y+="}",r+=" else { ")}e.errorPath=M;var le=p.baseId;for(var I in b){var $=b[I];(e.opts.strictKeywords?typeof $=="object"&&Object.keys($).length>0||$===!1:e.util.schemaHasRules($,e.RULES.all))&&(r+=" "+E+" = true; if ( "+g+e.util.getProperty(I)+" !== undefined ",q&&(r+=" && Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(I)+"') "),r+=") { ",p.schema=$,p.schemaPath=d+e.util.getProperty(I),p.errSchemaPath=h+"/"+e.util.escapeFragment(I),r+="  "+e.validate(p)+" ",p.baseId=le,r+=" }  ",m&&(r+=" if ("+E+") { ",y+="}"))}return m&&(r+="   "+y+" if ("+v+" == errors) {"),r}});var xh=me((yP,wh)=>{"use strict";wh.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(l||""),v="valid"+c,p=e.opts.$data&&u&&u.$data,y;p?(r+=" var schema"+c+" = "+e.util.getData(u.$data,l,e.dataPathArr)+"; ",y="schema"+c):y=u;var E="i"+c,b="schema"+c;p||(r+=" var "+b+" = validate.schema"+d+";"),r+="var "+v+";",p&&(r+=" if (schema"+c+" === undefined) "+v+" = true; else if (!Array.isArray(schema"+c+")) "+v+" = false; else {"),r+=""+v+" = false;for (var "+E+"=0; "+E+"<"+b+".length; "+E+"++) if (equal("+g+", "+b+"["+E+"])) { "+v+" = true; break; }",p&&(r+="  }  "),r+=" if (!"+v+") {   ";var R=R||[];R.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { allowedValues: schema"+c+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var q=r;return r=R.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+q+"]); ":r+=" validate.errors = ["+q+"]; return false; ":r+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",m&&(r+=" else { "),r}});var Sh=me((bP,Eh)=>{"use strict";Eh.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(l||"");if(e.opts.format===!1)return m&&(r+=" if (true) { "),r;var v=e.opts.$data&&u&&u.$data,p;v?(r+=" var schema"+c+" = "+e.util.getData(u.$data,l,e.dataPathArr)+"; ",p="schema"+c):p=u;var y=e.opts.unknownFormats,E=Array.isArray(y);if(v){var b="format"+c,R="isObject"+c,q="formatType"+c;r+=" var "+b+" = formats["+p+"]; var "+R+" = typeof "+b+" == 'object' && !("+b+" instanceof RegExp) && "+b+".validate; var "+q+" = "+R+" && "+b+".type || 'string'; if ("+R+") { ",e.async&&(r+=" var async"+c+" = "+b+".async; "),r+=" "+b+" = "+b+".validate; } if (  ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'string') || "),r+=" (",y!="ignore"&&(r+=" ("+p+" && !"+b+" ",E&&(r+=" && self._opts.unknownFormats.indexOf("+p+") == -1 "),r+=") || "),r+=" ("+b+" && "+q+" == '"+s+"' && !(typeof "+b+" == 'function' ? ",e.async?r+=" (async"+c+" ? await "+b+"("+g+") : "+b+"("+g+")) ":r+=" "+b+"("+g+") ",r+=" : "+b+".test("+g+"))))) {"}else{var b=e.formats[u];if(!b){if(y=="ignore")return e.logger.warn('unknown format "'+u+'" ignored in schema at path "'+e.errSchemaPath+'"'),m&&(r+=" if (true) { "),r;if(E&&y.indexOf(u)>=0)return m&&(r+=" if (true) { "),r;throw new Error('unknown format "'+u+'" is used in schema at path "'+e.errSchemaPath+'"')}var R=typeof b=="object"&&!(b instanceof RegExp)&&b.validate,q=R&&b.type||"string";if(R){var $=b.async===!0;b=b.validate}if(q!=s)return m&&(r+=" if (true) { "),r;if($){if(!e.async)throw new Error("async format in sync schema");var j="formats"+e.util.getProperty(u)+".validate";r+=" if (!(await "+j+"("+g+"))) { "}else{r+=" if (! ";var j="formats"+e.util.getProperty(u);R&&(j+=".validate"),typeof b=="function"?r+=" "+j+"("+g+") ":r+=" "+j+".test("+g+") ",r+=") { "}}var M=M||[];M.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { format:  ",v?r+=""+p:r+=""+e.util.toQuotedString(u),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match format "`,v?r+="' + "+p+" + '":r+=""+e.util.escapeQuotes(u),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+d:r+=""+e.util.toQuotedString(u),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var I=r;return r=M.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+I+"]); ":r+=" validate.errors = ["+I+"]; return false; ":r+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",m&&(r+=" else { "),r}});var Rh=me((wP,Ph)=>{"use strict";Ph.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(l||""),v="valid"+c,p="errs__"+c,y=e.util.copy(e);y.level++;var E="valid"+y.level,b=e.schema.then,R=e.schema.else,q=b!==void 0&&(e.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:e.util.schemaHasRules(b,e.RULES.all)),$=R!==void 0&&(e.opts.strictKeywords?typeof R=="object"&&Object.keys(R).length>0||R===!1:e.util.schemaHasRules(R,e.RULES.all)),j=y.baseId;if(q||$){var M;y.createErrors=!1,y.schema=u,y.schemaPath=d,y.errSchemaPath=h,r+=" var "+p+" = errors; var "+v+" = true;  ";var I=e.compositeRule;e.compositeRule=y.compositeRule=!0,r+="  "+e.validate(y)+" ",y.baseId=j,y.createErrors=!0,r+="  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; }  ",e.compositeRule=y.compositeRule=I,q?(r+=" if ("+E+") {  ",y.schema=e.schema.then,y.schemaPath=e.schemaPath+".then",y.errSchemaPath=e.errSchemaPath+"/then",r+="  "+e.validate(y)+" ",y.baseId=j,r+=" "+v+" = "+E+"; ",q&&$?(M="ifClause"+c,r+=" var "+M+" = 'then'; "):M="'then'",r+=" } ",$&&(r+=" else { ")):r+=" if (!"+E+") { ",$&&(y.schema=e.schema.else,y.schemaPath=e.schemaPath+".else",y.errSchemaPath=e.errSchemaPath+"/else",r+="  "+e.validate(y)+" ",y.baseId=j,r+=" "+v+" = "+E+"; ",q&&$?(M="ifClause"+c,r+=" var "+M+" = 'else'; "):M="'else'",r+=" } "),r+=" if (!"+v+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { failingKeyword: "+M+" } ",e.opts.messages!==!1&&(r+=` , message: 'should match "' + `+M+` + '" schema' `),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",m&&(r+=" else { ")}else m&&(r+=" if (true) { ");return r}});var kh=me((xP,Ah)=>{"use strict";Ah.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(l||""),v="valid"+c,p="errs__"+c,y=e.util.copy(e),E="";y.level++;var b="valid"+y.level,R="i"+c,q=y.dataLevel=e.dataLevel+1,$="data"+q,j=e.baseId;if(r+="var "+p+" = errors;var "+v+";",Array.isArray(u)){var M=e.schema.additionalItems;if(M===!1){r+=" "+v+" = "+g+".length <= "+u.length+"; ";var I=h;h=e.errSchemaPath+"/additionalItems",r+="  if (!"+v+") {   ";var H=H||[];H.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+u.length+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have more than "+u.length+" items' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var W=r;r=H.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+W+"]); ":r+=" validate.errors = ["+W+"]; return false; ":r+=" var err = "+W+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h=I,m&&(E+="}",r+=" else { ")}var B=u;if(B){for(var J,te=-1,ie=B.length-1;te<ie;)if(J=B[te+=1],e.opts.strictKeywords?typeof J=="object"&&Object.keys(J).length>0||J===!1:e.util.schemaHasRules(J,e.RULES.all)){r+=" "+b+" = true; if ("+g+".length > "+te+") { ";var G=g+"["+te+"]";y.schema=J,y.schemaPath=d+"["+te+"]",y.errSchemaPath=h+"/"+te,y.errorPath=e.util.getPathExpr(e.errorPath,te,e.opts.jsonPointers,!0),y.dataPathArr[q]=te;var Q=e.validate(y);y.baseId=j,e.util.varOccurences(Q,$)<2?r+=" "+e.util.varReplace(Q,$,G)+" ":r+=" var "+$+" = "+G+"; "+Q+" ",r+=" }  ",m&&(r+=" if ("+b+") { ",E+="}")}}if(typeof M=="object"&&(e.opts.strictKeywords?typeof M=="object"&&Object.keys(M).length>0||M===!1:e.util.schemaHasRules(M,e.RULES.all))){y.schema=M,y.schemaPath=e.schemaPath+".additionalItems",y.errSchemaPath=e.errSchemaPath+"/additionalItems",r+=" "+b+" = true; if ("+g+".length > "+u.length+") {  for (var "+R+" = "+u.length+"; "+R+" < "+g+".length; "+R+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,R,e.opts.jsonPointers,!0);var G=g+"["+R+"]";y.dataPathArr[q]=R;var Q=e.validate(y);y.baseId=j,e.util.varOccurences(Q,$)<2?r+=" "+e.util.varReplace(Q,$,G)+" ":r+=" var "+$+" = "+G+"; "+Q+" ",m&&(r+=" if (!"+b+") break; "),r+=" } }  ",m&&(r+=" if ("+b+") { ",E+="}")}}else if(e.opts.strictKeywords?typeof u=="object"&&Object.keys(u).length>0||u===!1:e.util.schemaHasRules(u,e.RULES.all)){y.schema=u,y.schemaPath=d,y.errSchemaPath=h,r+="  for (var "+R+" = 0; "+R+" < "+g+".length; "+R+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,R,e.opts.jsonPointers,!0);var G=g+"["+R+"]";y.dataPathArr[q]=R;var Q=e.validate(y);y.baseId=j,e.util.varOccurences(Q,$)<2?r+=" "+e.util.varReplace(Q,$,G)+" ":r+=" var "+$+" = "+G+"; "+Q+" ",m&&(r+=" if (!"+b+") break; "),r+=" }"}return m&&(r+=" "+E+" if ("+p+" == errors) {"),r}});var cl=me((EP,Th)=>{"use strict";Th.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,j,g="data"+(l||""),v=e.opts.$data&&u&&u.$data,p;v?(r+=" var schema"+c+" = "+e.util.getData(u.$data,l,e.dataPathArr)+"; ",p="schema"+c):p=u;var y=t=="maximum",E=y?"exclusiveMaximum":"exclusiveMinimum",b=e.schema[E],R=e.opts.$data&&b&&b.$data,q=y?"<":">",$=y?">":"<",j=void 0;if(!(v||typeof u=="number"||u===void 0))throw new Error(t+" must be number");if(!(R||b===void 0||typeof b=="number"||typeof b=="boolean"))throw new Error(E+" must be number or boolean");if(R){var M=e.util.getData(b.$data,l,e.dataPathArr),I="exclusive"+c,H="exclType"+c,W="exclIsNumber"+c,B="op"+c,J="' + "+B+" + '";r+=" var schemaExcl"+c+" = "+M+"; ",M="schemaExcl"+c,r+=" var "+I+"; var "+H+" = typeof "+M+"; if ("+H+" != 'boolean' && "+H+" != 'undefined' && "+H+" != 'number') { ";var j=E,te=te||[];te.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(j||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: '"+E+" should be boolean' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var ie=r;r=te.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+ie+"]); ":r+=" validate.errors = ["+ie+"]; return false; ":r+=" var err = "+ie+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" "+H+" == 'number' ? ( ("+I+" = "+p+" === undefined || "+M+" "+q+"= "+p+") ? "+g+" "+$+"= "+M+" : "+g+" "+$+" "+p+" ) : ( ("+I+" = "+M+" === true) ? "+g+" "+$+"= "+p+" : "+g+" "+$+" "+p+" ) || "+g+" !== "+g+") { var op"+c+" = "+I+" ? '"+q+"' : '"+q+"='; ",u===void 0&&(j=E,h=e.errSchemaPath+"/"+E,p=M,v=R)}else{var W=typeof b=="number",J=q;if(W&&v){var B="'"+J+"'";r+=" if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" ( "+p+" === undefined || "+b+" "+q+"= "+p+" ? "+g+" "+$+"= "+b+" : "+g+" "+$+" "+p+" ) || "+g+" !== "+g+") { "}else{W&&u===void 0?(I=!0,j=E,h=e.errSchemaPath+"/"+E,p=b,$+="="):(W&&(p=Math[y?"min":"max"](b,u)),b===(W?p:!0)?(I=!0,j=E,h=e.errSchemaPath+"/"+E,$+="="):(I=!1,J+="="));var B="'"+J+"'";r+=" if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" "+g+" "+$+" "+p+" || "+g+" !== "+g+") { "}}j=j||t;var te=te||[];te.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(j||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { comparison: "+B+", limit: "+p+", exclusive: "+I+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be "+J+" ",v?r+="' + "+p:r+=""+p+"'"),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+d:r+=""+u,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var ie=r;return r=te.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+ie+"]); ":r+=" validate.errors = ["+ie+"]; return false; ":r+=" var err = "+ie+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",m&&(r+=" else { "),r}});var ll=me((SP,Ch)=>{"use strict";Ch.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,E,g="data"+(l||""),v=e.opts.$data&&u&&u.$data,p;if(v?(r+=" var schema"+c+" = "+e.util.getData(u.$data,l,e.dataPathArr)+"; ",p="schema"+c):p=u,!(v||typeof u=="number"))throw new Error(t+" must be number");var y=t=="maxItems"?">":"<";r+="if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" "+g+".length "+y+" "+p+") { ";var E=t,b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(E||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+p+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxItems"?r+="more":r+="fewer",r+=" than ",v?r+="' + "+p+" + '":r+=""+u,r+=" items' "),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+d:r+=""+u,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var R=r;return r=b.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",m&&(r+=" else { "),r}});var ul=me((PP,Dh)=>{"use strict";Dh.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,E,g="data"+(l||""),v=e.opts.$data&&u&&u.$data,p;if(v?(r+=" var schema"+c+" = "+e.util.getData(u.$data,l,e.dataPathArr)+"; ",p="schema"+c):p=u,!(v||typeof u=="number"))throw new Error(t+" must be number");var y=t=="maxLength"?">":"<";r+="if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),e.opts.unicode===!1?r+=" "+g+".length ":r+=" ucs2length("+g+") ",r+=" "+y+" "+p+") { ";var E=t,b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(E||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+p+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be ",t=="maxLength"?r+="longer":r+="shorter",r+=" than ",v?r+="' + "+p+" + '":r+=""+u,r+=" characters' "),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+d:r+=""+u,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var R=r;return r=b.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",m&&(r+=" else { "),r}});var dl=me((RP,Oh)=>{"use strict";Oh.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,E,g="data"+(l||""),v=e.opts.$data&&u&&u.$data,p;if(v?(r+=" var schema"+c+" = "+e.util.getData(u.$data,l,e.dataPathArr)+"; ",p="schema"+c):p=u,!(v||typeof u=="number"))throw new Error(t+" must be number");var y=t=="maxProperties"?">":"<";r+="if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" Object.keys("+g+").length "+y+" "+p+") { ";var E=t,b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(E||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+p+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxProperties"?r+="more":r+="fewer",r+=" than ",v?r+="' + "+p+" + '":r+=""+u,r+=" properties' "),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+d:r+=""+u,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var R=r;return r=b.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",m&&(r+=" else { "),r}});var Ih=me((AP,$h)=>{"use strict";$h.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(l||""),v=e.opts.$data&&u&&u.$data,p;if(v?(r+=" var schema"+c+" = "+e.util.getData(u.$data,l,e.dataPathArr)+"; ",p="schema"+c):p=u,!(v||typeof u=="number"))throw new Error(t+" must be number");r+="var division"+c+";if (",v&&(r+=" "+p+" !== undefined && ( typeof "+p+" != 'number' || "),r+=" (division"+c+" = "+g+" / "+p+", ",e.opts.multipleOfPrecision?r+=" Math.abs(Math.round(division"+c+") - division"+c+") > 1e-"+e.opts.multipleOfPrecision+" ":r+=" division"+c+" !== parseInt(division"+c+") ",r+=" ) ",v&&(r+="  )  "),r+=" ) {   ";var y=y||[];y.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { multipleOf: "+p+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be multiple of ",v?r+="' + "+p:r+=""+p+"'"),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+d:r+=""+u,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var E=r;return r=y.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+E+"]); ":r+=" validate.errors = ["+E+"]; return false; ":r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",m&&(r+=" else { "),r}});var Lh=me((kP,Mh)=>{"use strict";Mh.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(l||""),v="errs__"+c,p=e.util.copy(e);p.level++;var y="valid"+p.level;if(e.opts.strictKeywords?typeof u=="object"&&Object.keys(u).length>0||u===!1:e.util.schemaHasRules(u,e.RULES.all)){p.schema=u,p.schemaPath=d,p.errSchemaPath=h,r+=" var "+v+" = errors;  ";var E=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.createErrors=!1;var b;p.opts.allErrors&&(b=p.opts.allErrors,p.opts.allErrors=!1),r+=" "+e.validate(p)+" ",p.createErrors=!0,b&&(p.opts.allErrors=b),e.compositeRule=p.compositeRule=E,r+=" if ("+y+") {   ";var R=R||[];R.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var q=r;r=R.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+q+"]); ":r+=" validate.errors = ["+q+"]; return false; ":r+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+v+"; if (vErrors !== null) { if ("+v+") vErrors.length = "+v+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",m&&(r+=" if (false) { ");return r}});var Nh=me((TP,Fh)=>{"use strict";Fh.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(l||""),v="valid"+c,p="errs__"+c,y=e.util.copy(e),E="";y.level++;var b="valid"+y.level,R=y.baseId,q="prevValid"+c,$="passingSchemas"+c;r+="var "+p+" = errors , "+q+" = false , "+v+" = false , "+$+" = null; ";var j=e.compositeRule;e.compositeRule=y.compositeRule=!0;var M=u;if(M)for(var I,H=-1,W=M.length-1;H<W;)I=M[H+=1],(e.opts.strictKeywords?typeof I=="object"&&Object.keys(I).length>0||I===!1:e.util.schemaHasRules(I,e.RULES.all))?(y.schema=I,y.schemaPath=d+"["+H+"]",y.errSchemaPath=h+"/"+H,r+="  "+e.validate(y)+" ",y.baseId=R):r+=" var "+b+" = true; ",H&&(r+=" if ("+b+" && "+q+") { "+v+" = false; "+$+" = ["+$+", "+H+"]; } else { ",E+="}"),r+=" if ("+b+") { "+v+" = "+q+" = true; "+$+" = "+H+"; }";return e.compositeRule=y.compositeRule=j,r+=""+E+"if (!"+v+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { passingSchemas: "+$+" } ",e.opts.messages!==!1&&(r+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; }",e.opts.allErrors&&(r+=" } "),r}});var zh=me((CP,jh)=>{"use strict";jh.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(l||""),v=e.opts.$data&&u&&u.$data,p;v?(r+=" var schema"+c+" = "+e.util.getData(u.$data,l,e.dataPathArr)+"; ",p="schema"+c):p=u;var y=v?"(new RegExp("+p+"))":e.usePattern(u);r+="if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'string') || "),r+=" !"+y+".test("+g+") ) {   ";var E=E||[];E.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { pattern:  ",v?r+=""+p:r+=""+e.util.toQuotedString(u),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match pattern "`,v?r+="' + "+p+" + '":r+=""+e.util.escapeQuotes(u),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+d:r+=""+e.util.toQuotedString(u),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var b=r;return r=E.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",m&&(r+=" else { "),r}});var Uh=me((DP,qh)=>{"use strict";qh.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(l||""),v="errs__"+c,p=e.util.copy(e),y="";p.level++;var E="valid"+p.level,b="key"+c,R="idx"+c,q=p.dataLevel=e.dataLevel+1,$="data"+q,j="dataProperties"+c,M=Object.keys(u||{}).filter(_e),I=e.schema.patternProperties||{},H=Object.keys(I).filter(_e),W=e.schema.additionalProperties,B=M.length||H.length,J=W===!1,te=typeof W=="object"&&Object.keys(W).length,ie=e.opts.removeAdditional,G=J||te||ie,Q=e.opts.ownProperties,se=e.baseId,Ue=e.schema.required;if(Ue&&!(e.opts.$data&&Ue.$data)&&Ue.length<e.opts.loopRequired)var ge=e.util.toHash(Ue);function _e(Ct){return Ct!=="__proto__"}if(r+="var "+v+" = errors;var "+E+" = true;",Q&&(r+=" var "+j+" = undefined;"),G){if(Q?r+=" "+j+" = "+j+" || Object.keys("+g+"); for (var "+R+"=0; "+R+"<"+j+".length; "+R+"++) { var "+b+" = "+j+"["+R+"]; ":r+=" for (var "+b+" in "+g+") { ",B){if(r+=" var isAdditional"+c+" = !(false ",M.length)if(M.length>8)r+=" || validate.schema"+d+".hasOwnProperty("+b+") ";else{var Ee=M;if(Ee)for(var le,Ne=-1,xt=Ee.length-1;Ne<xt;)le=Ee[Ne+=1],r+=" || "+b+" == "+e.util.toQuotedString(le)+" "}if(H.length){var At=H;if(At)for(var Le,Ke=-1,ct=At.length-1;Ke<ct;)Le=At[Ke+=1],r+=" || "+e.usePattern(Le)+".test("+b+") "}r+=" ); if (isAdditional"+c+") { "}if(ie=="all")r+=" delete "+g+"["+b+"]; ";else{var kt=e.errorPath,Bt="' + "+b+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers)),J)if(ie)r+=" delete "+g+"["+b+"]; ";else{r+=" "+E+" = false; ";var Mt=h;h=e.errSchemaPath+"/additionalProperties";var dt=dt||[];dt.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { additionalProperty: '"+Bt+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var Ye=r;r=dt.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+Ye+"]); ":r+=" validate.errors = ["+Ye+"]; return false; ":r+=" var err = "+Ye+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h=Mt,m&&(r+=" break; ")}else if(te)if(ie=="failing"){r+=" var "+v+" = errors;  ";var ur=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=W,p.schemaPath=e.schemaPath+".additionalProperties",p.errSchemaPath=e.errSchemaPath+"/additionalProperties",p.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers);var _t=g+"["+b+"]";p.dataPathArr[q]=b;var ye=e.validate(p);p.baseId=se,e.util.varOccurences(ye,$)<2?r+=" "+e.util.varReplace(ye,$,_t)+" ":r+=" var "+$+" = "+_t+"; "+ye+" ",r+=" if (!"+E+") { errors = "+v+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+g+"["+b+"]; }  ",e.compositeRule=p.compositeRule=ur}else{p.schema=W,p.schemaPath=e.schemaPath+".additionalProperties",p.errSchemaPath=e.errSchemaPath+"/additionalProperties",p.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers);var _t=g+"["+b+"]";p.dataPathArr[q]=b;var ye=e.validate(p);p.baseId=se,e.util.varOccurences(ye,$)<2?r+=" "+e.util.varReplace(ye,$,_t)+" ":r+=" var "+$+" = "+_t+"; "+ye+" ",m&&(r+=" if (!"+E+") break; ")}e.errorPath=kt}B&&(r+=" } "),r+=" }  ",m&&(r+=" if ("+E+") { ",y+="}")}var Vt=e.opts.useDefaults&&!e.compositeRule;if(M.length){var Er=M;if(Er)for(var le,Tt=-1,Lr=Er.length-1;Tt<Lr;){le=Er[Tt+=1];var yt=u[le];if(e.opts.strictKeywords?typeof yt=="object"&&Object.keys(yt).length>0||yt===!1:e.util.schemaHasRules(yt,e.RULES.all)){var Et=e.util.getProperty(le),_t=g+Et,Je=Vt&&yt.default!==void 0;p.schema=yt,p.schemaPath=d+Et,p.errSchemaPath=h+"/"+e.util.escapeFragment(le),p.errorPath=e.util.getPath(e.errorPath,le,e.opts.jsonPointers),p.dataPathArr[q]=e.util.toQuotedString(le);var ye=e.validate(p);if(p.baseId=se,e.util.varOccurences(ye,$)<2){ye=e.util.varReplace(ye,$,_t);var mt=_t}else{var mt=$;r+=" var "+$+" = "+_t+"; "}if(Je)r+=" "+ye+" ";else{if(ge&&ge[le]){r+=" if ( "+mt+" === undefined ",Q&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(le)+"') "),r+=") { "+E+" = false; ";var kt=e.errorPath,Mt=h,Lt=e.util.escapeQuotes(le);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(kt,le,e.opts.jsonPointers)),h=e.errSchemaPath+"/required";var dt=dt||[];dt.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+Lt+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+Lt+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var Ye=r;r=dt.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+Ye+"]); ":r+=" validate.errors = ["+Ye+"]; return false; ":r+=" var err = "+Ye+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h=Mt,e.errorPath=kt,r+=" } else { "}else m?(r+=" if ( "+mt+" === undefined ",Q&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(le)+"') "),r+=") { "+E+" = true; } else { "):(r+=" if ("+mt+" !== undefined ",Q&&(r+=" &&   Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(le)+"') "),r+=" ) { ");r+=" "+ye+" } "}}m&&(r+=" if ("+E+") { ",y+="}")}}if(H.length){var Ft=H;if(Ft)for(var Le,Fr=-1,Pa=Ft.length-1;Fr<Pa;){Le=Ft[Fr+=1];var yt=I[Le];if(e.opts.strictKeywords?typeof yt=="object"&&Object.keys(yt).length>0||yt===!1:e.util.schemaHasRules(yt,e.RULES.all)){p.schema=yt,p.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(Le),p.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(Le),Q?r+=" "+j+" = "+j+" || Object.keys("+g+"); for (var "+R+"=0; "+R+"<"+j+".length; "+R+"++) { var "+b+" = "+j+"["+R+"]; ":r+=" for (var "+b+" in "+g+") { ",r+=" if ("+e.usePattern(Le)+".test("+b+")) { ",p.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers);var _t=g+"["+b+"]";p.dataPathArr[q]=b;var ye=e.validate(p);p.baseId=se,e.util.varOccurences(ye,$)<2?r+=" "+e.util.varReplace(ye,$,_t)+" ":r+=" var "+$+" = "+_t+"; "+ye+" ",m&&(r+=" if (!"+E+") break; "),r+=" } ",m&&(r+=" else "+E+" = true; "),r+=" }  ",m&&(r+=" if ("+E+") { ",y+="}")}}}return m&&(r+=" "+y+" if ("+v+" == errors) {"),r}});var Zh=me((OP,Hh)=>{"use strict";Hh.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(l||""),v="errs__"+c,p=e.util.copy(e),y="";p.level++;var E="valid"+p.level;if(r+="var "+v+" = errors;",e.opts.strictKeywords?typeof u=="object"&&Object.keys(u).length>0||u===!1:e.util.schemaHasRules(u,e.RULES.all)){p.schema=u,p.schemaPath=d,p.errSchemaPath=h;var b="key"+c,R="idx"+c,q="i"+c,$="' + "+b+" + '",j=p.dataLevel=e.dataLevel+1,M="data"+j,I="dataProperties"+c,H=e.opts.ownProperties,W=e.baseId;H&&(r+=" var "+I+" = undefined; "),H?r+=" "+I+" = "+I+" || Object.keys("+g+"); for (var "+R+"=0; "+R+"<"+I+".length; "+R+"++) { var "+b+" = "+I+"["+R+"]; ":r+=" for (var "+b+" in "+g+") { ",r+=" var startErrs"+c+" = errors; ";var B=b,J=e.compositeRule;e.compositeRule=p.compositeRule=!0;var te=e.validate(p);p.baseId=W,e.util.varOccurences(te,M)<2?r+=" "+e.util.varReplace(te,M,B)+" ":r+=" var "+M+" = "+B+"; "+te+" ",e.compositeRule=p.compositeRule=J,r+=" if (!"+E+") { for (var "+q+"=startErrs"+c+"; "+q+"<errors; "+q+"++) { vErrors["+q+"].propertyName = "+b+"; }   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { propertyName: '"+$+"' } ",e.opts.messages!==!1&&(r+=" , message: 'property name \\'"+$+"\\' is invalid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),m&&(r+=" break; "),r+=" } }"}return m&&(r+=" "+y+" if ("+v+" == errors) {"),r}});var Vh=me(($P,Bh)=>{"use strict";Bh.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(l||""),v="valid"+c,p=e.opts.$data&&u&&u.$data,y;p?(r+=" var schema"+c+" = "+e.util.getData(u.$data,l,e.dataPathArr)+"; ",y="schema"+c):y=u;var E="schema"+c;if(!p)if(u.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var b=[],R=u;if(R)for(var q,$=-1,j=R.length-1;$<j;){q=R[$+=1];var M=e.schema.properties[q];M&&(e.opts.strictKeywords?typeof M=="object"&&Object.keys(M).length>0||M===!1:e.util.schemaHasRules(M,e.RULES.all))||(b[b.length]=q)}}else var b=u;if(p||b.length){var I=e.errorPath,H=p||b.length>=e.opts.loopRequired,W=e.opts.ownProperties;if(m)if(r+=" var missing"+c+"; ",H){p||(r+=" var "+E+" = validate.schema"+d+"; ");var B="i"+c,J="schema"+c+"["+B+"]",te="' + "+J+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(I,J,e.opts.jsonPointers)),r+=" var "+v+" = true; ",p&&(r+=" if (schema"+c+" === undefined) "+v+" = true; else if (!Array.isArray(schema"+c+")) "+v+" = false; else {"),r+=" for (var "+B+" = 0; "+B+" < "+E+".length; "+B+"++) { "+v+" = "+g+"["+E+"["+B+"]] !== undefined ",W&&(r+=" &&   Object.prototype.hasOwnProperty.call("+g+", "+E+"["+B+"]) "),r+="; if (!"+v+") break; } ",p&&(r+="  }  "),r+="  if (!"+v+") {   ";var ie=ie||[];ie.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+te+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+te+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var G=r;r=ie.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+G+"]); ":r+=" validate.errors = ["+G+"]; return false; ":r+=" var err = "+G+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var Q=b;if(Q)for(var se,B=-1,Ue=Q.length-1;B<Ue;){se=Q[B+=1],B&&(r+=" || ");var ge=e.util.getProperty(se),_e=g+ge;r+=" ( ( "+_e+" === undefined ",W&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(se)+"') "),r+=") && (missing"+c+" = "+e.util.toQuotedString(e.opts.jsonPointers?se:ge)+") ) "}r+=") {  ";var J="missing"+c,te="' + "+J+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(I,J,!0):I+" + "+J);var ie=ie||[];ie.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+te+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+te+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var G=r;r=ie.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+G+"]); ":r+=" validate.errors = ["+G+"]; return false; ":r+=" var err = "+G+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(H){p||(r+=" var "+E+" = validate.schema"+d+"; ");var B="i"+c,J="schema"+c+"["+B+"]",te="' + "+J+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(I,J,e.opts.jsonPointers)),p&&(r+=" if ("+E+" && !Array.isArray("+E+")) {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+te+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+te+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+E+" !== undefined) { "),r+=" for (var "+B+" = 0; "+B+" < "+E+".length; "+B+"++) { if ("+g+"["+E+"["+B+"]] === undefined ",W&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", "+E+"["+B+"]) "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+te+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+te+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",p&&(r+="  }  ")}else{var Ee=b;if(Ee)for(var se,le=-1,Ne=Ee.length-1;le<Ne;){se=Ee[le+=1];var ge=e.util.getProperty(se),te=e.util.escapeQuotes(se),_e=g+ge;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(I,se,e.opts.jsonPointers)),r+=" if ( "+_e+" === undefined ",W&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(se)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+te+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+te+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=I}else m&&(r+=" if (true) {");return r}});var Gh=me((IP,Wh)=>{"use strict";Wh.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(l||""),v="valid"+c,p=e.opts.$data&&u&&u.$data,y;if(p?(r+=" var schema"+c+" = "+e.util.getData(u.$data,l,e.dataPathArr)+"; ",y="schema"+c):y=u,(u||p)&&e.opts.uniqueItems!==!1){p&&(r+=" var "+v+"; if ("+y+" === false || "+y+" === undefined) "+v+" = true; else if (typeof "+y+" != 'boolean') "+v+" = false; else { "),r+=" var i = "+g+".length , "+v+" = true , j; if (i > 1) { ";var E=e.schema.items&&e.schema.items.type,b=Array.isArray(E);if(!E||E=="object"||E=="array"||b&&(E.indexOf("object")>=0||E.indexOf("array")>=0))r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+g+"[i], "+g+"[j])) { "+v+" = false; break outer; } } } ";else{r+=" var itemIndices = {}, item; for (;i--;) { var item = "+g+"[i]; ";var R="checkDataType"+(b?"s":"");r+=" if ("+e.util[R](E,"item",e.opts.strictNumbers,!0)+") continue; ",b&&(r+=` if (typeof item == 'string') item = '"' + item; `),r+=" if (typeof itemIndices[item] == 'number') { "+v+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}r+=" } ",p&&(r+="  }  "),r+=" if (!"+v+") {   ";var q=q||[];q.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(r+=" , schema:  ",p?r+="validate.schema"+d:r+=""+u,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var $=r;r=q.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+$+"]); ":r+=" validate.errors = ["+$+"]; return false; ":r+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",m&&(r+=" else { ")}else m&&(r+=" if (true) { ");return r}});var Yh=me((MP,Kh)=>{"use strict";Kh.exports={$ref:ch(),allOf:uh(),anyOf:fh(),$comment:ph(),const:gh(),contains:_h(),dependencies:bh(),enum:xh(),format:Sh(),if:Rh(),items:kh(),maximum:cl(),minimum:cl(),maxItems:ll(),minItems:ll(),maxLength:ul(),minLength:ul(),maxProperties:dl(),minProperties:dl(),multipleOf:Ih(),not:Lh(),oneOf:Nh(),pattern:zh(),properties:Uh(),propertyNames:Zh(),required:Vh(),uniqueItems:Gh(),validate:sl()}});var Xh=me((LP,Jh)=>{"use strict";var Qh=Yh(),fl=Hn().toHash;Jh.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"],s=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],r=["number","integer","string","array","object","boolean","null"];return e.all=fl(t),e.types=fl(r),e.forEach(function(c){c.rules=c.rules.map(function(l){var u;if(typeof l=="object"){var d=Object.keys(l)[0];u=l[d],l=d,u.forEach(function(m){t.push(m),e.all[m]=!0})}t.push(l);var h=e.all[l]={keyword:l,code:Qh[l],implements:u};return h}),e.all.$comment={keyword:"$comment",code:Qh.$comment},c.type&&(e.types[c.type]=c)}),e.keywords=fl(t.concat(s)),e.custom={},e}});var rp=me((FP,tp)=>{"use strict";var ep=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];tp.exports=function(a,e){for(var t=0;t<e.length;t++){a=JSON.parse(JSON.stringify(a));var s=e[t].split("/"),r=a,c;for(c=1;c<s.length;c++)r=r[s[c]];for(c=0;c<ep.length;c++){var l=ep[c],u=r[l];u&&(r[l]={anyOf:[u,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return a}});var ip=me((NP,ap)=>{"use strict";var vx=ks().MissingRef;ap.exports=np;function np(a,e,t){var s=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(t=e,e=void 0);var r=c(a).then(function(){var u=s._addSchema(a,void 0,e);return u.validate||l(u)});return t&&r.then(function(u){t(null,u)},t),r;function c(u){var d=u.$schema;return d&&!s.getSchema(d)?np.call(s,{$ref:d},!0):Promise.resolve()}function l(u){try{return s._compile(u)}catch(h){if(h instanceof vx)return d(h);throw h}function d(h){var m=h.missingSchema;if(p(m))throw new Error("Schema "+m+" is loaded but "+h.missingRef+" cannot be resolved");var g=s._loadingSchemas[m];return g||(g=s._loadingSchemas[m]=s._opts.loadSchema(m),g.then(v,v)),g.then(function(y){if(!p(m))return c(y).then(function(){p(m)||s.addSchema(y,m,void 0,e)})}).then(function(){return l(u)});function v(){delete s._loadingSchemas[m]}function p(y){return s._refs[y]||s._schemas[y]}}}}});var op=me((jP,sp)=>{"use strict";sp.exports=function(e,t,s){var r=" ",c=e.level,l=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g,v="data"+(l||""),p="valid"+c,y="errs__"+c,E=e.opts.$data&&u&&u.$data,b;E?(r+=" var schema"+c+" = "+e.util.getData(u.$data,l,e.dataPathArr)+"; ",b="schema"+c):b=u;var R=this,q="definition"+c,$=R.definition,j="",M,I,H,W,B;if(E&&$.$data){B="keywordValidate"+c;var J=$.validateSchema;r+=" var "+q+" = RULES.custom['"+t+"'].definition; var "+B+" = "+q+".validate;"}else{if(W=e.useCustomRule(R,u,e.schema,e),!W)return;b="validate.schema"+d,B=W.code,M=$.compile,I=$.inline,H=$.macro}var te=B+".errors",ie="i"+c,G="ruleErr"+c,Q=$.async;if(Q&&!e.async)throw new Error("async keyword in sync schema");if(I||H||(r+=""+te+" = null;"),r+="var "+y+" = errors;var "+p+";",E&&$.$data&&(j+="}",r+=" if ("+b+" === undefined) { "+p+" = true; } else { ",J&&(j+="}",r+=" "+p+" = "+q+".validateSchema("+b+"); if ("+p+") { ")),I)$.statements?r+=" "+W.validate+" ":r+=" "+p+" = "+W.validate+"; ";else if(H){var se=e.util.copy(e),j="";se.level++;var Ue="valid"+se.level;se.schema=W.validate,se.schemaPath="";var ge=e.compositeRule;e.compositeRule=se.compositeRule=!0;var _e=e.validate(se).replace(/validate\.schema/g,B);e.compositeRule=se.compositeRule=ge,r+=" "+_e}else{var Ee=Ee||[];Ee.push(r),r="",r+="  "+B+".call( ",e.opts.passContext?r+="this":r+="self",M||$.schema===!1?r+=" , "+v+" ":r+=" , "+b+" , "+v+" , validate.schema"+e.schemaPath+" ",r+=" , (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var le=l?"data"+(l-1||""):"parentData",Ne=l?e.dataPathArr[l]:"parentDataProperty";r+=" , "+le+" , "+Ne+" , rootData )  ";var xt=r;r=Ee.pop(),$.errors===!1?(r+=" "+p+" = ",Q&&(r+="await "),r+=""+xt+"; "):Q?(te="customErrors"+c,r+=" var "+te+" = null; try { "+p+" = await "+xt+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+te+" = e.errors; else throw e; } "):r+=" "+te+" = null; "+p+" = "+xt+"; "}if($.modifying&&(r+=" if ("+le+") "+v+" = "+le+"["+Ne+"];"),r+=""+j,$.valid)m&&(r+=" if (true) { ");else{r+=" if ( ",$.valid===void 0?(r+=" !",H?r+=""+Ue:r+=""+p):r+=" "+!$.valid+" ",r+=") { ",g=R.keyword;var Ee=Ee||[];Ee.push(r),r="";var Ee=Ee||[];Ee.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(g||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { keyword: '"+R.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+R.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),r+=" } "):r+=" {} ";var At=r;r=Ee.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+At+"]); ":r+=" validate.errors = ["+At+"]; return false; ":r+=" var err = "+At+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var Le=r;r=Ee.pop(),I?$.errors?$.errors!="full"&&(r+="  for (var "+ie+"="+y+"; "+ie+"<errors; "+ie+"++) { var "+G+" = vErrors["+ie+"]; if ("+G+".dataPath === undefined) "+G+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+G+".schemaPath === undefined) { "+G+'.schemaPath = "'+h+'"; } ',e.opts.verbose&&(r+=" "+G+".schema = "+b+"; "+G+".data = "+v+"; "),r+=" } "):$.errors===!1?r+=" "+Le+" ":(r+=" if ("+y+" == errors) { "+Le+" } else {  for (var "+ie+"="+y+"; "+ie+"<errors; "+ie+"++) { var "+G+" = vErrors["+ie+"]; if ("+G+".dataPath === undefined) "+G+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+G+".schemaPath === undefined) { "+G+'.schemaPath = "'+h+'"; } ',e.opts.verbose&&(r+=" "+G+".schema = "+b+"; "+G+".data = "+v+"; "),r+=" } } "):H?(r+="   var err =   ",e.createErrors!==!1?(r+=" { keyword: '"+(g||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { keyword: '"+R.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+R.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; ")):$.errors===!1?r+=" "+Le+" ":(r+=" if (Array.isArray("+te+")) { if (vErrors === null) vErrors = "+te+"; else vErrors = vErrors.concat("+te+"); errors = vErrors.length;  for (var "+ie+"="+y+"; "+ie+"<errors; "+ie+"++) { var "+G+" = vErrors["+ie+"]; if ("+G+".dataPath === undefined) "+G+".dataPath = (dataPath || '') + "+e.errorPath+";  "+G+'.schemaPath = "'+h+'";  ',e.opts.verbose&&(r+=" "+G+".schema = "+b+"; "+G+".data = "+v+"; "),r+=" } } else { "+Le+" } "),r+=" } ",m&&(r+=" else { ")}return r}});var hl=me((zP,_x)=>{_x.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var up=me((qP,lp)=>{"use strict";var cp=hl();lp.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:cp.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:cp.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var fp=me((UP,dp)=>{"use strict";var yx=/^[a-z_$][a-z0-9_$-]*$/i,bx=op(),wx=up();dp.exports={add:xx,get:Ex,remove:Sx,validate:pl};function xx(a,e){var t=this.RULES;if(t.keywords[a])throw new Error("Keyword "+a+" is already defined");if(!yx.test(a))throw new Error("Keyword "+a+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var s=e.type;if(Array.isArray(s))for(var r=0;r<s.length;r++)l(a,s[r],e);else l(a,s,e);var c=e.metaSchema;c&&(e.$data&&this._opts.$data&&(c={anyOf:[c,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(c,!0))}t.keywords[a]=t.all[a]=!0;function l(u,d,h){for(var m,g=0;g<t.length;g++){var v=t[g];if(v.type==d){m=v;break}}m||(m={type:d,rules:[]},t.push(m));var p={keyword:u,definition:h,custom:!0,code:bx,implements:h.implements};m.rules.push(p),t.custom[u]=p}return this}function Ex(a){var e=this.RULES.custom[a];return e?e.definition:this.RULES.keywords[a]||!1}function Sx(a){var e=this.RULES;delete e.keywords[a],delete e.all[a],delete e.custom[a];for(var t=0;t<e.length;t++)for(var s=e[t].rules,r=0;r<s.length;r++)if(s[r].keyword==a){s.splice(r,1);break}return this}function pl(a,e){pl.errors=null;var t=this._validateKeyword=this._validateKeyword||this.compile(wx,!0);if(t(a))return!0;if(pl.errors=t.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(t.errors));return!1}});var hp=me((HP,Px)=>{Px.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Ep=me((ZP,xp)=>{"use strict";var mp=Vf(),Zn=As(),Rx=Gf(),gp=Xc(),Ax=il(),kx=sh(),Tx=Xh(),vp=rp(),_p=Hn();xp.exports=pt;pt.prototype.validate=Dx;pt.prototype.compile=Ox;pt.prototype.addSchema=$x;pt.prototype.addMetaSchema=Ix;pt.prototype.validateSchema=Mx;pt.prototype.getSchema=Fx;pt.prototype.removeSchema=jx;pt.prototype.addFormat=Wx;pt.prototype.errorsText=Vx;pt.prototype._addSchema=zx;pt.prototype._compile=qx;pt.prototype.compileAsync=ip();var Ls=fp();pt.prototype.addKeyword=Ls.add;pt.prototype.getKeyword=Ls.get;pt.prototype.removeKeyword=Ls.remove;pt.prototype.validateKeyword=Ls.validate;var yp=ks();pt.ValidationError=yp.Validation;pt.MissingRefError=yp.MissingRef;pt.$dataMetaSchema=vp;var Ms="http://json-schema.org/draft-07/schema",pp=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],Cx=["/properties"];function pt(a){if(!(this instanceof pt))return new pt(a);a=this._opts=_p.copy(a)||{},Xx(this),this._schemas={},this._refs={},this._fragments={},this._formats=kx(a.format),this._cache=a.cache||new Rx,this._loadingSchemas={},this._compilations=[],this.RULES=Tx(),this._getId=Ux(a),a.loopRequired=a.loopRequired||1/0,a.errorDataPath=="property"&&(a._errorDataPathProperty=!0),a.serialize===void 0&&(a.serialize=Ax),this._metaOpts=Jx(this),a.formats&&Yx(this),a.keywords&&Qx(this),Gx(this),typeof a.meta=="object"&&this.addMetaSchema(a.meta),a.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),Kx(this)}function Dx(a,e){var t;if(typeof a=="string"){if(t=this.getSchema(a),!t)throw new Error('no schema with key or ref "'+a+'"')}else{var s=this._addSchema(a);t=s.validate||this._compile(s)}var r=t(e);return t.$async!==!0&&(this.errors=t.errors),r}function Ox(a,e){var t=this._addSchema(a,void 0,e);return t.validate||this._compile(t)}function $x(a,e,t,s){if(Array.isArray(a)){for(var r=0;r<a.length;r++)this.addSchema(a[r],void 0,t,s);return this}var c=this._getId(a);if(c!==void 0&&typeof c!="string")throw new Error("schema id must be string");return e=Zn.normalizeId(e||c),wp(this,e),this._schemas[e]=this._addSchema(a,t,s,!0),this}function Ix(a,e,t){return this.addSchema(a,e,t,!0),this}function Mx(a,e){var t=a.$schema;if(t!==void 0&&typeof t!="string")throw new Error("$schema must be a string");if(t=t||this._opts.defaultMeta||Lx(this),!t)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var s=this.validate(t,a);if(!s&&e){var r="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(r);else throw new Error(r)}return s}function Lx(a){var e=a._opts.meta;return a._opts.defaultMeta=typeof e=="object"?a._getId(e)||e:a.getSchema(Ms)?Ms:void 0,a._opts.defaultMeta}function Fx(a){var e=bp(this,a);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return Nx(this,a)}}function Nx(a,e){var t=Zn.schema.call(a,{schema:{}},e);if(t){var s=t.schema,r=t.root,c=t.baseId,l=mp.call(a,s,r,void 0,c);return a._fragments[e]=new gp({ref:e,fragment:!0,schema:s,root:r,baseId:c,validate:l}),l}}function bp(a,e){return e=Zn.normalizeId(e),a._schemas[e]||a._refs[e]||a._fragments[e]}function jx(a){if(a instanceof RegExp)return Is(this,this._schemas,a),Is(this,this._refs,a),this;switch(typeof a){case"undefined":return Is(this,this._schemas),Is(this,this._refs),this._cache.clear(),this;case"string":var e=bp(this,a);return e&&this._cache.del(e.cacheKey),delete this._schemas[a],delete this._refs[a],this;case"object":var t=this._opts.serialize,s=t?t(a):a;this._cache.del(s);var r=this._getId(a);r&&(r=Zn.normalizeId(r),delete this._schemas[r],delete this._refs[r])}return this}function Is(a,e,t){for(var s in e){var r=e[s];!r.meta&&(!t||t.test(s))&&(a._cache.del(r.cacheKey),delete e[s])}}function zx(a,e,t,s){if(typeof a!="object"&&typeof a!="boolean")throw new Error("schema should be object or boolean");var r=this._opts.serialize,c=r?r(a):a,l=this._cache.get(c);if(l)return l;s=s||this._opts.addUsedSchema!==!1;var u=Zn.normalizeId(this._getId(a));u&&s&&wp(this,u);var d=this._opts.validateSchema!==!1&&!e,h;d&&!(h=u&&u==Zn.normalizeId(a.$schema))&&this.validateSchema(a,!0);var m=Zn.ids.call(this,a),g=new gp({id:u,schema:a,localRefs:m,cacheKey:c,meta:t});return u[0]!="#"&&s&&(this._refs[u]=g),this._cache.put(c,g),d&&h&&this.validateSchema(a,!0),g}function qx(a,e){if(a.compiling)return a.validate=r,r.schema=a.schema,r.errors=null,r.root=e||r,a.schema.$async===!0&&(r.$async=!0),r;a.compiling=!0;var t;a.meta&&(t=this._opts,this._opts=this._metaOpts);var s;try{s=mp.call(this,a.schema,e,a.localRefs)}catch(c){throw delete a.validate,c}finally{a.compiling=!1,a.meta&&(this._opts=t)}return a.validate=s,a.refs=s.refs,a.refVal=s.refVal,a.root=s.root,s;function r(){var c=a.validate,l=c.apply(this,arguments);return r.errors=c.errors,l}}function Ux(a){switch(a.schemaId){case"auto":return Bx;case"id":return Hx;default:return Zx}}function Hx(a){return a.$id&&this.logger.warn("schema $id ignored",a.$id),a.id}function Zx(a){return a.id&&this.logger.warn("schema id ignored",a.id),a.$id}function Bx(a){if(a.$id&&a.id&&a.$id!=a.id)throw new Error("schema $id is different from id");return a.$id||a.id}function Vx(a,e){if(a=a||this.errors,!a)return"No errors";e=e||{};for(var t=e.separator===void 0?", ":e.separator,s=e.dataVar===void 0?"data":e.dataVar,r="",c=0;c<a.length;c++){var l=a[c];l&&(r+=s+l.dataPath+" "+l.message+t)}return r.slice(0,-t.length)}function Wx(a,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[a]=e,this}function Gx(a){var e;if(a._opts.$data&&(e=hp(),a.addMetaSchema(e,e.$id,!0)),a._opts.meta!==!1){var t=hl();a._opts.$data&&(t=vp(t,Cx)),a.addMetaSchema(t,Ms,!0),a._refs["http://json-schema.org/schema"]=Ms}}function Kx(a){var e=a._opts.schemas;if(e)if(Array.isArray(e))a.addSchema(e);else for(var t in e)a.addSchema(e[t],t)}function Yx(a){for(var e in a._opts.formats){var t=a._opts.formats[e];a.addFormat(e,t)}}function Qx(a){for(var e in a._opts.keywords){var t=a._opts.keywords[e];a.addKeyword(e,t)}}function wp(a,e){if(a._schemas[e]||a._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function Jx(a){for(var e=_p.copy(a._opts),t=0;t<pp.length;t++)delete e[pp[t]];return e}function Xx(a){var e=a._opts.logger;if(e===!1)a.logger={log:ml,warn:ml,error:ml};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");a.logger=e}}function ml(){}});var wl={};Db(wl,{configSchema:()=>fE,default:()=>cm});var w=require("zod"),Ic="2025-06-18";var nf=[Ic,"2025-03-26","2024-11-05","2024-10-07"],ts="2.0",af=w.z.union([w.z.string(),w.z.number().int()]),sf=w.z.string(),$b=w.z.object({progressToken:w.z.optional(af)}).passthrough(),wr=w.z.object({_meta:w.z.optional($b)}).passthrough(),Xt=w.z.object({method:w.z.string(),params:w.z.optional(wr)}),Wa=w.z.object({_meta:w.z.optional(w.z.object({}).passthrough())}).passthrough(),Zr=w.z.object({method:w.z.string(),params:w.z.optional(Wa)}),xr=w.z.object({_meta:w.z.optional(w.z.object({}).passthrough())}).passthrough(),rs=w.z.union([w.z.string(),w.z.number().int()]),of=w.z.object({jsonrpc:w.z.literal(ts),id:rs}).merge(Xt).strict(),cf=a=>of.safeParse(a).success,lf=w.z.object({jsonrpc:w.z.literal(ts)}).merge(Zr).strict(),uf=a=>lf.safeParse(a).success,df=w.z.object({jsonrpc:w.z.literal(ts),id:rs,result:xr}).strict(),Mc=a=>df.safeParse(a).success,tt;(function(a){a[a.ConnectionClosed=-32e3]="ConnectionClosed",a[a.RequestTimeout=-32001]="RequestTimeout",a[a.ParseError=-32700]="ParseError",a[a.InvalidRequest=-32600]="InvalidRequest",a[a.MethodNotFound=-32601]="MethodNotFound",a[a.InvalidParams=-32602]="InvalidParams",a[a.InternalError=-32603]="InternalError"})(tt||(tt={}));var ff=w.z.object({jsonrpc:w.z.literal(ts),id:rs,error:w.z.object({code:w.z.number().int(),message:w.z.string(),data:w.z.optional(w.z.unknown())})}).strict(),hf=a=>ff.safeParse(a).success,pf=w.z.union([of,lf,df,ff]),ns=xr.strict(),as=Zr.extend({method:w.z.literal("notifications/cancelled"),params:Wa.extend({requestId:rs,reason:w.z.string().optional()})}),is=w.z.object({src:w.z.string(),mimeType:w.z.optional(w.z.string()),sizes:w.z.optional(w.z.string())}).passthrough(),Ga=w.z.object({name:w.z.string(),title:w.z.optional(w.z.string())}).passthrough(),mf=Ga.extend({version:w.z.string(),websiteUrl:w.z.optional(w.z.string()),icons:w.z.optional(w.z.array(is))}),Ib=w.z.object({experimental:w.z.optional(w.z.object({}).passthrough()),sampling:w.z.optional(w.z.object({}).passthrough()),elicitation:w.z.optional(w.z.object({}).passthrough()),roots:w.z.optional(w.z.object({listChanged:w.z.optional(w.z.boolean())}).passthrough())}).passthrough(),Lc=Xt.extend({method:w.z.literal("initialize"),params:wr.extend({protocolVersion:w.z.string(),capabilities:Ib,clientInfo:mf})});var Mb=w.z.object({experimental:w.z.optional(w.z.object({}).passthrough()),logging:w.z.optional(w.z.object({}).passthrough()),completions:w.z.optional(w.z.object({}).passthrough()),prompts:w.z.optional(w.z.object({listChanged:w.z.optional(w.z.boolean())}).passthrough()),resources:w.z.optional(w.z.object({subscribe:w.z.optional(w.z.boolean()),listChanged:w.z.optional(w.z.boolean())}).passthrough()),tools:w.z.optional(w.z.object({listChanged:w.z.optional(w.z.boolean())}).passthrough())}).passthrough(),Lb=xr.extend({protocolVersion:w.z.string(),capabilities:Mb,serverInfo:mf,instructions:w.z.optional(w.z.string())}),Fc=Zr.extend({method:w.z.literal("notifications/initialized")});var ss=Xt.extend({method:w.z.literal("ping")}),Fb=w.z.object({progress:w.z.number(),total:w.z.optional(w.z.number()),message:w.z.optional(w.z.string())}).passthrough(),os=Zr.extend({method:w.z.literal("notifications/progress"),params:Wa.merge(Fb).extend({progressToken:af})}),cs=Xt.extend({params:wr.extend({cursor:w.z.optional(sf)}).optional()}),ls=xr.extend({nextCursor:w.z.optional(sf)}),gf=w.z.object({uri:w.z.string(),mimeType:w.z.optional(w.z.string()),_meta:w.z.optional(w.z.object({}).passthrough())}).passthrough(),vf=gf.extend({text:w.z.string()}),Nc=w.z.string().refine(a=>{try{return atob(a),!0}catch{return!1}},{message:"Invalid Base64 string"}),_f=gf.extend({blob:Nc}),yf=Ga.extend({uri:w.z.string(),description:w.z.optional(w.z.string()),mimeType:w.z.optional(w.z.string()),icons:w.z.optional(w.z.array(is)),_meta:w.z.optional(w.z.object({}).passthrough())}),Nb=Ga.extend({uriTemplate:w.z.string(),description:w.z.optional(w.z.string()),mimeType:w.z.optional(w.z.string()),_meta:w.z.optional(w.z.object({}).passthrough())}),us=cs.extend({method:w.z.literal("resources/list")}),jb=ls.extend({resources:w.z.array(yf)}),ds=cs.extend({method:w.z.literal("resources/templates/list")}),zb=ls.extend({resourceTemplates:w.z.array(Nb)}),fs=Xt.extend({method:w.z.literal("resources/read"),params:wr.extend({uri:w.z.string()})}),qb=xr.extend({contents:w.z.array(w.z.union([vf,_f]))}),Ub=Zr.extend({method:w.z.literal("notifications/resources/list_changed")}),Hb=Xt.extend({method:w.z.literal("resources/subscribe"),params:wr.extend({uri:w.z.string()})}),Zb=Xt.extend({method:w.z.literal("resources/unsubscribe"),params:wr.extend({uri:w.z.string()})}),Bb=Zr.extend({method:w.z.literal("notifications/resources/updated"),params:Wa.extend({uri:w.z.string()})}),Vb=w.z.object({name:w.z.string(),description:w.z.optional(w.z.string()),required:w.z.optional(w.z.boolean())}).passthrough(),Wb=Ga.extend({description:w.z.optional(w.z.string()),arguments:w.z.optional(w.z.array(Vb)),icons:w.z.optional(w.z.array(is)),_meta:w.z.optional(w.z.object({}).passthrough())}),hs=cs.extend({method:w.z.literal("prompts/list")}),Gb=ls.extend({prompts:w.z.array(Wb)}),ps=Xt.extend({method:w.z.literal("prompts/get"),params:wr.extend({name:w.z.string(),arguments:w.z.optional(w.z.record(w.z.string()))})}),jc=w.z.object({type:w.z.literal("text"),text:w.z.string(),_meta:w.z.optional(w.z.object({}).passthrough())}).passthrough(),zc=w.z.object({type:w.z.literal("image"),data:Nc,mimeType:w.z.string(),_meta:w.z.optional(w.z.object({}).passthrough())}).passthrough(),qc=w.z.object({type:w.z.literal("audio"),data:Nc,mimeType:w.z.string(),_meta:w.z.optional(w.z.object({}).passthrough())}).passthrough(),Kb=w.z.object({type:w.z.literal("resource"),resource:w.z.union([vf,_f]),_meta:w.z.optional(w.z.object({}).passthrough())}).passthrough(),Yb=yf.extend({type:w.z.literal("resource_link")}),bf=w.z.union([jc,zc,qc,Yb,Kb]),Qb=w.z.object({role:w.z.enum(["user","assistant"]),content:bf}).passthrough(),Jb=xr.extend({description:w.z.optional(w.z.string()),messages:w.z.array(Qb)}),Xb=Zr.extend({method:w.z.literal("notifications/prompts/list_changed")}),ew=w.z.object({title:w.z.optional(w.z.string()),readOnlyHint:w.z.optional(w.z.boolean()),destructiveHint:w.z.optional(w.z.boolean()),idempotentHint:w.z.optional(w.z.boolean()),openWorldHint:w.z.optional(w.z.boolean())}).passthrough(),tw=Ga.extend({description:w.z.optional(w.z.string()),inputSchema:w.z.object({type:w.z.literal("object"),properties:w.z.optional(w.z.object({}).passthrough()),required:w.z.optional(w.z.array(w.z.string()))}).passthrough(),outputSchema:w.z.optional(w.z.object({type:w.z.literal("object"),properties:w.z.optional(w.z.object({}).passthrough()),required:w.z.optional(w.z.array(w.z.string()))}).passthrough()),annotations:w.z.optional(ew),icons:w.z.optional(w.z.array(is)),_meta:w.z.optional(w.z.object({}).passthrough())}),ms=cs.extend({method:w.z.literal("tools/list")}),rw=ls.extend({tools:w.z.array(tw)}),wf=xr.extend({content:w.z.array(bf).default([]),structuredContent:w.z.object({}).passthrough().optional(),isError:w.z.optional(w.z.boolean())}),ZS=wf.or(xr.extend({toolResult:w.z.unknown()})),gs=Xt.extend({method:w.z.literal("tools/call"),params:wr.extend({name:w.z.string(),arguments:w.z.optional(w.z.record(w.z.unknown()))})}),nw=Zr.extend({method:w.z.literal("notifications/tools/list_changed")}),Ka=w.z.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),Uc=Xt.extend({method:w.z.literal("logging/setLevel"),params:wr.extend({level:Ka})}),aw=Zr.extend({method:w.z.literal("notifications/message"),params:Wa.extend({level:Ka,logger:w.z.optional(w.z.string()),data:w.z.unknown()})}),iw=w.z.object({name:w.z.string().optional()}).passthrough(),sw=w.z.object({hints:w.z.optional(w.z.array(iw)),costPriority:w.z.optional(w.z.number().min(0).max(1)),speedPriority:w.z.optional(w.z.number().min(0).max(1)),intelligencePriority:w.z.optional(w.z.number().min(0).max(1))}).passthrough(),ow=w.z.object({role:w.z.enum(["user","assistant"]),content:w.z.union([jc,zc,qc])}).passthrough(),cw=Xt.extend({method:w.z.literal("sampling/createMessage"),params:wr.extend({messages:w.z.array(ow),systemPrompt:w.z.optional(w.z.string()),includeContext:w.z.optional(w.z.enum(["none","thisServer","allServers"])),temperature:w.z.optional(w.z.number()),maxTokens:w.z.number().int(),stopSequences:w.z.optional(w.z.array(w.z.string())),metadata:w.z.optional(w.z.object({}).passthrough()),modelPreferences:w.z.optional(sw)})}),Hc=xr.extend({model:w.z.string(),stopReason:w.z.optional(w.z.enum(["endTurn","stopSequence","maxTokens"]).or(w.z.string())),role:w.z.enum(["user","assistant"]),content:w.z.discriminatedUnion("type",[jc,zc,qc])}),lw=w.z.object({type:w.z.literal("boolean"),title:w.z.optional(w.z.string()),description:w.z.optional(w.z.string()),default:w.z.optional(w.z.boolean())}).passthrough(),uw=w.z.object({type:w.z.literal("string"),title:w.z.optional(w.z.string()),description:w.z.optional(w.z.string()),minLength:w.z.optional(w.z.number()),maxLength:w.z.optional(w.z.number()),format:w.z.optional(w.z.enum(["email","uri","date","date-time"]))}).passthrough(),dw=w.z.object({type:w.z.enum(["number","integer"]),title:w.z.optional(w.z.string()),description:w.z.optional(w.z.string()),minimum:w.z.optional(w.z.number()),maximum:w.z.optional(w.z.number())}).passthrough(),fw=w.z.object({type:w.z.literal("string"),title:w.z.optional(w.z.string()),description:w.z.optional(w.z.string()),enum:w.z.array(w.z.string()),enumNames:w.z.optional(w.z.array(w.z.string()))}).passthrough(),hw=w.z.union([lw,uw,dw,fw]),pw=Xt.extend({method:w.z.literal("elicitation/create"),params:wr.extend({message:w.z.string(),requestedSchema:w.z.object({type:w.z.literal("object"),properties:w.z.record(w.z.string(),hw),required:w.z.optional(w.z.array(w.z.string()))}).passthrough()})}),Zc=xr.extend({action:w.z.enum(["accept","decline","cancel"]),content:w.z.optional(w.z.record(w.z.string(),w.z.unknown()))}),mw=w.z.object({type:w.z.literal("ref/resource"),uri:w.z.string()}).passthrough();var gw=w.z.object({type:w.z.literal("ref/prompt"),name:w.z.string()}).passthrough(),vs=Xt.extend({method:w.z.literal("completion/complete"),params:wr.extend({ref:w.z.union([gw,mw]),argument:w.z.object({name:w.z.string(),value:w.z.string()}).passthrough(),context:w.z.optional(w.z.object({arguments:w.z.optional(w.z.record(w.z.string(),w.z.string()))}))})}),vw=xr.extend({completion:w.z.object({values:w.z.array(w.z.string()).max(100),total:w.z.optional(w.z.number().int()),hasMore:w.z.optional(w.z.boolean())}).passthrough()}),_w=w.z.object({uri:w.z.string().startsWith("file://"),name:w.z.optional(w.z.string()),_meta:w.z.optional(w.z.object({}).passthrough())}).passthrough(),yw=Xt.extend({method:w.z.literal("roots/list")}),Bc=xr.extend({roots:w.z.array(_w)}),bw=Zr.extend({method:w.z.literal("notifications/roots/list_changed")}),BS=w.z.union([ss,Lc,vs,Uc,ps,hs,us,ds,fs,Hb,Zb,gs,ms]),VS=w.z.union([as,os,Fc,bw]),WS=w.z.union([ns,Hc,Zc,Bc]),GS=w.z.union([ss,cw,pw,yw]),KS=w.z.union([as,os,aw,Bb,Ub,nw,Xb]),YS=w.z.union([ns,Lb,vw,Jb,Gb,jb,zb,qb,wf,rw]),rt=class extends Error{constructor(e,t,s){super(`MCP error ${e}: ${t}`),this.code=e,this.data=s,this.name="McpError"}};var ww=6e4,_s=class{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(as,t=>{let s=this._requestHandlerAbortControllers.get(t.params.requestId);s?.abort(t.params.reason)}),this.setNotificationHandler(os,t=>{this._onprogress(t)}),this.setRequestHandler(ss,t=>({}))}_setupTimeout(e,t,s,r,c=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(r,t),startTime:Date.now(),timeout:t,maxTotalTimeout:s,resetTimeoutOnProgress:c,onTimeout:r})}_resetTimeout(e){let t=this._timeoutInfo.get(e);if(!t)return!1;let s=Date.now()-t.startTime;if(t.maxTotalTimeout&&s>=t.maxTotalTimeout)throw this._timeoutInfo.delete(e),new rt(tt.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:t.maxTotalTimeout,totalElapsed:s});return clearTimeout(t.timeoutId),t.timeoutId=setTimeout(t.onTimeout,t.timeout),!0}_cleanupTimeout(e){let t=this._timeoutInfo.get(e);t&&(clearTimeout(t.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var t,s,r;this._transport=e;let c=(t=this.transport)===null||t===void 0?void 0:t.onclose;this._transport.onclose=()=>{c?.(),this._onclose()};let l=(s=this.transport)===null||s===void 0?void 0:s.onerror;this._transport.onerror=d=>{l?.(d),this._onerror(d)};let u=(r=this._transport)===null||r===void 0?void 0:r.onmessage;this._transport.onmessage=(d,h)=>{u?.(d,h),Mc(d)||hf(d)?this._onresponse(d):cf(d)?this._onrequest(d,h):uf(d)?this._onnotification(d):this._onerror(new Error(`Unknown message type: ${JSON.stringify(d)}`))},await this._transport.start()}_onclose(){var e;let t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let s=new rt(tt.ConnectionClosed,"Connection closed");for(let r of t.values())r(s)}_onerror(e){var t;(t=this.onerror)===null||t===void 0||t.call(this,e)}_onnotification(e){var t;let s=(t=this._notificationHandlers.get(e.method))!==null&&t!==void 0?t:this.fallbackNotificationHandler;s!==void 0&&Promise.resolve().then(()=>s(e)).catch(r=>this._onerror(new Error(`Uncaught error in notification handler: ${r}`)))}_onrequest(e,t){var s,r;let c=(s=this._requestHandlers.get(e.method))!==null&&s!==void 0?s:this.fallbackRequestHandler,l=this._transport;if(c===void 0){l?.send({jsonrpc:"2.0",id:e.id,error:{code:tt.MethodNotFound,message:"Method not found"}}).catch(h=>this._onerror(new Error(`Failed to send an error response: ${h}`)));return}let u=new AbortController;this._requestHandlerAbortControllers.set(e.id,u);let d={signal:u.signal,sessionId:l?.sessionId,_meta:(r=e.params)===null||r===void 0?void 0:r._meta,sendNotification:h=>this.notification(h,{relatedRequestId:e.id}),sendRequest:(h,m,g)=>this.request(h,m,{...g,relatedRequestId:e.id}),authInfo:t?.authInfo,requestId:e.id,requestInfo:t?.requestInfo};Promise.resolve().then(()=>c(e,d)).then(h=>{if(!u.signal.aborted)return l?.send({result:h,jsonrpc:"2.0",id:e.id})},h=>{var m;if(!u.signal.aborted)return l?.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(h.code)?h.code:tt.InternalError,message:(m=h.message)!==null&&m!==void 0?m:"Internal error"}})}).catch(h=>this._onerror(new Error(`Failed to send response: ${h}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:t,...s}=e.params,r=Number(t),c=this._progressHandlers.get(r);if(!c){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let l=this._responseHandlers.get(r),u=this._timeoutInfo.get(r);if(u&&l&&u.resetTimeoutOnProgress)try{this._resetTimeout(r)}catch(d){l(d);return}c(s)}_onresponse(e){let t=Number(e.id),s=this._responseHandlers.get(t);if(s===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(t),this._progressHandlers.delete(t),this._cleanupTimeout(t),Mc(e))s(e);else{let r=new rt(e.error.code,e.error.message,e.error.data);s(r)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,t,s){let{relatedRequestId:r,resumptionToken:c,onresumptiontoken:l}=s??{};return new Promise((u,d)=>{var h,m,g,v,p,y;if(!this._transport){d(new Error("Not connected"));return}((h=this._options)===null||h===void 0?void 0:h.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(m=s?.signal)===null||m===void 0||m.throwIfAborted();let E=this._requestMessageId++,b={...e,jsonrpc:"2.0",id:E};s?.onprogress&&(this._progressHandlers.set(E,s.onprogress),b.params={...e.params,_meta:{...((g=e.params)===null||g===void 0?void 0:g._meta)||{},progressToken:E}});let R=j=>{var M;this._responseHandlers.delete(E),this._progressHandlers.delete(E),this._cleanupTimeout(E),(M=this._transport)===null||M===void 0||M.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:E,reason:String(j)}},{relatedRequestId:r,resumptionToken:c,onresumptiontoken:l}).catch(I=>this._onerror(new Error(`Failed to send cancellation: ${I}`))),d(j)};this._responseHandlers.set(E,j=>{var M;if(!(!((M=s?.signal)===null||M===void 0)&&M.aborted)){if(j instanceof Error)return d(j);try{let I=t.parse(j.result);u(I)}catch(I){d(I)}}}),(v=s?.signal)===null||v===void 0||v.addEventListener("abort",()=>{var j;R((j=s?.signal)===null||j===void 0?void 0:j.reason)});let q=(p=s?.timeout)!==null&&p!==void 0?p:ww,$=()=>R(new rt(tt.RequestTimeout,"Request timed out",{timeout:q}));this._setupTimeout(E,q,s?.maxTotalTimeout,$,(y=s?.resetTimeoutOnProgress)!==null&&y!==void 0?y:!1),this._transport.send(b,{relatedRequestId:r,resumptionToken:c,onresumptiontoken:l}).catch(j=>{this._cleanupTimeout(E),d(j)})})}async notification(e,t){var s,r;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(e.method),((r=(s=this._options)===null||s===void 0?void 0:s.debouncedNotificationMethods)!==null&&r!==void 0?r:[]).includes(e.method)&&!e.params&&!t?.relatedRequestId){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{var d;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let h={...e,jsonrpc:"2.0"};(d=this._transport)===null||d===void 0||d.send(h,t).catch(m=>this._onerror(m))});return}let u={...e,jsonrpc:"2.0"};await this._transport.send(u,t)}setRequestHandler(e,t){let s=e.shape.method.value;this.assertRequestHandlerCapability(s),this._requestHandlers.set(s,(r,c)=>Promise.resolve(t(e.parse(r),c)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,t){this._notificationHandlers.set(e.shape.method.value,s=>Promise.resolve(t(e.parse(s))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function xf(a,e){return Object.entries(e).reduce((t,[s,r])=>(r&&typeof r=="object"?t[s]=t[s]?{...t[s],...r}:r:t[s]=r,t),{...a})}var Sp=$c(Ep(),1),Fs=class extends _s{constructor(e,t){var s;super(t),this._serverInfo=e,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(Ka.options.map((r,c)=>[r,c])),this.isMessageIgnored=(r,c)=>{let l=this._loggingLevels.get(c);return l?this.LOG_LEVEL_SEVERITY.get(r)<this.LOG_LEVEL_SEVERITY.get(l):!1},this._capabilities=(s=t?.capabilities)!==null&&s!==void 0?s:{},this._instructions=t?.instructions,this.setRequestHandler(Lc,r=>this._oninitialize(r)),this.setNotificationHandler(Fc,()=>{var r;return(r=this.oninitialized)===null||r===void 0?void 0:r.call(this)}),this._capabilities.logging&&this.setRequestHandler(Uc,async(r,c)=>{var l;let u=c.sessionId||((l=c.requestInfo)===null||l===void 0?void 0:l.headers["mcp-session-id"])||void 0,{level:d}=r.params,h=Ka.safeParse(d);return h.success&&this._loggingLevels.set(u,h.data),{}})}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=xf(this._capabilities,e)}assertCapabilityForMethod(e){var t,s,r;switch(e){case"sampling/createMessage":if(!(!((t=this._clientCapabilities)===null||t===void 0)&&t.sampling))throw new Error(`Client does not support sampling (required for ${e})`);break;case"elicitation/create":if(!(!((s=this._clientCapabilities)===null||s===void 0)&&s.elicitation))throw new Error(`Client does not support elicitation (required for ${e})`);break;case"roots/list":if(!(!((r=this._clientCapabilities)===null||r===void 0)&&r.roots))throw new Error(`Client does not support listing roots (required for ${e})`);break;case"ping":break}}assertNotificationCapability(e){switch(e){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${e})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${e})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${e})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Server does not support sampling (required for ${e})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${e})`);break;case"ping":case"initialize":break}}async _oninitialize(e){let t=e.params.protocolVersion;return this._clientCapabilities=e.params.capabilities,this._clientVersion=e.params.clientInfo,{protocolVersion:nf.includes(t)?t:Ic,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},ns)}async createMessage(e,t){return this.request({method:"sampling/createMessage",params:e},Hc,t)}async elicitInput(e,t){let s=await this.request({method:"elicitation/create",params:e},Zc,t);if(s.action==="accept"&&s.content)try{let r=new Sp.default,c=r.compile(e.requestedSchema);if(!c(s.content))throw new rt(tt.InvalidParams,`Elicitation response content does not match requested schema: ${r.errorsText(c.errors)}`)}catch(r){throw r instanceof rt?r:new rt(tt.InternalError,`Error validating elicitation response: ${r}`)}return s}async listRoots(e,t){return this.request({method:"roots/list",params:e},Bc,t)}async sendLoggingMessage(e,t){if(this._capabilities.logging&&!this.isMessageIgnored(e.level,t))return this.notification({method:"notifications/message",params:e})}async sendResourceUpdated(e){return this.notification({method:"notifications/resources/updated",params:e})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}};var Rp=Symbol("Let zodToJsonSchema decide on which parser to use");var Pp={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},Ap=a=>typeof a=="string"?{...Pp,name:a}:{...Pp,...a};var kp=a=>{let e=Ap(a),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:t,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([s,r])=>[r._def,{def:r._def,path:[...e.basePath,e.definitionPath,s],jsonSchema:void 0}]))}};function gl(a,e,t,s){s?.errorMessages&&t&&(a.errorMessage={...a.errorMessage,[e]:t})}function Me(a,e,t,s,r){a[e]=t,gl(a,e,s,r)}var Ns=(a,e)=>{let t=0;for(;t<a.length&&t<e.length&&a[t]===e[t];t++);return[(a.length-t).toString(),...e.slice(t)].join("/")};var Te=require("zod");function ot(a){if(a.target!=="openAi")return{};let e=[...a.basePath,a.definitionPath,a.openAiAnyTypeName];return a.flags.hasReferencedOpenAiAnyType=!0,{$ref:a.$refStrategy==="relative"?Ns(e,a.currentPath):e.join("/")}}var Tp=require("zod");function Cp(a,e){let t={type:"array"};return a.type?._def&&a.type?._def?.typeName!==Tp.ZodFirstPartyTypeKind.ZodAny&&(t.items=he(a.type._def,{...e,currentPath:[...e.currentPath,"items"]})),a.minLength&&Me(t,"minItems",a.minLength.value,a.minLength.message,e),a.maxLength&&Me(t,"maxItems",a.maxLength.value,a.maxLength.message,e),a.exactLength&&(Me(t,"minItems",a.exactLength.value,a.exactLength.message,e),Me(t,"maxItems",a.exactLength.value,a.exactLength.message,e)),t}function Dp(a,e){let t={type:"integer",format:"int64"};if(!a.checks)return t;for(let s of a.checks)switch(s.kind){case"min":e.target==="jsonSchema7"?s.inclusive?Me(t,"minimum",s.value,s.message,e):Me(t,"exclusiveMinimum",s.value,s.message,e):(s.inclusive||(t.exclusiveMinimum=!0),Me(t,"minimum",s.value,s.message,e));break;case"max":e.target==="jsonSchema7"?s.inclusive?Me(t,"maximum",s.value,s.message,e):Me(t,"exclusiveMaximum",s.value,s.message,e):(s.inclusive||(t.exclusiveMaximum=!0),Me(t,"maximum",s.value,s.message,e));break;case"multipleOf":Me(t,"multipleOf",s.value,s.message,e);break}return t}function Op(){return{type:"boolean"}}function js(a,e){return he(a.type._def,e)}var $p=(a,e)=>he(a.innerType._def,e);function vl(a,e,t){let s=t??e.dateStrategy;if(Array.isArray(s))return{anyOf:s.map((r,c)=>vl(a,e,r))};switch(s){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return eE(a,e)}}var eE=(a,e)=>{let t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(let s of a.checks)switch(s.kind){case"min":Me(t,"minimum",s.value,s.message,e);break;case"max":Me(t,"maximum",s.value,s.message,e);break}return t};function Ip(a,e){return{...he(a.innerType._def,e),default:a.defaultValue()}}function Mp(a,e){return e.effectStrategy==="input"?he(a.schema._def,e):ot(e)}function Lp(a){return{type:"string",enum:Array.from(a.values)}}var tE=a=>"type"in a&&a.type==="string"?!1:"allOf"in a;function Fp(a,e){let t=[he(a.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),he(a.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(c=>!!c),s=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,r=[];return t.forEach(c=>{if(tE(c))r.push(...c.allOf),c.unevaluatedProperties===void 0&&(s=void 0);else{let l=c;if("additionalProperties"in c&&c.additionalProperties===!1){let{additionalProperties:u,...d}=c;l=d}else s=void 0;r.push(l)}}),r.length?{allOf:r,...s}:void 0}function Np(a,e){let t=typeof a.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(a.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[a.value]}:{type:t==="bigint"?"integer":t,const:a.value}}var _a=require("zod");var _l,Tr={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(_l===void 0&&(_l=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),_l),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function zs(a,e){let t={type:"string"};if(a.checks)for(let s of a.checks)switch(s.kind){case"min":Me(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e);break;case"max":Me(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Cr(t,"email",s.message,e);break;case"format:idn-email":Cr(t,"idn-email",s.message,e);break;case"pattern:zod":Ht(t,Tr.email,s.message,e);break}break;case"url":Cr(t,"uri",s.message,e);break;case"uuid":Cr(t,"uuid",s.message,e);break;case"regex":Ht(t,s.regex,s.message,e);break;case"cuid":Ht(t,Tr.cuid,s.message,e);break;case"cuid2":Ht(t,Tr.cuid2,s.message,e);break;case"startsWith":Ht(t,RegExp(`^${yl(s.value,e)}`),s.message,e);break;case"endsWith":Ht(t,RegExp(`${yl(s.value,e)}$`),s.message,e);break;case"datetime":Cr(t,"date-time",s.message,e);break;case"date":Cr(t,"date",s.message,e);break;case"time":Cr(t,"time",s.message,e);break;case"duration":Cr(t,"duration",s.message,e);break;case"length":Me(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e),Me(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"includes":{Ht(t,RegExp(yl(s.value,e)),s.message,e);break}case"ip":{s.version!=="v6"&&Cr(t,"ipv4",s.message,e),s.version!=="v4"&&Cr(t,"ipv6",s.message,e);break}case"base64url":Ht(t,Tr.base64url,s.message,e);break;case"jwt":Ht(t,Tr.jwt,s.message,e);break;case"cidr":{s.version!=="v6"&&Ht(t,Tr.ipv4Cidr,s.message,e),s.version!=="v4"&&Ht(t,Tr.ipv6Cidr,s.message,e);break}case"emoji":Ht(t,Tr.emoji(),s.message,e);break;case"ulid":{Ht(t,Tr.ulid,s.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Cr(t,"binary",s.message,e);break}case"contentEncoding:base64":{Me(t,"contentEncoding","base64",s.message,e);break}case"pattern:zod":{Ht(t,Tr.base64,s.message,e);break}}break}case"nanoid":Ht(t,Tr.nanoid,s.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return t}function yl(a,e){return e.patternStrategy==="escape"?nE(a):a}var rE=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function nE(a){let e="";for(let t=0;t<a.length;t++)rE.has(a[t])||(e+="\\"),e+=a[t];return e}function Cr(a,e,t,s){a.format||a.anyOf?.some(r=>r.format)?(a.anyOf||(a.anyOf=[]),a.format&&(a.anyOf.push({format:a.format,...a.errorMessage&&s.errorMessages&&{errorMessage:{format:a.errorMessage.format}}}),delete a.format,a.errorMessage&&(delete a.errorMessage.format,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.anyOf.push({format:e,...t&&s.errorMessages&&{errorMessage:{format:t}}})):Me(a,"format",e,t,s)}function Ht(a,e,t,s){a.pattern||a.allOf?.some(r=>r.pattern)?(a.allOf||(a.allOf=[]),a.pattern&&(a.allOf.push({pattern:a.pattern,...a.errorMessage&&s.errorMessages&&{errorMessage:{pattern:a.errorMessage.pattern}}}),delete a.pattern,a.errorMessage&&(delete a.errorMessage.pattern,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.allOf.push({pattern:jp(e,s),...t&&s.errorMessages&&{errorMessage:{pattern:t}}})):Me(a,"pattern",jp(e,s),t,s)}function jp(a,e){if(!e.applyRegexFlags||!a.flags)return a.source;let t={i:a.flags.includes("i"),m:a.flags.includes("m"),s:a.flags.includes("s")},s=t.i?a.source.toLowerCase():a.source,r="",c=!1,l=!1,u=!1;for(let d=0;d<s.length;d++){if(c){r+=s[d],c=!1;continue}if(t.i){if(l){if(s[d].match(/[a-z]/)){u?(r+=s[d],r+=`${s[d-2]}-${s[d]}`.toUpperCase(),u=!1):s[d+1]==="-"&&s[d+2]?.match(/[a-z]/)?(r+=s[d],u=!0):r+=`${s[d]}${s[d].toUpperCase()}`;continue}}else if(s[d].match(/[a-z]/)){r+=`[${s[d]}${s[d].toUpperCase()}]`;continue}}if(t.m){if(s[d]==="^"){r+=`(^|(?<=[\r
]))`;continue}else if(s[d]==="$"){r+=`($|(?=[\r
]))`;continue}}if(t.s&&s[d]==="."){r+=l?`${s[d]}\r
`:`[${s[d]}\r
]`;continue}r+=s[d],s[d]==="\\"?c=!0:l&&s[d]==="]"?l=!1:!l&&s[d]==="["&&(l=!0)}try{new RegExp(r)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),a.source}return r}function qs(a,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&a.keyType?._def.typeName===_a.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:a.keyType._def.values,properties:a.keyType._def.values.reduce((s,r)=>({...s,[r]:he(a.valueType._def,{...e,currentPath:[...e.currentPath,"properties",r]})??ot(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};let t={type:"object",additionalProperties:he(a.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return t;if(a.keyType?._def.typeName===_a.ZodFirstPartyTypeKind.ZodString&&a.keyType._def.checks?.length){let{type:s,...r}=zs(a.keyType._def,e);return{...t,propertyNames:r}}else{if(a.keyType?._def.typeName===_a.ZodFirstPartyTypeKind.ZodEnum)return{...t,propertyNames:{enum:a.keyType._def.values}};if(a.keyType?._def.typeName===_a.ZodFirstPartyTypeKind.ZodBranded&&a.keyType._def.type._def.typeName===_a.ZodFirstPartyTypeKind.ZodString&&a.keyType._def.type._def.checks?.length){let{type:s,...r}=js(a.keyType._def,e);return{...t,propertyNames:r}}}return t}function zp(a,e){if(e.mapStrategy==="record")return qs(a,e);let t=he(a.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||ot(e),s=he(a.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||ot(e);return{type:"array",maxItems:125,items:{type:"array",items:[t,s],minItems:2,maxItems:2}}}function qp(a){let e=a.values,s=Object.keys(a.values).filter(c=>typeof e[e[c]]!="number").map(c=>e[c]),r=Array.from(new Set(s.map(c=>typeof c)));return{type:r.length===1?r[0]==="string"?"string":"number":["string","number"],enum:s}}function Up(a){return a.target==="openAi"?void 0:{not:ot({...a,currentPath:[...a.currentPath,"not"]})}}function Hp(a){return a.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var Qa={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Bp(a,e){if(e.target==="openApi3")return Zp(a,e);let t=a.options instanceof Map?Array.from(a.options.values()):a.options;if(t.every(s=>s._def.typeName in Qa&&(!s._def.checks||!s._def.checks.length))){let s=t.reduce((r,c)=>{let l=Qa[c._def.typeName];return l&&!r.includes(l)?[...r,l]:r},[]);return{type:s.length>1?s:s[0]}}else if(t.every(s=>s._def.typeName==="ZodLiteral"&&!s.description)){let s=t.reduce((r,c)=>{let l=typeof c._def.value;switch(l){case"string":case"number":case"boolean":return[...r,l];case"bigint":return[...r,"integer"];case"object":if(c._def.value===null)return[...r,"null"];case"symbol":case"undefined":case"function":default:return r}},[]);if(s.length===t.length){let r=s.filter((c,l,u)=>u.indexOf(c)===l);return{type:r.length>1?r:r[0],enum:t.reduce((c,l)=>c.includes(l._def.value)?c:[...c,l._def.value],[])}}}else if(t.every(s=>s._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((s,r)=>[...s,...r._def.values.filter(c=>!s.includes(c))],[])};return Zp(a,e)}var Zp=(a,e)=>{let t=(a.options instanceof Map?Array.from(a.options.values()):a.options).map((s,r)=>he(s._def,{...e,currentPath:[...e.currentPath,"anyOf",`${r}`]})).filter(s=>!!s&&(!e.strictUnions||typeof s=="object"&&Object.keys(s).length>0));return t.length?{anyOf:t}:void 0};function Vp(a,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(a.innerType._def.typeName)&&(!a.innerType._def.checks||!a.innerType._def.checks.length))return e.target==="openApi3"?{type:Qa[a.innerType._def.typeName],nullable:!0}:{type:[Qa[a.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let s=he(a.innerType._def,{...e,currentPath:[...e.currentPath]});return s&&"$ref"in s?{allOf:[s],nullable:!0}:s&&{...s,nullable:!0}}let t=he(a.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function Wp(a,e){let t={type:"number"};if(!a.checks)return t;for(let s of a.checks)switch(s.kind){case"int":t.type="integer",gl(t,"type",s.message,e);break;case"min":e.target==="jsonSchema7"?s.inclusive?Me(t,"minimum",s.value,s.message,e):Me(t,"exclusiveMinimum",s.value,s.message,e):(s.inclusive||(t.exclusiveMinimum=!0),Me(t,"minimum",s.value,s.message,e));break;case"max":e.target==="jsonSchema7"?s.inclusive?Me(t,"maximum",s.value,s.message,e):Me(t,"exclusiveMaximum",s.value,s.message,e):(s.inclusive||(t.exclusiveMaximum=!0),Me(t,"maximum",s.value,s.message,e));break;case"multipleOf":Me(t,"multipleOf",s.value,s.message,e);break}return t}function Gp(a,e){let t=e.target==="openAi",s={type:"object",properties:{}},r=[],c=a.shape();for(let u in c){let d=c[u];if(d===void 0||d._def===void 0)continue;let h=iE(d);h&&t&&(d._def.typeName==="ZodOptional"&&(d=d._def.innerType),d.isNullable()||(d=d.nullable()),h=!1);let m=he(d._def,{...e,currentPath:[...e.currentPath,"properties",u],propertyPath:[...e.currentPath,"properties",u]});m!==void 0&&(s.properties[u]=m,h||r.push(u))}r.length&&(s.required=r);let l=aE(a,e);return l!==void 0&&(s.additionalProperties=l),s}function aE(a,e){if(a.catchall._def.typeName!=="ZodNever")return he(a.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(a.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function iE(a){try{return a.isOptional()}catch{return!0}}var Kp=(a,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return he(a.innerType._def,e);let t=he(a.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:ot(e)},t]}:ot(e)};var Yp=(a,e)=>{if(e.pipeStrategy==="input")return he(a.in._def,e);if(e.pipeStrategy==="output")return he(a.out._def,e);let t=he(a.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),s=he(a.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,s].filter(r=>r!==void 0)}};function Qp(a,e){return he(a.type._def,e)}function Jp(a,e){let s={type:"array",uniqueItems:!0,items:he(a.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return a.minSize&&Me(s,"minItems",a.minSize.value,a.minSize.message,e),a.maxSize&&Me(s,"maxItems",a.maxSize.value,a.maxSize.message,e),s}function Xp(a,e){return a.rest?{type:"array",minItems:a.items.length,items:a.items.map((t,s)=>he(t._def,{...e,currentPath:[...e.currentPath,"items",`${s}`]})).reduce((t,s)=>s===void 0?t:[...t,s],[]),additionalItems:he(a.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:a.items.length,maxItems:a.items.length,items:a.items.map((t,s)=>he(t._def,{...e,currentPath:[...e.currentPath,"items",`${s}`]})).reduce((t,s)=>s===void 0?t:[...t,s],[])}}function em(a){return{not:ot(a)}}function tm(a){return ot(a)}var rm=(a,e)=>he(a.innerType._def,e);var nm=(a,e,t)=>{switch(e){case Te.ZodFirstPartyTypeKind.ZodString:return zs(a,t);case Te.ZodFirstPartyTypeKind.ZodNumber:return Wp(a,t);case Te.ZodFirstPartyTypeKind.ZodObject:return Gp(a,t);case Te.ZodFirstPartyTypeKind.ZodBigInt:return Dp(a,t);case Te.ZodFirstPartyTypeKind.ZodBoolean:return Op();case Te.ZodFirstPartyTypeKind.ZodDate:return vl(a,t);case Te.ZodFirstPartyTypeKind.ZodUndefined:return em(t);case Te.ZodFirstPartyTypeKind.ZodNull:return Hp(t);case Te.ZodFirstPartyTypeKind.ZodArray:return Cp(a,t);case Te.ZodFirstPartyTypeKind.ZodUnion:case Te.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return Bp(a,t);case Te.ZodFirstPartyTypeKind.ZodIntersection:return Fp(a,t);case Te.ZodFirstPartyTypeKind.ZodTuple:return Xp(a,t);case Te.ZodFirstPartyTypeKind.ZodRecord:return qs(a,t);case Te.ZodFirstPartyTypeKind.ZodLiteral:return Np(a,t);case Te.ZodFirstPartyTypeKind.ZodEnum:return Lp(a);case Te.ZodFirstPartyTypeKind.ZodNativeEnum:return qp(a);case Te.ZodFirstPartyTypeKind.ZodNullable:return Vp(a,t);case Te.ZodFirstPartyTypeKind.ZodOptional:return Kp(a,t);case Te.ZodFirstPartyTypeKind.ZodMap:return zp(a,t);case Te.ZodFirstPartyTypeKind.ZodSet:return Jp(a,t);case Te.ZodFirstPartyTypeKind.ZodLazy:return()=>a.getter()._def;case Te.ZodFirstPartyTypeKind.ZodPromise:return Qp(a,t);case Te.ZodFirstPartyTypeKind.ZodNaN:case Te.ZodFirstPartyTypeKind.ZodNever:return Up(t);case Te.ZodFirstPartyTypeKind.ZodEffects:return Mp(a,t);case Te.ZodFirstPartyTypeKind.ZodAny:return ot(t);case Te.ZodFirstPartyTypeKind.ZodUnknown:return tm(t);case Te.ZodFirstPartyTypeKind.ZodDefault:return Ip(a,t);case Te.ZodFirstPartyTypeKind.ZodBranded:return js(a,t);case Te.ZodFirstPartyTypeKind.ZodReadonly:return rm(a,t);case Te.ZodFirstPartyTypeKind.ZodCatch:return $p(a,t);case Te.ZodFirstPartyTypeKind.ZodPipeline:return Yp(a,t);case Te.ZodFirstPartyTypeKind.ZodFunction:case Te.ZodFirstPartyTypeKind.ZodVoid:case Te.ZodFirstPartyTypeKind.ZodSymbol:return;default:return(s=>{})(e)}};function he(a,e,t=!1){let s=e.seen.get(a);if(e.override){let u=e.override?.(a,e,s,t);if(u!==Rp)return u}if(s&&!t){let u=sE(s,e);if(u!==void 0)return u}let r={def:a,path:e.currentPath,jsonSchema:void 0};e.seen.set(a,r);let c=nm(a,a.typeName,e),l=typeof c=="function"?he(c(),e):c;if(l&&oE(a,e,l),e.postProcess){let u=e.postProcess(l,a,e);return r.jsonSchema=l,u}return r.jsonSchema=l,l}var sE=(a,e)=>{switch(e.$refStrategy){case"root":return{$ref:a.path.join("/")};case"relative":return{$ref:Ns(e.currentPath,a.path)};case"none":case"seen":return a.path.length<e.currentPath.length&&a.path.every((t,s)=>e.currentPath[s]===t)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),ot(e)):e.$refStrategy==="seen"?ot(e):void 0}},oE=(a,e,t)=>(a.description&&(t.description=a.description,e.markdownDescription&&(t.markdownDescription=a.description)),t);var Us=(a,e)=>{let t=kp(e),s=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((d,[h,m])=>({...d,[h]:he(m._def,{...t,currentPath:[...t.basePath,t.definitionPath,h]},!0)??ot(t)}),{}):void 0,r=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,c=he(a._def,r===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,r]},!1)??ot(t),l=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;l!==void 0&&(c.title=l),t.flags.hasReferencedOpenAiAnyType&&(s||(s={}),s[t.openAiAnyTypeName]||(s[t.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:t.$refStrategy==="relative"?"1":[...t.basePath,t.definitionPath,t.openAiAnyTypeName].join("/")}}));let u=r===void 0?s?{...c,[t.definitionPath]:s}:c:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,r].join("/"),[t.definitionPath]:{...s,[r]:c}};return t.target==="jsonSchema7"?u.$schema="http://json-schema.org/draft-07/schema#":(t.target==="jsonSchema2019-09"||t.target==="openAi")&&(u.$schema="https://json-schema.org/draft/2019-09/schema#"),t.target==="openAi"&&("anyOf"in u||"oneOf"in u||"allOf"in u||"type"in u&&Array.isArray(u.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),u};var ba=require("zod");var am=require("zod"),bl;(function(a){a.Completable="McpCompletable"})(bl||(bl={}));var ya=class extends am.ZodType{_parse(e){let{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}};ya.create=(a,e)=>new ya({type:a,typeName:bl.Completable,complete:e.complete,...cE(e)});function cE(a){if(!a)return{};let{errorMap:e,invalid_type_error:t,required_error:s,description:r}=a;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(l,u)=>{var d,h;let{message:m}=a;return l.code==="invalid_enum_value"?{message:m??u.defaultError}:typeof u.data>"u"?{message:(d=m??s)!==null&&d!==void 0?d:u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:(h=m??t)!==null&&h!==void 0?h:u.defaultError}},description:r}}var Zs=class{constructor(e,t){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new Fs(e,t)}async connect(e){return await this.server.connect(e)}async close(){await this.server.close()}setToolRequestHandlers(){this._toolHandlersInitialized||(this.server.assertCanSetRequestHandler(ms.shape.method.value),this.server.assertCanSetRequestHandler(gs.shape.method.value),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(ms,()=>({tools:Object.entries(this._registeredTools).filter(([,e])=>e.enabled).map(([e,t])=>{let s={name:e,title:t.title,description:t.description,inputSchema:t.inputSchema?Us(t.inputSchema,{strictUnions:!0}):lE,annotations:t.annotations,_meta:t._meta};return t.outputSchema&&(s.outputSchema=Us(t.outputSchema,{strictUnions:!0})),s})})),this.server.setRequestHandler(gs,async(e,t)=>{let s=this._registeredTools[e.params.name];if(!s)throw new rt(tt.InvalidParams,`Tool ${e.params.name} not found`);if(!s.enabled)throw new rt(tt.InvalidParams,`Tool ${e.params.name} disabled`);let r;if(s.inputSchema){let c=await s.inputSchema.safeParseAsync(e.params.arguments);if(!c.success)throw new rt(tt.InvalidParams,`Invalid arguments for tool ${e.params.name}: ${c.error.message}`);let l=c.data,u=s.callback;try{r=await Promise.resolve(u(l,t))}catch(d){r={content:[{type:"text",text:d instanceof Error?d.message:String(d)}],isError:!0}}}else{let c=s.callback;try{r=await Promise.resolve(c(t))}catch(l){r={content:[{type:"text",text:l instanceof Error?l.message:String(l)}],isError:!0}}}if(s.outputSchema&&!r.isError){if(!r.structuredContent)throw new rt(tt.InvalidParams,`Tool ${e.params.name} has an output schema but no structured content was provided`);let c=await s.outputSchema.safeParseAsync(r.structuredContent);if(!c.success)throw new rt(tt.InvalidParams,`Invalid structured content for tool ${e.params.name}: ${c.error.message}`)}return r}),this._toolHandlersInitialized=!0)}setCompletionRequestHandler(){this._completionHandlerInitialized||(this.server.assertCanSetRequestHandler(vs.shape.method.value),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler(vs,async e=>{switch(e.params.ref.type){case"ref/prompt":return this.handlePromptCompletion(e,e.params.ref);case"ref/resource":return this.handleResourceCompletion(e,e.params.ref);default:throw new rt(tt.InvalidParams,`Invalid completion reference: ${e.params.ref}`)}}),this._completionHandlerInitialized=!0)}async handlePromptCompletion(e,t){let s=this._registeredPrompts[t.name];if(!s)throw new rt(tt.InvalidParams,`Prompt ${t.name} not found`);if(!s.enabled)throw new rt(tt.InvalidParams,`Prompt ${t.name} disabled`);if(!s.argsSchema)return Hs;let r=s.argsSchema.shape[e.params.argument.name];if(!(r instanceof ya))return Hs;let l=await r._def.complete(e.params.argument.value,e.params.context);return sm(l)}async handleResourceCompletion(e,t){let s=Object.values(this._registeredResourceTemplates).find(l=>l.resourceTemplate.uriTemplate.toString()===t.uri);if(!s){if(this._registeredResources[t.uri])return Hs;throw new rt(tt.InvalidParams,`Resource template ${e.params.ref.uri} not found`)}let r=s.resourceTemplate.completeCallback(e.params.argument.name);if(!r)return Hs;let c=await r(e.params.argument.value,e.params.context);return sm(c)}setResourceRequestHandlers(){this._resourceHandlersInitialized||(this.server.assertCanSetRequestHandler(us.shape.method.value),this.server.assertCanSetRequestHandler(ds.shape.method.value),this.server.assertCanSetRequestHandler(fs.shape.method.value),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(us,async(e,t)=>{let s=Object.entries(this._registeredResources).filter(([c,l])=>l.enabled).map(([c,l])=>({uri:c,name:l.name,...l.metadata})),r=[];for(let c of Object.values(this._registeredResourceTemplates)){if(!c.resourceTemplate.listCallback)continue;let l=await c.resourceTemplate.listCallback(t);for(let u of l.resources)r.push({...c.metadata,...u})}return{resources:[...s,...r]}}),this.server.setRequestHandler(ds,async()=>({resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([t,s])=>({name:t,uriTemplate:s.resourceTemplate.uriTemplate.toString(),...s.metadata}))})),this.server.setRequestHandler(fs,async(e,t)=>{let s=new URL(e.params.uri),r=this._registeredResources[s.toString()];if(r){if(!r.enabled)throw new rt(tt.InvalidParams,`Resource ${s} disabled`);return r.readCallback(s,t)}for(let c of Object.values(this._registeredResourceTemplates)){let l=c.resourceTemplate.uriTemplate.match(s.toString());if(l)return c.readCallback(s,l,t)}throw new rt(tt.InvalidParams,`Resource ${s} not found`)}),this.setCompletionRequestHandler(),this._resourceHandlersInitialized=!0)}setPromptRequestHandlers(){this._promptHandlersInitialized||(this.server.assertCanSetRequestHandler(hs.shape.method.value),this.server.assertCanSetRequestHandler(ps.shape.method.value),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(hs,()=>({prompts:Object.entries(this._registeredPrompts).filter(([,e])=>e.enabled).map(([e,t])=>({name:e,title:t.title,description:t.description,arguments:t.argsSchema?dE(t.argsSchema):void 0}))})),this.server.setRequestHandler(ps,async(e,t)=>{let s=this._registeredPrompts[e.params.name];if(!s)throw new rt(tt.InvalidParams,`Prompt ${e.params.name} not found`);if(!s.enabled)throw new rt(tt.InvalidParams,`Prompt ${e.params.name} disabled`);if(s.argsSchema){let r=await s.argsSchema.safeParseAsync(e.params.arguments);if(!r.success)throw new rt(tt.InvalidParams,`Invalid arguments for prompt ${e.params.name}: ${r.error.message}`);let c=r.data,l=s.callback;return await Promise.resolve(l(c,t))}else{let r=s.callback;return await Promise.resolve(r(t))}}),this.setCompletionRequestHandler(),this._promptHandlersInitialized=!0)}resource(e,t,...s){let r;typeof s[0]=="object"&&(r=s.shift());let c=s[0];if(typeof t=="string"){if(this._registeredResources[t])throw new Error(`Resource ${t} is already registered`);let l=this._createRegisteredResource(e,void 0,t,r,c);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),l}else{if(this._registeredResourceTemplates[e])throw new Error(`Resource template ${e} is already registered`);let l=this._createRegisteredResourceTemplate(e,void 0,t,r,c);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),l}}registerResource(e,t,s,r){if(typeof t=="string"){if(this._registeredResources[t])throw new Error(`Resource ${t} is already registered`);let c=this._createRegisteredResource(e,s.title,t,s,r);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),c}else{if(this._registeredResourceTemplates[e])throw new Error(`Resource template ${e} is already registered`);let c=this._createRegisteredResourceTemplate(e,s.title,t,s,r);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),c}}_createRegisteredResource(e,t,s,r,c){let l={name:e,title:t,metadata:r,readCallback:c,enabled:!0,disable:()=>l.update({enabled:!1}),enable:()=>l.update({enabled:!0}),remove:()=>l.update({uri:null}),update:u=>{typeof u.uri<"u"&&u.uri!==s&&(delete this._registeredResources[s],u.uri&&(this._registeredResources[u.uri]=l)),typeof u.name<"u"&&(l.name=u.name),typeof u.title<"u"&&(l.title=u.title),typeof u.metadata<"u"&&(l.metadata=u.metadata),typeof u.callback<"u"&&(l.readCallback=u.callback),typeof u.enabled<"u"&&(l.enabled=u.enabled),this.sendResourceListChanged()}};return this._registeredResources[s]=l,l}_createRegisteredResourceTemplate(e,t,s,r,c){let l={resourceTemplate:s,title:t,metadata:r,readCallback:c,enabled:!0,disable:()=>l.update({enabled:!1}),enable:()=>l.update({enabled:!0}),remove:()=>l.update({name:null}),update:u=>{typeof u.name<"u"&&u.name!==e&&(delete this._registeredResourceTemplates[e],u.name&&(this._registeredResourceTemplates[u.name]=l)),typeof u.title<"u"&&(l.title=u.title),typeof u.template<"u"&&(l.resourceTemplate=u.template),typeof u.metadata<"u"&&(l.metadata=u.metadata),typeof u.callback<"u"&&(l.readCallback=u.callback),typeof u.enabled<"u"&&(l.enabled=u.enabled),this.sendResourceListChanged()}};return this._registeredResourceTemplates[e]=l,l}_createRegisteredPrompt(e,t,s,r,c){let l={title:t,description:s,argsSchema:r===void 0?void 0:ba.z.object(r),callback:c,enabled:!0,disable:()=>l.update({enabled:!1}),enable:()=>l.update({enabled:!0}),remove:()=>l.update({name:null}),update:u=>{typeof u.name<"u"&&u.name!==e&&(delete this._registeredPrompts[e],u.name&&(this._registeredPrompts[u.name]=l)),typeof u.title<"u"&&(l.title=u.title),typeof u.description<"u"&&(l.description=u.description),typeof u.argsSchema<"u"&&(l.argsSchema=ba.z.object(u.argsSchema)),typeof u.callback<"u"&&(l.callback=u.callback),typeof u.enabled<"u"&&(l.enabled=u.enabled),this.sendPromptListChanged()}};return this._registeredPrompts[e]=l,l}_createRegisteredTool(e,t,s,r,c,l,u,d){let h={title:t,description:s,inputSchema:r===void 0?void 0:ba.z.object(r),outputSchema:c===void 0?void 0:ba.z.object(c),annotations:l,_meta:u,callback:d,enabled:!0,disable:()=>h.update({enabled:!1}),enable:()=>h.update({enabled:!0}),remove:()=>h.update({name:null}),update:m=>{typeof m.name<"u"&&m.name!==e&&(delete this._registeredTools[e],m.name&&(this._registeredTools[m.name]=h)),typeof m.title<"u"&&(h.title=m.title),typeof m.description<"u"&&(h.description=m.description),typeof m.paramsSchema<"u"&&(h.inputSchema=ba.z.object(m.paramsSchema)),typeof m.callback<"u"&&(h.callback=m.callback),typeof m.annotations<"u"&&(h.annotations=m.annotations),typeof m._meta<"u"&&(h._meta=m._meta),typeof m.enabled<"u"&&(h.enabled=m.enabled),this.sendToolListChanged()}};return this._registeredTools[e]=h,this.setToolRequestHandlers(),this.sendToolListChanged(),h}tool(e,...t){if(this._registeredTools[e])throw new Error(`Tool ${e} is already registered`);let s,r,c,l;if(typeof t[0]=="string"&&(s=t.shift()),t.length>1){let d=t[0];im(d)?(r=t.shift(),t.length>1&&typeof t[0]=="object"&&t[0]!==null&&!im(t[0])&&(l=t.shift())):typeof d=="object"&&d!==null&&(l=t.shift())}let u=t[0];return this._createRegisteredTool(e,void 0,s,r,c,l,void 0,u)}registerTool(e,t,s){if(this._registeredTools[e])throw new Error(`Tool ${e} is already registered`);let{title:r,description:c,inputSchema:l,outputSchema:u,annotations:d,_meta:h}=t;return this._createRegisteredTool(e,r,c,l,u,d,h,s)}prompt(e,...t){if(this._registeredPrompts[e])throw new Error(`Prompt ${e} is already registered`);let s;typeof t[0]=="string"&&(s=t.shift());let r;t.length>1&&(r=t.shift());let c=t[0],l=this._createRegisteredPrompt(e,void 0,s,r,c);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),l}registerPrompt(e,t,s){if(this._registeredPrompts[e])throw new Error(`Prompt ${e} is already registered`);let{title:r,description:c,argsSchema:l}=t,u=this._createRegisteredPrompt(e,r,c,l,s);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),u}isConnected(){return this.server.transport!==void 0}async sendLoggingMessage(e,t){return this.server.sendLoggingMessage(e,t)}sendResourceListChanged(){this.isConnected()&&this.server.sendResourceListChanged()}sendToolListChanged(){this.isConnected()&&this.server.sendToolListChanged()}sendPromptListChanged(){this.isConnected()&&this.server.sendPromptListChanged()}};var lE={type:"object",properties:{}};function im(a){return typeof a!="object"||a===null?!1:Object.keys(a).length===0||Object.values(a).some(uE)}function uE(a){return a!==null&&typeof a=="object"&&"parse"in a&&typeof a.parse=="function"&&"safeParse"in a&&typeof a.safeParse=="function"}function dE(a){return Object.entries(a.shape).map(([e,t])=>({name:e,description:t.description,required:!t.isOptional()}))}function sm(a){return{completion:{values:a.slice(0,100),total:a.length,hasMore:a.length>100}}}var Hs={completion:{values:[],hasMore:!1}};var Pe=require("zod");var om=$c(require("axios"),1),Bs=class{constructor(e){this.accessToken=e,this.client=om.default.create({baseURL:"https://api.tessie.com",timeout:3e4,headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})}async getVehicleState(e,t=!0){try{return(await this.client.get(`/${e}/state${t?"?use_cache=true":""}`)).data}catch(s){throw new Error(`Failed to get vehicle state: ${s}`)}}async getVehicleStates(e,t,s){try{let r=new URLSearchParams;return t&&r.append("start",t),s&&r.append("end",s),(await this.client.get(`/${e}/states?${r.toString()}`)).data}catch(r){throw new Error(`Failed to get vehicle states: ${r}`)}}async getVehicleLocation(e){try{return(await this.client.get(`/${e}/location`)).data}catch(t){throw new Error(`Failed to get vehicle location: ${t}`)}}async getDrives(e,t,s,r=50){try{let c=new URLSearchParams;t&&c.append("start",t),s&&c.append("end",s),c.append("limit",r.toString());let l=await this.client.get(`/${e}/drives?${c.toString()}`);return l.data&&typeof l.data=="object"&&"results"in l.data?l.data.results:l.data}catch(c){throw new Error(`Failed to get drives: ${c}`)}}async getDrivingPath(e,t,s){try{let r=new URLSearchParams;return r.append("start",t),r.append("end",s),(await this.client.get(`/${e}/path?${r.toString()}`)).data}catch(r){throw new Error(`Failed to get driving path: ${r}`)}}async getVehicles(){try{let e=await this.client.get("/vehicles"),t;return e.data&&typeof e.data=="object"&&"results"in e.data?t=e.data.results:t=e.data,t.map(s=>({vin:s.vin,display_name:s.last_state?.vehicle_state?.vehicle_name||s.display_name||`Vehicle ${s.vin.slice(-6)}`}))}catch(e){throw new Error(`Failed to get vehicles: ${e}`)}}};var Vs=class{analyzeQuery(e,t,s=1){let r=1,c=1,l=1,u=[];switch(e){case"get_driving_history":r=30,c=50*s,l=1,t.limit&&t.limit>100&&(u.push("Consider reducing limit to 100 or less for better performance"),r+=10);let d=this.calculateDateRange(t.start_date,t.end_date);d>90&&(u.push("Large date ranges may cause timeouts. Consider smaller chunks."),r+=20,l=Math.ceil(d/30));break;case"get_weekly_mileage":r=35,c=30*s,l=1,this.calculateDateRange(t.start_date,t.end_date)>30&&(u.push("Weekly breakdowns work best for 1-month periods"),r+=15);break;case"get_vehicle_current_state":r=5,c=2,l=1,t.use_cache===!1&&(u.push("Consider using cache to avoid waking the vehicle"),r+=5);break;case"analyze_latest_drive":r=40,c=25,l=1,t.days_back&&t.days_back>7&&(u.push("Consider limiting search to 7 days for faster analysis"),r+=10);break;default:r=10,c=5}return{estimatedResponseSize:c,complexity:r,apiCallsRequired:l,suggestions:u}}optimizeForMCP(e,t){let s=this.analyzeQuery(e,t),r={...t},c=[];switch(e){case"get_driving_history":(!t.limit||t.limit>50)&&(r.limit=50,c.push("Reduced limit to 50 for optimal MCP performance")),this.calculateDateRange(t.start_date,t.end_date)>30&&(r.chunked=!0,c.push("Large date range will be automatically chunked"));break;case"get_weekly_mileage":if(this.calculateDateRange(t.start_date,t.end_date)>30){let h=new Date(t.start_date);h.setDate(h.getDate()+30),r.end_date=h.toISOString(),c.push("Limited to 30-day window for weekly breakdown")}break;case"get_vehicle_current_state":t.use_cache===!1&&(r.use_cache=!0,c.push("Enabled cache to prevent vehicle wake-up"));break;case"analyze_latest_drive":(!t.days_back||t.days_back>14)&&(r.days_back=7,c.push("Limited search to 7 days for optimal performance"));break}let l=this.analyzeQuery(e,r);return{isOptimized:l.complexity<s.complexity,originalComplexity:s.complexity,optimizedComplexity:l.complexity,recommendations:[...s.suggestions,...c],optimizedParameters:r}}calculateDateRange(e,t){if(!e||!t)return 7;let s=new Date(e),r=new Date(t),c=Math.abs(r.getTime()-s.getTime());return Math.ceil(c/(1e3*60*60*24))}parseNaturalLanguage(e){let t=e.toLowerCase();if((t.includes("latest")||t.includes("last")||t.includes("recent"))&&(t.includes("drive")||t.includes("trip"))&&(t.includes("analyz")||t.includes("detail")||t.includes("how long")||t.includes("battery")||t.includes("fsd")||t.includes("duration")))return{operation:"analyze_latest_drive",parameters:{days_back:t.includes("yesterday")?2:t.includes("today")?1:7},confidence:.95};if((t.includes("finish")||t.includes("completed")||t.includes("just drove"))&&(t.includes("how long")||t.includes("battery")||t.includes("duration")||t.includes("analyz")||t.includes("fsd")))return{operation:"analyze_latest_drive",parameters:{days_back:1},confidence:.9};if((t.includes("week")||t.includes("month"))&&(t.includes("mile")||t.includes("driv"))){let s=this.extractTimeFrame(e);return t.includes("week by week")||t.includes("weekly breakdown")||t.includes("break")||t.includes("basis")?{operation:"get_weekly_mileage",parameters:s,confidence:.95}:{operation:"get_weekly_mileage",parameters:s,confidence:.9}}return t.includes("driv")&&(t.includes("history")||t.includes("trip"))?{operation:"get_driving_history",parameters:{...this.extractTimeFrame(e),limit:50},confidence:.8}:t.includes("location")||t.includes("place")||t.includes("where")?{operation:"get_mileage_at_location",parameters:{...this.extractTimeFrame(e),location:"extracted_location"},confidence:.6}:t.includes("current")||t.includes("now")||t.includes("status")?{operation:"get_vehicle_current_state",parameters:{use_cache:!0},confidence:.8}:t.includes("vehicle")&&(t.includes("list")||t.includes("all"))?{operation:"get_vehicles",parameters:{},confidence:.8}:{operation:"unknown",parameters:{},confidence:0}}extractTimeFrame(e){let t=new Date,s=e.toLowerCase();if(s.includes("last month")||s.includes("previous month")){let l=new Date(t);l.setMonth(l.getMonth()-1),l.setDate(1),l.setHours(0,0,0,0);let u=new Date(l);return u.setMonth(u.getMonth()+1),u.setDate(0),u.setHours(23,59,59,999),{start_date:l.toISOString(),end_date:u.toISOString()}}if(s.includes("this month")||s.includes("current month")){let l=new Date(t);return l.setDate(1),l.setHours(0,0,0,0),{start_date:l.toISOString(),end_date:t.toISOString()}}if(s.includes("last week")||s.includes("previous week")){let l=new Date(t);return l.setDate(l.getDate()-7),l.setHours(0,0,0,0),{start_date:l.toISOString(),end_date:t.toISOString()}}if(s.includes("this week")){let l=new Date(t),u=l.getDay(),d=u===0?6:u-1;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),{start_date:l.toISOString(),end_date:t.toISOString()}}let r=s.match(/last (\d+) days?/);if(r){let l=parseInt(r[1]),u=new Date(t);return u.setDate(u.getDate()-l),u.setHours(0,0,0,0),{start_date:u.toISOString(),end_date:t.toISOString()}}if(s.includes("today")){let l=new Date(t);return l.setHours(0,0,0,0),{start_date:l.toISOString(),end_date:t.toISOString()}}if(s.includes("yesterday")){let l=new Date(t);l.setDate(l.getDate()-1),l.setHours(0,0,0,0);let u=new Date(l);return u.setHours(23,59,59,999),{start_date:l.toISOString(),end_date:u.toISOString()}}let c=new Date(t);return c.setDate(c.getDate()-30),c.setHours(0,0,0,0),{start_date:c.toISOString(),end_date:t.toISOString()}}};var Ws=class{mergeDrives(e){if(e.length===0)return[];let t=[...e].sort((c,l)=>c.started_at-l.started_at),s=[],r=[t[0]];for(let c=1;c<t.length;c++){let l=t[c-1],u=t[c],d=(u.started_at-l.ended_at)/60;this.shouldMergeDrives(l,u,d)?r.push(u):(s.push(this.createMergedDrive(r)),r=[u])}return r.length>0&&s.push(this.createMergedDrive(r)),s}shouldMergeDrives(e,t,s){return s<7||t.starting_battery-e.ending_battery>5}createMergedDrive(e){if(e.length===0)throw new Error("Cannot create merged drive from empty array");let t=e[0],s=e[e.length-1],r=[];for(let v=0;v<e.length-1;v++){let p=e[v],y=e[v+1],E=(y.started_at-p.ended_at)/60;if(E>0){let R=y.starting_battery-p.ending_battery>5?"charging":E<7?"short":"excluded";r.push({location:p.ending_location,duration_minutes:Math.round(E*100)/100,stop_type:R,started_at:p.ended_at,ended_at:y.started_at})}}let c=e.reduce((v,p)=>v+p.odometer_distance,0),l=(s.ended_at-t.started_at)/60,u=e.reduce((v,p)=>v+(p.ended_at-p.started_at)/60,0),d=Math.max(...e.map(v=>v.max_speed||0)),h=c>0?c/(u/60):0,m={id:`merged_${e.map(v=>v.id).join("_")}`,originalDriveIds:e.map(v=>v.id),started_at:t.started_at,ended_at:s.ended_at,starting_location:t.starting_location,ending_location:s.ending_location,starting_battery:t.starting_battery,ending_battery:s.ending_battery,total_distance:Math.round(c*100)/100,total_duration_minutes:Math.round(l*100)/100,driving_duration_minutes:Math.round(u*100)/100,stops:r,autopilot_distance:0,autopilot_percentage:0,energy_consumed:t.starting_battery-s.ending_battery,average_speed:Math.round(h*100)/100,max_speed:Math.round(d*100)/100},g=this.predictAutopilotUsage(m);return m.autopilot_distance=g,m.autopilot_percentage=c>0?Math.round(g/c*1e4)/100:0,m}analyzeLatestDrive(e){if(e.length===0)return null;let t=this.mergeDrives(e);if(t.length===0)return null;let s=t[t.length-1],r=this.analyzeBatteryConsumption(s),c=this.analyzeFSDUsage(s),l=this.generateDriveSummary(s,r,c);return{mergedDrive:s,batteryConsumption:r,fsdAnalysis:c,summary:l}}analyzeBatteryConsumption(e){let t=Math.round(e.energy_consumed*100)/100,r=Math.round(t/100*75*100)/100,c=e.total_distance>0&&r>0?Math.round(e.total_distance/r*100)/100:void 0;return{percentage_used:t,estimated_kwh_used:r,efficiency_miles_per_kwh:c}}analyzeFSDUsage(e){let t=this.predictAutopilotUsage(e),s=e.total_distance>0?Math.round(t/e.total_distance*1e4)/100:0;return{total_autopilot_miles:t,fsd_percentage:s,autopilot_available:!0,note:t>0?"Estimated based on highway driving patterns and speed consistency":"Low probability of FSD usage detected from driving patterns"}}predictAutopilotUsage(e){if(e.total_distance<5)return 0;let t=0;e.average_speed>45?t+=.4:e.average_speed>35&&(t+=.2),e.total_distance>30?t+=.3:e.total_distance>15?t+=.2:e.total_distance>10&&(t+=.1);let s=this.calculateSpeedConsistency(e);t+=s*.2,e.total_distance/(e.driving_duration_minutes/60)>50&&e.driving_duration_minutes>30&&(t+=.1),t=Math.min(t,.9);let c=e.total_distance*t;return Math.round(c*100)/100}calculateSpeedConsistency(e){if(e.average_speed===0||e.max_speed===0)return 0;let t=e.average_speed/e.max_speed;return t>.85?1:t>.75?.8:t>.65?.6:t>.55?.4:.2}generateDriveSummary(e,t,s){let r=e.total_duration_minutes,c=e.driving_duration_minutes,l=r-c,u=`Drive from ${e.starting_location} to ${e.ending_location}:
`;if(u+=`\u2022 Total time: ${Math.floor(r/60)}h ${Math.round(r%60)}m
`,u+=`\u2022 Driving time: ${Math.floor(c/60)}h ${Math.round(c%60)}m
`,l>1){if(u+=`\u2022 Stop time: ${Math.floor(l/60)}h ${Math.round(l%60)}m`,e.stops.length>0){let d=e.stops.filter(m=>m.stop_type==="charging").length,h=e.stops.filter(m=>m.stop_type==="short").length;d>0&&(u+=` (${d} charging stop${d>1?"s":""})`),h>0&&(u+=` (${h} short stop${h>1?"s":""})`)}u+=`
`}return u+=`\u2022 Distance: ${e.total_distance} miles
`,u+=`\u2022 Average speed: ${e.average_speed} mph (max: ${e.max_speed} mph)
`,u+=`\u2022 Battery used: ${t.percentage_used}% (\u2248${t.estimated_kwh_used} kWh)
`,t.efficiency_miles_per_kwh&&(u+=`\u2022 Efficiency: ${t.efficiency_miles_per_kwh} mi/kWh
`),s.autopilot_available&&s.total_autopilot_miles>0?u+=`\u2022 FSD/Autopilot: ${s.total_autopilot_miles} miles (${s.fsd_percentage}% of drive)`:u+=`\u2022 FSD/Autopilot: ${s.note||"Data not available"}`,u}};var Ja=class{constructor(e){this.customRates=e;this.defaultRates={home_rate_per_kwh:.13,supercharger_rate_per_kwh:.28,public_rate_per_kwh:.2,work_rate_per_kwh:0,time_of_use:{off_peak:{hours:"23:00-07:00",rate:.09},peak:{hours:"16:00-21:00",rate:.32}}};this.homeLocations=new Set;this.workLocations=new Set;this.frequentLocations=new Map;e&&(this.defaultRates={...this.defaultRates,...e})}detectChargingSessions(e){let t=[],s=[...e].sort((r,c)=>r.started_at-c.started_at);for(let r=1;r<s.length;r++){let c=s[r-1],l=s[r],u=l.starting_battery-c.ending_battery;if(u>2){let d=this.createChargingSession(c,l,u);t.push(d)}}return t}createChargingSession(e,t,s){let r=(t.started_at-e.ended_at)/60,c=e.ending_location,l=this.classifyLocation(c,r,s),d=s/100*75,h=r>0?d/(r/60):0,m=this.getRateForLocation(l,e.ended_at),g=d*m,v=d*4;return{id:`charge_${e.id}_${t.id}`,started_at:e.ended_at,ended_at:t.started_at,location:c,location_type:l,starting_battery:e.ending_battery,ending_battery:t.starting_battery,energy_added_kwh:Math.round(d*100)/100,cost_estimate:Math.round(g*100)/100,cost_per_kwh:m,miles_added:Math.round(v*100)/100,charge_rate_kw:Math.round(h*10)/10,duration_minutes:Math.round(r*100)/100}}classifyLocation(e,t,s){let r=e.toLowerCase();if(r.includes("supercharger")||r.includes("tesla")||t<60&&s>40)return"supercharger";if(this.homeLocations.has(e))return"home";if(this.workLocations.has(e))return"work";if(t>240){let c=this.frequentLocations.get(e)||0;return this.frequentLocations.set(e,c+1),c>5?(this.homeLocations.add(e),"home"):t>480?"home":"work"}return t>30&&t<240?"public":"unknown"}getRateForLocation(e,t){let s=new Date(t*1e3).getHours();switch(e){case"home":if(this.defaultRates.time_of_use){if(s>=23||s<7)return this.defaultRates.time_of_use.off_peak.rate;if(s>=16&&s<21)return this.defaultRates.time_of_use.peak.rate}return this.defaultRates.home_rate_per_kwh;case"supercharger":return this.defaultRates.supercharger_rate_per_kwh;case"public":return this.defaultRates.public_rate_per_kwh;case"work":return this.defaultRates.work_rate_per_kwh;default:return this.defaultRates.public_rate_per_kwh}}analyzeChargingCosts(e){if(e.length===0)return{total_sessions:0,total_cost:0,total_kwh:0,total_miles_added:0,average_cost_per_session:0,average_cost_per_kwh:0,average_cost_per_mile:0,sessions_by_location:{home:{sessions:0,cost:0,kwh:0},supercharger:{sessions:0,cost:0,kwh:0},public:{sessions:0,cost:0,kwh:0},work:{sessions:0,cost:0,kwh:0},unknown:{sessions:0,cost:0,kwh:0}},recommendations:["No charging sessions found in the selected period"],potential_savings:0};let t=e.reduce((d,h)=>d+h.cost_estimate,0),s=e.reduce((d,h)=>d+h.energy_added_kwh,0),r=e.reduce((d,h)=>d+h.miles_added,0),c={home:{sessions:0,cost:0,kwh:0},supercharger:{sessions:0,cost:0,kwh:0},public:{sessions:0,cost:0,kwh:0},work:{sessions:0,cost:0,kwh:0},unknown:{sessions:0,cost:0,kwh:0}};e.forEach(d=>{let h=c[d.location_type];h.sessions++,h.cost+=d.cost_estimate,h.kwh+=d.energy_added_kwh});let l=this.generateRecommendations(e,c),u=this.calculatePotentialSavings(e,c);return{total_sessions:e.length,total_cost:Math.round(t*100)/100,total_kwh:Math.round(s*100)/100,total_miles_added:Math.round(r*100)/100,average_cost_per_session:Math.round(t/e.length*100)/100,average_cost_per_kwh:Math.round(t/s*100)/100,average_cost_per_mile:Math.round(t/r*1e3)/1e3,sessions_by_location:c,recommendations:l,potential_savings:Math.round(u*100)/100}}generateRecommendations(e,t){let s=[],r=t.supercharger.cost/e.reduce((u,d)=>u+d.cost_estimate,0)*100;r>30&&s.push(`\u{1F4A1} ${Math.round(r)}% of charging costs are from Superchargers. Increase home charging to save ~$${Math.round(t.supercharger.cost*.5)}/month`);let c=e.filter(u=>{let d=new Date(u.started_at*1e3).getHours();return u.location_type==="home"&&d>=16&&d<21});if(c.length>0){let u=c.reduce((d,h)=>d+h.cost_estimate,0);s.push(`\u26A1 Shift ${c.length} peak-hour charging sessions to overnight to save ~$${Math.round(u*.6)}/month`)}let l=e.reduce((u,d)=>u+(d.charge_rate_kw||0),0)/e.length;return l<7&&t.home.sessions>0&&s.push(`\u{1F50C} Your average home charge rate is ${l.toFixed(1)}kW. Consider installing a Level 2 charger for faster charging`),t.work.sessions===0&&e.length>10&&s.push("\u{1F3E2} No workplace charging detected. Check if your employer offers free EV charging"),s.length>0?s:["\u2705 Your charging strategy is well optimized!"]}calculatePotentialSavings(e,t){let s=0,r=t.supercharger.kwh,c=this.defaultRates.time_of_use?.off_peak.rate||this.defaultRates.home_rate_per_kwh;s+=r*(this.defaultRates.supercharger_rate_per_kwh-c)*.5;let u=e.filter(d=>{let h=new Date(d.started_at*1e3).getHours();return d.location_type==="home"&&h>=16&&h<21}).reduce((d,h)=>d+h.energy_added_kwh,0);return this.defaultRates.time_of_use&&(s+=u*(this.defaultRates.time_of_use.peak.rate-this.defaultRates.time_of_use.off_peak.rate)),s}learnLocations(e){let t=new Map;for(let c=1;c<e.length;c++){let l=e[c-1],u=e[c],d=l.ending_location,h=(u.started_at-l.ended_at)/3600,m=t.get(d)||{count:0,overnight:0,duration:0};m.count++,m.duration+=h;let g=new Date(l.ended_at*1e3).getHours(),v=new Date(u.started_at*1e3).getHours();(g>20||g<6)&&h>6&&m.overnight++,t.set(d,m)}let s=0,r="";t.forEach((c,l)=>{c.overnight>s&&(s=c.overnight,r=l)}),r&&this.homeLocations.add(r),t.forEach((c,l)=>{c.count>10&&c.duration/c.count>6&&!this.homeLocations.has(l)&&this.workLocations.add(l)})}};var Gs=class{constructor(){this.BATTERY_CAPACITY_KWH=75;this.DEFAULT_HOME_RATE=.13;this.DEFAULT_SUPERCHARGER_RATE=.28;this.DEFAULT_GAS_PRICE=4.5;this.DEFAULT_MPG=30;this.CO2_PER_GALLON=19.6;this.CO2_PER_KWH_GRID=.855}calculateTripCost(e,t=this.DEFAULT_HOME_RATE,s=this.DEFAULT_SUPERCHARGER_RATE,r=this.DEFAULT_GAS_PRICE){if(e.length===0)return this.emptyAnalysis();let c=[...e].sort((b,R)=>b.started_at-R.started_at),l=e.reduce((b,R)=>b+R.odometer_distance,0),u=this.calculateTotalDuration(c),d=this.calculateTotalBatteryUsed(c),h=d/100*this.BATTERY_CAPACITY_KWH,m=h>0?l/h:0,g=this.estimateChargingCosts(c,h,t,s),v=this.calculateGasComparison(l,r),p=this.calculateOptimalCharging(h,t),y=this.generateChargingStrategy(c,d,g),E=this.calculateEnvironmentalImpact(l,h);return{trip_summary:{distance_miles:Math.round(l*100)/100,duration_hours:Math.round(u*100)/100,battery_used_percent:Math.round(d*100)/100,energy_used_kwh:Math.round(h*100)/100,efficiency_miles_per_kwh:Math.round(m*100)/100},cost_breakdown:{electricity_cost:Math.round(g.electricityCost*100)/100,charging_stops_cost:Math.round(g.chargingStopsCost*100)/100,total_cost:Math.round(g.totalCost*100)/100,cost_per_mile:Math.round(g.totalCost/l*1e3)/1e3},comparison:{vs_gas_vehicle:{gas_cost_estimate:Math.round(v.gasCost*100)/100,savings:Math.round(v.savings*100)/100,savings_percentage:Math.round(v.savingsPercent*100)/100},vs_optimal_charging:{optimal_cost:Math.round(p.optimal*100)/100,current_cost:Math.round(g.totalCost*100)/100,potential_savings:Math.round(p.savings*100)/100}},charging_strategy:y,environmental_impact:{co2_saved_lbs:Math.round(E.co2Saved*10)/10,trees_equivalent:Math.round(E.treesEquivalent)}}}emptyAnalysis(){return{trip_summary:{distance_miles:0,duration_hours:0,battery_used_percent:0,energy_used_kwh:0,efficiency_miles_per_kwh:0},cost_breakdown:{electricity_cost:0,charging_stops_cost:0,total_cost:0,cost_per_mile:0},comparison:{vs_gas_vehicle:{gas_cost_estimate:0,savings:0,savings_percentage:0},vs_optimal_charging:{optimal_cost:0,current_cost:0,potential_savings:0}},charging_strategy:["No trip data available"],environmental_impact:{co2_saved_lbs:0,trees_equivalent:0}}}calculateTotalDuration(e){if(e.length===0)return 0;let t=e[0].started_at;return(e[e.length-1].ended_at-t)/3600}calculateTotalBatteryUsed(e){let t=0,s=e[0].starting_battery;for(let r of e){r.starting_battery>s;let c=r.starting_battery-r.ending_battery;c>0&&(t+=c),s=r.ending_battery}return t}estimateChargingCosts(e,t,s,r){let c=0,l=0;for(let d=1;d<e.length;d++){let h=e[d-1],m=e[d],g=m.starting_battery-h.ending_battery;if(g>2){let v=g/100*this.BATTERY_CAPACITY_KWH;(m.started_at-h.ended_at)/3600<1&&g>30?l+=v*r:c+=v*s}}let u=c/s+l/r;if(u<t*.5){let d=t-u;c+=d*s}return{electricityCost:c,chargingStopsCost:l,totalCost:c+l}}calculateGasComparison(e,t){return{gasCost:e/this.DEFAULT_MPG*t,savings:0,savingsPercent:0}}calculateOptimalCharging(e,t){let s=t*.7;return{optimal:e*s,savings:0}}generateChargingStrategy(e,t,s){let r=[],c=s.chargingStopsCost/s.totalCost*100;c>40&&r.push(`\u26A1 High Supercharger usage (${Math.round(c)}%). Consider charging at home before long trips`),t<80&&r.push("\u{1F50B} This trip could be completed with a single overnight charge at home");let l=Math.min(90,t+20);return r.push(`\u{1F4CA} Optimal starting charge: ${Math.round(l)}% for this trip distance`),s.electricityCost>0&&r.push("\u{1F319} Schedule home charging for off-peak hours (11pm-7am) to save 30-50% on electricity"),r}calculateEnvironmentalImpact(e,t){let r=e/this.DEFAULT_MPG*this.CO2_PER_GALLON,c=t*this.CO2_PER_KWH_GRID,l=r-c,u=l/48;return{co2Saved:Math.max(0,l),treesEquivalent:Math.max(0,u)}}estimateFutureTripCost(e,t,s=this.DEFAULT_HOME_RATE,r=this.DEFAULT_SUPERCHARGER_RATE){let d=e/4/this.BATTERY_CAPACITY_KWH*100*1.15,h=d>t,m=Math.max(0,d-t),g=Math.ceil(m/50),v=0,p="";if(h)if(m<=60)v=m/100*this.BATTERY_CAPACITY_KWH*s,p=`Charge to ${Math.round(t+m)}% at home before departure`;else{let y=(90-t)/100*this.BATTERY_CAPACITY_KWH,E=(m-(90-t))/100*this.BATTERY_CAPACITY_KWH;v=y*s+E*r,p=`Charge to 90% at home, then ${g} Supercharger stop${g>1?"s":""} during trip`}else p=`No charging needed - current ${t}% is sufficient`;return{estimated_cost:Math.round(v*100)/100,charging_needed:h,recommended_charge_level:Math.min(100,Math.round(t+m)),charging_stops_needed:g,strategy:p}}};var Ks=class{constructor(){this.MIN_ROUTE_FREQUENCY=3;this.LOCATION_SIMILARITY_THRESHOLD=.8;this.HOME_RATE_PER_KWH=.13}analyzeCommutes(e){if(e.length<10)return this.emptyAnalysis("Not enough driving data to detect commute patterns");let s=this.groupDrivesByRoute(e).filter(d=>d.drives.length>=this.MIN_ROUTE_FREQUENCY).map(d=>this.analyzeRoute(d)),r=this.calculateWeeklySummary(e,s),c=this.generateCommuteRecommendations(s,r),l=s.reduce((d,h)=>d+h.typical_distance*h.frequency,0),u=this.calculateCommuteCost(l);return{routes_detected:s.length,total_commute_miles:Math.round(l*100)/100,total_commute_cost:Math.round(u*100)/100,avg_commute_efficiency:this.calculateAvgEfficiency(s),routes:s,recommendations:c,weekly_summary:r}}emptyAnalysis(e){return{routes_detected:0,total_commute_miles:0,total_commute_cost:0,avg_commute_efficiency:0,routes:[],recommendations:[e],weekly_summary:{total_drives:0,total_miles:0,total_cost:0,avg_efficiency:0,best_day:"N/A",worst_day:"N/A"}}}groupDrivesByRoute(e){let t=new Map;for(let s of e){let r=this.generateRouteId(s.starting_location,s.ending_location);t.has(r)||t.set(r,[]),t.get(r).push(s)}return Array.from(t.entries()).map(([s,r])=>({routeId:s,drives:r}))}generateRouteId(e,t){let s=l=>{let u=l.split(",");return u.length>=3?`${u[u.length-3].trim()}, ${u[u.length-2].trim()}`:l},r=s(e),c=s(t);return[r,c].sort().join(" \u2194 ")}analyzeRoute(e){let{drives:t}=e,s=t.map(m=>m.odometer_distance),r=t.map(m=>(m.ended_at-m.started_at)/60),c=t.map(m=>m.starting_battery-m.ending_battery),l=t.map(m=>{let g=m.odometer_distance,v=m.starting_battery-m.ending_battery;return g===0?0:v/100*75/g*100}).filter(m=>m>0&&m<50),u=this.analyzeTimePatterns(t),d=this.calculateEfficiencyTrend(t),h=this.generateRouteName(t[0]);return{id:e.routeId,name:h,from_location:t[0].starting_location,to_location:t[0].ending_location,typical_distance:this.average(s),frequency:this.calculateWeeklyFrequency(t),avg_duration_minutes:this.average(r),avg_efficiency_kwh_per_100mi:this.average(l),avg_battery_used:this.average(c),best_efficiency:Math.min(...l),worst_efficiency:Math.max(...l),recent_trend:d,time_patterns:u}}generateRouteName(e){let t=c=>{let l=c.split(",");return l.length>=2?l[l.length-3]?.trim()||l[0].trim():c.split(" ")[0]},s=t(e.starting_location),r=t(e.ending_location);return s===r?`${s} Local`:`${s} \u2194 ${r}`}analyzeTimePatterns(e){let t=e.filter(c=>{let l=new Date(c.started_at*1e3).getHours(),u=new Date(c.started_at*1e3).getDay();return l>=6&&l<=10&&u>=1&&u<=5}),s=e.filter(c=>{let l=new Date(c.started_at*1e3).getHours(),u=new Date(c.started_at*1e3).getDay();return l>=15&&l<=19&&u>=1&&u<=5}),r=e.filter(c=>{let l=new Date(c.started_at*1e3).getDay();return l===0||l===6});return{morning_commute:{count:t.length,avg_time:this.calculateAvgTime(t)},evening_commute:{count:s.length,avg_time:this.calculateAvgTime(s)},weekend:{count:r.length,avg_time:this.calculateAvgTime(r)}}}calculateAvgTime(e){if(e.length===0)return"N/A";let t=e.reduce((s,r)=>s+r.started_at,0)/e.length;return new Date(t*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}calculateEfficiencyTrend(e){if(e.length<6)return"stable";let t=e.sort((d,h)=>d.started_at-h.started_at),s=t.slice(-6),r=t.slice(0,Math.min(6,e.length-6));if(r.length===0)return"stable";let c=this.calculateAvgEfficiencyForDrives(s),l=this.calculateAvgEfficiencyForDrives(r),u=(l-c)/l*100;return u>5?"improving":u<-5?"declining":"stable"}calculateAvgEfficiencyForDrives(e){let t=e.map(s=>{let r=s.odometer_distance,c=s.starting_battery-s.ending_battery;return r===0?0:c/100*75/r*100}).filter(s=>s>0&&s<50);return this.average(t)}calculateWeeklyFrequency(e){if(e.length===0)return 0;let t=e.sort((l,u)=>l.started_at-u.started_at),s=t[0],c=(t[t.length-1].started_at-s.started_at)/(168*3600);return c===0?e.length:Math.round(e.length/c*100)/100}calculateWeeklySummary(e,t){let s=new Map,r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];r.forEach(v=>{s.set(v,{drives:0,miles:0,efficiency:0})}),e.forEach(v=>{let p=r[new Date(v.started_at*1e3).getDay()],y=s.get(p);y.drives++,y.miles+=v.odometer_distance;let E=v.odometer_distance,b=v.starting_battery-v.ending_battery;if(E>0){let R=b/100*75/E*100;y.efficiency=(y.efficiency*(y.drives-1)+R)/y.drives}});let c="N/A",l="N/A",u=1/0,d=0;s.forEach((v,p)=>{v.drives>0&&(v.efficiency<u&&v.efficiency>0&&(u=v.efficiency,c=p),v.efficiency>d&&(d=v.efficiency,l=p))});let h=e.reduce((v,p)=>v+p.odometer_distance,0),m=this.calculateCommuteCost(h),g=this.calculateAvgEfficiencyForDrives(e);return{total_drives:e.length,total_miles:Math.round(h*100)/100,total_cost:Math.round(m*100)/100,avg_efficiency:Math.round(g*100)/100,best_day:c,worst_day:l}}generateCommuteRecommendations(e,t){let s=[];return e.forEach(r=>{if(r.recent_trend==="declining"&&s.push(`\u{1F4C9} ${r.name}: Efficiency declining recently. Check tire pressure and driving habits.`),r.avg_efficiency_kwh_per_100mi>30&&s.push(`\u26A1 ${r.name}: High energy usage (${r.avg_efficiency_kwh_per_100mi.toFixed(1)} kWh/100mi). Try smoother acceleration and regenerative braking.`),r.frequency>10){let c=r.typical_distance*r.frequency*r.avg_efficiency_kwh_per_100mi/100*this.HOME_RATE_PER_KWH;s.push(`\u{1F697} ${r.name}: Your most frequent route (${r.frequency.toFixed(1)}x/week, ~$${c.toFixed(2)}/week)`)}}),e.length>2&&s.push(`\u{1F4CA} You have ${e.length} regular routes. Consider optimizing departure times to avoid traffic for better efficiency.`),s.push("\u{1F50B} Pro tip: Pre-condition your car while plugged in to save battery on commutes."),t.best_day!=="N/A"&&t.worst_day!=="N/A"&&s.push(`\u{1F4C8} Best efficiency day: ${t.best_day}. Worst: ${t.worst_day}. Traffic patterns may be affecting your efficiency.`),s}calculateCommuteCost(e){return e/4*this.HOME_RATE_PER_KWH}calculateAvgEfficiency(e){if(e.length===0)return 0;let t=e.reduce((s,r)=>s+r.avg_efficiency_kwh_per_100mi,0);return Math.round(t/e.length*100)/100}average(e){if(e.length===0)return 0;let t=e.reduce((s,r)=>s+r,0);return Math.round(t/e.length*100)/100}};var Ys=class{constructor(){this.BATTERY_CAPACITY_KWH=75;this.HIGHWAY_SPEED_THRESHOLD=55}analyzeEfficiencyTrends(e){if(e.length<5)return this.emptyAnalysis("Insufficient driving data for trend analysis (minimum 5 drives required)");let t=e.sort((h,m)=>h.started_at-m.started_at),s=this.convertToDataPoints(t),r=this.calculateCurrentPeriodStats(s),c=this.calculateTrends(s),l=this.analyzeEfficiencyFactors(t,s),u=this.generateInsights(s,c,l),d=this.generateRecommendations(c,l);return{current_period:r,trends:c,factors_analysis:l,recommendations:d,insights:u}}emptyAnalysis(e){let t={period:"N/A",trend_direction:"stable",trend_percentage:0,avg_efficiency:0,best_efficiency:0,worst_efficiency:0,confidence:"low"};return{current_period:{avg_efficiency:0,total_miles:0,total_drives:0,efficiency_range:{best:0,worst:0}},trends:{weekly:t,monthly:t,seasonal:t},factors_analysis:{weather_impact:{hot_weather_penalty:0,cold_weather_penalty:0,optimal_temp_range:"Unknown"},speed_impact:{highway_efficiency:0,city_efficiency:0,optimal_speed_range:"Unknown"},time_patterns:{best_day_of_week:"Unknown",worst_day_of_week:"Unknown",best_time_of_day:"Unknown"}},recommendations:[e],insights:[]}}convertToDataPoints(e){return e.map(t=>{let s=t.odometer_distance,r=t.starting_battery-t.ending_battery,c=s>0?r/100*this.BATTERY_CAPACITY_KWH/s*100:0,l=t.average_speed||0,u=l>this.HIGHWAY_SPEED_THRESHOLD?Math.min(100,(l-25)/45*100):0,d="mild";return c>35?d="cold":c>30&&(d="hot"),{date:new Date(t.started_at*1e3).toISOString().split("T")[0],efficiency_kwh_per_100mi:c,distance_miles:s,weather_factor:d,highway_percentage:u,avg_speed:l}}).filter(t=>t.efficiency_kwh_per_100mi>0&&t.efficiency_kwh_per_100mi<60)}calculateCurrentPeriodStats(e){let t=e.map(r=>r.efficiency_kwh_per_100mi),s=e.reduce((r,c)=>r+c.distance_miles,0);return{avg_efficiency:this.average(t),total_miles:Math.round(s*100)/100,total_drives:e.length,efficiency_range:{best:Math.min(...t),worst:Math.max(...t)}}}calculateTrends(e){let t=new Date,s=this.calculatePeriodTrend(e,7,"weekly"),r=this.calculatePeriodTrend(e,30,"monthly"),c=this.calculatePeriodTrend(e,90,"seasonal");return{weekly:s,monthly:r,seasonal:c}}calculatePeriodTrend(e,t,s){let r=new Date,c=new Date(r.getTime()-t*24*60*60*1e3),l=new Date(r.getTime()-2*t*24*60*60*1e3),u=e.filter(y=>new Date(y.date)>=c&&new Date(y.date)<=r),d=e.filter(y=>new Date(y.date)>=l&&new Date(y.date)<c);if(u.length<2||d.length<2)return{period:s,trend_direction:"stable",trend_percentage:0,avg_efficiency:u.length>0?this.average(u.map(y=>y.efficiency_kwh_per_100mi)):0,best_efficiency:u.length>0?Math.min(...u.map(y=>y.efficiency_kwh_per_100mi)):0,worst_efficiency:u.length>0?Math.max(...u.map(y=>y.efficiency_kwh_per_100mi)):0,confidence:"low"};let h=this.average(u.map(y=>y.efficiency_kwh_per_100mi)),m=this.average(d.map(y=>y.efficiency_kwh_per_100mi)),g=(m-h)/m*100,v="stable";g>3?v="improving":g<-3&&(v="declining");let p=u.length>=5&&d.length>=5?"high":u.length>=3&&d.length>=3?"medium":"low";return{period:s,trend_direction:v,trend_percentage:Math.abs(g),avg_efficiency:h,best_efficiency:Math.min(...u.map(y=>y.efficiency_kwh_per_100mi)),worst_efficiency:Math.max(...u.map(y=>y.efficiency_kwh_per_100mi)),confidence:p}}analyzeEfficiencyFactors(e,t){let s=t.filter(y=>y.weather_factor==="hot"),r=t.filter(y=>y.weather_factor==="cold"),c=t.filter(y=>y.weather_factor==="mild"),l=c.length>0?this.average(c.map(y=>y.efficiency_kwh_per_100mi)):0,u=s.length>0?this.average(s.map(y=>y.efficiency_kwh_per_100mi)):l,d=r.length>0?this.average(r.map(y=>y.efficiency_kwh_per_100mi)):l,h=t.filter(y=>y.highway_percentage>50),m=t.filter(y=>y.highway_percentage<=50),g=h.length>0?this.average(h.map(y=>y.efficiency_kwh_per_100mi)):0,v=m.length>0?this.average(m.map(y=>y.efficiency_kwh_per_100mi)):0,p=this.analyzeTimePatterns(e,t);return{weather_impact:{hot_weather_penalty:l>0?(u-l)/l*100:0,cold_weather_penalty:l>0?(d-l)/l*100:0,optimal_temp_range:"65-75\xB0F"},speed_impact:{highway_efficiency:Math.round(g*100)/100,city_efficiency:Math.round(v*100)/100,optimal_speed_range:"45-65 mph"},time_patterns:p}}analyzeTimePatterns(e,t){let s={},r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];e.forEach((v,p)=>{let y=r[new Date(v.started_at*1e3).getDay()];s[y]||(s[y]=[]),t[p]&&s[y].push(t[p].efficiency_kwh_per_100mi)});let c="Unknown",l="Unknown",u=1/0,d=0;Object.entries(s).forEach(([v,p])=>{if(p.length>0){let y=this.average(p);y<u&&(u=y,c=v),y>d&&(d=y,l=v)}});let h={};e.forEach((v,p)=>{let y=new Date(v.started_at*1e3).getHours();h[y]||(h[y]=[]),t[p]&&h[y].push(t[p].efficiency_kwh_per_100mi)});let m="Unknown",g=1/0;return Object.entries(h).forEach(([v,p])=>{if(p.length>=2){let y=this.average(p);if(y<g){g=y;let E=parseInt(v);m=`${E===0?12:E>12?E-12:E}${E<12?"AM":"PM"}`}}}),{best_day_of_week:c,worst_day_of_week:l,best_time_of_day:m}}generateInsights(e,t,s){let r=[];if(t.weekly.confidence!=="low"&&(t.weekly.trend_direction==="improving"?r.push(`\u{1F4C8} Your efficiency has improved ${t.weekly.trend_percentage.toFixed(1)}% this week - great driving habits!`):t.weekly.trend_direction==="declining"&&r.push(`\u{1F4C9} Your efficiency declined ${t.weekly.trend_percentage.toFixed(1)}% this week - check driving patterns and tire pressure`)),s.weather_impact.cold_weather_penalty>15&&r.push(`\u{1F976} Cold weather is significantly impacting efficiency (+${s.weather_impact.cold_weather_penalty.toFixed(1)}% consumption)`),s.weather_impact.hot_weather_penalty>10&&r.push(`\u{1F525} Hot weather and A/C usage is increasing consumption (+${s.weather_impact.hot_weather_penalty.toFixed(1)}%)`),s.speed_impact.highway_efficiency>0&&s.speed_impact.city_efficiency>0){let c=s.speed_impact.highway_efficiency-s.speed_impact.city_efficiency;Math.abs(c)>3&&(c>0?r.push(`\u{1F3D9}\uFE0F City driving is ${Math.abs(c).toFixed(1)} kWh/100mi more efficient than highway driving`):r.push(`\u{1F6E3}\uFE0F Highway driving is ${Math.abs(c).toFixed(1)} kWh/100mi more efficient than city driving`))}return s.time_patterns.best_day_of_week!=="Unknown"&&s.time_patterns.worst_day_of_week!=="Unknown"&&r.push(`\u{1F4C5} Most efficient driving: ${s.time_patterns.best_day_of_week}s. Least efficient: ${s.time_patterns.worst_day_of_week}s`),t.monthly.confidence==="high"&&t.monthly.trend_direction==="improving"&&r.push(`\u{1F3AF} Monthly trend shows ${t.monthly.trend_percentage.toFixed(1)}% efficiency improvement - your driving is optimizing!`),r}generateRecommendations(e,t){let s=[];return e.weekly.trend_direction==="declining"&&e.weekly.confidence!=="low"&&(s.push("\u26A1 Check tire pressure and reduce aggressive acceleration to improve efficiency"),s.push("\u{1F321}\uFE0F Use Eco mode in extreme weather conditions")),t.weather_impact.cold_weather_penalty>20&&(s.push("\u2744\uFE0F Pre-condition cabin while plugged in during cold weather"),s.push("\u{1F50B} Expect 15-25% reduced range in freezing temperatures")),t.weather_impact.hot_weather_penalty>15&&(s.push("\u2600\uFE0F Park in shade and use mobile app to pre-cool before driving"),s.push("\u{1F32C}\uFE0F Use seat heaters instead of cabin heat when possible")),t.speed_impact.highway_efficiency>t.speed_impact.city_efficiency+5&&(s.push("\u{1F3C1} Reduce highway speeds to 65-70 mph for optimal efficiency"),s.push("\u{1F6E3}\uFE0F Use cruise control on highways to maintain consistent speed")),s.push("\u{1F697} Maintain following distance to maximize regenerative braking"),s.push("\u{1F4F1} Monitor real-time efficiency display to develop efficient habits"),t.time_patterns.best_day_of_week!=="Unknown"&&s.push(`\u{1F4C5} Schedule non-urgent trips on ${t.time_patterns.best_day_of_week}s for best efficiency`),s}average(e){if(e.length===0)return 0;let t=e.reduce((s,r)=>s+r,0);return Math.round(t/e.length*100)/100}};var Qs=class{constructor(){this.COMFORT_RANGE_THRESHOLD=50;this.EMERGENCY_RANGE_THRESHOLD=20;this.OPTIMAL_CHARGE_LEVEL=80;this.DAILY_CHARGE_LEVEL=90;this.COLD_WEATHER_THRESHOLD=32;this.HOT_WEATHER_THRESHOLD=85;this.OFF_PEAK_START=23;this.OFF_PEAK_END=7;this.PEAK_RATE=.35;this.OFF_PEAK_RATE=.13}generateChargingStrategy(e,t=40,s,r){let c=e.battery_level||0,l=e.battery_range||0,u=e.charging_state||"Disconnected",d=u!=="Disconnected"&&u!=="Complete",h=this.generateReminders(e,t,s,r),m=this.calculateOptimalSchedule(c,t),g=this.analyzeRange(c,l,t,s),v=this.generateSmartInsights(e,c,l,t,r);return{current_status:{battery_level:c,charging_state:u,range_miles:Math.round(l),plugged_in:d},recommendations:h.sort((p,y)=>this.getPriorityWeight(p.priority)-this.getPriorityWeight(y.priority)),charging_schedule:m,range_analysis:g,smart_insights:v}}generateReminders(e,t,s,r){let c=[],l=e.battery_level||0,u=e.battery_range||0,d=e.charging_state||"Disconnected",h=this.isHomeLocation(e);if(u<this.EMERGENCY_RANGE_THRESHOLD?c.push({priority:"urgent",type:"range_warning",title:"\u{1F6A8} Critical Range Alert",message:`Only ${Math.round(u)} miles remaining. Find charging immediately!`,action_required:!0,time_sensitive:!0,deadline:"ASAP"}):u<this.COMFORT_RANGE_THRESHOLD&&c.push({priority:"high",type:"range_warning",title:"\u26A0\uFE0F Low Range Warning",message:`${Math.round(u)} miles remaining. Plan charging for today.`,action_required:!0,time_sensitive:!0,deadline:"Today"}),h&&d==="Disconnected"&&l<this.OPTIMAL_CHARGE_LEVEL){let g=this.OPTIMAL_CHARGE_LEVEL-l,v=this.calculateOffPeakSavings(g);c.push({priority:l<30?"high":"medium",type:"optimal_charge",title:"\u{1F50C} Plug In Recommended",message:`Battery at ${l}%. Charge to ${this.OPTIMAL_CHARGE_LEVEL}% during off-peak hours.`,action_required:!0,estimated_savings:`$${v.toFixed(2)}/charge`,time_sensitive:!1})}if(d==="Charging"&&this.isDuringPeakHours()){let g=this.calculateOffPeakSavings(20);c.push({priority:"medium",type:"time_of_use",title:"\u{1F4B0} Peak Hour Charging Alert",message:"Currently charging during peak rates. Consider scheduling for off-peak hours.",action_required:!1,estimated_savings:`$${g.toFixed(2)}/session`,time_sensitive:!0})}if(r!==void 0&&(r<this.COLD_WEATHER_THRESHOLD&&l<90?c.push({priority:"medium",type:"weather_prep",title:"\u2744\uFE0F Cold Weather Prep",message:`Freezing weather ahead (${r}\xB0F). Charge to 90% and precondition cabin.`,action_required:!0,time_sensitive:!0,deadline:"Before tomorrow"}):r>this.HOT_WEATHER_THRESHOLD&&l<85&&c.push({priority:"medium",type:"weather_prep",title:"\u{1F525} Hot Weather Prep",message:`High temperatures forecast (${r}\xB0F). Charge to 85% and precondition.`,action_required:!0,time_sensitive:!0,deadline:"Before peak heat"})),s&&s>0){let g=s*1.3;if(u<g){let v=Math.ceil((g-u)/3);c.push({priority:"high",type:"trip_prep",title:"\u{1F6E3}\uFE0F Trip Charging Required",message:`${s}-mile trip needs ${v}% more charge. Plan charging stops if needed.`,action_required:!0,time_sensitive:!0,deadline:"Before departure"})}}let m=u-t;return m<this.COMFORT_RANGE_THRESHOLD&&h&&c.push({priority:"medium",type:"optimal_charge",title:"\u{1F305} Daily Routine Charging",message:`Tomorrow's commute (~${t} mi) will leave ${Math.round(m)} miles. Plug in tonight.`,action_required:!0,time_sensitive:!1}),l===100&&d==="Complete"&&c.push({priority:"low",type:"maintenance",title:"\u{1F50B} Battery Health Tip",message:"Avoid keeping battery at 100% unless needed for long trips. Consider setting daily limit to 80%.",action_required:!1,time_sensitive:!1}),c}calculateOptimalSchedule(e,t){let s=t*1.5,r=Math.max(0,this.OPTIMAL_CHARGE_LEVEL-e),c=Math.ceil(r*3/25),l=Math.max(this.OFF_PEAK_START,23),u=Math.min(this.OFF_PEAK_END+c,7),d=this.calculateOffPeakSavings(r);return{optimal_start_time:`${l===23?11:l}:00 PM`,optimal_end_time:`${u}:00 AM`,off_peak_window:"11:00 PM - 7:00 AM",estimated_cost_savings:Math.round(d*100)/100}}analyzeRange(e,t,s,r){let c=t>this.COMFORT_RANGE_THRESHOLD,l=t<this.EMERGENCY_RANGE_THRESHOLD,u=this.OPTIMAL_CHARGE_LEVEL;r&&r>200?u=Math.min(100,90):s>60&&(u=this.DAILY_CHARGE_LEVEL);let d=t-s,h="Not needed";return d<this.COMFORT_RANGE_THRESHOLD?h="Tonight":d<s*2?h="Tomorrow evening":h=`In ${Math.floor(d/s)} days`,{comfort_range:c,emergency_range:l,recommended_charge_level:u,next_charge_needed:h}}generateSmartInsights(e,t,s,r,c){let l=[],u=e.charging_state||"Disconnected";u==="Charging"&&(this.isDuringPeakHours()?l.push("\u{1F4B8} Charging during peak hours costs ~170% more than off-peak rates"):l.push("\u{1F49A} Great timing! Off-peak charging saves $2-5 per session")),t>95?l.push("\u{1F50B} Consider setting daily charge limit to 80% to optimize battery longevity"):t<20&&l.push("\u26A1 Low battery increases phantom drain - charge soon to maintain efficiency");let d=Math.floor(s/r);return d>=5?l.push(`\u{1F3AF} Current range covers ${d} days of typical driving - you're well prepared`):d<=1&&l.push("\u{1F4C5} Less than 2 days of range remaining - plan charging today"),c!==void 0&&(c<32?l.push("\u2744\uFE0F Cold weather reduces range ~20-30% - factor this into trip planning"):c>85?l.push("\u{1F321}\uFE0F Hot weather increases A/C usage - expect 10-15% range reduction"):l.push("\u{1F324}\uFE0F Mild weather conditions optimal for efficiency and range")),t<50&&u==="Disconnected"&&l.push("\u{1F50C} Plugging in now would complete charging during off-peak hours tonight"),l}isHomeLocation(e){return(e.speed||0)===0}isDuringPeakHours(){let e=new Date().getHours();return e>=16&&e<=21}calculateOffPeakSavings(e){let t=e/100*75,s=t*this.PEAK_RATE,r=t*this.OFF_PEAK_RATE;return s-r}getPriorityWeight(e){return{urgent:1,high:2,medium:3,low:4}[e]}};var Xa=class{static{this.NOMINATIM_BASE_URL="https://nominatim.openstreetmap.org/reverse"}static{this.USER_AGENT="TessieMCP/1.1.1"}static{this.RATE_LIMIT_MS=1e3}static{this.lastRequestTime=0}static{this.cache=new Map}static async reverseGeocode(e,t){if(!e||!t||isNaN(e)||isNaN(t))return"Location unavailable";let s=`${e.toFixed(4)},${t.toFixed(4)}`;if(this.cache.has(s))return this.cache.get(s);try{await this.enforceRateLimit();let r=new URL(this.NOMINATIM_BASE_URL);r.searchParams.set("lat",e.toString()),r.searchParams.set("lon",t.toString()),r.searchParams.set("format","json"),r.searchParams.set("addressdetails","1"),r.searchParams.set("zoom","18");let c=await fetch(r.toString(),{headers:{"User-Agent":this.USER_AGENT,Accept:"application/json"},signal:AbortSignal.timeout(5e3)});if(!c.ok)throw new Error(`HTTP ${c.status}: ${c.statusText}`);let l=await c.json(),u=this.formatAddress(l);if(this.cache.set(s,u),this.cache.size>100){let d=this.cache.keys().next().value;this.cache.delete(d)}return u}catch(r){return console.warn(`Geocoding failed for ${e}, ${t}:`,r),`${e.toFixed(4)}, ${t.toFixed(4)}`}}static formatAddress(e){if(!e||!e.address)return e?.display_name?.split(",").slice(0,3).join(", ")||"Unknown location";let t=e.address,s=[];return t.house_number&&t.road?s.push(`${t.house_number} ${t.road}`):t.road?s.push(t.road):t.amenity&&s.push(t.amenity),t.city||t.town||t.village?s.push(t.city||t.town||t.village):t.county&&s.push(t.county),(t.state||t.province)&&s.push(t.state||t.province),t.country_code&&s.push(t.country_code.toUpperCase()),s.length===0?e.display_name?.split(",").slice(0,4).join(", ")||"Unknown location":s.join(", ")}static async enforceRateLimit(){let t=Date.now()-this.lastRequestTime;if(t<this.RATE_LIMIT_MS){let s=this.RATE_LIMIT_MS-t;await new Promise(r=>setTimeout(r,s))}this.lastRequestTime=Date.now()}static getDistance(e,t,s,r){let l=this.toRadians(s-e),u=this.toRadians(r-t),d=Math.sin(l/2)*Math.sin(l/2)+Math.cos(this.toRadians(e))*Math.cos(this.toRadians(s))*Math.sin(u/2)*Math.sin(u/2);return 3959*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))}static toRadians(e){return e*(Math.PI/180)}};var fE=Pe.z.object({apiKey:Pe.z.string().describe("Your API key"),modelName:Pe.z.string().default("gpt-4").describe("Model to use"),temperature:Pe.z.number().min(0).max(1).default(.7).describe("Temperature setting")});function cm({config:a}){let e=new Zs({name:"tessie-mcp-server",title:"Tessie Vehicle Data",version:"1.1.1"});console.log(`Using model: ${a.modelName}`);let t=a.apiKey,s=new Bs(t),r=new Vs,c=new Ws,l=new Ja,u=new Gs,d=new Ks,h=new Ys,m=new Qs;return e.tool("get_vehicle_current_state","Get the current state of a vehicle including location, battery level, odometer reading",{vin:Pe.z.string().describe("Vehicle identification number (VIN)"),use_cache:Pe.z.boolean().optional().default(!0).describe("Whether to use cached data to avoid waking the vehicle")},async({vin:g,use_cache:v=!0})=>{try{let p=await s.getVehicleState(g,v),y="Location unavailable";if(p.drive_state?.latitude&&p.drive_state?.longitude)try{y=await Xa.reverseGeocode(p.drive_state.latitude,p.drive_state.longitude)}catch(E){console.warn("Geocoding failed:",E),y=`${p.drive_state.latitude.toFixed(4)}, ${p.drive_state.longitude.toFixed(4)}`}return{vehicle:p.display_name||p.vehicle_state?.vehicle_name||`Vehicle ${p.vin?.slice(-6)}`,vin:p.vin,current_location:{address:y,latitude:p.drive_state?.latitude,longitude:p.drive_state?.longitude},battery:{level:p.charge_state?.battery_level,range:p.charge_state?.est_battery_range,charging_state:p.charge_state?.charging_state,time_to_full_charge:p.charge_state?.time_to_full_charge},vehicle_state:{locked:p.vehicle_state?.locked,sentry_mode:p.vehicle_state?.sentry_mode,odometer:p.vehicle_state?.odometer},climate:{inside_temp:p.climate_state?.inside_temp,outside_temp:p.climate_state?.outside_temp,climate_on:p.climate_state?.is_climate_on},last_updated:p.timestamp||new Date().toISOString()}}catch(p){throw new Error(`Failed to get vehicle state: ${p}`)}}),e.tool("get_driving_history","Get driving history for a vehicle within a date range",{vin:Pe.z.string().describe("Vehicle identification number (VIN)"),start_date:Pe.z.string().optional().describe("Start date in ISO format (YYYY-MM-DD or YYYY-MM-DDTHH:mm:ssZ)"),end_date:Pe.z.string().optional().describe("End date in ISO format (YYYY-MM-DD or YYYY-MM-DDTHH:mm:ssZ)"),limit:Pe.z.number().optional().default(50).describe("Maximum number of drives to return")},async({vin:g,start_date:v,end_date:p,limit:y=50})=>{try{let E=await s.getDrives(g,v,p,y);return{vehicle_vin:g,total_drives:E.length,date_range:{start:v||"Not specified",end:p||"Not specified"},drives:E.map(b=>({id:b.id,start_time:new Date(b.started_at*1e3).toISOString(),end_time:new Date(b.ended_at*1e3).toISOString(),starting_location:b.starting_location,ending_location:b.ending_location,distance_miles:b.odometer_distance,duration_minutes:Math.round((b.ended_at-b.started_at)/60*100)/100,starting_battery:b.starting_battery,ending_battery:b.ending_battery,battery_used:b.starting_battery-b.ending_battery,average_speed:b.average_speed,max_speed:b.max_speed,autopilot_distance:0}))}}catch(E){throw new Error(`Failed to get driving history: ${E}`)}}),e.tool("get_weekly_mileage","Calculate total miles driven in a specific week or time period",{vin:Pe.z.string().describe("Vehicle identification number (VIN)"),start_date:Pe.z.string().describe("Start date of the period (ISO format)"),end_date:Pe.z.string().describe("End date of the period (ISO format)")},async({vin:g,start_date:v,end_date:p})=>{try{let y=await s.getDrives(g,v,p,500),E=y.reduce(($,j)=>$+j.odometer_distance,0),b=0,R={};y.forEach($=>{let j=new Date($.started_at*1e3).toISOString().split("T")[0];R[j]||(R[j]={miles:0,drives:0,autopilot_miles:0});let M={id:`temp_${$.id}`,originalDriveIds:[$.id],started_at:$.started_at,ended_at:$.ended_at,starting_location:$.starting_location,ending_location:$.ending_location,starting_battery:$.starting_battery,ending_battery:$.ending_battery,total_distance:$.odometer_distance,total_duration_minutes:($.ended_at-$.started_at)/60,driving_duration_minutes:($.ended_at-$.started_at)/60,stops:[],autopilot_distance:0,autopilot_percentage:0,energy_consumed:$.starting_battery-$.ending_battery,average_speed:$.average_speed||0,max_speed:$.max_speed||0},I=c.predictAutopilotUsage(M);R[j].miles+=$.odometer_distance,R[j].drives+=1,R[j].autopilot_miles+=I,b+=I});let q=Object.entries(R).map(([$,j])=>({date:$,miles:Math.round(j.miles*100)/100,drives:j.drives,autopilot_miles:Math.round(j.autopilot_miles*100)/100,fsd_percentage:j.miles>0?Math.round(j.autopilot_miles/j.miles*1e4)/100:0}));return{vehicle_vin:g,period:{start_date:v,end_date:p},summary:{total_miles:Math.round(E*100)/100,total_drives:y.length,total_autopilot_miles:Math.round(b*100)/100,fsd_percentage:E>0?Math.round(b/E*1e4)/100:0},daily_breakdown:q.sort(($,j)=>$.date.localeCompare(j.date))}}catch(y){throw new Error(`Failed to get weekly mileage: ${y}`)}}),e.tool("analyze_latest_drive","Analyze the most recent drive with comprehensive metrics including duration, battery consumption, FSD usage, and drive merging for stops <7 minutes",{vin:Pe.z.string().describe("Vehicle identification number (VIN)"),days_back:Pe.z.number().optional().default(7).describe("Number of days to look back for recent drives")},async({vin:g,days_back:v=7})=>{try{let p=new Date,y=new Date;y.setDate(y.getDate()-v);let E=await s.getDrives(g,y.toISOString(),p.toISOString(),100);if(E.length===0)return{error:"No drives found in the specified time period",period:`${y.toISOString().split("T")[0]} to ${p.toISOString().split("T")[0]}`,suggestion:"Try increasing days_back or check if the vehicle has been driven recently"};let b=c.analyzeLatestDrive(E);return b?{analysis_summary:b.summary,detailed_analysis:{drive_details:{id:b.mergedDrive.id,original_drives:b.mergedDrive.originalDriveIds.length,start_time:new Date(b.mergedDrive.started_at*1e3).toISOString(),end_time:new Date(b.mergedDrive.ended_at*1e3).toISOString(),route:`${b.mergedDrive.starting_location} \u2192 ${b.mergedDrive.ending_location}`,distance_miles:b.mergedDrive.total_distance,total_duration_minutes:b.mergedDrive.total_duration_minutes,driving_duration_minutes:b.mergedDrive.driving_duration_minutes,average_speed_mph:b.mergedDrive.average_speed,max_speed_mph:b.mergedDrive.max_speed},stops:b.mergedDrive.stops.map(R=>({location:R.location,duration_minutes:R.duration_minutes,type:R.stop_type,time:`${new Date(R.started_at*1e3).toLocaleTimeString()} - ${new Date(R.ended_at*1e3).toLocaleTimeString()}`})),battery_analysis:{starting_level:`${b.mergedDrive.starting_battery}%`,ending_level:`${b.mergedDrive.ending_battery}%`,percentage_consumed:`${b.batteryConsumption.percentage_used}%`,estimated_kwh_used:b.batteryConsumption.estimated_kwh_used,efficiency_miles_per_kwh:b.batteryConsumption.efficiency_miles_per_kwh},fsd_analysis:{autopilot_miles:b.fsdAnalysis.total_autopilot_miles,fsd_percentage:`${b.fsdAnalysis.fsd_percentage}%`,data_available:b.fsdAnalysis.autopilot_available,note:b.fsdAnalysis.note}},metadata:{analysis_time:new Date().toISOString(),drives_analyzed:E.length,period_searched:`${y.toISOString().split("T")[0]} to ${p.toISOString().split("T")[0]}`}}:{error:"Could not analyze drives",drives_found:E.length,suggestion:"Drives may be incomplete or missing required data"}}catch(p){throw new Error(`Failed to analyze latest drive: ${p}`)}}),e.tool("analyze_charging_costs","Analyze charging sessions and costs from driving history, with recommendations to save money",{vin:Pe.z.string().describe("Vehicle identification number (VIN)"),start_date:Pe.z.string().optional().describe("Start date in ISO format (YYYY-MM-DD)"),end_date:Pe.z.string().optional().describe("End date in ISO format (YYYY-MM-DD)"),home_rate:Pe.z.number().optional().describe("Your home electricity rate per kWh (default: $0.13)"),peak_rate:Pe.z.number().optional().describe("Peak hour electricity rate per kWh (default: $0.32)"),off_peak_rate:Pe.z.number().optional().describe("Off-peak electricity rate per kWh (default: $0.09)")},async({vin:g,start_date:v,end_date:p,home_rate:y,peak_rate:E,off_peak_rate:b})=>{try{let R=await s.getDrives(g,v,p,500);if(R.length===0)return{error:"No drives found in the specified period",suggestion:"Try a longer date range or check if the vehicle has been driven recently"};let q=y||E||b?{home_rate_per_kwh:y||.13,time_of_use:{off_peak:{hours:"23:00-07:00",rate:b||.09},peak:{hours:"16:00-21:00",rate:E||.32}}}:void 0,$=q?new Ja(q):l;$.learnLocations(R);let j=$.detectChargingSessions(R),M=$.analyzeChargingCosts(j);return{period:{start:v||"Not specified",end:p||"Not specified",days_analyzed:Math.ceil((R[R.length-1].started_at-R[0].started_at)/(3600*24))},summary:{total_sessions:M.total_sessions,total_cost:`$${M.total_cost.toFixed(2)}`,total_energy:`${M.total_kwh.toFixed(1)} kWh`,total_miles_added:`${M.total_miles_added.toFixed(0)} miles`,avg_cost_per_session:`$${M.average_cost_per_session.toFixed(2)}`,avg_cost_per_kwh:`$${M.average_cost_per_kwh.toFixed(3)}/kWh`,cost_per_mile:`$${M.average_cost_per_mile.toFixed(3)}/mile`},breakdown_by_location:{home:{sessions:M.sessions_by_location.home.sessions,cost:`$${M.sessions_by_location.home.cost.toFixed(2)}`,energy:`${M.sessions_by_location.home.kwh.toFixed(1)} kWh`,percentage:M.total_cost>0?`${(M.sessions_by_location.home.cost/M.total_cost*100).toFixed(1)}%`:"0%"},supercharger:{sessions:M.sessions_by_location.supercharger.sessions,cost:`$${M.sessions_by_location.supercharger.cost.toFixed(2)}`,energy:`${M.sessions_by_location.supercharger.kwh.toFixed(1)} kWh`,percentage:M.total_cost>0?`${(M.sessions_by_location.supercharger.cost/M.total_cost*100).toFixed(1)}%`:"0%"},public:{sessions:M.sessions_by_location.public.sessions,cost:`$${M.sessions_by_location.public.cost.toFixed(2)}`,energy:`${M.sessions_by_location.public.kwh.toFixed(1)} kWh`,percentage:M.total_cost>0?`${(M.sessions_by_location.public.cost/M.total_cost*100).toFixed(1)}%`:"0%"},work:{sessions:M.sessions_by_location.work.sessions,cost:`$${M.sessions_by_location.work.cost.toFixed(2)}`,energy:`${M.sessions_by_location.work.kwh.toFixed(1)} kWh`,note:M.sessions_by_location.work.sessions>0?"Free workplace charging!":"No workplace charging detected"}},money_saving_tips:M.recommendations,potential_monthly_savings:`$${M.potential_savings.toFixed(2)}`,detailed_sessions:j.slice(0,10).map(I=>({date:new Date(I.started_at*1e3).toLocaleDateString(),time:new Date(I.started_at*1e3).toLocaleTimeString(),location:I.location,type:I.location_type,battery_added:`${I.ending_battery-I.starting_battery}%`,energy:`${I.energy_added_kwh.toFixed(1)} kWh`,cost:`$${I.cost_estimate.toFixed(2)}`,duration:`${Math.round(I.duration_minutes)} min`,rate:I.charge_rate_kw?`${I.charge_rate_kw} kW`:"Unknown"}))}}catch(R){throw new Error(`Failed to analyze charging costs: ${R}`)}}),e.tool("calculate_trip_cost","Calculate the cost and environmental impact of completed trips with gas comparison and optimization tips",{vin:Pe.z.string().describe("Vehicle identification number (VIN)"),start_date:Pe.z.string().optional().describe("Start date in ISO format (YYYY-MM-DD)"),end_date:Pe.z.string().optional().describe("End date in ISO format (YYYY-MM-DD)"),home_rate:Pe.z.number().optional().describe("Your home electricity rate per kWh (default: $0.13)"),gas_price:Pe.z.number().optional().describe("Current gas price per gallon (default: $4.50)")},async({vin:g,start_date:v,end_date:p,home_rate:y,gas_price:E})=>{try{let b=await s.getDrives(g,v,p,100);if(b.length===0)return{error:"No drives found in the specified period",suggestion:"Try a longer date range or check if the vehicle has been driven recently"};let R=u.calculateTripCost(b,y||.13,.28,E||4.5),q=R.comparison.vs_gas_vehicle.gas_cost_estimate,$=R.cost_breakdown.total_cost,j=q-$,M=q>0?j/q*100:0,I=R.comparison.vs_optimal_charging.optimal_cost,H=$-I;return{trip_overview:{distance:`${R.trip_summary.distance_miles} miles`,duration:`${R.trip_summary.duration_hours} hours`,efficiency:`${R.trip_summary.efficiency_miles_per_kwh} mi/kWh`,battery_used:`${R.trip_summary.battery_used_percent}%`,energy_consumed:`${R.trip_summary.energy_used_kwh} kWh`},cost_analysis:{total_cost:`$${R.cost_breakdown.total_cost.toFixed(2)}`,cost_per_mile:`$${R.cost_breakdown.cost_per_mile.toFixed(3)}/mile`,home_charging:`$${R.cost_breakdown.electricity_cost.toFixed(2)}`,supercharger_stops:`$${R.cost_breakdown.charging_stops_cost.toFixed(2)}`},savings_vs_gas:{gas_vehicle_cost:`$${q.toFixed(2)}`,your_ev_cost:`$${$.toFixed(2)}`,money_saved:`$${j.toFixed(2)}`,savings_percentage:`${M.toFixed(1)}%`,note:j>0?"\u{1F389} You saved money vs gas!":"\u26A0\uFE0F Gas would have been cheaper"},optimization_opportunities:{current_cost:`$${$.toFixed(2)}`,optimal_cost:`$${I.toFixed(2)}`,potential_savings:`$${H.toFixed(2)}`,efficiency_tips:R.charging_strategy},environmental_impact:{co2_emissions_avoided:`${R.environmental_impact.co2_saved_lbs} lbs`,trees_planted_equivalent:`${R.environmental_impact.trees_equivalent} trees`,impact_note:R.environmental_impact.co2_saved_lbs>0?"\u{1F331} Your trip was carbon-friendly!":"\u26A0\uFE0F Grid emissions offset EV benefits"}}}catch(b){throw new Error(`Failed to calculate trip cost: ${b}`)}}),e.tool("estimate_future_trip","Estimate cost and charging strategy for a planned trip based on distance and current battery level",{distance_miles:Pe.z.number().describe("Trip distance in miles"),current_battery_percent:Pe.z.number().min(0).max(100).describe("Current battery percentage"),home_rate:Pe.z.number().optional().describe("Your home electricity rate per kWh (default: $0.13)"),supercharger_rate:Pe.z.number().optional().describe("Supercharger rate per kWh (default: $0.28)")},async({distance_miles:g,current_battery_percent:v,home_rate:p,supercharger_rate:y})=>{try{let E=u.estimateFutureTripCost(g,v,p||.13,y||.28);return{trip_feasibility:{distance:`${g} miles`,current_charge:`${v}%`,charging_required:E.charging_needed?"Yes":"No",estimated_cost:`$${E.estimated_cost.toFixed(2)}`},charging_strategy:{recommended_departure_charge:`${E.recommended_charge_level}%`,supercharger_stops_needed:E.charging_stops_needed,strategy_details:E.strategy},cost_breakdown:{total_estimated_cost:`$${E.estimated_cost.toFixed(2)}`,cost_per_mile:`$${(E.estimated_cost/g).toFixed(3)}/mile`},preparation_tips:E.charging_needed?[`\u{1F50C} Pre-charge to ${E.recommended_charge_level}% before departure`,"\u{1F5FA}\uFE0F Plan Supercharger stops using Tesla navigation","\u{1F4F1} Check Supercharger availability along your route","\u23F0 Allow extra time for charging stops",E.charging_stops_needed>0?`\u{1F6D1} Plan for ${E.charging_stops_needed} charging stop${E.charging_stops_needed>1?"s":""}`:""].filter(Boolean):["\u2705 No additional charging needed for this trip!","\u{1F3AF} Your current charge is sufficient","\u{1F4CA} Monitor efficiency during the trip"]}}catch(E){throw new Error(`Failed to estimate future trip: ${E}`)}}),e.tool("analyze_commute_patterns","Detect regular commute routes and analyze efficiency trends, time patterns, and costs",{vin:Pe.z.string().describe("Vehicle identification number (VIN)"),days_back:Pe.z.number().optional().default(30).describe("Number of days to analyze (default: 30)")},async({vin:g,days_back:v=30})=>{try{let p=new Date,y=new Date;y.setDate(y.getDate()-v);let E=await s.getDrives(g,y.toISOString(),p.toISOString(),500);if(E.length<10)return{error:"Not enough driving data to detect commute patterns",drives_found:E.length,suggestion:"Try increasing days_back parameter or drive more regularly to establish patterns"};let b=d.analyzeCommutes(E);return{analysis_period:{days_analyzed:v,drives_analyzed:E.length,start_date:y.toISOString().split("T")[0],end_date:p.toISOString().split("T")[0]},commute_overview:{routes_detected:b.routes_detected,total_weekly_commute_miles:b.total_commute_miles,estimated_weekly_cost:`$${b.total_commute_cost.toFixed(2)}`,avg_commute_efficiency:`${b.avg_commute_efficiency} kWh/100mi`},regular_routes:b.routes.map(R=>({route_name:R.name,frequency:`${R.frequency.toFixed(1)} times/week`,typical_distance:`${R.typical_distance} miles`,avg_duration:`${Math.round(R.avg_duration_minutes)} minutes`,efficiency:`${R.avg_efficiency_kwh_per_100mi.toFixed(1)} kWh/100mi`,trend:R.recent_trend,trend_emoji:R.recent_trend==="improving"?"\u{1F4C8}":R.recent_trend==="declining"?"\u{1F4C9}":"\u27A1\uFE0F",commute_times:{morning_rush:R.time_patterns.morning_commute.count>0?`${R.time_patterns.morning_commute.count} drives, avg ${R.time_patterns.morning_commute.avg_time}`:"No morning commutes detected",evening_rush:R.time_patterns.evening_commute.count>0?`${R.time_patterns.evening_commute.count} drives, avg ${R.time_patterns.evening_commute.avg_time}`:"No evening commutes detected",weekend:R.time_patterns.weekend.count>0?`${R.time_patterns.weekend.count} drives, avg ${R.time_patterns.weekend.avg_time}`:"No weekend drives"},efficiency_range:{best:`${R.best_efficiency.toFixed(1)} kWh/100mi`,worst:`${R.worst_efficiency.toFixed(1)} kWh/100mi`,variation:`${((R.worst_efficiency-R.best_efficiency)/R.best_efficiency*100).toFixed(1)}%`}})),weekly_patterns:{total_drives:b.weekly_summary.total_drives,total_miles:`${b.weekly_summary.total_miles} miles`,estimated_cost:`$${b.weekly_summary.total_cost.toFixed(2)}`,avg_efficiency:`${b.weekly_summary.avg_efficiency} kWh/100mi`,most_efficient_day:b.weekly_summary.best_day,least_efficient_day:b.weekly_summary.worst_day},optimization_tips:b.recommendations,cost_insights:b.routes.length>0?[`\u{1F4B0} Your regular commutes cost approximately $${b.total_commute_cost.toFixed(2)}/week`,`\u26A1 At current efficiency, you use ~${(b.total_commute_miles*b.avg_commute_efficiency/100).toFixed(1)} kWh/week for commuting`,b.avg_commute_efficiency>25?"\u{1F6A8} High commute energy usage - consider eco-driving techniques":"\u2705 Good commute efficiency - you're driving efficiently!"]:["No regular commute patterns detected"]}}catch(p){throw new Error(`Failed to analyze commute patterns: ${p}`)}}),e.tool("analyze_efficiency_trends","Analyze driving efficiency trends over time with weather, speed, and time pattern insights",{vin:Pe.z.string().describe("Vehicle identification number (VIN)"),days_back:Pe.z.number().optional().default(45).describe("Number of days to analyze (default: 45, minimum: 14)")},async({vin:g,days_back:v=45})=>{try{if(v<14)return{error:"Minimum 14 days required for meaningful trend analysis",suggestion:"Try days_back >= 14 for better insights"};let p=new Date,y=new Date;y.setDate(y.getDate()-v);let E=await s.getDrives(g,y.toISOString(),p.toISOString(),200);if(E.length<5)return{error:"Insufficient driving data for trend analysis",drives_found:E.length,suggestion:"Need at least 5 drives for efficiency analysis"};let b=h.analyzeEfficiencyTrends(E);return{analysis_period:{days_analyzed:v,drives_analyzed:E.length,start_date:y.toISOString().split("T")[0],end_date:p.toISOString().split("T")[0]},current_efficiency:{average:`${b.current_period.avg_efficiency} kWh/100mi`,total_miles:`${b.current_period.total_miles} miles`,total_drives:b.current_period.total_drives,efficiency_range:{best:`${b.current_period.efficiency_range.best} kWh/100mi`,worst:`${b.current_period.efficiency_range.worst} kWh/100mi`,spread:`${(b.current_period.efficiency_range.worst-b.current_period.efficiency_range.best).toFixed(1)} kWh/100mi variation`}},trends:{weekly:{direction:b.trends.weekly.trend_direction,change:`${b.trends.weekly.trend_percentage.toFixed(1)}%`,confidence:b.trends.weekly.confidence,emoji:b.trends.weekly.trend_direction==="improving"?"\u{1F4C8}":b.trends.weekly.trend_direction==="declining"?"\u{1F4C9}":"\u27A1\uFE0F",summary:b.trends.weekly.trend_direction==="stable"?`Stable efficiency at ${b.trends.weekly.avg_efficiency} kWh/100mi`:`${b.trends.weekly.trend_direction==="improving"?"Improving":"Declining"} by ${b.trends.weekly.trend_percentage.toFixed(1)}% - current avg: ${b.trends.weekly.avg_efficiency} kWh/100mi`},monthly:{direction:b.trends.monthly.trend_direction,change:`${b.trends.monthly.trend_percentage.toFixed(1)}%`,confidence:b.trends.monthly.confidence,summary:b.trends.monthly.confidence!=="low"?`Monthly trend: ${b.trends.monthly.trend_direction} (${b.trends.monthly.trend_percentage.toFixed(1)}%)`:"Insufficient data for monthly trend"},seasonal:{direction:b.trends.seasonal.trend_direction,change:`${b.trends.seasonal.trend_percentage.toFixed(1)}%`,confidence:b.trends.seasonal.confidence,summary:b.trends.seasonal.confidence!=="low"?`Seasonal trend: ${b.trends.seasonal.trend_direction} (${b.trends.seasonal.trend_percentage.toFixed(1)}%)`:"Need more data for seasonal analysis"}},efficiency_factors:{weather_impact:{hot_weather_penalty:`+${b.factors_analysis.weather_impact.hot_weather_penalty.toFixed(1)}%`,cold_weather_penalty:`+${b.factors_analysis.weather_impact.cold_weather_penalty.toFixed(1)}%`,optimal_temp_range:b.factors_analysis.weather_impact.optimal_temp_range,insight:b.factors_analysis.weather_impact.cold_weather_penalty>15?"\u2744\uFE0F Cold weather significantly impacting efficiency":b.factors_analysis.weather_impact.hot_weather_penalty>10?"\u{1F525} Hot weather and A/C affecting efficiency":"\u{1F321}\uFE0F Weather impact is minimal"},speed_impact:{highway_efficiency:`${b.factors_analysis.speed_impact.highway_efficiency} kWh/100mi`,city_efficiency:`${b.factors_analysis.speed_impact.city_efficiency} kWh/100mi`,optimal_speed_range:b.factors_analysis.speed_impact.optimal_speed_range,preference:b.factors_analysis.speed_impact.highway_efficiency<b.factors_analysis.speed_impact.city_efficiency?"\u{1F6E3}\uFE0F Highway driving is more efficient":"\u{1F3D9}\uFE0F City driving is more efficient"},time_patterns:{best_day:b.factors_analysis.time_patterns.best_day_of_week,worst_day:b.factors_analysis.time_patterns.worst_day_of_week,best_time:b.factors_analysis.time_patterns.best_time_of_day,scheduling_tip:b.factors_analysis.time_patterns.best_day_of_week!=="Unknown"?`\u{1F4C5} Schedule trips on ${b.factors_analysis.time_patterns.best_day_of_week}s for best efficiency`:"\u{1F4C5} No clear daily efficiency patterns detected"}},actionable_insights:b.insights,optimization_recommendations:b.recommendations,efficiency_score:{current:b.current_period.avg_efficiency<25?"Excellent":b.current_period.avg_efficiency<30?"Good":b.current_period.avg_efficiency<35?"Average":"Needs Improvement",benchmark:"Model 3/Y typical: 25-30 kWh/100mi",comparison:b.current_period.avg_efficiency<25?"\u{1F3C6} You're driving very efficiently!":b.current_period.avg_efficiency<30?"\u2705 Good efficiency - room for minor improvements":b.current_period.avg_efficiency<35?"\u26A0\uFE0F Average efficiency - focus on eco-driving techniques":"\u{1F6A8} High consumption - review driving habits and vehicle maintenance"}}}catch(p){throw new Error(`Failed to analyze efficiency trends: ${p}`)}}),e.tool("get_smart_charging_reminders","Get intelligent charging reminders and optimization strategy based on current vehicle state, usage patterns, and conditions",{vin:Pe.z.string().describe("Vehicle identification number (VIN)"),daily_miles:Pe.z.number().optional().default(40).describe("Average daily driving miles (default: 40)"),next_trip_distance:Pe.z.number().optional().describe("Distance of upcoming trip in miles"),weather_temp:Pe.z.number().optional().describe("Current or forecast temperature in Fahrenheit")},async({vin:g,daily_miles:v=40,next_trip_distance:p,weather_temp:y})=>{try{let E=await s.getVehicleState(g);if(!E.battery_level)return{error:"Unable to get battery information",suggestion:"Make sure vehicle is awake and connected to Tessie"};let b=m.generateChargingStrategy(E,v,p,y);return{vehicle_info:{vin:g,timestamp:new Date().toISOString(),location:E.latitude&&E.longitude?await Xa.reverseGeocode(E.latitude,E.longitude):"Location unavailable"},charging_status:{battery_level:`${b.current_status.battery_level}%`,estimated_range:`${b.current_status.range_miles} miles`,charging_state:b.current_status.charging_state,plugged_in:b.current_status.plugged_in,status_emoji:b.current_status.plugged_in?"\u{1F50C}":b.current_status.battery_level<20?"\u{1F50B}":b.current_status.battery_level>80?"\u2705":"\u26A1"},urgent_reminders:b.recommendations.filter(R=>R.priority==="urgent"||R.priority==="high").map(R=>({priority:R.priority.toUpperCase(),title:R.title,message:R.message,action_required:R.action_required,deadline:R.deadline||"None",savings:R.estimated_savings||"N/A",emoji:R.priority==="urgent"?"\u{1F6A8}":"\u26A0\uFE0F"})),optimization_suggestions:b.recommendations.filter(R=>R.priority==="medium"||R.priority==="low").map(R=>({category:R.type.replace("_"," ").toUpperCase(),title:R.title,message:R.message,potential_savings:R.estimated_savings||"N/A",time_sensitive:R.time_sensitive||!1})),charging_schedule:{optimal_timing:{start:b.charging_schedule.optimal_start_time,end:b.charging_schedule.optimal_end_time,off_peak_window:b.charging_schedule.off_peak_window,estimated_savings:`$${b.charging_schedule.estimated_cost_savings.toFixed(2)}`},current_recommendation:b.current_status.plugged_in?"Currently charging - monitor for completion":b.current_status.battery_level<50?"\u{1F50C} Plug in tonight for off-peak charging":b.current_status.battery_level>80?"\u2705 Well charged - no immediate action needed":"\u26A1 Consider charging if planning long trips"},range_analysis:{comfort_level:b.range_analysis.comfort_range?"Comfortable":"Low",emergency_status:b.range_analysis.emergency_range?"CRITICAL":"Safe",recommended_charge_target:`${b.range_analysis.recommended_charge_level}%`,next_charge_timing:b.range_analysis.next_charge_needed,range_emoji:b.range_analysis.emergency_range?"\u{1F6A8}":b.range_analysis.comfort_range?"\u2705":"\u26A0\uFE0F"},smart_insights:b.smart_insights.map(R=>({insight:R,category:R.includes("\u{1F4B8}")?"Cost Optimization":R.includes("\u{1F50B}")?"Battery Health":R.includes("\u2744\uFE0F")||R.includes("\u{1F321}\uFE0F")?"Weather Impact":R.includes("\u{1F4C5}")?"Planning":"General"})),weather_considerations:y?{current_temp:`${y}\xB0F`,impact:y<32?"\u2744\uFE0F Cold weather reduces range 20-30%":y>85?"\u{1F525} Hot weather increases A/C usage 10-15%":"\u{1F324}\uFE0F Mild weather - optimal efficiency conditions",recommendation:y<32?"Charge to 90% and precondition cabin":y>85?"Precondition cabin and consider shade parking":"Standard charging routine is fine"}:{current_temp:"Not provided",impact:"\u{1F321}\uFE0F Weather data not available",recommendation:"Provide weather_temp parameter for weather-specific advice"},cost_optimization:{peak_vs_offpeak:"Off-peak charging saves ~60-70% on electricity costs",daily_cost_estimate:v?`~$${(v*.04).toFixed(2)}/day at off-peak rates`:"Varies by usage",monthly_savings_potential:`$${(b.charging_schedule.estimated_cost_savings*15).toFixed(2)}/month with optimal timing`,tip:"\u{1F4A1} Use Tesla app to schedule charging for 11 PM - 7 AM"}}}catch(E){throw new Error(`Failed to get charging reminders: ${E}`)}}),e.tool("get_vehicles","List all vehicles in the Tessie account",{},async()=>{try{let g=await s.getVehicles();return{total_vehicles:g.length,vehicles:g.map(v=>({vin:v.vin,display_name:v.display_name}))}}catch(g){throw new Error(`Failed to get vehicles: ${g}`)}}),e.tool("natural_language_query",'Process natural language queries about your vehicle data (e.g., "How many miles did I drive last week?")',{query:Pe.z.string().describe("Natural language query about vehicle data"),vin:Pe.z.string().optional().describe("Vehicle identification number (VIN) - optional if only one vehicle")},async({query:g,vin:v})=>{try{let p=r.parseNaturalLanguage(g);if(p.confidence<.5)return{error:"Could not understand the query",confidence:p.confidence,suggestions:["Try queries like: 'How many miles did I drive last week?'","Or: 'What's my current battery level?'","Or: 'Analyze my latest drive'"]};let y=v;if(!y){let E=await s.getVehicles();if(E.length===0)throw new Error("No vehicles found in account");y=E[0].vin}switch(p.operation){case"get_vehicle_current_state":let E=await s.getVehicleState(y,!0);return{query_understood:g,confidence:p.confidence,result:{vehicle:E.display_name,battery_level:E.battery_level,location:{latitude:E.latitude,longitude:E.longitude},locked:E.locked,odometer:E.odometer}};case"get_weekly_mileage":case"get_driving_history":let b=await s.getDrives(y,p.parameters.start_date,p.parameters.end_date,50),R=b.reduce((I,H)=>I+H.odometer_distance,0);return{query_understood:g,confidence:p.confidence,result:{total_miles:Math.round(R*100)/100,total_drives:b.length,period:{start:p.parameters.start_date,end:p.parameters.end_date}}};case"analyze_latest_drive":let q=new Date,$=new Date;$.setDate($.getDate()-(p.parameters.days_back||7));let j=await s.getDrives(y,$.toISOString(),q.toISOString(),100),M=c.analyzeLatestDrive(j);return{query_understood:g,confidence:p.confidence,result:M?{summary:M.summary,drive_distance:M.mergedDrive.total_distance,battery_used:M.batteryConsumption.percentage_used,fsd_miles:M.fsdAnalysis.total_autopilot_miles}:{error:"No recent drives found"}};default:return{query_understood:g,confidence:p.confidence,error:"Query understood but operation not yet implemented",parsed_operation:p.operation}}}catch(p){throw new Error(`Failed to process natural language query: ${p}`)}}),e.server}var xl=$c(require("node:process"),1);var Js=class{append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let t=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),hE(t)}clear(){this._buffer=void 0}};function hE(a){return pf.parse(JSON.parse(a))}function lm(a){return JSON.stringify(a)+`
`}var Xs=class{constructor(e=xl.default.stdin,t=xl.default.stdout){this._stdin=e,this._stdout=t,this._readBuffer=new Js,this._started=!1,this._ondata=s=>{this._readBuffer.append(s),this.processReadBuffer()},this._onerror=s=>{var r;(r=this.onerror)===null||r===void 0||r.call(this,s)}}async start(){if(this._started)throw new Error("StdioServerTransport already started! If using Server class, note that connect() calls start() automatically.");this._started=!0,this._stdin.on("data",this._ondata),this._stdin.on("error",this._onerror)}processReadBuffer(){for(var e,t;;)try{let s=this._readBuffer.readMessage();if(s===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,s)}catch(s){(t=this.onerror)===null||t===void 0||t.call(this,s)}}async close(){var e;this._stdin.off("data",this._ondata),this._stdin.off("error",this._onerror),this._stdin.listenerCount("data")===0&&this._stdin.pause(),this._readBuffer.clear(),(e=this.onclose)===null||e===void 0||e.call(this)}send(e){return new Promise(t=>{let s=lm(e);this._stdout.write(s)?t():this._stdout.once("drain",t)})}};var pE=Object.create,_m=Object.defineProperty,mE=Object.getOwnPropertyDescriptor,ym=Object.getOwnPropertyNames,gE=Object.getPrototypeOf,vE=Object.prototype.hasOwnProperty,um=(a=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(a,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):a)(function(a){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+a+'" is not supported')}),Mr=(a,e)=>function(){return e||(0,a[ym(a)[0]])((e={exports:{}}).exports,e),e.exports},_E=(a,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of ym(e))!vE.call(a,r)&&r!==t&&_m(a,r,{get:()=>e[r],enumerable:!(s=mE(e,r))||s.enumerable});return a},bm=(a,e,t)=>(t=a!=null?pE(gE(a)):{},_E(e||!a||!a.__esModule?_m(t,"default",{value:a,enumerable:!0}):t,a)),yE=Mr({"node_modules/color-name/index.js"(a,e){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}}),wm=Mr({"node_modules/color-convert/conversions.js"(a,e){var t=yE(),s={};for(let l of Object.keys(t))s[t[l]]=l;var r={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};e.exports=r;for(let l of Object.keys(r)){if(!("channels"in r[l]))throw new Error("missing channels property: "+l);if(!("labels"in r[l]))throw new Error("missing channel labels property: "+l);if(r[l].labels.length!==r[l].channels)throw new Error("channel and label counts mismatch: "+l);let{channels:u,labels:d}=r[l];delete r[l].channels,delete r[l].labels,Object.defineProperty(r[l],"channels",{value:u}),Object.defineProperty(r[l],"labels",{value:d})}r.rgb.hsl=function(l){let u=l[0]/255,d=l[1]/255,h=l[2]/255,m=Math.min(u,d,h),g=Math.max(u,d,h),v=g-m,p,y;g===m?p=0:u===g?p=(d-h)/v:d===g?p=2+(h-u)/v:h===g&&(p=4+(u-d)/v),p=Math.min(p*60,360),p<0&&(p+=360);let E=(m+g)/2;return g===m?y=0:E<=.5?y=v/(g+m):y=v/(2-g-m),[p,y*100,E*100]},r.rgb.hsv=function(l){let u,d,h,m,g,v=l[0]/255,p=l[1]/255,y=l[2]/255,E=Math.max(v,p,y),b=E-Math.min(v,p,y),R=function(q){return(E-q)/6/b+1/2};return b===0?(m=0,g=0):(g=b/E,u=R(v),d=R(p),h=R(y),v===E?m=h-d:p===E?m=1/3+u-h:y===E&&(m=2/3+d-u),m<0?m+=1:m>1&&(m-=1)),[m*360,g*100,E*100]},r.rgb.hwb=function(l){let u=l[0],d=l[1],h=l[2],m=r.rgb.hsl(l)[0],g=1/255*Math.min(u,Math.min(d,h));return h=1-1/255*Math.max(u,Math.max(d,h)),[m,g*100,h*100]},r.rgb.cmyk=function(l){let u=l[0]/255,d=l[1]/255,h=l[2]/255,m=Math.min(1-u,1-d,1-h),g=(1-u-m)/(1-m)||0,v=(1-d-m)/(1-m)||0,p=(1-h-m)/(1-m)||0;return[g*100,v*100,p*100,m*100]};function c(l,u){return(l[0]-u[0])**2+(l[1]-u[1])**2+(l[2]-u[2])**2}r.rgb.keyword=function(l){let u=s[l];if(u)return u;let d=1/0,h;for(let m of Object.keys(t)){let g=t[m],v=c(l,g);v<d&&(d=v,h=m)}return h},r.keyword.rgb=function(l){return t[l]},r.rgb.xyz=function(l){let u=l[0]/255,d=l[1]/255,h=l[2]/255;u=u>.04045?((u+.055)/1.055)**2.4:u/12.92,d=d>.04045?((d+.055)/1.055)**2.4:d/12.92,h=h>.04045?((h+.055)/1.055)**2.4:h/12.92;let m=u*.4124+d*.3576+h*.1805,g=u*.2126+d*.7152+h*.0722,v=u*.0193+d*.1192+h*.9505;return[m*100,g*100,v*100]},r.rgb.lab=function(l){let u=r.rgb.xyz(l),d=u[0],h=u[1],m=u[2];d/=95.047,h/=100,m/=108.883,d=d>.008856?d**(1/3):7.787*d+16/116,h=h>.008856?h**(1/3):7.787*h+16/116,m=m>.008856?m**(1/3):7.787*m+16/116;let g=116*h-16,v=500*(d-h),p=200*(h-m);return[g,v,p]},r.hsl.rgb=function(l){let u=l[0]/360,d=l[1]/100,h=l[2]/100,m,g,v;if(d===0)return v=h*255,[v,v,v];h<.5?m=h*(1+d):m=h+d-h*d;let p=2*h-m,y=[0,0,0];for(let E=0;E<3;E++)g=u+1/3*-(E-1),g<0&&g++,g>1&&g--,6*g<1?v=p+(m-p)*6*g:2*g<1?v=m:3*g<2?v=p+(m-p)*(2/3-g)*6:v=p,y[E]=v*255;return y},r.hsl.hsv=function(l){let u=l[0],d=l[1]/100,h=l[2]/100,m=d,g=Math.max(h,.01);h*=2,d*=h<=1?h:2-h,m*=g<=1?g:2-g;let v=(h+d)/2,p=h===0?2*m/(g+m):2*d/(h+d);return[u,p*100,v*100]},r.hsv.rgb=function(l){let u=l[0]/60,d=l[1]/100,h=l[2]/100,m=Math.floor(u)%6,g=u-Math.floor(u),v=255*h*(1-d),p=255*h*(1-d*g),y=255*h*(1-d*(1-g));switch(h*=255,m){case 0:return[h,y,v];case 1:return[p,h,v];case 2:return[v,h,y];case 3:return[v,p,h];case 4:return[y,v,h];case 5:return[h,v,p]}},r.hsv.hsl=function(l){let u=l[0],d=l[1]/100,h=l[2]/100,m=Math.max(h,.01),g,v;v=(2-d)*h;let p=(2-d)*m;return g=d*m,g/=p<=1?p:2-p,g=g||0,v/=2,[u,g*100,v*100]},r.hwb.rgb=function(l){let u=l[0]/360,d=l[1]/100,h=l[2]/100,m=d+h,g;m>1&&(d/=m,h/=m);let v=Math.floor(6*u),p=1-h;g=6*u-v,(v&1)!==0&&(g=1-g);let y=d+g*(p-d),E,b,R;switch(v){default:case 6:case 0:E=p,b=y,R=d;break;case 1:E=y,b=p,R=d;break;case 2:E=d,b=p,R=y;break;case 3:E=d,b=y,R=p;break;case 4:E=y,b=d,R=p;break;case 5:E=p,b=d,R=y;break}return[E*255,b*255,R*255]},r.cmyk.rgb=function(l){let u=l[0]/100,d=l[1]/100,h=l[2]/100,m=l[3]/100,g=1-Math.min(1,u*(1-m)+m),v=1-Math.min(1,d*(1-m)+m),p=1-Math.min(1,h*(1-m)+m);return[g*255,v*255,p*255]},r.xyz.rgb=function(l){let u=l[0]/100,d=l[1]/100,h=l[2]/100,m,g,v;return m=u*3.2406+d*-1.5372+h*-.4986,g=u*-.9689+d*1.8758+h*.0415,v=u*.0557+d*-.204+h*1.057,m=m>.0031308?1.055*m**(1/2.4)-.055:m*12.92,g=g>.0031308?1.055*g**(1/2.4)-.055:g*12.92,v=v>.0031308?1.055*v**(1/2.4)-.055:v*12.92,m=Math.min(Math.max(0,m),1),g=Math.min(Math.max(0,g),1),v=Math.min(Math.max(0,v),1),[m*255,g*255,v*255]},r.xyz.lab=function(l){let u=l[0],d=l[1],h=l[2];u/=95.047,d/=100,h/=108.883,u=u>.008856?u**(1/3):7.787*u+16/116,d=d>.008856?d**(1/3):7.787*d+16/116,h=h>.008856?h**(1/3):7.787*h+16/116;let m=116*d-16,g=500*(u-d),v=200*(d-h);return[m,g,v]},r.lab.xyz=function(l){let u=l[0],d=l[1],h=l[2],m,g,v;g=(u+16)/116,m=d/500+g,v=g-h/200;let p=g**3,y=m**3,E=v**3;return g=p>.008856?p:(g-16/116)/7.787,m=y>.008856?y:(m-16/116)/7.787,v=E>.008856?E:(v-16/116)/7.787,m*=95.047,g*=100,v*=108.883,[m,g,v]},r.lab.lch=function(l){let u=l[0],d=l[1],h=l[2],m;m=Math.atan2(h,d)*360/2/Math.PI,m<0&&(m+=360);let v=Math.sqrt(d*d+h*h);return[u,v,m]},r.lch.lab=function(l){let u=l[0],d=l[1],m=l[2]/360*2*Math.PI,g=d*Math.cos(m),v=d*Math.sin(m);return[u,g,v]},r.rgb.ansi16=function(l,u=null){let[d,h,m]=l,g=u===null?r.rgb.hsv(l)[2]:u;if(g=Math.round(g/50),g===0)return 30;let v=30+(Math.round(m/255)<<2|Math.round(h/255)<<1|Math.round(d/255));return g===2&&(v+=60),v},r.hsv.ansi16=function(l){return r.rgb.ansi16(r.hsv.rgb(l),l[2])},r.rgb.ansi256=function(l){let u=l[0],d=l[1],h=l[2];return u===d&&d===h?u<8?16:u>248?231:Math.round((u-8)/247*24)+232:16+36*Math.round(u/255*5)+6*Math.round(d/255*5)+Math.round(h/255*5)},r.ansi16.rgb=function(l){let u=l%10;if(u===0||u===7)return l>50&&(u+=3.5),u=u/10.5*255,[u,u,u];let d=(~~(l>50)+1)*.5,h=(u&1)*d*255,m=(u>>1&1)*d*255,g=(u>>2&1)*d*255;return[h,m,g]},r.ansi256.rgb=function(l){if(l>=232){let g=(l-232)*10+8;return[g,g,g]}l-=16;let u,d=Math.floor(l/36)/5*255,h=Math.floor((u=l%36)/6)/5*255,m=u%6/5*255;return[d,h,m]},r.rgb.hex=function(l){let d=(((Math.round(l[0])&255)<<16)+((Math.round(l[1])&255)<<8)+(Math.round(l[2])&255)).toString(16).toUpperCase();return"000000".substring(d.length)+d},r.hex.rgb=function(l){let u=l.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!u)return[0,0,0];let d=u[0];u[0].length===3&&(d=d.split("").map(p=>p+p).join(""));let h=parseInt(d,16),m=h>>16&255,g=h>>8&255,v=h&255;return[m,g,v]},r.rgb.hcg=function(l){let u=l[0]/255,d=l[1]/255,h=l[2]/255,m=Math.max(Math.max(u,d),h),g=Math.min(Math.min(u,d),h),v=m-g,p,y;return v<1?p=g/(1-v):p=0,v<=0?y=0:m===u?y=(d-h)/v%6:m===d?y=2+(h-u)/v:y=4+(u-d)/v,y/=6,y%=1,[y*360,v*100,p*100]},r.hsl.hcg=function(l){let u=l[1]/100,d=l[2]/100,h=d<.5?2*u*d:2*u*(1-d),m=0;return h<1&&(m=(d-.5*h)/(1-h)),[l[0],h*100,m*100]},r.hsv.hcg=function(l){let u=l[1]/100,d=l[2]/100,h=u*d,m=0;return h<1&&(m=(d-h)/(1-h)),[l[0],h*100,m*100]},r.hcg.rgb=function(l){let u=l[0]/360,d=l[1]/100,h=l[2]/100;if(d===0)return[h*255,h*255,h*255];let m=[0,0,0],g=u%1*6,v=g%1,p=1-v,y=0;switch(Math.floor(g)){case 0:m[0]=1,m[1]=v,m[2]=0;break;case 1:m[0]=p,m[1]=1,m[2]=0;break;case 2:m[0]=0,m[1]=1,m[2]=v;break;case 3:m[0]=0,m[1]=p,m[2]=1;break;case 4:m[0]=v,m[1]=0,m[2]=1;break;default:m[0]=1,m[1]=0,m[2]=p}return y=(1-d)*h,[(d*m[0]+y)*255,(d*m[1]+y)*255,(d*m[2]+y)*255]},r.hcg.hsv=function(l){let u=l[1]/100,d=l[2]/100,h=u+d*(1-u),m=0;return h>0&&(m=u/h),[l[0],m*100,h*100]},r.hcg.hsl=function(l){let u=l[1]/100,h=l[2]/100*(1-u)+.5*u,m=0;return h>0&&h<.5?m=u/(2*h):h>=.5&&h<1&&(m=u/(2*(1-h))),[l[0],m*100,h*100]},r.hcg.hwb=function(l){let u=l[1]/100,d=l[2]/100,h=u+d*(1-u);return[l[0],(h-u)*100,(1-h)*100]},r.hwb.hcg=function(l){let u=l[1]/100,h=1-l[2]/100,m=h-u,g=0;return m<1&&(g=(h-m)/(1-m)),[l[0],m*100,g*100]},r.apple.rgb=function(l){return[l[0]/65535*255,l[1]/65535*255,l[2]/65535*255]},r.rgb.apple=function(l){return[l[0]/255*65535,l[1]/255*65535,l[2]/255*65535]},r.gray.rgb=function(l){return[l[0]/100*255,l[0]/100*255,l[0]/100*255]},r.gray.hsl=function(l){return[0,0,l[0]]},r.gray.hsv=r.gray.hsl,r.gray.hwb=function(l){return[0,100,l[0]]},r.gray.cmyk=function(l){return[0,0,0,l[0]]},r.gray.lab=function(l){return[l[0],0,0]},r.gray.hex=function(l){let u=Math.round(l[0]/100*255)&255,h=((u<<16)+(u<<8)+u).toString(16).toUpperCase();return"000000".substring(h.length)+h},r.rgb.gray=function(l){return[(l[0]+l[1]+l[2])/3/255*100]}}}),bE=Mr({"node_modules/color-convert/route.js"(a,e){var t=wm();function s(){let u={},d=Object.keys(t);for(let h=d.length,m=0;m<h;m++)u[d[m]]={distance:-1,parent:null};return u}function r(u){let d=s(),h=[u];for(d[u].distance=0;h.length;){let m=h.pop(),g=Object.keys(t[m]);for(let v=g.length,p=0;p<v;p++){let y=g[p],E=d[y];E.distance===-1&&(E.distance=d[m].distance+1,E.parent=m,h.unshift(y))}}return d}function c(u,d){return function(h){return d(u(h))}}function l(u,d){let h=[d[u].parent,u],m=t[d[u].parent][u],g=d[u].parent;for(;d[g].parent;)h.unshift(d[g].parent),m=c(t[d[g].parent][g],m),g=d[g].parent;return m.conversion=h,m}e.exports=function(u){let d=r(u),h={},m=Object.keys(d);for(let g=m.length,v=0;v<g;v++){let p=m[v];d[p].parent!==null&&(h[p]=l(p,d))}return h}}}),wE=Mr({"node_modules/color-convert/index.js"(a,e){var t=wm(),s=bE(),r={},c=Object.keys(t);function l(d){let h=function(...m){let g=m[0];return g==null?g:(g.length>1&&(m=g),d(m))};return"conversion"in d&&(h.conversion=d.conversion),h}function u(d){let h=function(...m){let g=m[0];if(g==null)return g;g.length>1&&(m=g);let v=d(m);if(typeof v=="object")for(let p=v.length,y=0;y<p;y++)v[y]=Math.round(v[y]);return v};return"conversion"in d&&(h.conversion=d.conversion),h}c.forEach(d=>{r[d]={},Object.defineProperty(r[d],"channels",{value:t[d].channels}),Object.defineProperty(r[d],"labels",{value:t[d].labels});let h=s(d);Object.keys(h).forEach(g=>{let v=h[g];r[d][g]=u(v),r[d][g].raw=l(v)})}),e.exports=r}}),xE=Mr({"node_modules/ansi-styles/index.js"(a,e){"use strict";var t=(g,v)=>(...p)=>`\x1B[${g(...p)+v}m`,s=(g,v)=>(...p)=>{let y=g(...p);return`\x1B[${38+v};5;${y}m`},r=(g,v)=>(...p)=>{let y=g(...p);return`\x1B[${38+v};2;${y[0]};${y[1]};${y[2]}m`},c=g=>g,l=(g,v,p)=>[g,v,p],u=(g,v,p)=>{Object.defineProperty(g,v,{get:()=>{let y=p();return Object.defineProperty(g,v,{value:y,enumerable:!0,configurable:!0}),y},enumerable:!0,configurable:!0})},d,h=(g,v,p,y)=>{d===void 0&&(d=wE());let E=y?10:0,b={};for(let[R,q]of Object.entries(d)){let $=R==="ansi16"?"ansi":R;R===v?b[$]=g(p,E):typeof q=="object"&&(b[$]=g(q[v],E))}return b};function m(){let g=new Map,v={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};v.color.gray=v.color.blackBright,v.bgColor.bgGray=v.bgColor.bgBlackBright,v.color.grey=v.color.blackBright,v.bgColor.bgGrey=v.bgColor.bgBlackBright;for(let[p,y]of Object.entries(v)){for(let[E,b]of Object.entries(y))v[E]={open:`\x1B[${b[0]}m`,close:`\x1B[${b[1]}m`},y[E]=v[E],g.set(b[0],b[1]);Object.defineProperty(v,p,{value:y,enumerable:!1})}return Object.defineProperty(v,"codes",{value:g,enumerable:!1}),v.color.close="\x1B[39m",v.bgColor.close="\x1B[49m",u(v.color,"ansi",()=>h(t,"ansi16",c,!1)),u(v.color,"ansi256",()=>h(s,"ansi256",c,!1)),u(v.color,"ansi16m",()=>h(r,"rgb",l,!1)),u(v.bgColor,"ansi",()=>h(t,"ansi16",c,!0)),u(v.bgColor,"ansi256",()=>h(s,"ansi256",c,!0)),u(v.bgColor,"ansi16m",()=>h(r,"rgb",l,!0)),v}Object.defineProperty(e,"exports",{enumerable:!0,get:m})}}),EE=Mr({"node_modules/has-flag/index.js"(a,e){"use strict";e.exports=(t,s=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",c=s.indexOf(r+t),l=s.indexOf("--");return c!==-1&&(l===-1||c<l)}}}),SE=Mr({"node_modules/supports-color/index.js"(a,e){"use strict";var t=um("os"),s=um("tty"),r=EE(),{env:c}=process,l;r("no-color")||r("no-colors")||r("color=false")||r("color=never")?l=0:(r("color")||r("colors")||r("color=true")||r("color=always"))&&(l=1),"FORCE_COLOR"in c&&(c.FORCE_COLOR==="true"?l=1:c.FORCE_COLOR==="false"?l=0:l=c.FORCE_COLOR.length===0?1:Math.min(parseInt(c.FORCE_COLOR,10),3));function u(m){return m===0?!1:{level:m,hasBasic:!0,has256:m>=2,has16m:m>=3}}function d(m,g){if(l===0)return 0;if(r("color=16m")||r("color=full")||r("color=truecolor"))return 3;if(r("color=256"))return 2;if(m&&!g&&l===void 0)return 0;let v=l||0;if(c.TERM==="dumb")return v;if(process.platform==="win32"){let p=t.release().split(".");return Number(p[0])>=10&&Number(p[2])>=10586?Number(p[2])>=14931?3:2:1}if("CI"in c)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(p=>p in c)||c.CI_NAME==="codeship"?1:v;if("TEAMCITY_VERSION"in c)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(c.TEAMCITY_VERSION)?1:0;if(c.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in c){let p=parseInt((c.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(c.TERM_PROGRAM){case"iTerm.app":return p>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(c.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(c.TERM)||"COLORTERM"in c?1:v}function h(m){let g=d(m,m&&m.isTTY);return u(g)}e.exports={supportsColor:h,stdout:u(d(!0,s.isatty(1))),stderr:u(d(!0,s.isatty(2)))}}}),PE=Mr({"node_modules/chalk/source/util.js"(a,e){"use strict";var t=(r,c,l)=>{let u=r.indexOf(c);if(u===-1)return r;let d=c.length,h=0,m="";do m+=r.substr(h,u-h)+c+l,h=u+d,u=r.indexOf(c,h);while(u!==-1);return m+=r.substr(h),m},s=(r,c,l,u)=>{let d=0,h="";do{let m=r[u-1]==="\r";h+=r.substr(d,(m?u-1:u)-d)+c+(m?`\r
`:`
`)+l,d=u+1,u=r.indexOf(`
`,d)}while(u!==-1);return h+=r.substr(d),h};e.exports={stringReplaceAll:t,stringEncaseCRLFWithFirstIndex:s}}}),RE=Mr({"node_modules/chalk/source/templates.js"(a,e){"use strict";var t=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,s=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,r=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,c=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,l=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function u(g){let v=g[0]==="u",p=g[1]==="{";return v&&!p&&g.length===5||g[0]==="x"&&g.length===3?String.fromCharCode(parseInt(g.slice(1),16)):v&&p?String.fromCodePoint(parseInt(g.slice(2,-1),16)):l.get(g)||g}function d(g,v){let p=[],y=v.trim().split(/\s*,\s*/g),E;for(let b of y){let R=Number(b);if(!Number.isNaN(R))p.push(R);else if(E=b.match(r))p.push(E[2].replace(c,(q,$,j)=>$?u($):j));else throw new Error(`Invalid Chalk template style argument: ${b} (in style '${g}')`)}return p}function h(g){s.lastIndex=0;let v=[],p;for(;(p=s.exec(g))!==null;){let y=p[1];if(p[2]){let E=d(y,p[2]);v.push([y].concat(E))}else v.push([y])}return v}function m(g,v){let p={};for(let E of v)for(let b of E.styles)p[b[0]]=E.inverse?null:b.slice(1);let y=g;for(let[E,b]of Object.entries(p))if(Array.isArray(b)){if(!(E in y))throw new Error(`Unknown Chalk style: ${E}`);y=b.length>0?y[E](...b):y[E]}return y}e.exports=(g,v)=>{let p=[],y=[],E=[];if(v.replace(t,(b,R,q,$,j,M)=>{if(R)E.push(u(R));else if($){let I=E.join("");E=[],y.push(p.length===0?I:m(g,p)(I)),p.push({inverse:q,styles:h($)})}else if(j){if(p.length===0)throw new Error("Found extraneous } in Chalk template literal");y.push(m(g,p)(E.join(""))),E=[],p.pop()}else E.push(M)}),y.push(E.join("")),p.length>0){let b=`Chalk template literal is missing ${p.length} closing bracket${p.length===1?"":"s"} (\`}\`)`;throw new Error(b)}return y.join("")}}}),AE=Mr({"node_modules/chalk/source/index.js"(a,e){"use strict";var t=xE(),{stdout:s,stderr:r}=SE(),{stringReplaceAll:c,stringEncaseCRLFWithFirstIndex:l}=PE(),{isArray:u}=Array,d=["ansi","ansi","ansi256","ansi16m"],h=Object.create(null),m=(I,H={})=>{if(H.level&&!(Number.isInteger(H.level)&&H.level>=0&&H.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let W=s?s.level:0;I.level=H.level===void 0?W:H.level},g=class{constructor(I){return v(I)}},v=I=>{let H={};return m(H,I),H.template=(...W)=>j(H.template,...W),Object.setPrototypeOf(H,p.prototype),Object.setPrototypeOf(H.template,H),H.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},H.template.Instance=g,H.template};function p(I){return v(I)}for(let[I,H]of Object.entries(t))h[I]={get(){let W=R(this,b(H.open,H.close,this._styler),this._isEmpty);return Object.defineProperty(this,I,{value:W}),W}};h.visible={get(){let I=R(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:I}),I}};var y=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(let I of y)h[I]={get(){let{level:H}=this;return function(...W){let B=b(t.color[d[H]][I](...W),t.color.close,this._styler);return R(this,B,this._isEmpty)}}};for(let I of y){let H="bg"+I[0].toUpperCase()+I.slice(1);h[H]={get(){let{level:W}=this;return function(...B){let J=b(t.bgColor[d[W]][I](...B),t.bgColor.close,this._styler);return R(this,J,this._isEmpty)}}}}var E=Object.defineProperties(()=>{},{...h,level:{enumerable:!0,get(){return this._generator.level},set(I){this._generator.level=I}}}),b=(I,H,W)=>{let B,J;return W===void 0?(B=I,J=H):(B=W.openAll+I,J=H+W.closeAll),{open:I,close:H,openAll:B,closeAll:J,parent:W}},R=(I,H,W)=>{let B=(...J)=>u(J[0])&&u(J[0].raw)?q(B,j(B,...J)):q(B,J.length===1?""+J[0]:J.join(" "));return Object.setPrototypeOf(B,E),B._generator=I,B._styler=H,B._isEmpty=W,B},q=(I,H)=>{if(I.level<=0||!H)return I._isEmpty?"":H;let W=I._styler;if(W===void 0)return H;let{openAll:B,closeAll:J}=W;if(H.indexOf("\x1B")!==-1)for(;W!==void 0;)H=c(H,W.close,W.open),W=W.parent;let te=H.indexOf(`
`);return te!==-1&&(H=l(H,J,B,te)),B+H+J},$,j=(I,...H)=>{let[W]=H;if(!u(W)||!u(W.raw))return H.join(" ");let B=H.slice(1),J=[W.raw[0]];for(let te=1;te<W.length;te++)J.push(String(B[te-1]).replace(/[{}\\]/g,"\\$&"),String(W.raw[te]));return $===void 0&&($=RE()),$(I,J.join(""))};Object.defineProperties(p.prototype,h);var M=p();M.supportsColor=s,M.stderr=p({level:r?r.level:0}),M.stderr.supportsColor=r,e.exports=M}}),kE=Mr({"node_modules/lodash/lodash.js"(a,e){(function(){var t,s="4.17.21",r=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",h=500,m="__lodash_placeholder__",g=1,v=2,p=4,y=1,E=2,b=1,R=2,q=4,$=8,j=16,M=32,I=64,H=128,W=256,B=512,J=30,te="...",ie=800,G=16,Q=1,se=2,Ue=3,ge=1/0,_e=9007199254740991,Ee=17976931348623157e292,le=NaN,Ne=4294967295,xt=Ne-1,At=Ne>>>1,Le=[["ary",H],["bind",b],["bindKey",R],["curry",$],["curryRight",j],["flip",B],["partial",M],["partialRight",I],["rearg",W]],Ke="[object Arguments]",ct="[object Array]",kt="[object AsyncFunction]",Bt="[object Boolean]",Mt="[object Date]",dt="[object DOMException]",Ye="[object Error]",ur="[object Function]",_t="[object GeneratorFunction]",ye="[object Map]",Vt="[object Number]",Er="[object Null]",Tt="[object Object]",Lr="[object Promise]",yt="[object Proxy]",Et="[object RegExp]",Je="[object Set]",mt="[object String]",Lt="[object Symbol]",Ft="[object Undefined]",Fr="[object WeakMap]",Pa="[object WeakSet]",Ct="[object ArrayBuffer]",dr="[object DataView]",Gn="[object Float32Array]",Kn="[object Float64Array]",Wr="[object Int8Array]",Yn="[object Int16Array]",Ra="[object Int32Array]",Aa="[object Uint8Array]",Qn="[object Uint8ClampedArray]",Wt="[object Uint16Array]",ka="[object Uint32Array]",_o=/\b__p \+= '';/g,yo=/\b(__p \+=) '' \+/g,bo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ai=/&(?:amp|lt|gt|quot|#39);/g,ii=/[&<>"']/g,hn=RegExp(ai.source),wo=RegExp(ii.source),si=/<%-([\s\S]+?)%>/g,xo=/<%([\s\S]+?)%>/g,Jn=/<%=([\s\S]+?)%>/g,oi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Eo=/^\w*$/,ci=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ta=/[\\^$.*+?()[\]{}|]/g,li=RegExp(Ta.source),k=/^\s+/,P=/\s/,C=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,L=/\{\n\/\* \[wrapped with (.+)\] \*/,N=/,? & /,re=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,be=/[()=,{}\[\]\/\s]/,$e=/\\(\\)?/g,qe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,lt=/\w*$/,De=/^[-+]0x[0-9a-f]+$/i,nt=/^0b[01]+$/i,ft=/^\[object .+?Constructor\]$/,Xe=/^0o[0-7]+$/i,Fe=/^(?:0|[1-9]\d*)$/,at=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,je=/($^)/,Gr=/['\n\r\u2028\u2029\\]/g,St="\\ud800-\\udfff",Gt="\\u0300-\\u036f",Ve="\\ufe20-\\ufe2f",Nt="\\u20d0-\\u20ff",jt=Gt+Ve+Nt,rr="\\u2700-\\u27bf",Nr="a-z\\xdf-\\xf6\\xf8-\\xff",Sr="\\xac\\xb1\\xd7\\xf7",On="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Xn="\\u2000-\\u206f",ea=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Kr="A-Z\\xc0-\\xd6\\xd8-\\xde",Yr="\\ufe0e\\ufe0f",fr=Sr+On+Xn+ea,jr="['\u2019]",Ca="["+St+"]",zr="["+fr+"]",ta="["+jt+"]",ui="\\d+",di="["+rr+"]",pn="["+Nr+"]",mn="[^"+St+fr+ui+rr+Nr+Kr+"]",ra="\\ud83c[\\udffb-\\udfff]",$n="(?:"+ta+"|"+ra+")",fi="[^"+St+"]",na="(?:\\ud83c[\\udde6-\\uddff]){2}",Da="[\\ud800-\\udbff][\\udc00-\\udfff]",Ot="["+Kr+"]",Qr="\\u200d",aa="(?:"+pn+"|"+mn+")",ia="(?:"+Ot+"|"+mn+")",Jr="(?:"+jr+"(?:d|ll|m|re|s|t|ve))?",So="(?:"+jr+"(?:D|LL|M|RE|S|T|VE))?",Xr=$n+"?",gn="["+Yr+"]?",hi="(?:"+Qr+"(?:"+[fi,na,Da].join("|")+")"+gn+Xr+")*",Po="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ro="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",pi=gn+Xr+hi,Zl="(?:"+[di,na,Da].join("|")+")"+pi,Bl="(?:"+[fi+ta+"?",ta,na,Da,Ca].join("|")+")",Vl=RegExp(jr,"g"),Wl=RegExp(ta,"g"),mi=RegExp(ra+"(?="+ra+")|"+Bl+pi,"g"),Gl=RegExp([Ot+"?"+pn+"+"+Jr+"(?="+[zr,Ot,"$"].join("|")+")",ia+"+"+So+"(?="+[zr,Ot+aa,"$"].join("|")+")",Ot+"?"+aa+"+"+Jr,Ot+"+"+So,Ro,Po,ui,Zl].join("|"),"g"),Kl=RegExp("["+Qr+St+jt+Yr+"]"),jm=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,zm=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qm=-1,it={};it[Gn]=it[Kn]=it[Wr]=it[Yn]=it[Ra]=it[Aa]=it[Qn]=it[Wt]=it[ka]=!0,it[Ke]=it[ct]=it[Ct]=it[Bt]=it[dr]=it[Mt]=it[Ye]=it[ur]=it[ye]=it[Vt]=it[Tt]=it[Et]=it[Je]=it[mt]=it[Fr]=!1;var et={};et[Ke]=et[ct]=et[Ct]=et[dr]=et[Bt]=et[Mt]=et[Gn]=et[Kn]=et[Wr]=et[Yn]=et[Ra]=et[ye]=et[Vt]=et[Tt]=et[Et]=et[Je]=et[mt]=et[Lt]=et[Aa]=et[Qn]=et[Wt]=et[ka]=!0,et[Ye]=et[ur]=et[Fr]=!1;var Um={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Hm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Zm={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Bm={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Vm=parseFloat,Wm=parseInt,Yl=typeof global=="object"&&global&&global.Object===Object&&global,Gm=typeof self=="object"&&self&&self.Object===Object&&self,Pt=Yl||Gm||Function("return this")(),Ao=typeof a=="object"&&a&&!a.nodeType&&a,In=Ao&&typeof e=="object"&&e&&!e.nodeType&&e,Ql=In&&In.exports===Ao,ko=Ql&&Yl.process,hr=(function(){try{var D=In&&In.require&&In.require("util").types;return D||ko&&ko.binding&&ko.binding("util")}catch{}})(),Jl=hr&&hr.isArrayBuffer,Xl=hr&&hr.isDate,eu=hr&&hr.isMap,tu=hr&&hr.isRegExp,ru=hr&&hr.isSet,nu=hr&&hr.isTypedArray;function nr(D,z,F){switch(F.length){case 0:return D.call(z);case 1:return D.call(z,F[0]);case 2:return D.call(z,F[0],F[1]);case 3:return D.call(z,F[0],F[1],F[2])}return D.apply(z,F)}function Km(D,z,F,ae){for(var ve=-1,He=D==null?0:D.length;++ve<He;){var bt=D[ve];z(ae,bt,F(bt),D)}return ae}function pr(D,z){for(var F=-1,ae=D==null?0:D.length;++F<ae&&z(D[F],F,D)!==!1;);return D}function Ym(D,z){for(var F=D==null?0:D.length;F--&&z(D[F],F,D)!==!1;);return D}function au(D,z){for(var F=-1,ae=D==null?0:D.length;++F<ae;)if(!z(D[F],F,D))return!1;return!0}function vn(D,z){for(var F=-1,ae=D==null?0:D.length,ve=0,He=[];++F<ae;){var bt=D[F];z(bt,F,D)&&(He[ve++]=bt)}return He}function gi(D,z){var F=D==null?0:D.length;return!!F&&sa(D,z,0)>-1}function To(D,z,F){for(var ae=-1,ve=D==null?0:D.length;++ae<ve;)if(F(z,D[ae]))return!0;return!1}function st(D,z){for(var F=-1,ae=D==null?0:D.length,ve=Array(ae);++F<ae;)ve[F]=z(D[F],F,D);return ve}function _n(D,z){for(var F=-1,ae=z.length,ve=D.length;++F<ae;)D[ve+F]=z[F];return D}function Co(D,z,F,ae){var ve=-1,He=D==null?0:D.length;for(ae&&He&&(F=D[++ve]);++ve<He;)F=z(F,D[ve],ve,D);return F}function Qm(D,z,F,ae){var ve=D==null?0:D.length;for(ae&&ve&&(F=D[--ve]);ve--;)F=z(F,D[ve],ve,D);return F}function Do(D,z){for(var F=-1,ae=D==null?0:D.length;++F<ae;)if(z(D[F],F,D))return!0;return!1}var Jm=Oo("length");function Xm(D){return D.split("")}function eg(D){return D.match(re)||[]}function iu(D,z,F){var ae;return F(D,function(ve,He,bt){if(z(ve,He,bt))return ae=He,!1}),ae}function vi(D,z,F,ae){for(var ve=D.length,He=F+(ae?1:-1);ae?He--:++He<ve;)if(z(D[He],He,D))return He;return-1}function sa(D,z,F){return z===z?fg(D,z,F):vi(D,su,F)}function tg(D,z,F,ae){for(var ve=F-1,He=D.length;++ve<He;)if(ae(D[ve],z))return ve;return-1}function su(D){return D!==D}function ou(D,z){var F=D==null?0:D.length;return F?Io(D,z)/F:le}function Oo(D){return function(z){return z==null?t:z[D]}}function $o(D){return function(z){return D==null?t:D[z]}}function cu(D,z,F,ae,ve){return ve(D,function(He,bt,Qe){F=ae?(ae=!1,He):z(F,He,bt,Qe)}),F}function rg(D,z){var F=D.length;for(D.sort(z);F--;)D[F]=D[F].value;return D}function Io(D,z){for(var F,ae=-1,ve=D.length;++ae<ve;){var He=z(D[ae]);He!==t&&(F=F===t?He:F+He)}return F}function Mo(D,z){for(var F=-1,ae=Array(D);++F<D;)ae[F]=z(F);return ae}function ng(D,z){return st(z,function(F){return[F,D[F]]})}function lu(D){return D&&D.slice(0,hu(D)+1).replace(k,"")}function ar(D){return function(z){return D(z)}}function Lo(D,z){return st(z,function(F){return D[F]})}function Oa(D,z){return D.has(z)}function uu(D,z){for(var F=-1,ae=D.length;++F<ae&&sa(z,D[F],0)>-1;);return F}function du(D,z){for(var F=D.length;F--&&sa(z,D[F],0)>-1;);return F}function ag(D,z){for(var F=D.length,ae=0;F--;)D[F]===z&&++ae;return ae}var ig=$o(Um),sg=$o(Hm);function og(D){return"\\"+Bm[D]}function cg(D,z){return D==null?t:D[z]}function oa(D){return Kl.test(D)}function lg(D){return jm.test(D)}function ug(D){for(var z,F=[];!(z=D.next()).done;)F.push(z.value);return F}function Fo(D){var z=-1,F=Array(D.size);return D.forEach(function(ae,ve){F[++z]=[ve,ae]}),F}function fu(D,z){return function(F){return D(z(F))}}function yn(D,z){for(var F=-1,ae=D.length,ve=0,He=[];++F<ae;){var bt=D[F];(bt===z||bt===m)&&(D[F]=m,He[ve++]=F)}return He}function _i(D){var z=-1,F=Array(D.size);return D.forEach(function(ae){F[++z]=ae}),F}function dg(D){var z=-1,F=Array(D.size);return D.forEach(function(ae){F[++z]=[ae,ae]}),F}function fg(D,z,F){for(var ae=F-1,ve=D.length;++ae<ve;)if(D[ae]===z)return ae;return-1}function hg(D,z,F){for(var ae=F+1;ae--;)if(D[ae]===z)return ae;return ae}function ca(D){return oa(D)?mg(D):Jm(D)}function Pr(D){return oa(D)?gg(D):Xm(D)}function hu(D){for(var z=D.length;z--&&P.test(D.charAt(z)););return z}var pg=$o(Zm);function mg(D){for(var z=mi.lastIndex=0;mi.test(D);)++z;return z}function gg(D){return D.match(mi)||[]}function vg(D){return D.match(Gl)||[]}var _g=(function D(z){z=z==null?Pt:bn.defaults(Pt.Object(),z,bn.pick(Pt,zm));var F=z.Array,ae=z.Date,ve=z.Error,He=z.Function,bt=z.Math,Qe=z.Object,No=z.RegExp,yg=z.String,mr=z.TypeError,yi=F.prototype,bg=He.prototype,la=Qe.prototype,bi=z["__core-js_shared__"],wi=bg.toString,We=la.hasOwnProperty,wg=0,pu=(function(){var n=/[^.]+$/.exec(bi&&bi.keys&&bi.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})(),xi=la.toString,xg=wi.call(Qe),Eg=Pt._,Sg=No("^"+wi.call(We).replace(Ta,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ei=Ql?z.Buffer:t,wn=z.Symbol,Si=z.Uint8Array,mu=Ei?Ei.allocUnsafe:t,Pi=fu(Qe.getPrototypeOf,Qe),gu=Qe.create,vu=la.propertyIsEnumerable,Ri=yi.splice,_u=wn?wn.isConcatSpreadable:t,$a=wn?wn.iterator:t,Mn=wn?wn.toStringTag:t,Ai=(function(){try{var n=zn(Qe,"defineProperty");return n({},"",{}),n}catch{}})(),Pg=z.clearTimeout!==Pt.clearTimeout&&z.clearTimeout,Rg=ae&&ae.now!==Pt.Date.now&&ae.now,Ag=z.setTimeout!==Pt.setTimeout&&z.setTimeout,ki=bt.ceil,Ti=bt.floor,jo=Qe.getOwnPropertySymbols,kg=Ei?Ei.isBuffer:t,yu=z.isFinite,Tg=yi.join,Cg=fu(Qe.keys,Qe),wt=bt.max,$t=bt.min,Dg=ae.now,Og=z.parseInt,bu=bt.random,$g=yi.reverse,zo=zn(z,"DataView"),Ia=zn(z,"Map"),qo=zn(z,"Promise"),ua=zn(z,"Set"),Ma=zn(z,"WeakMap"),La=zn(Qe,"create"),Ci=Ma&&new Ma,da={},Ig=qn(zo),Mg=qn(Ia),Lg=qn(qo),Fg=qn(ua),Ng=qn(Ma),Di=wn?wn.prototype:t,Fa=Di?Di.valueOf:t,wu=Di?Di.toString:t;function x(n){if(ht(n)&&!we(n)&&!(n instanceof Oe)){if(n instanceof gr)return n;if(We.call(n,"__wrapped__"))return xd(n)}return new gr(n)}var fa=(function(){function n(){}return function(i){if(!ut(i))return{};if(gu)return gu(i);n.prototype=i;var o=new n;return n.prototype=t,o}})();function Oi(){}function gr(n,i){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=t}x.templateSettings={escape:si,evaluate:xo,interpolate:Jn,variable:"",imports:{_:x}},x.prototype=Oi.prototype,x.prototype.constructor=x,gr.prototype=fa(Oi.prototype),gr.prototype.constructor=gr;function Oe(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ne,this.__views__=[]}function jg(){var n=new Oe(this.__wrapped__);return n.__actions__=Kt(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Kt(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Kt(this.__views__),n}function zg(){if(this.__filtered__){var n=new Oe(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function qg(){var n=this.__wrapped__.value(),i=this.__dir__,o=we(n),f=i<0,_=o?n.length:0,S=Xv(0,_,this.__views__),A=S.start,T=S.end,O=T-A,U=f?T:A-1,Z=this.__iteratees__,V=Z.length,X=0,oe=$t(O,this.__takeCount__);if(!o||!f&&_==O&&oe==O)return Bu(n,this.__actions__);var de=[];e:for(;O--&&X<oe;){U+=i;for(var Re=-1,fe=n[U];++Re<V;){var ke=Z[Re],Ie=ke.iteratee,or=ke.type,Ut=Ie(fe);if(or==se)fe=Ut;else if(!Ut){if(or==Q)continue e;break e}}de[X++]=fe}return de}Oe.prototype=fa(Oi.prototype),Oe.prototype.constructor=Oe;function Ln(n){var i=-1,o=n==null?0:n.length;for(this.clear();++i<o;){var f=n[i];this.set(f[0],f[1])}}function Ug(){this.__data__=La?La(null):{},this.size=0}function Hg(n){var i=this.has(n)&&delete this.__data__[n];return this.size-=i?1:0,i}function Zg(n){var i=this.__data__;if(La){var o=i[n];return o===d?t:o}return We.call(i,n)?i[n]:t}function Bg(n){var i=this.__data__;return La?i[n]!==t:We.call(i,n)}function Vg(n,i){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=La&&i===t?d:i,this}Ln.prototype.clear=Ug,Ln.prototype.delete=Hg,Ln.prototype.get=Zg,Ln.prototype.has=Bg,Ln.prototype.set=Vg;function en(n){var i=-1,o=n==null?0:n.length;for(this.clear();++i<o;){var f=n[i];this.set(f[0],f[1])}}function Wg(){this.__data__=[],this.size=0}function Gg(n){var i=this.__data__,o=$i(i,n);if(o<0)return!1;var f=i.length-1;return o==f?i.pop():Ri.call(i,o,1),--this.size,!0}function Kg(n){var i=this.__data__,o=$i(i,n);return o<0?t:i[o][1]}function Yg(n){return $i(this.__data__,n)>-1}function Qg(n,i){var o=this.__data__,f=$i(o,n);return f<0?(++this.size,o.push([n,i])):o[f][1]=i,this}en.prototype.clear=Wg,en.prototype.delete=Gg,en.prototype.get=Kg,en.prototype.has=Yg,en.prototype.set=Qg;function tn(n){var i=-1,o=n==null?0:n.length;for(this.clear();++i<o;){var f=n[i];this.set(f[0],f[1])}}function Jg(){this.size=0,this.__data__={hash:new Ln,map:new(Ia||en),string:new Ln}}function Xg(n){var i=Bi(this,n).delete(n);return this.size-=i?1:0,i}function ev(n){return Bi(this,n).get(n)}function tv(n){return Bi(this,n).has(n)}function rv(n,i){var o=Bi(this,n),f=o.size;return o.set(n,i),this.size+=o.size==f?0:1,this}tn.prototype.clear=Jg,tn.prototype.delete=Xg,tn.prototype.get=ev,tn.prototype.has=tv,tn.prototype.set=rv;function Fn(n){var i=-1,o=n==null?0:n.length;for(this.__data__=new tn;++i<o;)this.add(n[i])}function nv(n){return this.__data__.set(n,d),this}function av(n){return this.__data__.has(n)}Fn.prototype.add=Fn.prototype.push=nv,Fn.prototype.has=av;function Rr(n){var i=this.__data__=new en(n);this.size=i.size}function iv(){this.__data__=new en,this.size=0}function sv(n){var i=this.__data__,o=i.delete(n);return this.size=i.size,o}function ov(n){return this.__data__.get(n)}function cv(n){return this.__data__.has(n)}function lv(n,i){var o=this.__data__;if(o instanceof en){var f=o.__data__;if(!Ia||f.length<r-1)return f.push([n,i]),this.size=++o.size,this;o=this.__data__=new tn(f)}return o.set(n,i),this.size=o.size,this}Rr.prototype.clear=iv,Rr.prototype.delete=sv,Rr.prototype.get=ov,Rr.prototype.has=cv,Rr.prototype.set=lv;function xu(n,i){var o=we(n),f=!o&&Un(n),_=!o&&!f&&Rn(n),S=!o&&!f&&!_&&ga(n),A=o||f||_||S,T=A?Mo(n.length,yg):[],O=T.length;for(var U in n)(i||We.call(n,U))&&!(A&&(U=="length"||_&&(U=="offset"||U=="parent")||S&&(U=="buffer"||U=="byteLength"||U=="byteOffset")||sn(U,O)))&&T.push(U);return T}function Eu(n){var i=n.length;return i?n[Jo(0,i-1)]:t}function uv(n,i){return Vi(Kt(n),Nn(i,0,n.length))}function dv(n){return Vi(Kt(n))}function Uo(n,i,o){(o!==t&&!Ar(n[i],o)||o===t&&!(i in n))&&rn(n,i,o)}function Na(n,i,o){var f=n[i];(!(We.call(n,i)&&Ar(f,o))||o===t&&!(i in n))&&rn(n,i,o)}function $i(n,i){for(var o=n.length;o--;)if(Ar(n[o][0],i))return o;return-1}function fv(n,i,o,f){return xn(n,function(_,S,A){i(f,_,o(_),A)}),f}function Su(n,i){return n&&Ur(i,Rt(i),n)}function hv(n,i){return n&&Ur(i,Qt(i),n)}function rn(n,i,o){i=="__proto__"&&Ai?Ai(n,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):n[i]=o}function Ho(n,i){for(var o=-1,f=i.length,_=F(f),S=n==null;++o<f;)_[o]=S?t:Ec(n,i[o]);return _}function Nn(n,i,o){return n===n&&(o!==t&&(n=n<=o?n:o),i!==t&&(n=n>=i?n:i)),n}function vr(n,i,o,f,_,S){var A,T=i&g,O=i&v,U=i&p;if(o&&(A=_?o(n,f,_,S):o(n)),A!==t)return A;if(!ut(n))return n;var Z=we(n);if(Z){if(A=t_(n),!T)return Kt(n,A)}else{var V=It(n),X=V==ur||V==_t;if(Rn(n))return Gu(n,T);if(V==Tt||V==Ke||X&&!_){if(A=O||X?{}:hd(n),!T)return O?Zv(n,hv(A,n)):Hv(n,Su(A,n))}else{if(!et[V])return _?n:{};A=r_(n,V,T)}}S||(S=new Rr);var oe=S.get(n);if(oe)return oe;S.set(n,A),Ud(n)?n.forEach(function(fe){A.add(vr(fe,i,o,fe,n,S))}):zd(n)&&n.forEach(function(fe,ke){A.set(ke,vr(fe,i,o,ke,n,S))});var de=U?O?lc:cc:O?Qt:Rt,Re=Z?t:de(n);return pr(Re||n,function(fe,ke){Re&&(ke=fe,fe=n[ke]),Na(A,ke,vr(fe,i,o,ke,n,S))}),A}function pv(n){var i=Rt(n);return function(o){return Pu(o,n,i)}}function Pu(n,i,o){var f=o.length;if(n==null)return!f;for(n=Qe(n);f--;){var _=o[f],S=i[_],A=n[_];if(A===t&&!(_ in n)||!S(A))return!1}return!0}function Ru(n,i,o){if(typeof n!="function")throw new mr(l);return Ba(function(){n.apply(t,o)},i)}function ja(n,i,o,f){var _=-1,S=gi,A=!0,T=n.length,O=[],U=i.length;if(!T)return O;o&&(i=st(i,ar(o))),f?(S=To,A=!1):i.length>=r&&(S=Oa,A=!1,i=new Fn(i));e:for(;++_<T;){var Z=n[_],V=o==null?Z:o(Z);if(Z=f||Z!==0?Z:0,A&&V===V){for(var X=U;X--;)if(i[X]===V)continue e;O.push(Z)}else S(i,V,f)||O.push(Z)}return O}var xn=Xu(qr),Au=Xu(Bo,!0);function mv(n,i){var o=!0;return xn(n,function(f,_,S){return o=!!i(f,_,S),o}),o}function Ii(n,i,o){for(var f=-1,_=n.length;++f<_;){var S=n[f],A=i(S);if(A!=null&&(T===t?A===A&&!sr(A):o(A,T)))var T=A,O=S}return O}function gv(n,i,o,f){var _=n.length;for(o=Se(o),o<0&&(o=-o>_?0:_+o),f=f===t||f>_?_:Se(f),f<0&&(f+=_),f=o>f?0:Zd(f);o<f;)n[o++]=i;return n}function ku(n,i){var o=[];return xn(n,function(f,_,S){i(f,_,S)&&o.push(f)}),o}function Dt(n,i,o,f,_){var S=-1,A=n.length;for(o||(o=a_),_||(_=[]);++S<A;){var T=n[S];i>0&&o(T)?i>1?Dt(T,i-1,o,f,_):_n(_,T):f||(_[_.length]=T)}return _}var Zo=ed(),Tu=ed(!0);function qr(n,i){return n&&Zo(n,i,Rt)}function Bo(n,i){return n&&Tu(n,i,Rt)}function Mi(n,i){return vn(i,function(o){return on(n[o])})}function jn(n,i){i=Sn(i,n);for(var o=0,f=i.length;n!=null&&o<f;)n=n[Hr(i[o++])];return o&&o==f?n:t}function Cu(n,i,o){var f=i(n);return we(n)?f:_n(f,o(n))}function zt(n){return n==null?n===t?Ft:Er:Mn&&Mn in Qe(n)?Jv(n):d_(n)}function Vo(n,i){return n>i}function vv(n,i){return n!=null&&We.call(n,i)}function _v(n,i){return n!=null&&i in Qe(n)}function yv(n,i,o){return n>=$t(i,o)&&n<wt(i,o)}function Wo(n,i,o){for(var f=o?To:gi,_=n[0].length,S=n.length,A=S,T=F(S),O=1/0,U=[];A--;){var Z=n[A];A&&i&&(Z=st(Z,ar(i))),O=$t(Z.length,O),T[A]=!o&&(i||_>=120&&Z.length>=120)?new Fn(A&&Z):t}Z=n[0];var V=-1,X=T[0];e:for(;++V<_&&U.length<O;){var oe=Z[V],de=i?i(oe):oe;if(oe=o||oe!==0?oe:0,!(X?Oa(X,de):f(U,de,o))){for(A=S;--A;){var Re=T[A];if(!(Re?Oa(Re,de):f(n[A],de,o)))continue e}X&&X.push(de),U.push(oe)}}return U}function bv(n,i,o,f){return qr(n,function(_,S,A){i(f,o(_),S,A)}),f}function za(n,i,o){i=Sn(i,n),n=vd(n,i);var f=n==null?n:n[Hr(yr(i))];return f==null?t:nr(f,n,o)}function Du(n){return ht(n)&&zt(n)==Ke}function wv(n){return ht(n)&&zt(n)==Ct}function xv(n){return ht(n)&&zt(n)==Mt}function qa(n,i,o,f,_){return n===i?!0:n==null||i==null||!ht(n)&&!ht(i)?n!==n&&i!==i:Ev(n,i,o,f,qa,_)}function Ev(n,i,o,f,_,S){var A=we(n),T=we(i),O=A?ct:It(n),U=T?ct:It(i);O=O==Ke?Tt:O,U=U==Ke?Tt:U;var Z=O==Tt,V=U==Tt,X=O==U;if(X&&Rn(n)){if(!Rn(i))return!1;A=!0,Z=!1}if(X&&!Z)return S||(S=new Rr),A||ga(n)?ud(n,i,o,f,_,S):Yv(n,i,O,o,f,_,S);if(!(o&y)){var oe=Z&&We.call(n,"__wrapped__"),de=V&&We.call(i,"__wrapped__");if(oe||de){var Re=oe?n.value():n,fe=de?i.value():i;return S||(S=new Rr),_(Re,fe,o,f,S)}}return X?(S||(S=new Rr),Qv(n,i,o,f,_,S)):!1}function Sv(n){return ht(n)&&It(n)==ye}function Go(n,i,o,f){var _=o.length,S=_,A=!f;if(n==null)return!S;for(n=Qe(n);_--;){var T=o[_];if(A&&T[2]?T[1]!==n[T[0]]:!(T[0]in n))return!1}for(;++_<S;){T=o[_];var O=T[0],U=n[O],Z=T[1];if(A&&T[2]){if(U===t&&!(O in n))return!1}else{var V=new Rr;if(f)var X=f(U,Z,O,n,i,V);if(!(X===t?qa(Z,U,y|E,f,V):X))return!1}}return!0}function Ou(n){if(!ut(n)||s_(n))return!1;var i=on(n)?Sg:ft;return i.test(qn(n))}function Pv(n){return ht(n)&&zt(n)==Et}function Rv(n){return ht(n)&&It(n)==Je}function Av(n){return ht(n)&&Ji(n.length)&&!!it[zt(n)]}function $u(n){return typeof n=="function"?n:n==null?Jt:typeof n=="object"?we(n)?Lu(n[0],n[1]):Mu(n):tf(n)}function Ko(n){if(!Za(n))return Cg(n);var i=[];for(var o in Qe(n))We.call(n,o)&&o!="constructor"&&i.push(o);return i}function kv(n){if(!ut(n))return u_(n);var i=Za(n),o=[];for(var f in n)f=="constructor"&&(i||!We.call(n,f))||o.push(f);return o}function Yo(n,i){return n<i}function Iu(n,i){var o=-1,f=Yt(n)?F(n.length):[];return xn(n,function(_,S,A){f[++o]=i(_,S,A)}),f}function Mu(n){var i=dc(n);return i.length==1&&i[0][2]?md(i[0][0],i[0][1]):function(o){return o===n||Go(o,n,i)}}function Lu(n,i){return hc(n)&&pd(i)?md(Hr(n),i):function(o){var f=Ec(o,n);return f===t&&f===i?Sc(o,n):qa(i,f,y|E)}}function Li(n,i,o,f,_){n!==i&&Zo(i,function(S,A){if(_||(_=new Rr),ut(S))Tv(n,i,A,o,Li,f,_);else{var T=f?f(mc(n,A),S,A+"",n,i,_):t;T===t&&(T=S),Uo(n,A,T)}},Qt)}function Tv(n,i,o,f,_,S,A){var T=mc(n,o),O=mc(i,o),U=A.get(O);if(U){Uo(n,o,U);return}var Z=S?S(T,O,o+"",n,i,A):t,V=Z===t;if(V){var X=we(O),oe=!X&&Rn(O),de=!X&&!oe&&ga(O);Z=O,X||oe||de?we(T)?Z=T:gt(T)?Z=Kt(T):oe?(V=!1,Z=Gu(O,!0)):de?(V=!1,Z=Ku(O,!0)):Z=[]:Va(O)||Un(O)?(Z=T,Un(T)?Z=Bd(T):(!ut(T)||on(T))&&(Z=hd(O))):V=!1}V&&(A.set(O,Z),_(Z,O,f,S,A),A.delete(O)),Uo(n,o,Z)}function Fu(n,i){var o=n.length;if(o)return i+=i<0?o:0,sn(i,o)?n[i]:t}function Nu(n,i,o){i.length?i=st(i,function(S){return we(S)?function(A){return jn(A,S.length===1?S[0]:S)}:S}):i=[Jt];var f=-1;i=st(i,ar(ue()));var _=Iu(n,function(S,A,T){var O=st(i,function(U){return U(S)});return{criteria:O,index:++f,value:S}});return rg(_,function(S,A){return Uv(S,A,o)})}function Cv(n,i){return ju(n,i,function(o,f){return Sc(n,f)})}function ju(n,i,o){for(var f=-1,_=i.length,S={};++f<_;){var A=i[f],T=jn(n,A);o(T,A)&&Ua(S,Sn(A,n),T)}return S}function Dv(n){return function(i){return jn(i,n)}}function Qo(n,i,o,f){var _=f?tg:sa,S=-1,A=i.length,T=n;for(n===i&&(i=Kt(i)),o&&(T=st(n,ar(o)));++S<A;)for(var O=0,U=i[S],Z=o?o(U):U;(O=_(T,Z,O,f))>-1;)T!==n&&Ri.call(T,O,1),Ri.call(n,O,1);return n}function zu(n,i){for(var o=n?i.length:0,f=o-1;o--;){var _=i[o];if(o==f||_!==S){var S=_;sn(_)?Ri.call(n,_,1):tc(n,_)}}return n}function Jo(n,i){return n+Ti(bu()*(i-n+1))}function Ov(n,i,o,f){for(var _=-1,S=wt(ki((i-n)/(o||1)),0),A=F(S);S--;)A[f?S:++_]=n,n+=o;return A}function Xo(n,i){var o="";if(!n||i<1||i>_e)return o;do i%2&&(o+=n),i=Ti(i/2),i&&(n+=n);while(i);return o}function Ae(n,i){return gc(gd(n,i,Jt),n+"")}function $v(n){return Eu(va(n))}function Iv(n,i){var o=va(n);return Vi(o,Nn(i,0,o.length))}function Ua(n,i,o,f){if(!ut(n))return n;i=Sn(i,n);for(var _=-1,S=i.length,A=S-1,T=n;T!=null&&++_<S;){var O=Hr(i[_]),U=o;if(O==="__proto__"||O==="constructor"||O==="prototype")return n;if(_!=A){var Z=T[O];U=f?f(Z,O,T):t,U===t&&(U=ut(Z)?Z:sn(i[_+1])?[]:{})}Na(T,O,U),T=T[O]}return n}var qu=Ci?function(n,i){return Ci.set(n,i),n}:Jt,Mv=Ai?function(n,i){return Ai(n,"toString",{configurable:!0,enumerable:!1,value:Rc(i),writable:!0})}:Jt;function Lv(n){return Vi(va(n))}function _r(n,i,o){var f=-1,_=n.length;i<0&&(i=-i>_?0:_+i),o=o>_?_:o,o<0&&(o+=_),_=i>o?0:o-i>>>0,i>>>=0;for(var S=F(_);++f<_;)S[f]=n[f+i];return S}function Fv(n,i){var o;return xn(n,function(f,_,S){return o=i(f,_,S),!o}),!!o}function Fi(n,i,o){var f=0,_=n==null?f:n.length;if(typeof i=="number"&&i===i&&_<=At){for(;f<_;){var S=f+_>>>1,A=n[S];A!==null&&!sr(A)&&(o?A<=i:A<i)?f=S+1:_=S}return _}return ec(n,i,Jt,o)}function ec(n,i,o,f){var _=0,S=n==null?0:n.length;if(S===0)return 0;i=o(i);for(var A=i!==i,T=i===null,O=sr(i),U=i===t;_<S;){var Z=Ti((_+S)/2),V=o(n[Z]),X=V!==t,oe=V===null,de=V===V,Re=sr(V);if(A)var fe=f||de;else U?fe=de&&(f||X):T?fe=de&&X&&(f||!oe):O?fe=de&&X&&!oe&&(f||!Re):oe||Re?fe=!1:fe=f?V<=i:V<i;fe?_=Z+1:S=Z}return $t(S,xt)}function Uu(n,i){for(var o=-1,f=n.length,_=0,S=[];++o<f;){var A=n[o],T=i?i(A):A;if(!o||!Ar(T,O)){var O=T;S[_++]=A===0?0:A}}return S}function Hu(n){return typeof n=="number"?n:sr(n)?le:+n}function ir(n){if(typeof n=="string")return n;if(we(n))return st(n,ir)+"";if(sr(n))return wu?wu.call(n):"";var i=n+"";return i=="0"&&1/n==-ge?"-0":i}function En(n,i,o){var f=-1,_=gi,S=n.length,A=!0,T=[],O=T;if(o)A=!1,_=To;else if(S>=r){var U=i?null:Gv(n);if(U)return _i(U);A=!1,_=Oa,O=new Fn}else O=i?[]:T;e:for(;++f<S;){var Z=n[f],V=i?i(Z):Z;if(Z=o||Z!==0?Z:0,A&&V===V){for(var X=O.length;X--;)if(O[X]===V)continue e;i&&O.push(V),T.push(Z)}else _(O,V,o)||(O!==T&&O.push(V),T.push(Z))}return T}function tc(n,i){return i=Sn(i,n),n=vd(n,i),n==null||delete n[Hr(yr(i))]}function Zu(n,i,o,f){return Ua(n,i,o(jn(n,i)),f)}function Ni(n,i,o,f){for(var _=n.length,S=f?_:-1;(f?S--:++S<_)&&i(n[S],S,n););return o?_r(n,f?0:S,f?S+1:_):_r(n,f?S+1:0,f?_:S)}function Bu(n,i){var o=n;return o instanceof Oe&&(o=o.value()),Co(i,function(f,_){return _.func.apply(_.thisArg,_n([f],_.args))},o)}function rc(n,i,o){var f=n.length;if(f<2)return f?En(n[0]):[];for(var _=-1,S=F(f);++_<f;)for(var A=n[_],T=-1;++T<f;)T!=_&&(S[_]=ja(S[_]||A,n[T],i,o));return En(Dt(S,1),i,o)}function Vu(n,i,o){for(var f=-1,_=n.length,S=i.length,A={};++f<_;){var T=f<S?i[f]:t;o(A,n[f],T)}return A}function nc(n){return gt(n)?n:[]}function ac(n){return typeof n=="function"?n:Jt}function Sn(n,i){return we(n)?n:hc(n,i)?[n]:wd(Be(n))}var Nv=Ae;function Pn(n,i,o){var f=n.length;return o=o===t?f:o,!i&&o>=f?n:_r(n,i,o)}var Wu=Pg||function(n){return Pt.clearTimeout(n)};function Gu(n,i){if(i)return n.slice();var o=n.length,f=mu?mu(o):new n.constructor(o);return n.copy(f),f}function ic(n){var i=new n.constructor(n.byteLength);return new Si(i).set(new Si(n)),i}function jv(n,i){var o=i?ic(n.buffer):n.buffer;return new n.constructor(o,n.byteOffset,n.byteLength)}function zv(n){var i=new n.constructor(n.source,lt.exec(n));return i.lastIndex=n.lastIndex,i}function qv(n){return Fa?Qe(Fa.call(n)):{}}function Ku(n,i){var o=i?ic(n.buffer):n.buffer;return new n.constructor(o,n.byteOffset,n.length)}function Yu(n,i){if(n!==i){var o=n!==t,f=n===null,_=n===n,S=sr(n),A=i!==t,T=i===null,O=i===i,U=sr(i);if(!T&&!U&&!S&&n>i||S&&A&&O&&!T&&!U||f&&A&&O||!o&&O||!_)return 1;if(!f&&!S&&!U&&n<i||U&&o&&_&&!f&&!S||T&&o&&_||!A&&_||!O)return-1}return 0}function Uv(n,i,o){for(var f=-1,_=n.criteria,S=i.criteria,A=_.length,T=o.length;++f<A;){var O=Yu(_[f],S[f]);if(O){if(f>=T)return O;var U=o[f];return O*(U=="desc"?-1:1)}}return n.index-i.index}function Qu(n,i,o,f){for(var _=-1,S=n.length,A=o.length,T=-1,O=i.length,U=wt(S-A,0),Z=F(O+U),V=!f;++T<O;)Z[T]=i[T];for(;++_<A;)(V||_<S)&&(Z[o[_]]=n[_]);for(;U--;)Z[T++]=n[_++];return Z}function Ju(n,i,o,f){for(var _=-1,S=n.length,A=-1,T=o.length,O=-1,U=i.length,Z=wt(S-T,0),V=F(Z+U),X=!f;++_<Z;)V[_]=n[_];for(var oe=_;++O<U;)V[oe+O]=i[O];for(;++A<T;)(X||_<S)&&(V[oe+o[A]]=n[_++]);return V}function Kt(n,i){var o=-1,f=n.length;for(i||(i=F(f));++o<f;)i[o]=n[o];return i}function Ur(n,i,o,f){var _=!o;o||(o={});for(var S=-1,A=i.length;++S<A;){var T=i[S],O=f?f(o[T],n[T],T,o,n):t;O===t&&(O=n[T]),_?rn(o,T,O):Na(o,T,O)}return o}function Hv(n,i){return Ur(n,fc(n),i)}function Zv(n,i){return Ur(n,dd(n),i)}function ji(n,i){return function(o,f){var _=we(o)?Km:fv,S=i?i():{};return _(o,n,ue(f,2),S)}}function ha(n){return Ae(function(i,o){var f=-1,_=o.length,S=_>1?o[_-1]:t,A=_>2?o[2]:t;for(S=n.length>3&&typeof S=="function"?(_--,S):t,A&&qt(o[0],o[1],A)&&(S=_<3?t:S,_=1),i=Qe(i);++f<_;){var T=o[f];T&&n(i,T,f,S)}return i})}function Xu(n,i){return function(o,f){if(o==null)return o;if(!Yt(o))return n(o,f);for(var _=o.length,S=i?_:-1,A=Qe(o);(i?S--:++S<_)&&f(A[S],S,A)!==!1;);return o}}function ed(n){return function(i,o,f){for(var _=-1,S=Qe(i),A=f(i),T=A.length;T--;){var O=A[n?T:++_];if(o(S[O],O,S)===!1)break}return i}}function Bv(n,i,o){var f=i&b,_=Ha(n);function S(){var A=this&&this!==Pt&&this instanceof S?_:n;return A.apply(f?o:this,arguments)}return S}function td(n){return function(i){i=Be(i);var o=oa(i)?Pr(i):t,f=o?o[0]:i.charAt(0),_=o?Pn(o,1).join(""):i.slice(1);return f[n]()+_}}function pa(n){return function(i){return Co(Xd(Jd(i).replace(Vl,"")),n,"")}}function Ha(n){return function(){var i=arguments;switch(i.length){case 0:return new n;case 1:return new n(i[0]);case 2:return new n(i[0],i[1]);case 3:return new n(i[0],i[1],i[2]);case 4:return new n(i[0],i[1],i[2],i[3]);case 5:return new n(i[0],i[1],i[2],i[3],i[4]);case 6:return new n(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new n(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var o=fa(n.prototype),f=n.apply(o,i);return ut(f)?f:o}}function Vv(n,i,o){var f=Ha(n);function _(){for(var S=arguments.length,A=F(S),T=S,O=ma(_);T--;)A[T]=arguments[T];var U=S<3&&A[0]!==O&&A[S-1]!==O?[]:yn(A,O);if(S-=U.length,S<o)return sd(n,i,zi,_.placeholder,t,A,U,t,t,o-S);var Z=this&&this!==Pt&&this instanceof _?f:n;return nr(Z,this,A)}return _}function rd(n){return function(i,o,f){var _=Qe(i);if(!Yt(i)){var S=ue(o,3);i=Rt(i),o=function(T){return S(_[T],T,_)}}var A=n(i,o,f);return A>-1?_[S?i[A]:A]:t}}function nd(n){return an(function(i){var o=i.length,f=o,_=gr.prototype.thru;for(n&&i.reverse();f--;){var S=i[f];if(typeof S!="function")throw new mr(l);if(_&&!A&&Zi(S)=="wrapper")var A=new gr([],!0)}for(f=A?f:o;++f<o;){S=i[f];var T=Zi(S),O=T=="wrapper"?uc(S):t;O&&pc(O[0])&&O[1]==(H|$|M|W)&&!O[4].length&&O[9]==1?A=A[Zi(O[0])].apply(A,O[3]):A=S.length==1&&pc(S)?A[T]():A.thru(S)}return function(){var U=arguments,Z=U[0];if(A&&U.length==1&&we(Z))return A.plant(Z).value();for(var V=0,X=o?i[V].apply(this,U):Z;++V<o;)X=i[V].call(this,X);return X}})}function zi(n,i,o,f,_,S,A,T,O,U){var Z=i&H,V=i&b,X=i&R,oe=i&($|j),de=i&B,Re=X?t:Ha(n);function fe(){for(var ke=arguments.length,Ie=F(ke),or=ke;or--;)Ie[or]=arguments[or];if(oe)var Ut=ma(fe),cr=ag(Ie,Ut);if(f&&(Ie=Qu(Ie,f,_,oe)),S&&(Ie=Ju(Ie,S,A,oe)),ke-=cr,oe&&ke<U){var vt=yn(Ie,Ut);return sd(n,i,zi,fe.placeholder,o,Ie,vt,T,O,U-ke)}var kr=V?o:this,ln=X?kr[n]:n;return ke=Ie.length,T?Ie=f_(Ie,T):de&&ke>1&&Ie.reverse(),Z&&O<ke&&(Ie.length=O),this&&this!==Pt&&this instanceof fe&&(ln=Re||Ha(ln)),ln.apply(kr,Ie)}return fe}function ad(n,i){return function(o,f){return bv(o,n,i(f),{})}}function qi(n,i){return function(o,f){var _;if(o===t&&f===t)return i;if(o!==t&&(_=o),f!==t){if(_===t)return f;typeof o=="string"||typeof f=="string"?(o=ir(o),f=ir(f)):(o=Hu(o),f=Hu(f)),_=n(o,f)}return _}}function sc(n){return an(function(i){return i=st(i,ar(ue())),Ae(function(o){var f=this;return n(i,function(_){return nr(_,f,o)})})})}function Ui(n,i){i=i===t?" ":ir(i);var o=i.length;if(o<2)return o?Xo(i,n):i;var f=Xo(i,ki(n/ca(i)));return oa(i)?Pn(Pr(f),0,n).join(""):f.slice(0,n)}function Wv(n,i,o,f){var _=i&b,S=Ha(n);function A(){for(var T=-1,O=arguments.length,U=-1,Z=f.length,V=F(Z+O),X=this&&this!==Pt&&this instanceof A?S:n;++U<Z;)V[U]=f[U];for(;O--;)V[U++]=arguments[++T];return nr(X,_?o:this,V)}return A}function id(n){return function(i,o,f){return f&&typeof f!="number"&&qt(i,o,f)&&(o=f=t),i=cn(i),o===t?(o=i,i=0):o=cn(o),f=f===t?i<o?1:-1:cn(f),Ov(i,o,f,n)}}function Hi(n){return function(i,o){return typeof i=="string"&&typeof o=="string"||(i=br(i),o=br(o)),n(i,o)}}function sd(n,i,o,f,_,S,A,T,O,U){var Z=i&$,V=Z?A:t,X=Z?t:A,oe=Z?S:t,de=Z?t:S;i|=Z?M:I,i&=~(Z?I:M),i&q||(i&=~(b|R));var Re=[n,i,_,oe,V,de,X,T,O,U],fe=o.apply(t,Re);return pc(n)&&_d(fe,Re),fe.placeholder=f,yd(fe,n,i)}function oc(n){var i=bt[n];return function(o,f){if(o=br(o),f=f==null?0:$t(Se(f),292),f&&yu(o)){var _=(Be(o)+"e").split("e"),S=i(_[0]+"e"+(+_[1]+f));return _=(Be(S)+"e").split("e"),+(_[0]+"e"+(+_[1]-f))}return i(o)}}var Gv=ua&&1/_i(new ua([,-0]))[1]==ge?function(n){return new ua(n)}:Tc;function od(n){return function(i){var o=It(i);return o==ye?Fo(i):o==Je?dg(i):ng(i,n(i))}}function nn(n,i,o,f,_,S,A,T){var O=i&R;if(!O&&typeof n!="function")throw new mr(l);var U=f?f.length:0;if(U||(i&=~(M|I),f=_=t),A=A===t?A:wt(Se(A),0),T=T===t?T:Se(T),U-=_?_.length:0,i&I){var Z=f,V=_;f=_=t}var X=O?t:uc(n),oe=[n,i,o,f,_,Z,V,S,A,T];if(X&&l_(oe,X),n=oe[0],i=oe[1],o=oe[2],f=oe[3],_=oe[4],T=oe[9]=oe[9]===t?O?0:n.length:wt(oe[9]-U,0),!T&&i&($|j)&&(i&=~($|j)),!i||i==b)var de=Bv(n,i,o);else i==$||i==j?de=Vv(n,i,T):(i==M||i==(b|M))&&!_.length?de=Wv(n,i,o,f):de=zi.apply(t,oe);var Re=X?qu:_d;return yd(Re(de,oe),n,i)}function cd(n,i,o,f){return n===t||Ar(n,la[o])&&!We.call(f,o)?i:n}function ld(n,i,o,f,_,S){return ut(n)&&ut(i)&&(S.set(i,n),Li(n,i,t,ld,S),S.delete(i)),n}function Kv(n){return Va(n)?t:n}function ud(n,i,o,f,_,S){var A=o&y,T=n.length,O=i.length;if(T!=O&&!(A&&O>T))return!1;var U=S.get(n),Z=S.get(i);if(U&&Z)return U==i&&Z==n;var V=-1,X=!0,oe=o&E?new Fn:t;for(S.set(n,i),S.set(i,n);++V<T;){var de=n[V],Re=i[V];if(f)var fe=A?f(Re,de,V,i,n,S):f(de,Re,V,n,i,S);if(fe!==t){if(fe)continue;X=!1;break}if(oe){if(!Do(i,function(ke,Ie){if(!Oa(oe,Ie)&&(de===ke||_(de,ke,o,f,S)))return oe.push(Ie)})){X=!1;break}}else if(!(de===Re||_(de,Re,o,f,S))){X=!1;break}}return S.delete(n),S.delete(i),X}function Yv(n,i,o,f,_,S,A){switch(o){case dr:if(n.byteLength!=i.byteLength||n.byteOffset!=i.byteOffset)return!1;n=n.buffer,i=i.buffer;case Ct:return!(n.byteLength!=i.byteLength||!S(new Si(n),new Si(i)));case Bt:case Mt:case Vt:return Ar(+n,+i);case Ye:return n.name==i.name&&n.message==i.message;case Et:case mt:return n==i+"";case ye:var T=Fo;case Je:var O=f&y;if(T||(T=_i),n.size!=i.size&&!O)return!1;var U=A.get(n);if(U)return U==i;f|=E,A.set(n,i);var Z=ud(T(n),T(i),f,_,S,A);return A.delete(n),Z;case Lt:if(Fa)return Fa.call(n)==Fa.call(i)}return!1}function Qv(n,i,o,f,_,S){var A=o&y,T=cc(n),O=T.length,U=cc(i),Z=U.length;if(O!=Z&&!A)return!1;for(var V=O;V--;){var X=T[V];if(!(A?X in i:We.call(i,X)))return!1}var oe=S.get(n),de=S.get(i);if(oe&&de)return oe==i&&de==n;var Re=!0;S.set(n,i),S.set(i,n);for(var fe=A;++V<O;){X=T[V];var ke=n[X],Ie=i[X];if(f)var or=A?f(Ie,ke,X,i,n,S):f(ke,Ie,X,n,i,S);if(!(or===t?ke===Ie||_(ke,Ie,o,f,S):or)){Re=!1;break}fe||(fe=X=="constructor")}if(Re&&!fe){var Ut=n.constructor,cr=i.constructor;Ut!=cr&&"constructor"in n&&"constructor"in i&&!(typeof Ut=="function"&&Ut instanceof Ut&&typeof cr=="function"&&cr instanceof cr)&&(Re=!1)}return S.delete(n),S.delete(i),Re}function an(n){return gc(gd(n,t,Pd),n+"")}function cc(n){return Cu(n,Rt,fc)}function lc(n){return Cu(n,Qt,dd)}var uc=Ci?function(n){return Ci.get(n)}:Tc;function Zi(n){for(var i=n.name+"",o=da[i],f=We.call(da,i)?o.length:0;f--;){var _=o[f],S=_.func;if(S==null||S==n)return _.name}return i}function ma(n){var i=We.call(x,"placeholder")?x:n;return i.placeholder}function ue(){var n=x.iteratee||Ac;return n=n===Ac?$u:n,arguments.length?n(arguments[0],arguments[1]):n}function Bi(n,i){var o=n.__data__;return i_(i)?o[typeof i=="string"?"string":"hash"]:o.map}function dc(n){for(var i=Rt(n),o=i.length;o--;){var f=i[o],_=n[f];i[o]=[f,_,pd(_)]}return i}function zn(n,i){var o=cg(n,i);return Ou(o)?o:t}function Jv(n){var i=We.call(n,Mn),o=n[Mn];try{n[Mn]=t;var f=!0}catch{}var _=xi.call(n);return f&&(i?n[Mn]=o:delete n[Mn]),_}var fc=jo?function(n){return n==null?[]:(n=Qe(n),vn(jo(n),function(i){return vu.call(n,i)}))}:Cc,dd=jo?function(n){for(var i=[];n;)_n(i,fc(n)),n=Pi(n);return i}:Cc,It=zt;(zo&&It(new zo(new ArrayBuffer(1)))!=dr||Ia&&It(new Ia)!=ye||qo&&It(qo.resolve())!=Lr||ua&&It(new ua)!=Je||Ma&&It(new Ma)!=Fr)&&(It=function(n){var i=zt(n),o=i==Tt?n.constructor:t,f=o?qn(o):"";if(f)switch(f){case Ig:return dr;case Mg:return ye;case Lg:return Lr;case Fg:return Je;case Ng:return Fr}return i});function Xv(n,i,o){for(var f=-1,_=o.length;++f<_;){var S=o[f],A=S.size;switch(S.type){case"drop":n+=A;break;case"dropRight":i-=A;break;case"take":i=$t(i,n+A);break;case"takeRight":n=wt(n,i-A);break}}return{start:n,end:i}}function e_(n){var i=n.match(L);return i?i[1].split(N):[]}function fd(n,i,o){i=Sn(i,n);for(var f=-1,_=i.length,S=!1;++f<_;){var A=Hr(i[f]);if(!(S=n!=null&&o(n,A)))break;n=n[A]}return S||++f!=_?S:(_=n==null?0:n.length,!!_&&Ji(_)&&sn(A,_)&&(we(n)||Un(n)))}function t_(n){var i=n.length,o=new n.constructor(i);return i&&typeof n[0]=="string"&&We.call(n,"index")&&(o.index=n.index,o.input=n.input),o}function hd(n){return typeof n.constructor=="function"&&!Za(n)?fa(Pi(n)):{}}function r_(n,i,o){var f=n.constructor;switch(i){case Ct:return ic(n);case Bt:case Mt:return new f(+n);case dr:return jv(n,o);case Gn:case Kn:case Wr:case Yn:case Ra:case Aa:case Qn:case Wt:case ka:return Ku(n,o);case ye:return new f;case Vt:case mt:return new f(n);case Et:return zv(n);case Je:return new f;case Lt:return qv(n)}}function n_(n,i){var o=i.length;if(!o)return n;var f=o-1;return i[f]=(o>1?"& ":"")+i[f],i=i.join(o>2?", ":" "),n.replace(C,`{
/* [wrapped with `+i+`] */
`)}function a_(n){return we(n)||Un(n)||!!(_u&&n&&n[_u])}function sn(n,i){var o=typeof n;return i=i??_e,!!i&&(o=="number"||o!="symbol"&&Fe.test(n))&&n>-1&&n%1==0&&n<i}function qt(n,i,o){if(!ut(o))return!1;var f=typeof i;return(f=="number"?Yt(o)&&sn(i,o.length):f=="string"&&i in o)?Ar(o[i],n):!1}function hc(n,i){if(we(n))return!1;var o=typeof n;return o=="number"||o=="symbol"||o=="boolean"||n==null||sr(n)?!0:Eo.test(n)||!oi.test(n)||i!=null&&n in Qe(i)}function i_(n){var i=typeof n;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?n!=="__proto__":n===null}function pc(n){var i=Zi(n),o=x[i];if(typeof o!="function"||!(i in Oe.prototype))return!1;if(n===o)return!0;var f=uc(o);return!!f&&n===f[0]}function s_(n){return!!pu&&pu in n}var o_=bi?on:Dc;function Za(n){var i=n&&n.constructor,o=typeof i=="function"&&i.prototype||la;return n===o}function pd(n){return n===n&&!ut(n)}function md(n,i){return function(o){return o==null?!1:o[n]===i&&(i!==t||n in Qe(o))}}function c_(n){var i=Yi(n,function(f){return o.size===h&&o.clear(),f}),o=i.cache;return i}function l_(n,i){var o=n[1],f=i[1],_=o|f,S=_<(b|R|H),A=f==H&&o==$||f==H&&o==W&&n[7].length<=i[8]||f==(H|W)&&i[7].length<=i[8]&&o==$;if(!(S||A))return n;f&b&&(n[2]=i[2],_|=o&b?0:q);var T=i[3];if(T){var O=n[3];n[3]=O?Qu(O,T,i[4]):T,n[4]=O?yn(n[3],m):i[4]}return T=i[5],T&&(O=n[5],n[5]=O?Ju(O,T,i[6]):T,n[6]=O?yn(n[5],m):i[6]),T=i[7],T&&(n[7]=T),f&H&&(n[8]=n[8]==null?i[8]:$t(n[8],i[8])),n[9]==null&&(n[9]=i[9]),n[0]=i[0],n[1]=_,n}function u_(n){var i=[];if(n!=null)for(var o in Qe(n))i.push(o);return i}function d_(n){return xi.call(n)}function gd(n,i,o){return i=wt(i===t?n.length-1:i,0),function(){for(var f=arguments,_=-1,S=wt(f.length-i,0),A=F(S);++_<S;)A[_]=f[i+_];_=-1;for(var T=F(i+1);++_<i;)T[_]=f[_];return T[i]=o(A),nr(n,this,T)}}function vd(n,i){return i.length<2?n:jn(n,_r(i,0,-1))}function f_(n,i){for(var o=n.length,f=$t(i.length,o),_=Kt(n);f--;){var S=i[f];n[f]=sn(S,o)?_[S]:t}return n}function mc(n,i){if(!(i==="constructor"&&typeof n[i]=="function")&&i!="__proto__")return n[i]}var _d=bd(qu),Ba=Ag||function(n,i){return Pt.setTimeout(n,i)},gc=bd(Mv);function yd(n,i,o){var f=i+"";return gc(n,n_(f,h_(e_(f),o)))}function bd(n){var i=0,o=0;return function(){var f=Dg(),_=G-(f-o);if(o=f,_>0){if(++i>=ie)return arguments[0]}else i=0;return n.apply(t,arguments)}}function Vi(n,i){var o=-1,f=n.length,_=f-1;for(i=i===t?f:i;++o<i;){var S=Jo(o,_),A=n[S];n[S]=n[o],n[o]=A}return n.length=i,n}var wd=c_(function(n){var i=[];return n.charCodeAt(0)===46&&i.push(""),n.replace(ci,function(o,f,_,S){i.push(_?S.replace($e,"$1"):f||o)}),i});function Hr(n){if(typeof n=="string"||sr(n))return n;var i=n+"";return i=="0"&&1/n==-ge?"-0":i}function qn(n){if(n!=null){try{return wi.call(n)}catch{}try{return n+""}catch{}}return""}function h_(n,i){return pr(Le,function(o){var f="_."+o[0];i&o[1]&&!gi(n,f)&&n.push(f)}),n.sort()}function xd(n){if(n instanceof Oe)return n.clone();var i=new gr(n.__wrapped__,n.__chain__);return i.__actions__=Kt(n.__actions__),i.__index__=n.__index__,i.__values__=n.__values__,i}function p_(n,i,o){(o?qt(n,i,o):i===t)?i=1:i=wt(Se(i),0);var f=n==null?0:n.length;if(!f||i<1)return[];for(var _=0,S=0,A=F(ki(f/i));_<f;)A[S++]=_r(n,_,_+=i);return A}function m_(n){for(var i=-1,o=n==null?0:n.length,f=0,_=[];++i<o;){var S=n[i];S&&(_[f++]=S)}return _}function g_(){var n=arguments.length;if(!n)return[];for(var i=F(n-1),o=arguments[0],f=n;f--;)i[f-1]=arguments[f];return _n(we(o)?Kt(o):[o],Dt(i,1))}var v_=Ae(function(n,i){return gt(n)?ja(n,Dt(i,1,gt,!0)):[]}),__=Ae(function(n,i){var o=yr(i);return gt(o)&&(o=t),gt(n)?ja(n,Dt(i,1,gt,!0),ue(o,2)):[]}),y_=Ae(function(n,i){var o=yr(i);return gt(o)&&(o=t),gt(n)?ja(n,Dt(i,1,gt,!0),t,o):[]});function b_(n,i,o){var f=n==null?0:n.length;return f?(i=o||i===t?1:Se(i),_r(n,i<0?0:i,f)):[]}function w_(n,i,o){var f=n==null?0:n.length;return f?(i=o||i===t?1:Se(i),i=f-i,_r(n,0,i<0?0:i)):[]}function x_(n,i){return n&&n.length?Ni(n,ue(i,3),!0,!0):[]}function E_(n,i){return n&&n.length?Ni(n,ue(i,3),!0):[]}function S_(n,i,o,f){var _=n==null?0:n.length;return _?(o&&typeof o!="number"&&qt(n,i,o)&&(o=0,f=_),gv(n,i,o,f)):[]}function Ed(n,i,o){var f=n==null?0:n.length;if(!f)return-1;var _=o==null?0:Se(o);return _<0&&(_=wt(f+_,0)),vi(n,ue(i,3),_)}function Sd(n,i,o){var f=n==null?0:n.length;if(!f)return-1;var _=f-1;return o!==t&&(_=Se(o),_=o<0?wt(f+_,0):$t(_,f-1)),vi(n,ue(i,3),_,!0)}function Pd(n){var i=n==null?0:n.length;return i?Dt(n,1):[]}function P_(n){var i=n==null?0:n.length;return i?Dt(n,ge):[]}function R_(n,i){var o=n==null?0:n.length;return o?(i=i===t?1:Se(i),Dt(n,i)):[]}function A_(n){for(var i=-1,o=n==null?0:n.length,f={};++i<o;){var _=n[i];f[_[0]]=_[1]}return f}function Rd(n){return n&&n.length?n[0]:t}function k_(n,i,o){var f=n==null?0:n.length;if(!f)return-1;var _=o==null?0:Se(o);return _<0&&(_=wt(f+_,0)),sa(n,i,_)}function T_(n){var i=n==null?0:n.length;return i?_r(n,0,-1):[]}var C_=Ae(function(n){var i=st(n,nc);return i.length&&i[0]===n[0]?Wo(i):[]}),D_=Ae(function(n){var i=yr(n),o=st(n,nc);return i===yr(o)?i=t:o.pop(),o.length&&o[0]===n[0]?Wo(o,ue(i,2)):[]}),O_=Ae(function(n){var i=yr(n),o=st(n,nc);return i=typeof i=="function"?i:t,i&&o.pop(),o.length&&o[0]===n[0]?Wo(o,t,i):[]});function $_(n,i){return n==null?"":Tg.call(n,i)}function yr(n){var i=n==null?0:n.length;return i?n[i-1]:t}function I_(n,i,o){var f=n==null?0:n.length;if(!f)return-1;var _=f;return o!==t&&(_=Se(o),_=_<0?wt(f+_,0):$t(_,f-1)),i===i?hg(n,i,_):vi(n,su,_,!0)}function M_(n,i){return n&&n.length?Fu(n,Se(i)):t}var L_=Ae(Ad);function Ad(n,i){return n&&n.length&&i&&i.length?Qo(n,i):n}function F_(n,i,o){return n&&n.length&&i&&i.length?Qo(n,i,ue(o,2)):n}function N_(n,i,o){return n&&n.length&&i&&i.length?Qo(n,i,t,o):n}var j_=an(function(n,i){var o=n==null?0:n.length,f=Ho(n,i);return zu(n,st(i,function(_){return sn(_,o)?+_:_}).sort(Yu)),f});function z_(n,i){var o=[];if(!(n&&n.length))return o;var f=-1,_=[],S=n.length;for(i=ue(i,3);++f<S;){var A=n[f];i(A,f,n)&&(o.push(A),_.push(f))}return zu(n,_),o}function vc(n){return n==null?n:$g.call(n)}function q_(n,i,o){var f=n==null?0:n.length;return f?(o&&typeof o!="number"&&qt(n,i,o)?(i=0,o=f):(i=i==null?0:Se(i),o=o===t?f:Se(o)),_r(n,i,o)):[]}function U_(n,i){return Fi(n,i)}function H_(n,i,o){return ec(n,i,ue(o,2))}function Z_(n,i){var o=n==null?0:n.length;if(o){var f=Fi(n,i);if(f<o&&Ar(n[f],i))return f}return-1}function B_(n,i){return Fi(n,i,!0)}function V_(n,i,o){return ec(n,i,ue(o,2),!0)}function W_(n,i){var o=n==null?0:n.length;if(o){var f=Fi(n,i,!0)-1;if(Ar(n[f],i))return f}return-1}function G_(n){return n&&n.length?Uu(n):[]}function K_(n,i){return n&&n.length?Uu(n,ue(i,2)):[]}function Y_(n){var i=n==null?0:n.length;return i?_r(n,1,i):[]}function Q_(n,i,o){return n&&n.length?(i=o||i===t?1:Se(i),_r(n,0,i<0?0:i)):[]}function J_(n,i,o){var f=n==null?0:n.length;return f?(i=o||i===t?1:Se(i),i=f-i,_r(n,i<0?0:i,f)):[]}function X_(n,i){return n&&n.length?Ni(n,ue(i,3),!1,!0):[]}function e0(n,i){return n&&n.length?Ni(n,ue(i,3)):[]}var t0=Ae(function(n){return En(Dt(n,1,gt,!0))}),r0=Ae(function(n){var i=yr(n);return gt(i)&&(i=t),En(Dt(n,1,gt,!0),ue(i,2))}),n0=Ae(function(n){var i=yr(n);return i=typeof i=="function"?i:t,En(Dt(n,1,gt,!0),t,i)});function a0(n){return n&&n.length?En(n):[]}function i0(n,i){return n&&n.length?En(n,ue(i,2)):[]}function s0(n,i){return i=typeof i=="function"?i:t,n&&n.length?En(n,t,i):[]}function _c(n){if(!(n&&n.length))return[];var i=0;return n=vn(n,function(o){if(gt(o))return i=wt(o.length,i),!0}),Mo(i,function(o){return st(n,Oo(o))})}function kd(n,i){if(!(n&&n.length))return[];var o=_c(n);return i==null?o:st(o,function(f){return nr(i,t,f)})}var o0=Ae(function(n,i){return gt(n)?ja(n,i):[]}),c0=Ae(function(n){return rc(vn(n,gt))}),l0=Ae(function(n){var i=yr(n);return gt(i)&&(i=t),rc(vn(n,gt),ue(i,2))}),u0=Ae(function(n){var i=yr(n);return i=typeof i=="function"?i:t,rc(vn(n,gt),t,i)}),d0=Ae(_c);function f0(n,i){return Vu(n||[],i||[],Na)}function h0(n,i){return Vu(n||[],i||[],Ua)}var p0=Ae(function(n){var i=n.length,o=i>1?n[i-1]:t;return o=typeof o=="function"?(n.pop(),o):t,kd(n,o)});function Td(n){var i=x(n);return i.__chain__=!0,i}function m0(n,i){return i(n),n}function Wi(n,i){return i(n)}var g0=an(function(n){var i=n.length,o=i?n[0]:0,f=this.__wrapped__,_=function(S){return Ho(S,n)};return i>1||this.__actions__.length||!(f instanceof Oe)||!sn(o)?this.thru(_):(f=f.slice(o,+o+(i?1:0)),f.__actions__.push({func:Wi,args:[_],thisArg:t}),new gr(f,this.__chain__).thru(function(S){return i&&!S.length&&S.push(t),S}))});function v0(){return Td(this)}function _0(){return new gr(this.value(),this.__chain__)}function y0(){this.__values__===t&&(this.__values__=Hd(this.value()));var n=this.__index__>=this.__values__.length,i=n?t:this.__values__[this.__index__++];return{done:n,value:i}}function b0(){return this}function w0(n){for(var i,o=this;o instanceof Oi;){var f=xd(o);f.__index__=0,f.__values__=t,i?_.__wrapped__=f:i=f;var _=f;o=o.__wrapped__}return _.__wrapped__=n,i}function x0(){var n=this.__wrapped__;if(n instanceof Oe){var i=n;return this.__actions__.length&&(i=new Oe(this)),i=i.reverse(),i.__actions__.push({func:Wi,args:[vc],thisArg:t}),new gr(i,this.__chain__)}return this.thru(vc)}function E0(){return Bu(this.__wrapped__,this.__actions__)}var S0=ji(function(n,i,o){We.call(n,o)?++n[o]:rn(n,o,1)});function P0(n,i,o){var f=we(n)?au:mv;return o&&qt(n,i,o)&&(i=t),f(n,ue(i,3))}function R0(n,i){var o=we(n)?vn:ku;return o(n,ue(i,3))}var A0=rd(Ed),k0=rd(Sd);function T0(n,i){return Dt(Gi(n,i),1)}function C0(n,i){return Dt(Gi(n,i),ge)}function D0(n,i,o){return o=o===t?1:Se(o),Dt(Gi(n,i),o)}function Cd(n,i){var o=we(n)?pr:xn;return o(n,ue(i,3))}function Dd(n,i){var o=we(n)?Ym:Au;return o(n,ue(i,3))}var O0=ji(function(n,i,o){We.call(n,o)?n[o].push(i):rn(n,o,[i])});function $0(n,i,o,f){n=Yt(n)?n:va(n),o=o&&!f?Se(o):0;var _=n.length;return o<0&&(o=wt(_+o,0)),Xi(n)?o<=_&&n.indexOf(i,o)>-1:!!_&&sa(n,i,o)>-1}var I0=Ae(function(n,i,o){var f=-1,_=typeof i=="function",S=Yt(n)?F(n.length):[];return xn(n,function(A){S[++f]=_?nr(i,A,o):za(A,i,o)}),S}),M0=ji(function(n,i,o){rn(n,o,i)});function Gi(n,i){var o=we(n)?st:Iu;return o(n,ue(i,3))}function L0(n,i,o,f){return n==null?[]:(we(i)||(i=i==null?[]:[i]),o=f?t:o,we(o)||(o=o==null?[]:[o]),Nu(n,i,o))}var F0=ji(function(n,i,o){n[o?0:1].push(i)},function(){return[[],[]]});function N0(n,i,o){var f=we(n)?Co:cu,_=arguments.length<3;return f(n,ue(i,4),o,_,xn)}function j0(n,i,o){var f=we(n)?Qm:cu,_=arguments.length<3;return f(n,ue(i,4),o,_,Au)}function z0(n,i){var o=we(n)?vn:ku;return o(n,Qi(ue(i,3)))}function q0(n){var i=we(n)?Eu:$v;return i(n)}function U0(n,i,o){(o?qt(n,i,o):i===t)?i=1:i=Se(i);var f=we(n)?uv:Iv;return f(n,i)}function H0(n){var i=we(n)?dv:Lv;return i(n)}function Z0(n){if(n==null)return 0;if(Yt(n))return Xi(n)?ca(n):n.length;var i=It(n);return i==ye||i==Je?n.size:Ko(n).length}function B0(n,i,o){var f=we(n)?Do:Fv;return o&&qt(n,i,o)&&(i=t),f(n,ue(i,3))}var V0=Ae(function(n,i){if(n==null)return[];var o=i.length;return o>1&&qt(n,i[0],i[1])?i=[]:o>2&&qt(i[0],i[1],i[2])&&(i=[i[0]]),Nu(n,Dt(i,1),[])}),Ki=Rg||function(){return Pt.Date.now()};function W0(n,i){if(typeof i!="function")throw new mr(l);return n=Se(n),function(){if(--n<1)return i.apply(this,arguments)}}function Od(n,i,o){return i=o?t:i,i=n&&i==null?n.length:i,nn(n,H,t,t,t,t,i)}function $d(n,i){var o;if(typeof i!="function")throw new mr(l);return n=Se(n),function(){return--n>0&&(o=i.apply(this,arguments)),n<=1&&(i=t),o}}var yc=Ae(function(n,i,o){var f=b;if(o.length){var _=yn(o,ma(yc));f|=M}return nn(n,f,i,o,_)}),Id=Ae(function(n,i,o){var f=b|R;if(o.length){var _=yn(o,ma(Id));f|=M}return nn(i,f,n,o,_)});function Md(n,i,o){i=o?t:i;var f=nn(n,$,t,t,t,t,t,i);return f.placeholder=Md.placeholder,f}function Ld(n,i,o){i=o?t:i;var f=nn(n,j,t,t,t,t,t,i);return f.placeholder=Ld.placeholder,f}function Fd(n,i,o){var f,_,S,A,T,O,U=0,Z=!1,V=!1,X=!0;if(typeof n!="function")throw new mr(l);i=br(i)||0,ut(o)&&(Z=!!o.leading,V="maxWait"in o,S=V?wt(br(o.maxWait)||0,i):S,X="trailing"in o?!!o.trailing:X);function oe(vt){var kr=f,ln=_;return f=_=t,U=vt,A=n.apply(ln,kr),A}function de(vt){return U=vt,T=Ba(ke,i),Z?oe(vt):A}function Re(vt){var kr=vt-O,ln=vt-U,rf=i-kr;return V?$t(rf,S-ln):rf}function fe(vt){var kr=vt-O,ln=vt-U;return O===t||kr>=i||kr<0||V&&ln>=S}function ke(){var vt=Ki();if(fe(vt))return Ie(vt);T=Ba(ke,Re(vt))}function Ie(vt){return T=t,X&&f?oe(vt):(f=_=t,A)}function or(){T!==t&&Wu(T),U=0,f=O=_=T=t}function Ut(){return T===t?A:Ie(Ki())}function cr(){var vt=Ki(),kr=fe(vt);if(f=arguments,_=this,O=vt,kr){if(T===t)return de(O);if(V)return Wu(T),T=Ba(ke,i),oe(O)}return T===t&&(T=Ba(ke,i)),A}return cr.cancel=or,cr.flush=Ut,cr}var G0=Ae(function(n,i){return Ru(n,1,i)}),K0=Ae(function(n,i,o){return Ru(n,br(i)||0,o)});function Y0(n){return nn(n,B)}function Yi(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new mr(l);var o=function(){var f=arguments,_=i?i.apply(this,f):f[0],S=o.cache;if(S.has(_))return S.get(_);var A=n.apply(this,f);return o.cache=S.set(_,A)||S,A};return o.cache=new(Yi.Cache||tn),o}Yi.Cache=tn;function Qi(n){if(typeof n!="function")throw new mr(l);return function(){var i=arguments;switch(i.length){case 0:return!n.call(this);case 1:return!n.call(this,i[0]);case 2:return!n.call(this,i[0],i[1]);case 3:return!n.call(this,i[0],i[1],i[2])}return!n.apply(this,i)}}function Q0(n){return $d(2,n)}var J0=Nv(function(n,i){i=i.length==1&&we(i[0])?st(i[0],ar(ue())):st(Dt(i,1),ar(ue()));var o=i.length;return Ae(function(f){for(var _=-1,S=$t(f.length,o);++_<S;)f[_]=i[_].call(this,f[_]);return nr(n,this,f)})}),bc=Ae(function(n,i){var o=yn(i,ma(bc));return nn(n,M,t,i,o)}),Nd=Ae(function(n,i){var o=yn(i,ma(Nd));return nn(n,I,t,i,o)}),X0=an(function(n,i){return nn(n,W,t,t,t,i)});function ey(n,i){if(typeof n!="function")throw new mr(l);return i=i===t?i:Se(i),Ae(n,i)}function ty(n,i){if(typeof n!="function")throw new mr(l);return i=i==null?0:wt(Se(i),0),Ae(function(o){var f=o[i],_=Pn(o,0,i);return f&&_n(_,f),nr(n,this,_)})}function ry(n,i,o){var f=!0,_=!0;if(typeof n!="function")throw new mr(l);return ut(o)&&(f="leading"in o?!!o.leading:f,_="trailing"in o?!!o.trailing:_),Fd(n,i,{leading:f,maxWait:i,trailing:_})}function ny(n){return Od(n,1)}function ay(n,i){return bc(ac(i),n)}function iy(){if(!arguments.length)return[];var n=arguments[0];return we(n)?n:[n]}function sy(n){return vr(n,p)}function oy(n,i){return i=typeof i=="function"?i:t,vr(n,p,i)}function cy(n){return vr(n,g|p)}function ly(n,i){return i=typeof i=="function"?i:t,vr(n,g|p,i)}function uy(n,i){return i==null||Pu(n,i,Rt(i))}function Ar(n,i){return n===i||n!==n&&i!==i}var dy=Hi(Vo),fy=Hi(function(n,i){return n>=i}),Un=Du((function(){return arguments})())?Du:function(n){return ht(n)&&We.call(n,"callee")&&!vu.call(n,"callee")},we=F.isArray,hy=Jl?ar(Jl):wv;function Yt(n){return n!=null&&Ji(n.length)&&!on(n)}function gt(n){return ht(n)&&Yt(n)}function py(n){return n===!0||n===!1||ht(n)&&zt(n)==Bt}var Rn=kg||Dc,my=Xl?ar(Xl):xv;function gy(n){return ht(n)&&n.nodeType===1&&!Va(n)}function vy(n){if(n==null)return!0;if(Yt(n)&&(we(n)||typeof n=="string"||typeof n.splice=="function"||Rn(n)||ga(n)||Un(n)))return!n.length;var i=It(n);if(i==ye||i==Je)return!n.size;if(Za(n))return!Ko(n).length;for(var o in n)if(We.call(n,o))return!1;return!0}function _y(n,i){return qa(n,i)}function yy(n,i,o){o=typeof o=="function"?o:t;var f=o?o(n,i):t;return f===t?qa(n,i,t,o):!!f}function wc(n){if(!ht(n))return!1;var i=zt(n);return i==Ye||i==dt||typeof n.message=="string"&&typeof n.name=="string"&&!Va(n)}function by(n){return typeof n=="number"&&yu(n)}function on(n){if(!ut(n))return!1;var i=zt(n);return i==ur||i==_t||i==kt||i==yt}function jd(n){return typeof n=="number"&&n==Se(n)}function Ji(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=_e}function ut(n){var i=typeof n;return n!=null&&(i=="object"||i=="function")}function ht(n){return n!=null&&typeof n=="object"}var zd=eu?ar(eu):Sv;function wy(n,i){return n===i||Go(n,i,dc(i))}function xy(n,i,o){return o=typeof o=="function"?o:t,Go(n,i,dc(i),o)}function Ey(n){return qd(n)&&n!=+n}function Sy(n){if(o_(n))throw new ve(c);return Ou(n)}function Py(n){return n===null}function Ry(n){return n==null}function qd(n){return typeof n=="number"||ht(n)&&zt(n)==Vt}function Va(n){if(!ht(n)||zt(n)!=Tt)return!1;var i=Pi(n);if(i===null)return!0;var o=We.call(i,"constructor")&&i.constructor;return typeof o=="function"&&o instanceof o&&wi.call(o)==xg}var xc=tu?ar(tu):Pv;function Ay(n){return jd(n)&&n>=-_e&&n<=_e}var Ud=ru?ar(ru):Rv;function Xi(n){return typeof n=="string"||!we(n)&&ht(n)&&zt(n)==mt}function sr(n){return typeof n=="symbol"||ht(n)&&zt(n)==Lt}var ga=nu?ar(nu):Av;function ky(n){return n===t}function Ty(n){return ht(n)&&It(n)==Fr}function Cy(n){return ht(n)&&zt(n)==Pa}var Dy=Hi(Yo),Oy=Hi(function(n,i){return n<=i});function Hd(n){if(!n)return[];if(Yt(n))return Xi(n)?Pr(n):Kt(n);if($a&&n[$a])return ug(n[$a]());var i=It(n),o=i==ye?Fo:i==Je?_i:va;return o(n)}function cn(n){if(!n)return n===0?n:0;if(n=br(n),n===ge||n===-ge){var i=n<0?-1:1;return i*Ee}return n===n?n:0}function Se(n){var i=cn(n),o=i%1;return i===i?o?i-o:i:0}function Zd(n){return n?Nn(Se(n),0,Ne):0}function br(n){if(typeof n=="number")return n;if(sr(n))return le;if(ut(n)){var i=typeof n.valueOf=="function"?n.valueOf():n;n=ut(i)?i+"":i}if(typeof n!="string")return n===0?n:+n;n=lu(n);var o=nt.test(n);return o||Xe.test(n)?Wm(n.slice(2),o?2:8):De.test(n)?le:+n}function Bd(n){return Ur(n,Qt(n))}function $y(n){return n?Nn(Se(n),-_e,_e):n===0?n:0}function Be(n){return n==null?"":ir(n)}var Iy=ha(function(n,i){if(Za(i)||Yt(i)){Ur(i,Rt(i),n);return}for(var o in i)We.call(i,o)&&Na(n,o,i[o])}),Vd=ha(function(n,i){Ur(i,Qt(i),n)}),es=ha(function(n,i,o,f){Ur(i,Qt(i),n,f)}),My=ha(function(n,i,o,f){Ur(i,Rt(i),n,f)}),Ly=an(Ho);function Fy(n,i){var o=fa(n);return i==null?o:Su(o,i)}var Ny=Ae(function(n,i){n=Qe(n);var o=-1,f=i.length,_=f>2?i[2]:t;for(_&&qt(i[0],i[1],_)&&(f=1);++o<f;)for(var S=i[o],A=Qt(S),T=-1,O=A.length;++T<O;){var U=A[T],Z=n[U];(Z===t||Ar(Z,la[U])&&!We.call(n,U))&&(n[U]=S[U])}return n}),jy=Ae(function(n){return n.push(t,ld),nr(Wd,t,n)});function zy(n,i){return iu(n,ue(i,3),qr)}function qy(n,i){return iu(n,ue(i,3),Bo)}function Uy(n,i){return n==null?n:Zo(n,ue(i,3),Qt)}function Hy(n,i){return n==null?n:Tu(n,ue(i,3),Qt)}function Zy(n,i){return n&&qr(n,ue(i,3))}function By(n,i){return n&&Bo(n,ue(i,3))}function Vy(n){return n==null?[]:Mi(n,Rt(n))}function Wy(n){return n==null?[]:Mi(n,Qt(n))}function Ec(n,i,o){var f=n==null?t:jn(n,i);return f===t?o:f}function Gy(n,i){return n!=null&&fd(n,i,vv)}function Sc(n,i){return n!=null&&fd(n,i,_v)}var Ky=ad(function(n,i,o){i!=null&&typeof i.toString!="function"&&(i=xi.call(i)),n[i]=o},Rc(Jt)),Yy=ad(function(n,i,o){i!=null&&typeof i.toString!="function"&&(i=xi.call(i)),We.call(n,i)?n[i].push(o):n[i]=[o]},ue),Qy=Ae(za);function Rt(n){return Yt(n)?xu(n):Ko(n)}function Qt(n){return Yt(n)?xu(n,!0):kv(n)}function Jy(n,i){var o={};return i=ue(i,3),qr(n,function(f,_,S){rn(o,i(f,_,S),f)}),o}function Xy(n,i){var o={};return i=ue(i,3),qr(n,function(f,_,S){rn(o,_,i(f,_,S))}),o}var e1=ha(function(n,i,o){Li(n,i,o)}),Wd=ha(function(n,i,o,f){Li(n,i,o,f)}),t1=an(function(n,i){var o={};if(n==null)return o;var f=!1;i=st(i,function(S){return S=Sn(S,n),f||(f=S.length>1),S}),Ur(n,lc(n),o),f&&(o=vr(o,g|v|p,Kv));for(var _=i.length;_--;)tc(o,i[_]);return o});function r1(n,i){return Gd(n,Qi(ue(i)))}var n1=an(function(n,i){return n==null?{}:Cv(n,i)});function Gd(n,i){if(n==null)return{};var o=st(lc(n),function(f){return[f]});return i=ue(i),ju(n,o,function(f,_){return i(f,_[0])})}function a1(n,i,o){i=Sn(i,n);var f=-1,_=i.length;for(_||(_=1,n=t);++f<_;){var S=n==null?t:n[Hr(i[f])];S===t&&(f=_,S=o),n=on(S)?S.call(n):S}return n}function i1(n,i,o){return n==null?n:Ua(n,i,o)}function s1(n,i,o,f){return f=typeof f=="function"?f:t,n==null?n:Ua(n,i,o,f)}var Kd=od(Rt),Yd=od(Qt);function o1(n,i,o){var f=we(n),_=f||Rn(n)||ga(n);if(i=ue(i,4),o==null){var S=n&&n.constructor;_?o=f?new S:[]:ut(n)?o=on(S)?fa(Pi(n)):{}:o={}}return(_?pr:qr)(n,function(A,T,O){return i(o,A,T,O)}),o}function c1(n,i){return n==null?!0:tc(n,i)}function l1(n,i,o){return n==null?n:Zu(n,i,ac(o))}function u1(n,i,o,f){return f=typeof f=="function"?f:t,n==null?n:Zu(n,i,ac(o),f)}function va(n){return n==null?[]:Lo(n,Rt(n))}function d1(n){return n==null?[]:Lo(n,Qt(n))}function f1(n,i,o){return o===t&&(o=i,i=t),o!==t&&(o=br(o),o=o===o?o:0),i!==t&&(i=br(i),i=i===i?i:0),Nn(br(n),i,o)}function h1(n,i,o){return i=cn(i),o===t?(o=i,i=0):o=cn(o),n=br(n),yv(n,i,o)}function p1(n,i,o){if(o&&typeof o!="boolean"&&qt(n,i,o)&&(i=o=t),o===t&&(typeof i=="boolean"?(o=i,i=t):typeof n=="boolean"&&(o=n,n=t)),n===t&&i===t?(n=0,i=1):(n=cn(n),i===t?(i=n,n=0):i=cn(i)),n>i){var f=n;n=i,i=f}if(o||n%1||i%1){var _=bu();return $t(n+_*(i-n+Vm("1e-"+((_+"").length-1))),i)}return Jo(n,i)}var m1=pa(function(n,i,o){return i=i.toLowerCase(),n+(o?Qd(i):i)});function Qd(n){return Pc(Be(n).toLowerCase())}function Jd(n){return n=Be(n),n&&n.replace(at,ig).replace(Wl,"")}function g1(n,i,o){n=Be(n),i=ir(i);var f=n.length;o=o===t?f:Nn(Se(o),0,f);var _=o;return o-=i.length,o>=0&&n.slice(o,_)==i}function v1(n){return n=Be(n),n&&wo.test(n)?n.replace(ii,sg):n}function _1(n){return n=Be(n),n&&li.test(n)?n.replace(Ta,"\\$&"):n}var y1=pa(function(n,i,o){return n+(o?"-":"")+i.toLowerCase()}),b1=pa(function(n,i,o){return n+(o?" ":"")+i.toLowerCase()}),w1=td("toLowerCase");function x1(n,i,o){n=Be(n),i=Se(i);var f=i?ca(n):0;if(!i||f>=i)return n;var _=(i-f)/2;return Ui(Ti(_),o)+n+Ui(ki(_),o)}function E1(n,i,o){n=Be(n),i=Se(i);var f=i?ca(n):0;return i&&f<i?n+Ui(i-f,o):n}function S1(n,i,o){n=Be(n),i=Se(i);var f=i?ca(n):0;return i&&f<i?Ui(i-f,o)+n:n}function P1(n,i,o){return o||i==null?i=0:i&&(i=+i),Og(Be(n).replace(k,""),i||0)}function R1(n,i,o){return(o?qt(n,i,o):i===t)?i=1:i=Se(i),Xo(Be(n),i)}function A1(){var n=arguments,i=Be(n[0]);return n.length<3?i:i.replace(n[1],n[2])}var k1=pa(function(n,i,o){return n+(o?"_":"")+i.toLowerCase()});function T1(n,i,o){return o&&typeof o!="number"&&qt(n,i,o)&&(i=o=t),o=o===t?Ne:o>>>0,o?(n=Be(n),n&&(typeof i=="string"||i!=null&&!xc(i))&&(i=ir(i),!i&&oa(n))?Pn(Pr(n),0,o):n.split(i,o)):[]}var C1=pa(function(n,i,o){return n+(o?" ":"")+Pc(i)});function D1(n,i,o){return n=Be(n),o=o==null?0:Nn(Se(o),0,n.length),i=ir(i),n.slice(o,o+i.length)==i}function O1(n,i,o){var f=x.templateSettings;o&&qt(n,i,o)&&(i=t),n=Be(n),i=es({},i,f,cd);var _=es({},i.imports,f.imports,cd),S=Rt(_),A=Lo(_,S),T,O,U=0,Z=i.interpolate||je,V="__p += '",X=No((i.escape||je).source+"|"+Z.source+"|"+(Z===Jn?qe:je).source+"|"+(i.evaluate||je).source+"|$","g"),oe="//# sourceURL="+(We.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++qm+"]")+`
`;n.replace(X,function(fe,ke,Ie,or,Ut,cr){return Ie||(Ie=or),V+=n.slice(U,cr).replace(Gr,og),ke&&(T=!0,V+=`' +
__e(`+ke+`) +
'`),Ut&&(O=!0,V+=`';
`+Ut+`;
__p += '`),Ie&&(V+=`' +
((__t = (`+Ie+`)) == null ? '' : __t) +
'`),U=cr+fe.length,fe}),V+=`';
`;var de=We.call(i,"variable")&&i.variable;if(!de)V=`with (obj) {
`+V+`
}
`;else if(be.test(de))throw new ve(u);V=(O?V.replace(_o,""):V).replace(yo,"$1").replace(bo,"$1;"),V="function("+(de||"obj")+`) {
`+(de?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(T?", __e = _.escape":"")+(O?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+V+`return __p
}`;var Re=ef(function(){return He(S,oe+"return "+V).apply(t,A)});if(Re.source=V,wc(Re))throw Re;return Re}function $1(n){return Be(n).toLowerCase()}function I1(n){return Be(n).toUpperCase()}function M1(n,i,o){if(n=Be(n),n&&(o||i===t))return lu(n);if(!n||!(i=ir(i)))return n;var f=Pr(n),_=Pr(i),S=uu(f,_),A=du(f,_)+1;return Pn(f,S,A).join("")}function L1(n,i,o){if(n=Be(n),n&&(o||i===t))return n.slice(0,hu(n)+1);if(!n||!(i=ir(i)))return n;var f=Pr(n),_=du(f,Pr(i))+1;return Pn(f,0,_).join("")}function F1(n,i,o){if(n=Be(n),n&&(o||i===t))return n.replace(k,"");if(!n||!(i=ir(i)))return n;var f=Pr(n),_=uu(f,Pr(i));return Pn(f,_).join("")}function N1(n,i){var o=J,f=te;if(ut(i)){var _="separator"in i?i.separator:_;o="length"in i?Se(i.length):o,f="omission"in i?ir(i.omission):f}n=Be(n);var S=n.length;if(oa(n)){var A=Pr(n);S=A.length}if(o>=S)return n;var T=o-ca(f);if(T<1)return f;var O=A?Pn(A,0,T).join(""):n.slice(0,T);if(_===t)return O+f;if(A&&(T+=O.length-T),xc(_)){if(n.slice(T).search(_)){var U,Z=O;for(_.global||(_=No(_.source,Be(lt.exec(_))+"g")),_.lastIndex=0;U=_.exec(Z);)var V=U.index;O=O.slice(0,V===t?T:V)}}else if(n.indexOf(ir(_),T)!=T){var X=O.lastIndexOf(_);X>-1&&(O=O.slice(0,X))}return O+f}function j1(n){return n=Be(n),n&&hn.test(n)?n.replace(ai,pg):n}var z1=pa(function(n,i,o){return n+(o?" ":"")+i.toUpperCase()}),Pc=td("toUpperCase");function Xd(n,i,o){return n=Be(n),i=o?t:i,i===t?lg(n)?vg(n):eg(n):n.match(i)||[]}var ef=Ae(function(n,i){try{return nr(n,t,i)}catch(o){return wc(o)?o:new ve(o)}}),q1=an(function(n,i){return pr(i,function(o){o=Hr(o),rn(n,o,yc(n[o],n))}),n});function U1(n){var i=n==null?0:n.length,o=ue();return n=i?st(n,function(f){if(typeof f[1]!="function")throw new mr(l);return[o(f[0]),f[1]]}):[],Ae(function(f){for(var _=-1;++_<i;){var S=n[_];if(nr(S[0],this,f))return nr(S[1],this,f)}})}function H1(n){return pv(vr(n,g))}function Rc(n){return function(){return n}}function Z1(n,i){return n==null||n!==n?i:n}var B1=nd(),V1=nd(!0);function Jt(n){return n}function Ac(n){return $u(typeof n=="function"?n:vr(n,g))}function W1(n){return Mu(vr(n,g))}function G1(n,i){return Lu(n,vr(i,g))}var K1=Ae(function(n,i){return function(o){return za(o,n,i)}}),Y1=Ae(function(n,i){return function(o){return za(n,o,i)}});function kc(n,i,o){var f=Rt(i),_=Mi(i,f);o==null&&!(ut(i)&&(_.length||!f.length))&&(o=i,i=n,n=this,_=Mi(i,Rt(i)));var S=!(ut(o)&&"chain"in o)||!!o.chain,A=on(n);return pr(_,function(T){var O=i[T];n[T]=O,A&&(n.prototype[T]=function(){var U=this.__chain__;if(S||U){var Z=n(this.__wrapped__),V=Z.__actions__=Kt(this.__actions__);return V.push({func:O,args:arguments,thisArg:n}),Z.__chain__=U,Z}return O.apply(n,_n([this.value()],arguments))})}),n}function Q1(){return Pt._===this&&(Pt._=Eg),this}function Tc(){}function J1(n){return n=Se(n),Ae(function(i){return Fu(i,n)})}var X1=sc(st),eb=sc(au),tb=sc(Do);function tf(n){return hc(n)?Oo(Hr(n)):Dv(n)}function rb(n){return function(i){return n==null?t:jn(n,i)}}var nb=id(),ab=id(!0);function Cc(){return[]}function Dc(){return!1}function ib(){return{}}function sb(){return""}function ob(){return!0}function cb(n,i){if(n=Se(n),n<1||n>_e)return[];var o=Ne,f=$t(n,Ne);i=ue(i),n-=Ne;for(var _=Mo(f,i);++o<n;)i(o);return _}function lb(n){return we(n)?st(n,Hr):sr(n)?[n]:Kt(wd(Be(n)))}function ub(n){var i=++wg;return Be(n)+i}var db=qi(function(n,i){return n+i},0),fb=oc("ceil"),hb=qi(function(n,i){return n/i},1),pb=oc("floor");function mb(n){return n&&n.length?Ii(n,Jt,Vo):t}function gb(n,i){return n&&n.length?Ii(n,ue(i,2),Vo):t}function vb(n){return ou(n,Jt)}function _b(n,i){return ou(n,ue(i,2))}function yb(n){return n&&n.length?Ii(n,Jt,Yo):t}function bb(n,i){return n&&n.length?Ii(n,ue(i,2),Yo):t}var wb=qi(function(n,i){return n*i},1),xb=oc("round"),Eb=qi(function(n,i){return n-i},0);function Sb(n){return n&&n.length?Io(n,Jt):0}function Pb(n,i){return n&&n.length?Io(n,ue(i,2)):0}return x.after=W0,x.ary=Od,x.assign=Iy,x.assignIn=Vd,x.assignInWith=es,x.assignWith=My,x.at=Ly,x.before=$d,x.bind=yc,x.bindAll=q1,x.bindKey=Id,x.castArray=iy,x.chain=Td,x.chunk=p_,x.compact=m_,x.concat=g_,x.cond=U1,x.conforms=H1,x.constant=Rc,x.countBy=S0,x.create=Fy,x.curry=Md,x.curryRight=Ld,x.debounce=Fd,x.defaults=Ny,x.defaultsDeep=jy,x.defer=G0,x.delay=K0,x.difference=v_,x.differenceBy=__,x.differenceWith=y_,x.drop=b_,x.dropRight=w_,x.dropRightWhile=x_,x.dropWhile=E_,x.fill=S_,x.filter=R0,x.flatMap=T0,x.flatMapDeep=C0,x.flatMapDepth=D0,x.flatten=Pd,x.flattenDeep=P_,x.flattenDepth=R_,x.flip=Y0,x.flow=B1,x.flowRight=V1,x.fromPairs=A_,x.functions=Vy,x.functionsIn=Wy,x.groupBy=O0,x.initial=T_,x.intersection=C_,x.intersectionBy=D_,x.intersectionWith=O_,x.invert=Ky,x.invertBy=Yy,x.invokeMap=I0,x.iteratee=Ac,x.keyBy=M0,x.keys=Rt,x.keysIn=Qt,x.map=Gi,x.mapKeys=Jy,x.mapValues=Xy,x.matches=W1,x.matchesProperty=G1,x.memoize=Yi,x.merge=e1,x.mergeWith=Wd,x.method=K1,x.methodOf=Y1,x.mixin=kc,x.negate=Qi,x.nthArg=J1,x.omit=t1,x.omitBy=r1,x.once=Q0,x.orderBy=L0,x.over=X1,x.overArgs=J0,x.overEvery=eb,x.overSome=tb,x.partial=bc,x.partialRight=Nd,x.partition=F0,x.pick=n1,x.pickBy=Gd,x.property=tf,x.propertyOf=rb,x.pull=L_,x.pullAll=Ad,x.pullAllBy=F_,x.pullAllWith=N_,x.pullAt=j_,x.range=nb,x.rangeRight=ab,x.rearg=X0,x.reject=z0,x.remove=z_,x.rest=ey,x.reverse=vc,x.sampleSize=U0,x.set=i1,x.setWith=s1,x.shuffle=H0,x.slice=q_,x.sortBy=V0,x.sortedUniq=G_,x.sortedUniqBy=K_,x.split=T1,x.spread=ty,x.tail=Y_,x.take=Q_,x.takeRight=J_,x.takeRightWhile=X_,x.takeWhile=e0,x.tap=m0,x.throttle=ry,x.thru=Wi,x.toArray=Hd,x.toPairs=Kd,x.toPairsIn=Yd,x.toPath=lb,x.toPlainObject=Bd,x.transform=o1,x.unary=ny,x.union=t0,x.unionBy=r0,x.unionWith=n0,x.uniq=a0,x.uniqBy=i0,x.uniqWith=s0,x.unset=c1,x.unzip=_c,x.unzipWith=kd,x.update=l1,x.updateWith=u1,x.values=va,x.valuesIn=d1,x.without=o0,x.words=Xd,x.wrap=ay,x.xor=c0,x.xorBy=l0,x.xorWith=u0,x.zip=d0,x.zipObject=f0,x.zipObjectDeep=h0,x.zipWith=p0,x.entries=Kd,x.entriesIn=Yd,x.extend=Vd,x.extendWith=es,kc(x,x),x.add=db,x.attempt=ef,x.camelCase=m1,x.capitalize=Qd,x.ceil=fb,x.clamp=f1,x.clone=sy,x.cloneDeep=cy,x.cloneDeepWith=ly,x.cloneWith=oy,x.conformsTo=uy,x.deburr=Jd,x.defaultTo=Z1,x.divide=hb,x.endsWith=g1,x.eq=Ar,x.escape=v1,x.escapeRegExp=_1,x.every=P0,x.find=A0,x.findIndex=Ed,x.findKey=zy,x.findLast=k0,x.findLastIndex=Sd,x.findLastKey=qy,x.floor=pb,x.forEach=Cd,x.forEachRight=Dd,x.forIn=Uy,x.forInRight=Hy,x.forOwn=Zy,x.forOwnRight=By,x.get=Ec,x.gt=dy,x.gte=fy,x.has=Gy,x.hasIn=Sc,x.head=Rd,x.identity=Jt,x.includes=$0,x.indexOf=k_,x.inRange=h1,x.invoke=Qy,x.isArguments=Un,x.isArray=we,x.isArrayBuffer=hy,x.isArrayLike=Yt,x.isArrayLikeObject=gt,x.isBoolean=py,x.isBuffer=Rn,x.isDate=my,x.isElement=gy,x.isEmpty=vy,x.isEqual=_y,x.isEqualWith=yy,x.isError=wc,x.isFinite=by,x.isFunction=on,x.isInteger=jd,x.isLength=Ji,x.isMap=zd,x.isMatch=wy,x.isMatchWith=xy,x.isNaN=Ey,x.isNative=Sy,x.isNil=Ry,x.isNull=Py,x.isNumber=qd,x.isObject=ut,x.isObjectLike=ht,x.isPlainObject=Va,x.isRegExp=xc,x.isSafeInteger=Ay,x.isSet=Ud,x.isString=Xi,x.isSymbol=sr,x.isTypedArray=ga,x.isUndefined=ky,x.isWeakMap=Ty,x.isWeakSet=Cy,x.join=$_,x.kebabCase=y1,x.last=yr,x.lastIndexOf=I_,x.lowerCase=b1,x.lowerFirst=w1,x.lt=Dy,x.lte=Oy,x.max=mb,x.maxBy=gb,x.mean=vb,x.meanBy=_b,x.min=yb,x.minBy=bb,x.stubArray=Cc,x.stubFalse=Dc,x.stubObject=ib,x.stubString=sb,x.stubTrue=ob,x.multiply=wb,x.nth=M_,x.noConflict=Q1,x.noop=Tc,x.now=Ki,x.pad=x1,x.padEnd=E1,x.padStart=S1,x.parseInt=P1,x.random=p1,x.reduce=N0,x.reduceRight=j0,x.repeat=R1,x.replace=A1,x.result=a1,x.round=xb,x.runInContext=D,x.sample=q0,x.size=Z0,x.snakeCase=k1,x.some=B0,x.sortedIndex=U_,x.sortedIndexBy=H_,x.sortedIndexOf=Z_,x.sortedLastIndex=B_,x.sortedLastIndexBy=V_,x.sortedLastIndexOf=W_,x.startCase=C1,x.startsWith=D1,x.subtract=Eb,x.sum=Sb,x.sumBy=Pb,x.template=O1,x.times=cb,x.toFinite=cn,x.toInteger=Se,x.toLength=Zd,x.toLower=$1,x.toNumber=br,x.toSafeInteger=$y,x.toString=Be,x.toUpper=I1,x.trim=M1,x.trimEnd=L1,x.trimStart=F1,x.truncate=N1,x.unescape=j1,x.uniqueId=ub,x.upperCase=z1,x.upperFirst=Pc,x.each=Cd,x.eachRight=Dd,x.first=Rd,kc(x,(function(){var n={};return qr(x,function(i,o){We.call(x.prototype,o)||(n[o]=i)}),n})(),{chain:!1}),x.VERSION=s,pr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){x[n].placeholder=x}),pr(["drop","take"],function(n,i){Oe.prototype[n]=function(o){o=o===t?1:wt(Se(o),0);var f=this.__filtered__&&!i?new Oe(this):this.clone();return f.__filtered__?f.__takeCount__=$t(o,f.__takeCount__):f.__views__.push({size:$t(o,Ne),type:n+(f.__dir__<0?"Right":"")}),f},Oe.prototype[n+"Right"]=function(o){return this.reverse()[n](o).reverse()}}),pr(["filter","map","takeWhile"],function(n,i){var o=i+1,f=o==Q||o==Ue;Oe.prototype[n]=function(_){var S=this.clone();return S.__iteratees__.push({iteratee:ue(_,3),type:o}),S.__filtered__=S.__filtered__||f,S}}),pr(["head","last"],function(n,i){var o="take"+(i?"Right":"");Oe.prototype[n]=function(){return this[o](1).value()[0]}}),pr(["initial","tail"],function(n,i){var o="drop"+(i?"":"Right");Oe.prototype[n]=function(){return this.__filtered__?new Oe(this):this[o](1)}}),Oe.prototype.compact=function(){return this.filter(Jt)},Oe.prototype.find=function(n){return this.filter(n).head()},Oe.prototype.findLast=function(n){return this.reverse().find(n)},Oe.prototype.invokeMap=Ae(function(n,i){return typeof n=="function"?new Oe(this):this.map(function(o){return za(o,n,i)})}),Oe.prototype.reject=function(n){return this.filter(Qi(ue(n)))},Oe.prototype.slice=function(n,i){n=Se(n);var o=this;return o.__filtered__&&(n>0||i<0)?new Oe(o):(n<0?o=o.takeRight(-n):n&&(o=o.drop(n)),i!==t&&(i=Se(i),o=i<0?o.dropRight(-i):o.take(i-n)),o)},Oe.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Oe.prototype.toArray=function(){return this.take(Ne)},qr(Oe.prototype,function(n,i){var o=/^(?:filter|find|map|reject)|While$/.test(i),f=/^(?:head|last)$/.test(i),_=x[f?"take"+(i=="last"?"Right":""):i],S=f||/^find/.test(i);_&&(x.prototype[i]=function(){var A=this.__wrapped__,T=f?[1]:arguments,O=A instanceof Oe,U=T[0],Z=O||we(A),V=function(ke){var Ie=_.apply(x,_n([ke],T));return f&&X?Ie[0]:Ie};Z&&o&&typeof U=="function"&&U.length!=1&&(O=Z=!1);var X=this.__chain__,oe=!!this.__actions__.length,de=S&&!X,Re=O&&!oe;if(!S&&Z){A=Re?A:new Oe(this);var fe=n.apply(A,T);return fe.__actions__.push({func:Wi,args:[V],thisArg:t}),new gr(fe,X)}return de&&Re?n.apply(this,T):(fe=this.thru(V),de?f?fe.value()[0]:fe.value():fe)})}),pr(["pop","push","shift","sort","splice","unshift"],function(n){var i=yi[n],o=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",f=/^(?:pop|shift)$/.test(n);x.prototype[n]=function(){var _=arguments;if(f&&!this.__chain__){var S=this.value();return i.apply(we(S)?S:[],_)}return this[o](function(A){return i.apply(we(A)?A:[],_)})}}),qr(Oe.prototype,function(n,i){var o=x[i];if(o){var f=o.name+"";We.call(da,f)||(da[f]=[]),da[f].push({name:i,func:o})}}),da[zi(t,R).name]=[{name:"wrapper",func:t}],Oe.prototype.clone=jg,Oe.prototype.reverse=zg,Oe.prototype.value=qg,x.prototype.at=g0,x.prototype.chain=v0,x.prototype.commit=_0,x.prototype.next=y0,x.prototype.plant=w0,x.prototype.reverse=x0,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=E0,x.prototype.first=x.prototype.head,$a&&(x.prototype[$a]=b0),x}),bn=_g();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Pt._=bn,define(function(){return bn})):In?((In.exports=bn)._=bn,Ao._=bn):Pt._=bn}).call(a)}}),Bn=bm(AE(),1),TE=bm(kE(),1),CE=Symbol("Let zodToJsonSchema decide on which parser to use"),dm={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},DE=a=>typeof a=="string"?{...dm,name:a}:{...dm,...a},OE=a=>{let e=DE(a),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:t,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([s,r])=>[r._def,{def:r._def,path:[...e.basePath,e.definitionPath,s],jsonSchema:void 0}]))}};function xm(a,e,t,s){s?.errorMessages&&t&&(a.errorMessage={...a.errorMessage,[e]:t})}function Ge(a,e,t,s,r){a[e]=t,xm(a,e,s,r)}var Em=(a,e)=>{let t=0;for(;t<a.length&&t<e.length&&a[t]===e[t];t++);return[(a.length-t).toString(),...e.slice(t)].join("/")},ze;(function(a){a.assertEqual=r=>{};function e(r){}a.assertIs=e;function t(r){throw new Error}a.assertNever=t,a.arrayToEnum=r=>{let c={};for(let l of r)c[l]=l;return c},a.getValidEnumValues=r=>{let c=a.objectKeys(r).filter(u=>typeof r[r[u]]!="number"),l={};for(let u of c)l[u]=r[u];return a.objectValues(l)},a.objectValues=r=>a.objectKeys(r).map(function(c){return r[c]}),a.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{let c=[];for(let l in r)Object.prototype.hasOwnProperty.call(r,l)&&c.push(l);return c},a.find=(r,c)=>{for(let l of r)if(c(l))return l},a.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function s(r,c=" | "){return r.map(l=>typeof l=="string"?`'${l}'`:l).join(c)}a.joinValues=s,a.jsonStringifyReplacer=(r,c)=>typeof c=="bigint"?c.toString():c})(ze||(ze={}));var fm;(function(a){a.mergeShapes=(e,t)=>({...e,...t})})(fm||(fm={}));var ne=ze.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Cn=a=>{switch(typeof a){case"undefined":return ne.undefined;case"string":return ne.string;case"number":return Number.isNaN(a)?ne.nan:ne.number;case"boolean":return ne.boolean;case"function":return ne.function;case"bigint":return ne.bigint;case"symbol":return ne.symbol;case"object":return Array.isArray(a)?ne.array:a===null?ne.null:a.then&&typeof a.then=="function"&&a.catch&&typeof a.catch=="function"?ne.promise:typeof Map<"u"&&a instanceof Map?ne.map:typeof Set<"u"&&a instanceof Set?ne.set:typeof Date<"u"&&a instanceof Date?ne.date:ne.object;default:return ne.unknown}},K=ze.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Br=class Sm extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(c){return c.message},s={_errors:[]},r=c=>{for(let l of c.issues)if(l.code==="invalid_union")l.unionErrors.map(r);else if(l.code==="invalid_return_type")r(l.returnTypeError);else if(l.code==="invalid_arguments")r(l.argumentsError);else if(l.path.length===0)s._errors.push(t(l));else{let u=s,d=0;for(;d<l.path.length;){let h=l.path[d];d===l.path.length-1?(u[h]=u[h]||{_errors:[]},u[h]._errors.push(t(l))):u[h]=u[h]||{_errors:[]},u=u[h],d++}}};return r(this),s}static assert(e){if(!(e instanceof Sm))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ze.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},s=[];for(let r of this.issues)if(r.path.length>0){let c=r.path[0];t[c]=t[c]||[],t[c].push(e(r))}else s.push(e(r));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}};Br.create=a=>new Br(a);var $E=(a,e)=>{let t;switch(a.code){case K.invalid_type:a.received===ne.undefined?t="Required":t=`Expected ${a.expected}, received ${a.received}`;break;case K.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(a.expected,ze.jsonStringifyReplacer)}`;break;case K.unrecognized_keys:t=`Unrecognized key(s) in object: ${ze.joinValues(a.keys,", ")}`;break;case K.invalid_union:t="Invalid input";break;case K.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${ze.joinValues(a.options)}`;break;case K.invalid_enum_value:t=`Invalid enum value. Expected ${ze.joinValues(a.options)}, received '${a.received}'`;break;case K.invalid_arguments:t="Invalid function arguments";break;case K.invalid_return_type:t="Invalid function return type";break;case K.invalid_date:t="Invalid date";break;case K.invalid_string:typeof a.validation=="object"?"includes"in a.validation?(t=`Invalid input: must include "${a.validation.includes}"`,typeof a.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?t=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?t=`Invalid input: must end with "${a.validation.endsWith}"`:ze.assertNever(a.validation):a.validation!=="regex"?t=`Invalid ${a.validation}`:t="Invalid";break;case K.too_small:a.type==="array"?t=`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:a.type==="string"?t=`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:a.type==="number"?t=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="bigint"?t=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="date"?t=`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:t="Invalid input";break;case K.too_big:a.type==="array"?t=`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:a.type==="string"?t=`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:a.type==="number"?t=`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="bigint"?t=`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="date"?t=`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:t="Invalid input";break;case K.custom:t="Invalid input";break;case K.invalid_intersection_types:t="Intersection results could not be merged";break;case K.not_multiple_of:t=`Number must be a multiple of ${a.multipleOf}`;break;case K.not_finite:t="Number must be finite";break;default:t=e.defaultError,ze.assertNever(a)}return{message:t}},ri=$E,IE=ri;function Rl(){return IE}var Al=a=>{let{data:e,path:t,errorMaps:s,issueData:r}=a,c=[...t,...r.path||[]],l={...r,path:c};if(r.message!==void 0)return{...r,path:c,message:r.message};let u="",d=s.filter(h=>!!h).slice().reverse();for(let h of d)u=h(l,{data:e,defaultError:u}).message;return{...r,path:c,message:u}};function ee(a,e){let t=Rl(),s=Al({issueData:e,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,t,t===ri?void 0:ri].filter(r=>!!r)});a.common.issues.push(s)}var lr=class Pm{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let s=[];for(let r of t){if(r.status==="aborted")return pe;r.status==="dirty"&&e.dirty(),s.push(r.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){let s=[];for(let r of t){let c=await r.key,l=await r.value;s.push({key:c,value:l})}return Pm.mergeObjectSync(e,s)}static mergeObjectSync(e,t){let s={};for(let r of t){let{key:c,value:l}=r;if(c.status==="aborted"||l.status==="aborted")return pe;c.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),c.value!=="__proto__"&&(typeof l.value<"u"||r.alwaysSet)&&(s[c.value]=l.value)}return{status:e.value,value:s}}},pe=Object.freeze({status:"aborted"}),ei=a=>({status:"dirty",value:a}),er=a=>({status:"valid",value:a}),hm=a=>a.status==="aborted",pm=a=>a.status==="dirty",Ea=a=>a.status==="valid",no=a=>typeof Promise<"u"&&a instanceof Promise,ce;(function(a){a.errToObj=e=>typeof e=="string"?{message:e}:e||{},a.toString=e=>typeof e=="string"?e:e?.message})(ce||(ce={}));var Vr=class{constructor(a,e,t,s){this._cachedPath=[],this.parent=a,this.data=e,this._path=t,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},mm=(a,e)=>{if(Ea(e))return{success:!0,data:e.value};if(!a.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new Br(a.common.issues);return this._error=t,this._error}}};function xe(a){if(!a)return{};let{errorMap:e,invalid_type_error:t,required_error:s,description:r}=a;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(l,u)=>{let{message:d}=a;return l.code==="invalid_enum_value"?{message:d??u.defaultError}:typeof u.data>"u"?{message:d??s??u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:d??t??u.defaultError}},description:r}}var Ce=class{get description(){return this._def.description}_getType(a){return Cn(a.data)}_getOrReturnCtx(a,e){return e||{common:a.parent.common,data:a.data,parsedType:Cn(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}_processInputParams(a){return{status:new lr,ctx:{common:a.parent.common,data:a.data,parsedType:Cn(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}}_parseSync(a){let e=this._parse(a);if(no(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(a){let e=this._parse(a);return Promise.resolve(e)}parse(a,e){let t=this.safeParse(a,e);if(t.success)return t.data;throw t.error}safeParse(a,e){let t={common:{issues:[],async:e?.async??!1,contextualErrorMap:e?.errorMap},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:Cn(a)},s=this._parseSync({data:a,path:t.path,parent:t});return mm(t,s)}"~validate"(a){let e={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:Cn(a)};if(!this["~standard"].async)try{let t=this._parseSync({data:a,path:[],parent:e});return Ea(t)?{value:t.value}:{issues:e.common.issues}}catch(t){t?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),e.common={issues:[],async:!0}}return this._parseAsync({data:a,path:[],parent:e}).then(t=>Ea(t)?{value:t.value}:{issues:e.common.issues})}async parseAsync(a,e){let t=await this.safeParseAsync(a,e);if(t.success)return t.data;throw t.error}async safeParseAsync(a,e){let t={common:{issues:[],contextualErrorMap:e?.errorMap,async:!0},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:Cn(a)},s=this._parse({data:a,path:t.path,parent:t}),r=await(no(s)?s:Promise.resolve(s));return mm(t,r)}refine(a,e){let t=s=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(s):e;return this._refinement((s,r)=>{let c=a(s),l=()=>r.addIssue({code:K.custom,...t(s)});return typeof Promise<"u"&&c instanceof Promise?c.then(u=>u?!0:(l(),!1)):c?!0:(l(),!1)})}refinement(a,e){return this._refinement((t,s)=>a(t)?!0:(s.addIssue(typeof e=="function"?e(t,s):e),!1))}_refinement(a){return new fn({schema:this,typeName:Y.ZodEffects,effect:{type:"refinement",refinement:a}})}superRefine(a){return this._refinement(a)}constructor(a){this.spa=this.safeParseAsync,this._def=a,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return dn.create(this,this._def)}nullable(){return Wn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Sa.create(this)}promise(){return ni.create(this,this._def)}or(a){return oo.create([this,a],this._def)}and(a){return co.create(this,a,this._def)}transform(a){return new fn({...xe(this._def),schema:this,typeName:Y.ZodEffects,effect:{type:"transform",transform:a}})}default(a){let e=typeof a=="function"?a:()=>a;return new ho({...xe(this._def),innerType:this,defaultValue:e,typeName:Y.ZodDefault})}brand(){return new Om({typeName:Y.ZodBranded,type:this,...xe(this._def)})}catch(a){let e=typeof a=="function"?a:()=>a;return new po({...xe(this._def),innerType:this,catchValue:e,typeName:Y.ZodCatch})}describe(a){let e=this.constructor;return new e({...this._def,description:a})}pipe(a){return $m.create(this,a)}readonly(){return mo.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},ME=/^c[^\s-]{8,}$/i,LE=/^[0-9a-z]+$/,FE=/^[0-9A-HJKMNP-TV-Z]{26}$/i,NE=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,jE=/^[a-z0-9_-]{21}$/i,zE=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,qE=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,UE=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,HE="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",El,ZE=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,BE=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,VE=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,WE=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,GE=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,KE=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Rm="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",YE=new RegExp(`^${Rm}$`);function Am(a){let e="[0-5]\\d";a.precision?e=`${e}\\.\\d{${a.precision}}`:a.precision==null&&(e=`${e}(\\.\\d+)?`);let t=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function QE(a){return new RegExp(`^${Am(a)}$`)}function JE(a){let e=`${Rm}T${Am(a)}`,t=[];return t.push(a.local?"Z?":"Z"),a.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function XE(a,e){return!!((e==="v4"||!e)&&ZE.test(a)||(e==="v6"||!e)&&VE.test(a))}function eS(a,e){if(!zE.test(a))return!1;try{let[t]=a.split(".");if(!t)return!1;let s=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),r=JSON.parse(atob(s));return!(typeof r!="object"||r===null||"typ"in r&&r?.typ!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function tS(a,e){return!!((e==="v4"||!e)&&BE.test(a)||(e==="v6"||!e)&&WE.test(a))}var ao=class ti extends Ce{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ne.string){let c=this._getOrReturnCtx(e);return ee(c,{code:K.invalid_type,expected:ne.string,received:c.parsedType}),pe}let s=new lr,r;for(let c of this._def.checks)if(c.kind==="min")e.data.length<c.value&&(r=this._getOrReturnCtx(e,r),ee(r,{code:K.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),s.dirty());else if(c.kind==="max")e.data.length>c.value&&(r=this._getOrReturnCtx(e,r),ee(r,{code:K.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),s.dirty());else if(c.kind==="length"){let l=e.data.length>c.value,u=e.data.length<c.value;(l||u)&&(r=this._getOrReturnCtx(e,r),l?ee(r,{code:K.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}):u&&ee(r,{code:K.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}),s.dirty())}else if(c.kind==="email")UE.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"email",code:K.invalid_string,message:c.message}),s.dirty());else if(c.kind==="emoji")El||(El=new RegExp(HE,"u")),El.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"emoji",code:K.invalid_string,message:c.message}),s.dirty());else if(c.kind==="uuid")NE.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"uuid",code:K.invalid_string,message:c.message}),s.dirty());else if(c.kind==="nanoid")jE.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"nanoid",code:K.invalid_string,message:c.message}),s.dirty());else if(c.kind==="cuid")ME.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"cuid",code:K.invalid_string,message:c.message}),s.dirty());else if(c.kind==="cuid2")LE.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"cuid2",code:K.invalid_string,message:c.message}),s.dirty());else if(c.kind==="ulid")FE.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"ulid",code:K.invalid_string,message:c.message}),s.dirty());else if(c.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),ee(r,{validation:"url",code:K.invalid_string,message:c.message}),s.dirty()}else c.kind==="regex"?(c.regex.lastIndex=0,c.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"regex",code:K.invalid_string,message:c.message}),s.dirty())):c.kind==="trim"?e.data=e.data.trim():c.kind==="includes"?e.data.includes(c.value,c.position)||(r=this._getOrReturnCtx(e,r),ee(r,{code:K.invalid_string,validation:{includes:c.value,position:c.position},message:c.message}),s.dirty()):c.kind==="toLowerCase"?e.data=e.data.toLowerCase():c.kind==="toUpperCase"?e.data=e.data.toUpperCase():c.kind==="startsWith"?e.data.startsWith(c.value)||(r=this._getOrReturnCtx(e,r),ee(r,{code:K.invalid_string,validation:{startsWith:c.value},message:c.message}),s.dirty()):c.kind==="endsWith"?e.data.endsWith(c.value)||(r=this._getOrReturnCtx(e,r),ee(r,{code:K.invalid_string,validation:{endsWith:c.value},message:c.message}),s.dirty()):c.kind==="datetime"?JE(c).test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{code:K.invalid_string,validation:"datetime",message:c.message}),s.dirty()):c.kind==="date"?YE.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{code:K.invalid_string,validation:"date",message:c.message}),s.dirty()):c.kind==="time"?QE(c).test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{code:K.invalid_string,validation:"time",message:c.message}),s.dirty()):c.kind==="duration"?qE.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"duration",code:K.invalid_string,message:c.message}),s.dirty()):c.kind==="ip"?XE(e.data,c.version)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"ip",code:K.invalid_string,message:c.message}),s.dirty()):c.kind==="jwt"?eS(e.data,c.alg)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"jwt",code:K.invalid_string,message:c.message}),s.dirty()):c.kind==="cidr"?tS(e.data,c.version)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"cidr",code:K.invalid_string,message:c.message}),s.dirty()):c.kind==="base64"?GE.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"base64",code:K.invalid_string,message:c.message}),s.dirty()):c.kind==="base64url"?KE.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"base64url",code:K.invalid_string,message:c.message}),s.dirty()):ze.assertNever(c);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(r=>e.test(r),{validation:t,code:K.invalid_string,...ce.errToObj(s)})}_addCheck(e){return new ti({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ce.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ce.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ce.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...ce.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...ce.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...ce.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...ce.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ce.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ce.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ce.errToObj(t)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new ti({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ti({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ti({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};ao.create=a=>new ao({checks:[],typeName:Y.ZodString,coerce:a?.coerce??!1,...xe(a)});function rS(a,e){let t=(a.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,r=t>s?t:s,c=Number.parseInt(a.toFixed(r).replace(".","")),l=Number.parseInt(e.toFixed(r).replace(".",""));return c%l/10**r}var kl=class Tl extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ne.number){let c=this._getOrReturnCtx(e);return ee(c,{code:K.invalid_type,expected:ne.number,received:c.parsedType}),pe}let s,r=new lr;for(let c of this._def.checks)c.kind==="int"?ze.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:K.invalid_type,expected:"integer",received:"float",message:c.message}),r.dirty()):c.kind==="min"?(c.inclusive?e.data<c.value:e.data<=c.value)&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.too_small,minimum:c.value,type:"number",inclusive:c.inclusive,exact:!1,message:c.message}),r.dirty()):c.kind==="max"?(c.inclusive?e.data>c.value:e.data>=c.value)&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.too_big,maximum:c.value,type:"number",inclusive:c.inclusive,exact:!1,message:c.message}),r.dirty()):c.kind==="multipleOf"?rS(e.data,c.value)!==0&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.not_multiple_of,multipleOf:c.value,message:c.message}),r.dirty()):c.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:K.not_finite,message:c.message}),r.dirty()):ze.assertNever(c);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ce.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ce.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ce.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ce.toString(t))}setLimit(e,t,s,r){return new Tl({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:ce.toString(r)}]})}_addCheck(e){return new Tl({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ze.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}};kl.create=a=>new kl({checks:[],typeName:Y.ZodNumber,coerce:a?.coerce||!1,...xe(a)});var Cl=class Dl extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ne.bigint)return this._getInvalidInput(e);let s,r=new lr;for(let c of this._def.checks)c.kind==="min"?(c.inclusive?e.data<c.value:e.data<=c.value)&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.too_small,type:"bigint",minimum:c.value,inclusive:c.inclusive,message:c.message}),r.dirty()):c.kind==="max"?(c.inclusive?e.data>c.value:e.data>=c.value)&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.too_big,type:"bigint",maximum:c.value,inclusive:c.inclusive,message:c.message}),r.dirty()):c.kind==="multipleOf"?e.data%c.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.not_multiple_of,multipleOf:c.value,message:c.message}),r.dirty()):ze.assertNever(c);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return ee(t,{code:K.invalid_type,expected:ne.bigint,received:t.parsedType}),pe}gte(e,t){return this.setLimit("min",e,!0,ce.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ce.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ce.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ce.toString(t))}setLimit(e,t,s,r){return new Dl({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:ce.toString(r)}]})}_addCheck(e){return new Dl({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};Cl.create=a=>new Cl({checks:[],typeName:Y.ZodBigInt,coerce:a?.coerce??!1,...xe(a)});var Ol=class extends Ce{_parse(a){if(this._def.coerce&&(a.data=!!a.data),this._getType(a)!==ne.boolean){let t=this._getOrReturnCtx(a);return ee(t,{code:K.invalid_type,expected:ne.boolean,received:t.parsedType}),pe}return er(a.data)}};Ol.create=a=>new Ol({typeName:Y.ZodBoolean,coerce:a?.coerce||!1,...xe(a)});var $l=class km extends Ce{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ne.date){let c=this._getOrReturnCtx(e);return ee(c,{code:K.invalid_type,expected:ne.date,received:c.parsedType}),pe}if(Number.isNaN(e.data.getTime())){let c=this._getOrReturnCtx(e);return ee(c,{code:K.invalid_date}),pe}let s=new lr,r;for(let c of this._def.checks)c.kind==="min"?e.data.getTime()<c.value&&(r=this._getOrReturnCtx(e,r),ee(r,{code:K.too_small,message:c.message,inclusive:!0,exact:!1,minimum:c.value,type:"date"}),s.dirty()):c.kind==="max"?e.data.getTime()>c.value&&(r=this._getOrReturnCtx(e,r),ee(r,{code:K.too_big,message:c.message,inclusive:!0,exact:!1,maximum:c.value,type:"date"}),s.dirty()):ze.assertNever(c);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new km({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};$l.create=a=>new $l({checks:[],coerce:a?.coerce||!1,typeName:Y.ZodDate,...xe(a)});var Il=class extends Ce{_parse(a){if(this._getType(a)!==ne.symbol){let t=this._getOrReturnCtx(a);return ee(t,{code:K.invalid_type,expected:ne.symbol,received:t.parsedType}),pe}return er(a.data)}};Il.create=a=>new Il({typeName:Y.ZodSymbol,...xe(a)});var io=class extends Ce{_parse(a){if(this._getType(a)!==ne.undefined){let t=this._getOrReturnCtx(a);return ee(t,{code:K.invalid_type,expected:ne.undefined,received:t.parsedType}),pe}return er(a.data)}};io.create=a=>new io({typeName:Y.ZodUndefined,...xe(a)});var so=class extends Ce{_parse(a){if(this._getType(a)!==ne.null){let t=this._getOrReturnCtx(a);return ee(t,{code:K.invalid_type,expected:ne.null,received:t.parsedType}),pe}return er(a.data)}};so.create=a=>new so({typeName:Y.ZodNull,...xe(a)});var Ml=class extends Ce{constructor(){super(...arguments),this._any=!0}_parse(a){return er(a.data)}};Ml.create=a=>new Ml({typeName:Y.ZodAny,...xe(a)});var xa=class extends Ce{constructor(){super(...arguments),this._unknown=!0}_parse(a){return er(a.data)}};xa.create=a=>new xa({typeName:Y.ZodUnknown,...xe(a)});var Dn=class extends Ce{_parse(a){let e=this._getOrReturnCtx(a);return ee(e,{code:K.invalid_type,expected:ne.never,received:e.parsedType}),pe}};Dn.create=a=>new Dn({typeName:Y.ZodNever,...xe(a)});var Ll=class extends Ce{_parse(a){if(this._getType(a)!==ne.undefined){let t=this._getOrReturnCtx(a);return ee(t,{code:K.invalid_type,expected:ne.void,received:t.parsedType}),pe}return er(a.data)}};Ll.create=a=>new Ll({typeName:Y.ZodVoid,...xe(a)});var Sa=class to extends Ce{_parse(e){let{ctx:t,status:s}=this._processInputParams(e),r=this._def;if(t.parsedType!==ne.array)return ee(t,{code:K.invalid_type,expected:ne.array,received:t.parsedType}),pe;if(r.exactLength!==null){let l=t.data.length>r.exactLength.value,u=t.data.length<r.exactLength.value;(l||u)&&(ee(t,{code:l?K.too_big:K.too_small,minimum:u?r.exactLength.value:void 0,maximum:l?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(ee(t,{code:K.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(ee(t,{code:K.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((l,u)=>r.type._parseAsync(new Vr(t,l,t.path,u)))).then(l=>lr.mergeArray(s,l));let c=[...t.data].map((l,u)=>r.type._parseSync(new Vr(t,l,t.path,u)));return lr.mergeArray(s,c)}get element(){return this._def.type}min(e,t){return new to({...this._def,minLength:{value:e,message:ce.toString(t)}})}max(e,t){return new to({...this._def,maxLength:{value:e,message:ce.toString(t)}})}length(e,t){return new to({...this._def,exactLength:{value:e,message:ce.toString(t)}})}nonempty(e){return this.min(1,e)}};Sa.create=(a,e)=>new Sa({type:a,minLength:null,maxLength:null,exactLength:null,typeName:Y.ZodArray,...xe(e)});function wa(a){if(a instanceof Ir){let e={};for(let t in a.shape){let s=a.shape[t];e[t]=dn.create(wa(s))}return new Ir({...a._def,shape:()=>e})}else return a instanceof Sa?new Sa({...a._def,type:wa(a.element)}):a instanceof dn?dn.create(wa(a.unwrap())):a instanceof Wn?Wn.create(wa(a.unwrap())):a instanceof Vn?Vn.create(a.items.map(e=>wa(e))):a}var Ir=class $r extends Ce{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=ze.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==ne.object){let h=this._getOrReturnCtx(e);return ee(h,{code:K.invalid_type,expected:ne.object,received:h.parsedType}),pe}let{status:s,ctx:r}=this._processInputParams(e),{shape:c,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof Dn&&this._def.unknownKeys==="strip"))for(let h in r.data)l.includes(h)||u.push(h);let d=[];for(let h of l){let m=c[h],g=r.data[h];d.push({key:{status:"valid",value:h},value:m._parse(new Vr(r,g,r.path,h)),alwaysSet:h in r.data})}if(this._def.catchall instanceof Dn){let h=this._def.unknownKeys;if(h==="passthrough")for(let m of u)d.push({key:{status:"valid",value:m},value:{status:"valid",value:r.data[m]}});else if(h==="strict")u.length>0&&(ee(r,{code:K.unrecognized_keys,keys:u}),s.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let h=this._def.catchall;for(let m of u){let g=r.data[m];d.push({key:{status:"valid",value:m},value:h._parse(new Vr(r,g,r.path,m)),alwaysSet:m in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let h=[];for(let m of d){let g=await m.key,v=await m.value;h.push({key:g,value:v,alwaysSet:m.alwaysSet})}return h}).then(h=>lr.mergeObjectSync(s,h)):lr.mergeObjectSync(s,d)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new $r({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{let r=this._def.errorMap?.(t,s).message??s.defaultError;return t.code==="unrecognized_keys"?{message:ce.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new $r({...this._def,unknownKeys:"strip"})}passthrough(){return new $r({...this._def,unknownKeys:"passthrough"})}extend(e){return new $r({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new $r({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Y.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new $r({...this._def,catchall:e})}pick(e){let t={};for(let s of ze.objectKeys(e))e[s]&&this.shape[s]&&(t[s]=this.shape[s]);return new $r({...this._def,shape:()=>t})}omit(e){let t={};for(let s of ze.objectKeys(this.shape))e[s]||(t[s]=this.shape[s]);return new $r({...this._def,shape:()=>t})}deepPartial(){return wa(this)}partial(e){let t={};for(let s of ze.objectKeys(this.shape)){let r=this.shape[s];e&&!e[s]?t[s]=r:t[s]=r.optional()}return new $r({...this._def,shape:()=>t})}required(e){let t={};for(let s of ze.objectKeys(this.shape))if(e&&!e[s])t[s]=this.shape[s];else{let c=this.shape[s];for(;c instanceof dn;)c=c._def.innerType;t[s]=c}return new $r({...this._def,shape:()=>t})}keyof(){return Dm(ze.objectKeys(this.shape))}};Ir.create=(a,e)=>new Ir({shape:()=>a,unknownKeys:"strip",catchall:Dn.create(),typeName:Y.ZodObject,...xe(e)});Ir.strictCreate=(a,e)=>new Ir({shape:()=>a,unknownKeys:"strict",catchall:Dn.create(),typeName:Y.ZodObject,...xe(e)});Ir.lazycreate=(a,e)=>new Ir({shape:a,unknownKeys:"strip",catchall:Dn.create(),typeName:Y.ZodObject,...xe(e)});var oo=class extends Ce{_parse(a){let{ctx:e}=this._processInputParams(a),t=this._def.options;function s(r){for(let l of r)if(l.result.status==="valid")return l.result;for(let l of r)if(l.result.status==="dirty")return e.common.issues.push(...l.ctx.common.issues),l.result;let c=r.map(l=>new Br(l.ctx.common.issues));return ee(e,{code:K.invalid_union,unionErrors:c}),pe}if(e.common.async)return Promise.all(t.map(async r=>{let c={...e,common:{...e.common,issues:[]},parent:null};return{result:await r._parseAsync({data:e.data,path:e.path,parent:c}),ctx:c}})).then(s);{let r,c=[];for(let u of t){let d={...e,common:{...e.common,issues:[]},parent:null},h=u._parseSync({data:e.data,path:e.path,parent:d});if(h.status==="valid")return h;h.status==="dirty"&&!r&&(r={result:h,ctx:d}),d.common.issues.length&&c.push(d.common.issues)}if(r)return e.common.issues.push(...r.ctx.common.issues),r.result;let l=c.map(u=>new Br(u));return ee(e,{code:K.invalid_union,unionErrors:l}),pe}}get options(){return this._def.options}};oo.create=(a,e)=>new oo({options:a,typeName:Y.ZodUnion,...xe(e)});var un=a=>a instanceof lo?un(a.schema):a instanceof fn?un(a.innerType()):a instanceof uo?[a.value]:a instanceof vo?a.options:a instanceof fo?ze.objectValues(a.enum):a instanceof ho?un(a._def.innerType):a instanceof io?[void 0]:a instanceof so?[null]:a instanceof dn?[void 0,...un(a.unwrap())]:a instanceof Wn?[null,...un(a.unwrap())]:a instanceof Om||a instanceof mo?un(a.unwrap()):a instanceof po?un(a._def.innerType):[],nS=class Tm extends Ce{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==ne.object)return ee(t,{code:K.invalid_type,expected:ne.object,received:t.parsedType}),pe;let s=this.discriminator,r=t.data[s],c=this.optionsMap.get(r);return c?t.common.async?c._parseAsync({data:t.data,path:t.path,parent:t}):c._parseSync({data:t.data,path:t.path,parent:t}):(ee(t,{code:K.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),pe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){let r=new Map;for(let c of t){let l=un(c.shape[e]);if(!l.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let u of l){if(r.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);r.set(u,c)}}return new Tm({typeName:Y.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...xe(s)})}};function Fl(a,e){let t=Cn(a),s=Cn(e);if(a===e)return{valid:!0,data:a};if(t===ne.object&&s===ne.object){let r=ze.objectKeys(e),c=ze.objectKeys(a).filter(u=>r.indexOf(u)!==-1),l={...a,...e};for(let u of c){let d=Fl(a[u],e[u]);if(!d.valid)return{valid:!1};l[u]=d.data}return{valid:!0,data:l}}else if(t===ne.array&&s===ne.array){if(a.length!==e.length)return{valid:!1};let r=[];for(let c=0;c<a.length;c++){let l=a[c],u=e[c],d=Fl(l,u);if(!d.valid)return{valid:!1};r.push(d.data)}return{valid:!0,data:r}}else return t===ne.date&&s===ne.date&&+a==+e?{valid:!0,data:a}:{valid:!1}}var co=class extends Ce{_parse(a){let{status:e,ctx:t}=this._processInputParams(a),s=(r,c)=>{if(hm(r)||hm(c))return pe;let l=Fl(r.value,c.value);return l.valid?((pm(r)||pm(c))&&e.dirty(),{status:e.value,value:l.data}):(ee(t,{code:K.invalid_intersection_types}),pe)};return t.common.async?Promise.all([this._def.left._parseAsync({data:t.data,path:t.path,parent:t}),this._def.right._parseAsync({data:t.data,path:t.path,parent:t})]).then(([r,c])=>s(r,c)):s(this._def.left._parseSync({data:t.data,path:t.path,parent:t}),this._def.right._parseSync({data:t.data,path:t.path,parent:t}))}};co.create=(a,e,t)=>new co({left:a,right:e,typeName:Y.ZodIntersection,...xe(t)});var Vn=class Cm extends Ce{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==ne.array)return ee(s,{code:K.invalid_type,expected:ne.array,received:s.parsedType}),pe;if(s.data.length<this._def.items.length)return ee(s,{code:K.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),pe;!this._def.rest&&s.data.length>this._def.items.length&&(ee(s,{code:K.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let c=[...s.data].map((l,u)=>{let d=this._def.items[u]||this._def.rest;return d?d._parse(new Vr(s,l,s.path,u)):null}).filter(l=>!!l);return s.common.async?Promise.all(c).then(l=>lr.mergeArray(t,l)):lr.mergeArray(t,c)}get items(){return this._def.items}rest(e){return new Cm({...this._def,rest:e})}};Vn.create=(a,e)=>{if(!Array.isArray(a))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Vn({items:a,typeName:Y.ZodTuple,rest:null,...xe(e)})};var aS=class Nl extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==ne.object)return ee(s,{code:K.invalid_type,expected:ne.object,received:s.parsedType}),pe;let r=[],c=this._def.keyType,l=this._def.valueType;for(let u in s.data)r.push({key:c._parse(new Vr(s,u,s.path,u)),value:l._parse(new Vr(s,s.data[u],s.path,u)),alwaysSet:u in s.data});return s.common.async?lr.mergeObjectAsync(t,r):lr.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof Ce?new Nl({keyType:e,valueType:t,typeName:Y.ZodRecord,...xe(s)}):new Nl({keyType:ao.create(),valueType:e,typeName:Y.ZodRecord,...xe(t)})}},jl=class extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:e,ctx:t}=this._processInputParams(a);if(t.parsedType!==ne.map)return ee(t,{code:K.invalid_type,expected:ne.map,received:t.parsedType}),pe;let s=this._def.keyType,r=this._def.valueType,c=[...t.data.entries()].map(([l,u],d)=>({key:s._parse(new Vr(t,l,t.path,[d,"key"])),value:r._parse(new Vr(t,u,t.path,[d,"value"]))}));if(t.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let u of c){let d=await u.key,h=await u.value;if(d.status==="aborted"||h.status==="aborted")return pe;(d.status==="dirty"||h.status==="dirty")&&e.dirty(),l.set(d.value,h.value)}return{status:e.value,value:l}})}else{let l=new Map;for(let u of c){let d=u.key,h=u.value;if(d.status==="aborted"||h.status==="aborted")return pe;(d.status==="dirty"||h.status==="dirty")&&e.dirty(),l.set(d.value,h.value)}return{status:e.value,value:l}}}};jl.create=(a,e,t)=>new jl({valueType:e,keyType:a,typeName:Y.ZodMap,...xe(t)});var zl=class ql extends Ce{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==ne.set)return ee(s,{code:K.invalid_type,expected:ne.set,received:s.parsedType}),pe;let r=this._def;r.minSize!==null&&s.data.size<r.minSize.value&&(ee(s,{code:K.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&s.data.size>r.maxSize.value&&(ee(s,{code:K.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());let c=this._def.valueType;function l(d){let h=new Set;for(let m of d){if(m.status==="aborted")return pe;m.status==="dirty"&&t.dirty(),h.add(m.value)}return{status:t.value,value:h}}let u=[...s.data.values()].map((d,h)=>c._parse(new Vr(s,d,s.path,h)));return s.common.async?Promise.all(u).then(d=>l(d)):l(u)}min(e,t){return new ql({...this._def,minSize:{value:e,message:ce.toString(t)}})}max(e,t){return new ql({...this._def,maxSize:{value:e,message:ce.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};zl.create=(a,e)=>new zl({valueType:a,minSize:null,maxSize:null,typeName:Y.ZodSet,...xe(e)});var iS=class ro extends Ce{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==ne.function)return ee(t,{code:K.invalid_type,expected:ne.function,received:t.parsedType}),pe;function s(u,d){return Al({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Rl(),ri].filter(h=>!!h),issueData:{code:K.invalid_arguments,argumentsError:d}})}function r(u,d){return Al({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Rl(),ri].filter(h=>!!h),issueData:{code:K.invalid_return_type,returnTypeError:d}})}let c={errorMap:t.common.contextualErrorMap},l=t.data;if(this._def.returns instanceof ni){let u=this;return er(async function(...d){let h=new Br([]),m=await u._def.args.parseAsync(d,c).catch(p=>{throw h.addIssue(s(d,p)),h}),g=await Reflect.apply(l,this,m);return await u._def.returns._def.type.parseAsync(g,c).catch(p=>{throw h.addIssue(r(g,p)),h})})}else{let u=this;return er(function(...d){let h=u._def.args.safeParse(d,c);if(!h.success)throw new Br([s(d,h.error)]);let m=Reflect.apply(l,this,h.data),g=u._def.returns.safeParse(m,c);if(!g.success)throw new Br([r(m,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ro({...this._def,args:Vn.create(e).rest(xa.create())})}returns(e){return new ro({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new ro({args:e||Vn.create([]).rest(xa.create()),returns:t||xa.create(),typeName:Y.ZodFunction,...xe(s)})}},lo=class extends Ce{get schema(){return this._def.getter()}_parse(a){let{ctx:e}=this._processInputParams(a);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}};lo.create=(a,e)=>new lo({getter:a,typeName:Y.ZodLazy,...xe(e)});var uo=class extends Ce{_parse(a){if(a.data!==this._def.value){let e=this._getOrReturnCtx(a);return ee(e,{received:e.data,code:K.invalid_literal,expected:this._def.value}),pe}return{status:"valid",value:a.data}}get value(){return this._def.value}};uo.create=(a,e)=>new uo({value:a,typeName:Y.ZodLiteral,...xe(e)});function Dm(a,e){return new vo({values:a,typeName:Y.ZodEnum,...xe(e)})}var vo=class Ul extends Ce{_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),s=this._def.values;return ee(t,{expected:ze.joinValues(s),received:t.parsedType,code:K.invalid_type}),pe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),s=this._def.values;return ee(t,{received:t.data,code:K.invalid_enum_value,options:s}),pe}return er(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ul.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ul.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}};vo.create=Dm;var fo=class extends Ce{_parse(a){let e=ze.getValidEnumValues(this._def.values),t=this._getOrReturnCtx(a);if(t.parsedType!==ne.string&&t.parsedType!==ne.number){let s=ze.objectValues(e);return ee(t,{expected:ze.joinValues(s),received:t.parsedType,code:K.invalid_type}),pe}if(this._cache||(this._cache=new Set(ze.getValidEnumValues(this._def.values))),!this._cache.has(a.data)){let s=ze.objectValues(e);return ee(t,{received:t.data,code:K.invalid_enum_value,options:s}),pe}return er(a.data)}get enum(){return this._def.values}};fo.create=(a,e)=>new fo({values:a,typeName:Y.ZodNativeEnum,...xe(e)});var ni=class extends Ce{unwrap(){return this._def.type}_parse(a){let{ctx:e}=this._processInputParams(a);if(e.parsedType!==ne.promise&&e.common.async===!1)return ee(e,{code:K.invalid_type,expected:ne.promise,received:e.parsedType}),pe;let t=e.parsedType===ne.promise?e.data:Promise.resolve(e.data);return er(t.then(s=>this._def.type.parseAsync(s,{path:e.path,errorMap:e.common.contextualErrorMap})))}};ni.create=(a,e)=>new ni({type:a,typeName:Y.ZodPromise,...xe(e)});var fn=class extends Ce{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Y.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(a){let{status:e,ctx:t}=this._processInputParams(a),s=this._def.effect||null,r={addIssue:c=>{ee(t,c),c.fatal?e.abort():e.dirty()},get path(){return t.path}};if(r.addIssue=r.addIssue.bind(r),s.type==="preprocess"){let c=s.transform(t.data,r);if(t.common.async)return Promise.resolve(c).then(async l=>{if(e.value==="aborted")return pe;let u=await this._def.schema._parseAsync({data:l,path:t.path,parent:t});return u.status==="aborted"?pe:u.status==="dirty"||e.value==="dirty"?ei(u.value):u});{if(e.value==="aborted")return pe;let l=this._def.schema._parseSync({data:c,path:t.path,parent:t});return l.status==="aborted"?pe:l.status==="dirty"||e.value==="dirty"?ei(l.value):l}}if(s.type==="refinement"){let c=l=>{let u=s.refinement(l,r);if(t.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(t.common.async===!1){let l=this._def.schema._parseSync({data:t.data,path:t.path,parent:t});return l.status==="aborted"?pe:(l.status==="dirty"&&e.dirty(),c(l.value),{status:e.value,value:l.value})}else return this._def.schema._parseAsync({data:t.data,path:t.path,parent:t}).then(l=>l.status==="aborted"?pe:(l.status==="dirty"&&e.dirty(),c(l.value).then(()=>({status:e.value,value:l.value}))))}if(s.type==="transform")if(t.common.async===!1){let c=this._def.schema._parseSync({data:t.data,path:t.path,parent:t});if(!Ea(c))return pe;let l=s.transform(c.value,r);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:l}}else return this._def.schema._parseAsync({data:t.data,path:t.path,parent:t}).then(c=>Ea(c)?Promise.resolve(s.transform(c.value,r)).then(l=>({status:e.value,value:l})):pe);ze.assertNever(s)}};fn.create=(a,e,t)=>new fn({schema:a,typeName:Y.ZodEffects,effect:e,...xe(t)});fn.createWithPreprocess=(a,e,t)=>new fn({schema:e,effect:{type:"preprocess",transform:a},typeName:Y.ZodEffects,...xe(t)});var dn=class extends Ce{_parse(a){return this._getType(a)===ne.undefined?er(void 0):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}};dn.create=(a,e)=>new dn({innerType:a,typeName:Y.ZodOptional,...xe(e)});var Wn=class extends Ce{_parse(a){return this._getType(a)===ne.null?er(null):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}};Wn.create=(a,e)=>new Wn({innerType:a,typeName:Y.ZodNullable,...xe(e)});var ho=class extends Ce{_parse(a){let{ctx:e}=this._processInputParams(a),t=e.data;return e.parsedType===ne.undefined&&(t=this._def.defaultValue()),this._def.innerType._parse({data:t,path:e.path,parent:e})}removeDefault(){return this._def.innerType}};ho.create=(a,e)=>new ho({innerType:a,typeName:Y.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...xe(e)});var po=class extends Ce{_parse(a){let{ctx:e}=this._processInputParams(a),t={...e,common:{...e.common,issues:[]}},s=this._def.innerType._parse({data:t.data,path:t.path,parent:{...t}});return no(s)?s.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Br(t.common.issues)},input:t.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Br(t.common.issues)},input:t.data})}}removeCatch(){return this._def.innerType}};po.create=(a,e)=>new po({innerType:a,typeName:Y.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...xe(e)});var Hl=class extends Ce{_parse(a){if(this._getType(a)!==ne.nan){let t=this._getOrReturnCtx(a);return ee(t,{code:K.invalid_type,expected:ne.nan,received:t.parsedType}),pe}return{status:"valid",value:a.data}}};Hl.create=a=>new Hl({typeName:Y.ZodNaN,...xe(a)});var vk=Symbol("zod_brand"),Om=class extends Ce{_parse(a){let{ctx:e}=this._processInputParams(a),t=e.data;return this._def.type._parse({data:t,path:e.path,parent:e})}unwrap(){return this._def.type}},$m=class Im extends Ce{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let c=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return c.status==="aborted"?pe:c.status==="dirty"?(t.dirty(),ei(c.value)):this._def.out._parseAsync({data:c.value,path:s.path,parent:s})})();{let r=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?pe:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:s.path,parent:s})}}static create(e,t){return new Im({in:e,out:t,typeName:Y.ZodPipeline})}},mo=class extends Ce{_parse(a){let e=this._def.innerType._parse(a),t=s=>(Ea(s)&&(s.value=Object.freeze(s.value)),s);return no(e)?e.then(s=>t(s)):t(e)}unwrap(){return this._def.innerType}};mo.create=(a,e)=>new mo({innerType:a,typeName:Y.ZodReadonly,...xe(e)});var _k={object:Ir.lazycreate},Y;(function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"})(Y||(Y={}));var yk=ao.create,bk=kl.create,wk=Hl.create,xk=Cl.create,Ek=Ol.create,Sk=$l.create,Pk=Il.create,Rk=io.create,Ak=so.create,kk=Ml.create,Tk=xa.create,Ck=Dn.create,Dk=Ll.create,Ok=Sa.create,$k=Ir.create,Ik=Ir.strictCreate,Mk=oo.create,Lk=nS.create,Fk=co.create,Nk=Vn.create,jk=aS.create,zk=jl.create,qk=zl.create,Uk=iS.create,Hk=lo.create,Zk=uo.create,Bk=vo.create,Vk=fo.create,Wk=ni.create,Gk=fn.create,Kk=dn.create,Yk=Wn.create,Qk=fn.createWithPreprocess,Jk=$m.create;function tr(a){if(a.target!=="openAi")return{};let e=[...a.basePath,a.definitionPath,a.openAiAnyTypeName];return a.flags.hasReferencedOpenAiAnyType=!0,{$ref:a.$refStrategy==="relative"?Em(e,a.currentPath):e.join("/")}}function sS(a,e){let t={type:"array"};return a.type?._def&&a.type?._def?.typeName!==Y.ZodAny&&(t.items=Ze(a.type._def,{...e,currentPath:[...e.currentPath,"items"]})),a.minLength&&Ge(t,"minItems",a.minLength.value,a.minLength.message,e),a.maxLength&&Ge(t,"maxItems",a.maxLength.value,a.maxLength.message,e),a.exactLength&&(Ge(t,"minItems",a.exactLength.value,a.exactLength.message,e),Ge(t,"maxItems",a.exactLength.value,a.exactLength.message,e)),t}function oS(a,e){let t={type:"integer",format:"int64"};if(!a.checks)return t;for(let s of a.checks)switch(s.kind){case"min":e.target==="jsonSchema7"?s.inclusive?Ge(t,"minimum",s.value,s.message,e):Ge(t,"exclusiveMinimum",s.value,s.message,e):(s.inclusive||(t.exclusiveMinimum=!0),Ge(t,"minimum",s.value,s.message,e));break;case"max":e.target==="jsonSchema7"?s.inclusive?Ge(t,"maximum",s.value,s.message,e):Ge(t,"exclusiveMaximum",s.value,s.message,e):(s.inclusive||(t.exclusiveMaximum=!0),Ge(t,"maximum",s.value,s.message,e));break;case"multipleOf":Ge(t,"multipleOf",s.value,s.message,e);break}return t}function cS(){return{type:"boolean"}}function Mm(a,e){return Ze(a.type._def,e)}var lS=(a,e)=>Ze(a.innerType._def,e);function Lm(a,e,t){let s=t??e.dateStrategy;if(Array.isArray(s))return{anyOf:s.map((r,c)=>Lm(a,e,r))};switch(s){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return uS(a,e)}}var uS=(a,e)=>{let t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(let s of a.checks)switch(s.kind){case"min":Ge(t,"minimum",s.value,s.message,e);break;case"max":Ge(t,"maximum",s.value,s.message,e);break}return t};function dS(a,e){return{...Ze(a.innerType._def,e),default:a.defaultValue()}}function fS(a,e){return e.effectStrategy==="input"?Ze(a.schema._def,e):tr(e)}function hS(a){return{type:"string",enum:Array.from(a.values)}}var pS=a=>"type"in a&&a.type==="string"?!1:"allOf"in a;function mS(a,e){let t=[Ze(a.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Ze(a.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(c=>!!c),s=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,r=[];return t.forEach(c=>{if(pS(c))r.push(...c.allOf),c.unevaluatedProperties===void 0&&(s=void 0);else{let l=c;if("additionalProperties"in c&&c.additionalProperties===!1){let{additionalProperties:u,...d}=c;l=d}else s=void 0;r.push(l)}}),r.length?{allOf:r,...s}:void 0}function gS(a,e){let t=typeof a.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(a.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[a.value]}:{type:t==="bigint"?"integer":t,const:a.value}}var Sl=void 0,Dr={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Sl===void 0&&(Sl=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Sl),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Fm(a,e){let t={type:"string"};if(a.checks)for(let s of a.checks)switch(s.kind){case"min":Ge(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e);break;case"max":Ge(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Or(t,"email",s.message,e);break;case"format:idn-email":Or(t,"idn-email",s.message,e);break;case"pattern:zod":Zt(t,Dr.email,s.message,e);break}break;case"url":Or(t,"uri",s.message,e);break;case"uuid":Or(t,"uuid",s.message,e);break;case"regex":Zt(t,s.regex,s.message,e);break;case"cuid":Zt(t,Dr.cuid,s.message,e);break;case"cuid2":Zt(t,Dr.cuid2,s.message,e);break;case"startsWith":Zt(t,RegExp(`^${Pl(s.value,e)}`),s.message,e);break;case"endsWith":Zt(t,RegExp(`${Pl(s.value,e)}$`),s.message,e);break;case"datetime":Or(t,"date-time",s.message,e);break;case"date":Or(t,"date",s.message,e);break;case"time":Or(t,"time",s.message,e);break;case"duration":Or(t,"duration",s.message,e);break;case"length":Ge(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e),Ge(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"includes":{Zt(t,RegExp(Pl(s.value,e)),s.message,e);break}case"ip":{s.version!=="v6"&&Or(t,"ipv4",s.message,e),s.version!=="v4"&&Or(t,"ipv6",s.message,e);break}case"base64url":Zt(t,Dr.base64url,s.message,e);break;case"jwt":Zt(t,Dr.jwt,s.message,e);break;case"cidr":{s.version!=="v6"&&Zt(t,Dr.ipv4Cidr,s.message,e),s.version!=="v4"&&Zt(t,Dr.ipv6Cidr,s.message,e);break}case"emoji":Zt(t,Dr.emoji(),s.message,e);break;case"ulid":{Zt(t,Dr.ulid,s.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Or(t,"binary",s.message,e);break}case"contentEncoding:base64":{Ge(t,"contentEncoding","base64",s.message,e);break}case"pattern:zod":{Zt(t,Dr.base64,s.message,e);break}}break}case"nanoid":Zt(t,Dr.nanoid,s.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return t}function Pl(a,e){return e.patternStrategy==="escape"?_S(a):a}var vS=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function _S(a){let e="";for(let t=0;t<a.length;t++)vS.has(a[t])||(e+="\\"),e+=a[t];return e}function Or(a,e,t,s){a.format||a.anyOf?.some(r=>r.format)?(a.anyOf||(a.anyOf=[]),a.format&&(a.anyOf.push({format:a.format,...a.errorMessage&&s.errorMessages&&{errorMessage:{format:a.errorMessage.format}}}),delete a.format,a.errorMessage&&(delete a.errorMessage.format,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.anyOf.push({format:e,...t&&s.errorMessages&&{errorMessage:{format:t}}})):Ge(a,"format",e,t,s)}function Zt(a,e,t,s){a.pattern||a.allOf?.some(r=>r.pattern)?(a.allOf||(a.allOf=[]),a.pattern&&(a.allOf.push({pattern:a.pattern,...a.errorMessage&&s.errorMessages&&{errorMessage:{pattern:a.errorMessage.pattern}}}),delete a.pattern,a.errorMessage&&(delete a.errorMessage.pattern,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.allOf.push({pattern:gm(e,s),...t&&s.errorMessages&&{errorMessage:{pattern:t}}})):Ge(a,"pattern",gm(e,s),t,s)}function gm(a,e){if(!e.applyRegexFlags||!a.flags)return a.source;let t={i:a.flags.includes("i"),m:a.flags.includes("m"),s:a.flags.includes("s")},s=t.i?a.source.toLowerCase():a.source,r="",c=!1,l=!1,u=!1;for(let d=0;d<s.length;d++){if(c){r+=s[d],c=!1;continue}if(t.i){if(l){if(s[d].match(/[a-z]/)){u?(r+=s[d],r+=`${s[d-2]}-${s[d]}`.toUpperCase(),u=!1):s[d+1]==="-"&&s[d+2]?.match(/[a-z]/)?(r+=s[d],u=!0):r+=`${s[d]}${s[d].toUpperCase()}`;continue}}else if(s[d].match(/[a-z]/)){r+=`[${s[d]}${s[d].toUpperCase()}]`;continue}}if(t.m){if(s[d]==="^"){r+=`(^|(?<=[\r
]))`;continue}else if(s[d]==="$"){r+=`($|(?=[\r
]))`;continue}}if(t.s&&s[d]==="."){r+=l?`${s[d]}\r
`:`[${s[d]}\r
]`;continue}r+=s[d],s[d]==="\\"?c=!0:l&&s[d]==="]"?l=!1:!l&&s[d]==="["&&(l=!0)}try{new RegExp(r)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),a.source}return r}function Nm(a,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&a.keyType?._def.typeName===Y.ZodEnum)return{type:"object",required:a.keyType._def.values,properties:a.keyType._def.values.reduce((s,r)=>({...s,[r]:Ze(a.valueType._def,{...e,currentPath:[...e.currentPath,"properties",r]})??tr(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};let t={type:"object",additionalProperties:Ze(a.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return t;if(a.keyType?._def.typeName===Y.ZodString&&a.keyType._def.checks?.length){let{type:s,...r}=Fm(a.keyType._def,e);return{...t,propertyNames:r}}else{if(a.keyType?._def.typeName===Y.ZodEnum)return{...t,propertyNames:{enum:a.keyType._def.values}};if(a.keyType?._def.typeName===Y.ZodBranded&&a.keyType._def.type._def.typeName===Y.ZodString&&a.keyType._def.type._def.checks?.length){let{type:s,...r}=Mm(a.keyType._def,e);return{...t,propertyNames:r}}}return t}function yS(a,e){if(e.mapStrategy==="record")return Nm(a,e);let t=Ze(a.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||tr(e),s=Ze(a.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||tr(e);return{type:"array",maxItems:125,items:{type:"array",items:[t,s],minItems:2,maxItems:2}}}function bS(a){let e=a.values,s=Object.keys(a.values).filter(c=>typeof e[e[c]]!="number").map(c=>e[c]),r=Array.from(new Set(s.map(c=>typeof c)));return{type:r.length===1?r[0]==="string"?"string":"number":["string","number"],enum:s}}function wS(a){return a.target==="openAi"?void 0:{not:tr({...a,currentPath:[...a.currentPath,"not"]})}}function xS(a){return a.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var go={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function ES(a,e){if(e.target==="openApi3")return vm(a,e);let t=a.options instanceof Map?Array.from(a.options.values()):a.options;if(t.every(s=>s._def.typeName in go&&(!s._def.checks||!s._def.checks.length))){let s=t.reduce((r,c)=>{let l=go[c._def.typeName];return l&&!r.includes(l)?[...r,l]:r},[]);return{type:s.length>1?s:s[0]}}else if(t.every(s=>s._def.typeName==="ZodLiteral"&&!s.description)){let s=t.reduce((r,c)=>{let l=typeof c._def.value;switch(l){case"string":case"number":case"boolean":return[...r,l];case"bigint":return[...r,"integer"];case"object":if(c._def.value===null)return[...r,"null"];case"symbol":case"undefined":case"function":default:return r}},[]);if(s.length===t.length){let r=s.filter((c,l,u)=>u.indexOf(c)===l);return{type:r.length>1?r:r[0],enum:t.reduce((c,l)=>c.includes(l._def.value)?c:[...c,l._def.value],[])}}}else if(t.every(s=>s._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((s,r)=>[...s,...r._def.values.filter(c=>!s.includes(c))],[])};return vm(a,e)}var vm=(a,e)=>{let t=(a.options instanceof Map?Array.from(a.options.values()):a.options).map((s,r)=>Ze(s._def,{...e,currentPath:[...e.currentPath,"anyOf",`${r}`]})).filter(s=>!!s&&(!e.strictUnions||typeof s=="object"&&Object.keys(s).length>0));return t.length?{anyOf:t}:void 0};function SS(a,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(a.innerType._def.typeName)&&(!a.innerType._def.checks||!a.innerType._def.checks.length))return e.target==="openApi3"?{type:go[a.innerType._def.typeName],nullable:!0}:{type:[go[a.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let s=Ze(a.innerType._def,{...e,currentPath:[...e.currentPath]});return s&&"$ref"in s?{allOf:[s],nullable:!0}:s&&{...s,nullable:!0}}let t=Ze(a.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function PS(a,e){let t={type:"number"};if(!a.checks)return t;for(let s of a.checks)switch(s.kind){case"int":t.type="integer",xm(t,"type",s.message,e);break;case"min":e.target==="jsonSchema7"?s.inclusive?Ge(t,"minimum",s.value,s.message,e):Ge(t,"exclusiveMinimum",s.value,s.message,e):(s.inclusive||(t.exclusiveMinimum=!0),Ge(t,"minimum",s.value,s.message,e));break;case"max":e.target==="jsonSchema7"?s.inclusive?Ge(t,"maximum",s.value,s.message,e):Ge(t,"exclusiveMaximum",s.value,s.message,e):(s.inclusive||(t.exclusiveMaximum=!0),Ge(t,"maximum",s.value,s.message,e));break;case"multipleOf":Ge(t,"multipleOf",s.value,s.message,e);break}return t}function RS(a,e){let t=e.target==="openAi",s={type:"object",properties:{}},r=[],c=a.shape();for(let u in c){let d=c[u];if(d===void 0||d._def===void 0)continue;let h=kS(d);h&&t&&(d._def.typeName==="ZodOptional"&&(d=d._def.innerType),d.isNullable()||(d=d.nullable()),h=!1);let m=Ze(d._def,{...e,currentPath:[...e.currentPath,"properties",u],propertyPath:[...e.currentPath,"properties",u]});m!==void 0&&(s.properties[u]=m,h||r.push(u))}r.length&&(s.required=r);let l=AS(a,e);return l!==void 0&&(s.additionalProperties=l),s}function AS(a,e){if(a.catchall._def.typeName!=="ZodNever")return Ze(a.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(a.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function kS(a){try{return a.isOptional()}catch{return!0}}var TS=(a,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return Ze(a.innerType._def,e);let t=Ze(a.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:tr(e)},t]}:tr(e)},CS=(a,e)=>{if(e.pipeStrategy==="input")return Ze(a.in._def,e);if(e.pipeStrategy==="output")return Ze(a.out._def,e);let t=Ze(a.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),s=Ze(a.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,s].filter(r=>r!==void 0)}};function DS(a,e){return Ze(a.type._def,e)}function OS(a,e){let s={type:"array",uniqueItems:!0,items:Ze(a.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return a.minSize&&Ge(s,"minItems",a.minSize.value,a.minSize.message,e),a.maxSize&&Ge(s,"maxItems",a.maxSize.value,a.maxSize.message,e),s}function $S(a,e){return a.rest?{type:"array",minItems:a.items.length,items:a.items.map((t,s)=>Ze(t._def,{...e,currentPath:[...e.currentPath,"items",`${s}`]})).reduce((t,s)=>s===void 0?t:[...t,s],[]),additionalItems:Ze(a.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:a.items.length,maxItems:a.items.length,items:a.items.map((t,s)=>Ze(t._def,{...e,currentPath:[...e.currentPath,"items",`${s}`]})).reduce((t,s)=>s===void 0?t:[...t,s],[])}}function IS(a){return{not:tr(a)}}function MS(a){return tr(a)}var LS=(a,e)=>Ze(a.innerType._def,e),FS=(a,e,t)=>{switch(e){case Y.ZodString:return Fm(a,t);case Y.ZodNumber:return PS(a,t);case Y.ZodObject:return RS(a,t);case Y.ZodBigInt:return oS(a,t);case Y.ZodBoolean:return cS();case Y.ZodDate:return Lm(a,t);case Y.ZodUndefined:return IS(t);case Y.ZodNull:return xS(t);case Y.ZodArray:return sS(a,t);case Y.ZodUnion:case Y.ZodDiscriminatedUnion:return ES(a,t);case Y.ZodIntersection:return mS(a,t);case Y.ZodTuple:return $S(a,t);case Y.ZodRecord:return Nm(a,t);case Y.ZodLiteral:return gS(a,t);case Y.ZodEnum:return hS(a);case Y.ZodNativeEnum:return bS(a);case Y.ZodNullable:return SS(a,t);case Y.ZodOptional:return TS(a,t);case Y.ZodMap:return yS(a,t);case Y.ZodSet:return OS(a,t);case Y.ZodLazy:return()=>a.getter()._def;case Y.ZodPromise:return DS(a,t);case Y.ZodNaN:case Y.ZodNever:return wS(t);case Y.ZodEffects:return fS(a,t);case Y.ZodAny:return tr(t);case Y.ZodUnknown:return MS(t);case Y.ZodDefault:return dS(a,t);case Y.ZodBranded:return Mm(a,t);case Y.ZodReadonly:return LS(a,t);case Y.ZodCatch:return lS(a,t);case Y.ZodPipeline:return CS(a,t);case Y.ZodFunction:case Y.ZodVoid:case Y.ZodSymbol:return;default:return(s=>{})(e)}};function Ze(a,e,t=!1){let s=e.seen.get(a);if(e.override){let u=e.override?.(a,e,s,t);if(u!==CE)return u}if(s&&!t){let u=NS(s,e);if(u!==void 0)return u}let r={def:a,path:e.currentPath,jsonSchema:void 0};e.seen.set(a,r);let c=FS(a,a.typeName,e),l=typeof c=="function"?Ze(c(),e):c;if(l&&jS(a,e,l),e.postProcess){let u=e.postProcess(l,a,e);return r.jsonSchema=l,u}return r.jsonSchema=l,l}var NS=(a,e)=>{switch(e.$refStrategy){case"root":return{$ref:a.path.join("/")};case"relative":return{$ref:Em(e.currentPath,a.path)};case"none":case"seen":return a.path.length<e.currentPath.length&&a.path.every((t,s)=>e.currentPath[s]===t)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),tr(e)):e.$refStrategy==="seen"?tr(e):void 0}},jS=(a,e,t)=>(a.description&&(t.description=a.description,e.markdownDescription&&(t.markdownDescription=a.description)),t),zS=(a,e)=>{let t=OE(e),s=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((d,[h,m])=>({...d,[h]:Ze(m._def,{...t,currentPath:[...t.basePath,t.definitionPath,h]},!0)??tr(t)}),{}):void 0,r=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,c=Ze(a._def,r===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,r]},!1)??tr(t),l=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;l!==void 0&&(c.title=l),t.flags.hasReferencedOpenAiAnyType&&(s||(s={}),s[t.openAiAnyTypeName]||(s[t.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:t.$refStrategy==="relative"?"1":[...t.basePath,t.definitionPath,t.openAiAnyTypeName].join("/")}}));let u=r===void 0?s?{...c,[t.definitionPath]:s}:c:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,r].join("/"),[t.definitionPath]:{...s,[r]:c}};return t.target==="jsonSchema7"?u.$schema="http://json-schema.org/draft-07/schema#":(t.target==="jsonSchema2019-09"||t.target==="openAi")&&(u.$schema="https://json-schema.org/draft/2019-09/schema#"),t.target==="openAi"&&("anyOf"in u||"oneOf"in u||"allOf"in u||"type"in u&&Array.isArray(u.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),u},eo=wl;function qS(a,e){let t={};for(let s of a){let r=s.match(/^([^=]+)=(.*)$/);if(!r)continue;let[,c,l]=r,u=c.split("."),d=l;try{d=JSON.parse(l)}catch{}TE.default.set(t,u,d)}if(e){let s=e.safeParse(t);if(!s.success){let r=zS(e),c=s.error.issues.map(l=>{let u=l.path.join("."),d=l.message,h=t;for(let m of l.path)if(h&&typeof h=="object"&&m in h)h=h[m];else{h=void 0;break}return`  ${u}: ${d} (received: ${JSON.stringify(h)})`});return console.error(`
${Bn.default.red("[smithery]")} Configuration validation failed:`),console.error(c.join(`
`)),console.error(`
Expected schema:`),console.error(JSON.stringify(r,null,2)),console.error(`
Example usage:`),console.error("  node server.js server.host=localhost server.port=8080 debug=true"),{config:t,errors:c}}return{config:s.data,errors:void 0}}return{config:t,errors:void 0}}async function US(){try{console.error(`${Bn.default.blue("[smithery]")} Starting MCP server with stdio transport`);let a=process.argv.slice(2),{config:e,errors:t}=qS(a,eo.configSchema);t&&process.exit(1);let s;if(eo.default&&typeof eo.default=="function"){let c=`stdio-${Date.now()}-${Math.random().toString(36).substring(2)}`;console.error(`${Bn.default.blue("[smithery]")} Creating server.`),s=eo.default({sessionId:c,config:e})}else throw new Error(`No valid server export found. Please export:
- export default function({ sessionId, config }) { ... }`);let r=new Xs;await s.connect(r),console.error(`${Bn.default.green("[smithery]")} MCP server connected to stdio transport`),Object.keys(e).length>0&&console.error(`${Bn.default.blue("[smithery]")} Configuration loaded:`,e)}catch(a){console.error(`${Bn.default.red("[smithery]")} Failed to start MCP server:`,a),process.exit(1)}}US().catch(a=>{console.error(`${Bn.default.red("[smithery]")} Unhandled error:`,a),process.exit(1)});
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
/*! Bundled license information:

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)
*/

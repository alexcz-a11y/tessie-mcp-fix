#!/usr/bin/env node
var T1=Object.create;var Il=Object.defineProperty;var k1=Object.getOwnPropertyDescriptor;var O1=Object.getOwnPropertyNames;var C1=Object.getPrototypeOf,D1=Object.prototype.hasOwnProperty;var me=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),I1=(a,e)=>{for(var t in e)Il(a,t,{get:e[t],enumerable:!0})},$1=(a,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of O1(e))!D1.call(a,r)&&r!==t&&Il(a,r,{get:()=>e[r],enumerable:!(s=k1(e,r))||s.enumerable});return a};var $l=(a,e,t)=>(t=a!=null?T1(C1(a)):{},$1(e||!a||!a.__esModule?Il(t,"default",{value:a,enumerable:!0}):t,a));var Pd=me((bs,Sd)=>{(function(a,e){typeof bs=="object"&&typeof Sd<"u"?e(bs):typeof define=="function"&&define.amd?define(["exports"],e):e(a.URI=a.URI||{})})(bs,(function(a){"use strict";function e(){for(var T=arguments.length,P=Array(T),O=0;O<T;O++)P[O]=arguments[O];if(P.length>1){P[0]=P[0].slice(0,-1);for(var L=P.length-1,q=1;q<L;++q)P[q]=P[q].slice(1,-1);return P[L]=P[L].slice(1),P.join("")}else return P[0]}function t(T){return"(?:"+T+")"}function s(T){return T===void 0?"undefined":T===null?"null":Object.prototype.toString.call(T).split(" ").pop().split("]").shift().toLowerCase()}function r(T){return T.toUpperCase()}function o(T){return T!=null?T instanceof Array?T:typeof T.length!="number"||T.split||T.setInterval||T.call?[T]:Array.prototype.slice.call(T):[]}function c(T,P){var O=T;if(P)for(var L in P)O[L]=P[L];return O}function u(T){var P="[A-Za-z]",O="[\\x0D]",L="[0-9]",q="[\\x22]",re=e(L,"[A-Fa-f]"),be="[\\x0A]",Ie="[\\x20]",ze=t(t("%[EFef]"+re+"%"+re+re+"%"+re+re)+"|"+t("%[89A-Fa-f]"+re+"%"+re+re)+"|"+t("%"+re+re)),ct="[\\:\\/\\?\\#\\[\\]\\@]",Ce="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",nt=e(ct,Ce),dt=T?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Xe=T?"[\\uE000-\\uF8FF]":"[]",Le=e(P,L,"[\\-\\.\\_\\~]",dt),at=t(P+e(P,L,"[\\+\\-\\.]")+"*"),je=t(t(ze+"|"+e(Le,Ce,"[\\:]"))+"*"),Kr=t(t("25[0-5]")+"|"+t("2[0-4]"+L)+"|"+t("1"+L+L)+"|"+t("[1-9]"+L)+"|"+L),Pt=t(t("25[0-5]")+"|"+t("2[0-4]"+L)+"|"+t("1"+L+L)+"|"+t("0?[1-9]"+L)+"|0?0?"+L),Kt=t(Pt+"\\."+Pt+"\\."+Pt+"\\."+Pt),Ve=t(re+"{1,4}"),jt=t(t(Ve+"\\:"+Ve)+"|"+Kt),qt=t(t(Ve+"\\:")+"{6}"+jt),nr=t("\\:\\:"+t(Ve+"\\:")+"{5}"+jt),jr=t(t(Ve)+"?\\:\\:"+t(Ve+"\\:")+"{4}"+jt),Pr=t(t(t(Ve+"\\:")+"{0,1}"+Ve)+"?\\:\\:"+t(Ve+"\\:")+"{3}"+jt),In=t(t(t(Ve+"\\:")+"{0,2}"+Ve)+"?\\:\\:"+t(Ve+"\\:")+"{2}"+jt),ea=t(t(t(Ve+"\\:")+"{0,3}"+Ve)+"?\\:\\:"+Ve+"\\:"+jt),ta=t(t(t(Ve+"\\:")+"{0,4}"+Ve)+"?\\:\\:"+jt),Yr=t(t(t(Ve+"\\:")+"{0,5}"+Ve)+"?\\:\\:"+Ve),Qr=t(t(t(Ve+"\\:")+"{0,6}"+Ve)+"?\\:\\:"),hr=t([qt,nr,jr,Pr,In,ea,ta,Yr,Qr].join("|")),qr=t(t(Le+"|"+ze)+"+"),Ca=t(hr+"\\%25"+qr),zr=t(hr+t("\\%25|\\%(?!"+re+"{2})")+qr),ra=t("[vV]"+re+"+\\."+e(Le,Ce,"[\\:]")+"+"),fi=t("\\["+t(zr+"|"+hr+"|"+ra)+"\\]"),di=t(t(ze+"|"+e(Le,Ce))+"*"),mn=t(fi+"|"+Kt+"(?!"+di+")|"+di),gn=t(L+"*"),na=t(t(je+"@")+"?"+mn+t("\\:"+gn)+"?"),$n=t(ze+"|"+e(Le,Ce,"[\\:\\@]")),hi=t($n+"*"),aa=t($n+"+"),Da=t(t(ze+"|"+e(Le,Ce,"[\\@]"))+"+"),It=t(t("\\/"+hi)+"*"),Jr=t("\\/"+t(aa+It)+"?"),ia=t(Da+It),sa=t(aa+It),Xr="(?!"+$n+")",Po=t(It+"|"+Jr+"|"+ia+"|"+sa+"|"+Xr),en=t(t($n+"|"+e("[\\/\\?]",Xe))+"*"),vn=t(t($n+"|[\\/\\?]")+"*"),pi=t(t("\\/\\/"+na+It)+"|"+Jr+"|"+sa+"|"+Xr),Ro=t(at+"\\:"+pi+t("\\?"+en)+"?"+t("\\#"+vn)+"?"),Ao=t(t("\\/\\/"+na+It)+"|"+Jr+"|"+ia+"|"+Xr),mi=t(Ao+t("\\?"+en)+"?"+t("\\#"+vn)+"?"),Bc=t(Ro+"|"+mi),Vc=t(at+"\\:"+pi+t("\\?"+en)+"?"),Wc="^("+at+")\\:"+t(t("\\/\\/("+t("("+je+")@")+"?("+mn+")"+t("\\:("+gn+")")+"?)")+"?("+It+"|"+Jr+"|"+sa+"|"+Xr+")")+t("\\?("+en+")")+"?"+t("\\#("+vn+")")+"?$",Gc="^(){0}"+t(t("\\/\\/("+t("("+je+")@")+"?("+mn+")"+t("\\:("+gn+")")+"?)")+"?("+It+"|"+Jr+"|"+ia+"|"+Xr+")")+t("\\?("+en+")")+"?"+t("\\#("+vn+")")+"?$",gi="^("+at+")\\:"+t(t("\\/\\/("+t("("+je+")@")+"?("+mn+")"+t("\\:("+gn+")")+"?)")+"?("+It+"|"+Jr+"|"+sa+"|"+Xr+")")+t("\\?("+en+")")+"?$",Kc="^"+t("\\#("+vn+")")+"?$",Yc="^"+t("("+je+")@")+"?("+mn+")"+t("\\:("+gn+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",P,L,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",Le,Ce),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",Le,Ce),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",Le,Ce),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",Le,Ce),"g"),NOT_QUERY:new RegExp(e("[^\\%]",Le,Ce,"[\\:\\@\\/\\?]",Xe),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",Le,Ce,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",Le,Ce),"g"),UNRESERVED:new RegExp(Le,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",Le,nt),"g"),PCT_ENCODED:new RegExp(ze,"g"),IPV4ADDRESS:new RegExp("^("+Kt+")$"),IPV6ADDRESS:new RegExp("^\\[?("+hr+")"+t(t("\\%25|\\%(?!"+re+"{2})")+"("+qr+")")+"?\\]?$")}}var f=u(!1),h=u(!0),m=(function(){function T(P,O){var L=[],q=!0,re=!1,be=void 0;try{for(var Ie=P[Symbol.iterator](),ze;!(q=(ze=Ie.next()).done)&&(L.push(ze.value),!(O&&L.length===O));q=!0);}catch(ct){re=!0,be=ct}finally{try{!q&&Ie.return&&Ie.return()}finally{if(re)throw be}}return L}return function(P,O){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return T(P,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),g=function(T){if(Array.isArray(T)){for(var P=0,O=Array(T.length);P<T.length;P++)O[P]=T[P];return O}else return Array.from(T)},v=2147483647,p=36,y=1,w=26,E=38,R=700,$=72,N=128,I="-",M=/^xn--/,j=/[^\0-\x7E]/,z=/[\x2E\u3002\uFF0E\uFF61]/g,W={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},B=p-y,J=Math.floor,te=String.fromCharCode;function ie(T){throw new RangeError(W[T])}function G(T,P){for(var O=[],L=T.length;L--;)O[L]=P(T[L]);return O}function Q(T,P){var O=T.split("@"),L="";O.length>1&&(L=O[0]+"@",T=O[1]),T=T.replace(z,".");var q=T.split("."),re=G(q,P).join(".");return L+re}function se(T){for(var P=[],O=0,L=T.length;O<L;){var q=T.charCodeAt(O++);if(q>=55296&&q<=56319&&O<L){var re=T.charCodeAt(O++);(re&64512)==56320?P.push(((q&1023)<<10)+(re&1023)+65536):(P.push(q),O--)}else P.push(q)}return P}var Ue=function(P){return String.fromCodePoint.apply(String,g(P))},ge=function(P){return P-48<10?P-22:P-65<26?P-65:P-97<26?P-97:p},_e=function(P,O){return P+22+75*(P<26)-((O!=0)<<5)},Se=function(P,O,L){var q=0;for(P=L?J(P/R):P>>1,P+=J(P/O);P>B*w>>1;q+=p)P=J(P/B);return J(q+(B+1)*P/(P+E))},ce=function(P){var O=[],L=P.length,q=0,re=N,be=$,Ie=P.lastIndexOf(I);Ie<0&&(Ie=0);for(var ze=0;ze<Ie;++ze)P.charCodeAt(ze)>=128&&ie("not-basic"),O.push(P.charCodeAt(ze));for(var ct=Ie>0?Ie+1:0;ct<L;){for(var Ce=q,nt=1,dt=p;;dt+=p){ct>=L&&ie("invalid-input");var Xe=ge(P.charCodeAt(ct++));(Xe>=p||Xe>J((v-q)/nt))&&ie("overflow"),q+=Xe*nt;var Le=dt<=be?y:dt>=be+w?w:dt-be;if(Xe<Le)break;var at=p-Le;nt>J(v/at)&&ie("overflow"),nt*=at}var je=O.length+1;be=Se(q-Ce,je,Ce==0),J(q/je)>v-re&&ie("overflow"),re+=J(q/je),q%=je,O.splice(q++,0,re)}return String.fromCodePoint.apply(String,O)},Fe=function(P){var O=[];P=se(P);var L=P.length,q=N,re=0,be=$,Ie=!0,ze=!1,ct=void 0;try{for(var Ce=P[Symbol.iterator](),nt;!(Ie=(nt=Ce.next()).done);Ie=!0){var dt=nt.value;dt<128&&O.push(te(dt))}}catch(zr){ze=!0,ct=zr}finally{try{!Ie&&Ce.return&&Ce.return()}finally{if(ze)throw ct}}var Xe=O.length,Le=Xe;for(Xe&&O.push(I);Le<L;){var at=v,je=!0,Kr=!1,Pt=void 0;try{for(var Kt=P[Symbol.iterator](),Ve;!(je=(Ve=Kt.next()).done);je=!0){var jt=Ve.value;jt>=q&&jt<at&&(at=jt)}}catch(zr){Kr=!0,Pt=zr}finally{try{!je&&Kt.return&&Kt.return()}finally{if(Kr)throw Pt}}var qt=Le+1;at-q>J((v-re)/qt)&&ie("overflow"),re+=(at-q)*qt,q=at;var nr=!0,jr=!1,Pr=void 0;try{for(var In=P[Symbol.iterator](),ea;!(nr=(ea=In.next()).done);nr=!0){var ta=ea.value;if(ta<q&&++re>v&&ie("overflow"),ta==q){for(var Yr=re,Qr=p;;Qr+=p){var hr=Qr<=be?y:Qr>=be+w?w:Qr-be;if(Yr<hr)break;var qr=Yr-hr,Ca=p-hr;O.push(te(_e(hr+qr%Ca,0))),Yr=J(qr/Ca)}O.push(te(_e(Yr,0))),be=Se(re,qt,Le==Xe),re=0,++Le}}}catch(zr){jr=!0,Pr=zr}finally{try{!nr&&In.return&&In.return()}finally{if(jr)throw Pr}}++re,++q}return O.join("")},xt=function(P){return Q(P,function(O){return M.test(O)?ce(O.slice(4).toLowerCase()):O})},Tt=function(P){return Q(P,function(O){return j.test(O)?"xn--"+Fe(O):O})},Ne={version:"2.1.0",ucs2:{decode:se,encode:Ue},decode:ce,encode:Fe,toASCII:Tt,toUnicode:xt},Ke={};function lt(T){var P=T.charCodeAt(0),O=void 0;return P<16?O="%0"+P.toString(16).toUpperCase():P<128?O="%"+P.toString(16).toUpperCase():P<2048?O="%"+(P>>6|192).toString(16).toUpperCase()+"%"+(P&63|128).toString(16).toUpperCase():O="%"+(P>>12|224).toString(16).toUpperCase()+"%"+(P>>6&63|128).toString(16).toUpperCase()+"%"+(P&63|128).toString(16).toUpperCase(),O}function kt(T){for(var P="",O=0,L=T.length;O<L;){var q=parseInt(T.substr(O+1,2),16);if(q<128)P+=String.fromCharCode(q),O+=3;else if(q>=194&&q<224){if(L-O>=6){var re=parseInt(T.substr(O+4,2),16);P+=String.fromCharCode((q&31)<<6|re&63)}else P+=T.substr(O,6);O+=6}else if(q>=224){if(L-O>=9){var be=parseInt(T.substr(O+4,2),16),Ie=parseInt(T.substr(O+7,2),16);P+=String.fromCharCode((q&15)<<12|(be&63)<<6|Ie&63)}else P+=T.substr(O,9);O+=9}else P+=T.substr(O,3),O+=3}return P}function Vt(T,P){function O(L){var q=kt(L);return q.match(P.UNRESERVED)?q:L}return T.scheme&&(T.scheme=String(T.scheme).replace(P.PCT_ENCODED,O).toLowerCase().replace(P.NOT_SCHEME,"")),T.userinfo!==void 0&&(T.userinfo=String(T.userinfo).replace(P.PCT_ENCODED,O).replace(P.NOT_USERINFO,lt).replace(P.PCT_ENCODED,r)),T.host!==void 0&&(T.host=String(T.host).replace(P.PCT_ENCODED,O).toLowerCase().replace(P.NOT_HOST,lt).replace(P.PCT_ENCODED,r)),T.path!==void 0&&(T.path=String(T.path).replace(P.PCT_ENCODED,O).replace(T.scheme?P.NOT_PATH:P.NOT_PATH_NOSCHEME,lt).replace(P.PCT_ENCODED,r)),T.query!==void 0&&(T.query=String(T.query).replace(P.PCT_ENCODED,O).replace(P.NOT_QUERY,lt).replace(P.PCT_ENCODED,r)),T.fragment!==void 0&&(T.fragment=String(T.fragment).replace(P.PCT_ENCODED,O).replace(P.NOT_FRAGMENT,lt).replace(P.PCT_ENCODED,r)),T}function Nt(T){return T.replace(/^0*(.*)/,"$1")||"0"}function ft(T,P){var O=T.match(P.IPV4ADDRESS)||[],L=m(O,2),q=L[1];return q?q.split(".").map(Nt).join("."):T}function Ye(T,P){var O=T.match(P.IPV6ADDRESS)||[],L=m(O,3),q=L[1],re=L[2];if(q){for(var be=q.toLowerCase().split("::").reverse(),Ie=m(be,2),ze=Ie[0],ct=Ie[1],Ce=ct?ct.split(":").map(Nt):[],nt=ze.split(":").map(Nt),dt=P.IPV4ADDRESS.test(nt[nt.length-1]),Xe=dt?7:8,Le=nt.length-Xe,at=Array(Xe),je=0;je<Xe;++je)at[je]=Ce[je]||nt[Le+je]||"";dt&&(at[Xe-1]=ft(at[Xe-1],P));var Kr=at.reduce(function(qt,nr,jr){if(!nr||nr==="0"){var Pr=qt[qt.length-1];Pr&&Pr.index+Pr.length===jr?Pr.length++:qt.push({index:jr,length:1})}return qt},[]),Pt=Kr.sort(function(qt,nr){return nr.length-qt.length})[0],Kt=void 0;if(Pt&&Pt.length>1){var Ve=at.slice(0,Pt.index),jt=at.slice(Pt.index+Pt.length);Kt=Ve.join(":")+"::"+jt.join(":")}else Kt=at.join(":");return re&&(Kt+="%"+re),Kt}else return T}var fr=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,yt="".match(/(){0}/)[1]===void 0;function ye(T){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O={},L=P.iri!==!1?h:f;P.reference==="suffix"&&(T=(P.scheme?P.scheme+":":"")+"//"+T);var q=T.match(fr);if(q){yt?(O.scheme=q[1],O.userinfo=q[3],O.host=q[4],O.port=parseInt(q[5],10),O.path=q[6]||"",O.query=q[7],O.fragment=q[8],isNaN(O.port)&&(O.port=q[5])):(O.scheme=q[1]||void 0,O.userinfo=T.indexOf("@")!==-1?q[3]:void 0,O.host=T.indexOf("//")!==-1?q[4]:void 0,O.port=parseInt(q[5],10),O.path=q[6]||"",O.query=T.indexOf("?")!==-1?q[7]:void 0,O.fragment=T.indexOf("#")!==-1?q[8]:void 0,isNaN(O.port)&&(O.port=T.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?q[4]:void 0)),O.host&&(O.host=Ye(ft(O.host,L),L)),O.scheme===void 0&&O.userinfo===void 0&&O.host===void 0&&O.port===void 0&&!O.path&&O.query===void 0?O.reference="same-document":O.scheme===void 0?O.reference="relative":O.fragment===void 0?O.reference="absolute":O.reference="uri",P.reference&&P.reference!=="suffix"&&P.reference!==O.reference&&(O.error=O.error||"URI is not a "+P.reference+" reference.");var re=Ke[(P.scheme||O.scheme||"").toLowerCase()];if(!P.unicodeSupport&&(!re||!re.unicodeSupport)){if(O.host&&(P.domainHost||re&&re.domainHost))try{O.host=Ne.toASCII(O.host.replace(L.PCT_ENCODED,kt).toLowerCase())}catch(be){O.error=O.error||"Host's domain name can not be converted to ASCII via punycode: "+be}Vt(O,f)}else Vt(O,L);re&&re.parse&&re.parse(O,P)}else O.error=O.error||"URI can not be parsed.";return O}function Wt(T,P){var O=P.iri!==!1?h:f,L=[];return T.userinfo!==void 0&&(L.push(T.userinfo),L.push("@")),T.host!==void 0&&L.push(Ye(ft(String(T.host),O),O).replace(O.IPV6ADDRESS,function(q,re,be){return"["+re+(be?"%25"+be:"")+"]"})),(typeof T.port=="number"||typeof T.port=="string")&&(L.push(":"),L.push(String(T.port))),L.length?L.join(""):void 0}var Sr=/^\.\.?\//,Ot=/^\/\.(\/|$)/,Lr=/^\/\.\.(\/|$)/,bt=/^\/?(?:.|\n)*?(?=\/|$)/;function St(T){for(var P=[];T.length;)if(T.match(Sr))T=T.replace(Sr,"");else if(T.match(Ot))T=T.replace(Ot,"/");else if(T.match(Lr))T=T.replace(Lr,"/"),P.pop();else if(T==="."||T==="..")T="";else{var O=T.match(bt);if(O){var L=O[0];T=T.slice(L.length),P.push(L)}else throw new Error("Unexpected dot segment condition")}return P.join("")}function Je(T){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=P.iri?h:f,L=[],q=Ke[(P.scheme||T.scheme||"").toLowerCase()];if(q&&q.serialize&&q.serialize(T,P),T.host&&!O.IPV6ADDRESS.test(T.host)){if(P.domainHost||q&&q.domainHost)try{T.host=P.iri?Ne.toUnicode(T.host):Ne.toASCII(T.host.replace(O.PCT_ENCODED,kt).toLowerCase())}catch(Ie){T.error=T.error||"Host's domain name can not be converted to "+(P.iri?"Unicode":"ASCII")+" via punycode: "+Ie}}Vt(T,O),P.reference!=="suffix"&&T.scheme&&(L.push(T.scheme),L.push(":"));var re=Wt(T,P);if(re!==void 0&&(P.reference!=="suffix"&&L.push("//"),L.push(re),T.path&&T.path.charAt(0)!=="/"&&L.push("/")),T.path!==void 0){var be=T.path;!P.absolutePath&&(!q||!q.absolutePath)&&(be=St(be)),re===void 0&&(be=be.replace(/^\/\//,"/%2F")),L.push(be)}return T.query!==void 0&&(L.push("?"),L.push(T.query)),T.fragment!==void 0&&(L.push("#"),L.push(T.fragment)),L.join("")}function gt(T,P){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},L=arguments[3],q={};return L||(T=ye(Je(T,O),O),P=ye(Je(P,O),O)),O=O||{},!O.tolerant&&P.scheme?(q.scheme=P.scheme,q.userinfo=P.userinfo,q.host=P.host,q.port=P.port,q.path=St(P.path||""),q.query=P.query):(P.userinfo!==void 0||P.host!==void 0||P.port!==void 0?(q.userinfo=P.userinfo,q.host=P.host,q.port=P.port,q.path=St(P.path||""),q.query=P.query):(P.path?(P.path.charAt(0)==="/"?q.path=St(P.path):((T.userinfo!==void 0||T.host!==void 0||T.port!==void 0)&&!T.path?q.path="/"+P.path:T.path?q.path=T.path.slice(0,T.path.lastIndexOf("/")+1)+P.path:q.path=P.path,q.path=St(q.path)),q.query=P.query):(q.path=T.path,P.query!==void 0?q.query=P.query:q.query=T.query),q.userinfo=T.userinfo,q.host=T.host,q.port=T.port),q.scheme=T.scheme),q.fragment=P.fragment,q}function Lt(T,P,O){var L=c({scheme:"null"},O);return Je(gt(ye(T,L),ye(P,L),L,!0),L)}function Ft(T,P){return typeof T=="string"?T=Je(ye(T,P),P):s(T)==="object"&&(T=ye(Je(T,P),P)),T}function Fr(T,P,O){return typeof T=="string"?T=Je(ye(T,O),O):s(T)==="object"&&(T=Je(T,O)),typeof P=="string"?P=Je(ye(P,O),O):s(P)==="object"&&(P=Je(P,O)),T===P}function Ra(T,P){return T&&T.toString().replace(!P||!P.iri?f.ESCAPE:h.ESCAPE,lt)}function Ct(T,P){return T&&T.toString().replace(!P||!P.iri?f.PCT_ENCODED:h.PCT_ENCODED,kt)}var dr={scheme:"http",domainHost:!0,parse:function(P,O){return P.host||(P.error=P.error||"HTTP URIs must have a host."),P},serialize:function(P,O){var L=String(P.scheme).toLowerCase()==="https";return(P.port===(L?443:80)||P.port==="")&&(P.port=void 0),P.path||(P.path="/"),P}},Kn={scheme:"https",domainHost:dr.domainHost,parse:dr.parse,serialize:dr.serialize};function Yn(T){return typeof T.secure=="boolean"?T.secure:String(T.scheme).toLowerCase()==="wss"}var Gr={scheme:"ws",domainHost:!0,parse:function(P,O){var L=P;return L.secure=Yn(L),L.resourceName=(L.path||"/")+(L.query?"?"+L.query:""),L.path=void 0,L.query=void 0,L},serialize:function(P,O){if((P.port===(Yn(P)?443:80)||P.port==="")&&(P.port=void 0),typeof P.secure=="boolean"&&(P.scheme=P.secure?"wss":"ws",P.secure=void 0),P.resourceName){var L=P.resourceName.split("?"),q=m(L,2),re=q[0],be=q[1];P.path=re&&re!=="/"?re:void 0,P.query=be,P.resourceName=void 0}return P.fragment=void 0,P}},Qn={scheme:"wss",domainHost:Gr.domainHost,parse:Gr.parse,serialize:Gr.serialize},Aa={},Ta=!0,Jn="[A-Za-z0-9\\-\\.\\_\\~"+(Ta?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",Gt="[0-9A-Fa-f]",ka=t(t("%[EFef]"+Gt+"%"+Gt+Gt+"%"+Gt+Gt)+"|"+t("%[89A-Fa-f]"+Gt+"%"+Gt+Gt)+"|"+t("%"+Gt+Gt)),yo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",bo="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",wo=e(bo,'[\\"\\\\]'),ii="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",si=new RegExp(Jn,"g"),pn=new RegExp(ka,"g"),Eo=new RegExp(e("[^]",yo,"[\\.]",'[\\"]',wo),"g"),oi=new RegExp(e("[^]",Jn,ii),"g"),xo=oi;function Xn(T){var P=kt(T);return P.match(si)?P:T}var li={scheme:"mailto",parse:function(P,O){var L=P,q=L.to=L.path?L.path.split(","):[];if(L.path=void 0,L.query){for(var re=!1,be={},Ie=L.query.split("&"),ze=0,ct=Ie.length;ze<ct;++ze){var Ce=Ie[ze].split("=");switch(Ce[0]){case"to":for(var nt=Ce[1].split(","),dt=0,Xe=nt.length;dt<Xe;++dt)q.push(nt[dt]);break;case"subject":L.subject=Ct(Ce[1],O);break;case"body":L.body=Ct(Ce[1],O);break;default:re=!0,be[Ct(Ce[0],O)]=Ct(Ce[1],O);break}}re&&(L.headers=be)}L.query=void 0;for(var Le=0,at=q.length;Le<at;++Le){var je=q[Le].split("@");if(je[0]=Ct(je[0]),O.unicodeSupport)je[1]=Ct(je[1],O).toLowerCase();else try{je[1]=Ne.toASCII(Ct(je[1],O).toLowerCase())}catch(Kr){L.error=L.error||"Email address's domain name can not be converted to ASCII via punycode: "+Kr}q[Le]=je.join("@")}return L},serialize:function(P,O){var L=P,q=o(P.to);if(q){for(var re=0,be=q.length;re<be;++re){var Ie=String(q[re]),ze=Ie.lastIndexOf("@"),ct=Ie.slice(0,ze).replace(pn,Xn).replace(pn,r).replace(Eo,lt),Ce=Ie.slice(ze+1);try{Ce=O.iri?Ne.toUnicode(Ce):Ne.toASCII(Ct(Ce,O).toLowerCase())}catch(Le){L.error=L.error||"Email address's domain name can not be converted to "+(O.iri?"Unicode":"ASCII")+" via punycode: "+Le}q[re]=ct+"@"+Ce}L.path=q.join(",")}var nt=P.headers=P.headers||{};P.subject&&(nt.subject=P.subject),P.body&&(nt.body=P.body);var dt=[];for(var Xe in nt)nt[Xe]!==Aa[Xe]&&dt.push(Xe.replace(pn,Xn).replace(pn,r).replace(oi,lt)+"="+nt[Xe].replace(pn,Xn).replace(pn,r).replace(xo,lt));return dt.length&&(L.query=dt.join("&")),L}},So=/^([^\:]+)\:(.*)/,ci={scheme:"urn",parse:function(P,O){var L=P.path&&P.path.match(So),q=P;if(L){var re=O.scheme||q.scheme||"urn",be=L[1].toLowerCase(),Ie=L[2],ze=re+":"+(O.nid||be),ct=Ke[ze];q.nid=be,q.nss=Ie,q.path=void 0,ct&&(q=ct.parse(q,O))}else q.error=q.error||"URN can not be parsed.";return q},serialize:function(P,O){var L=O.scheme||P.scheme||"urn",q=P.nid,re=L+":"+(O.nid||q),be=Ke[re];be&&(P=be.serialize(P,O));var Ie=P,ze=P.nss;return Ie.path=(q||O.nid)+":"+ze,Ie}},Oa=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ui={scheme:"urn:uuid",parse:function(P,O){var L=P;return L.uuid=L.nss,L.nss=void 0,!O.tolerant&&(!L.uuid||!L.uuid.match(Oa))&&(L.error=L.error||"UUID is not valid."),L},serialize:function(P,O){var L=P;return L.nss=(P.uuid||"").toLowerCase(),L}};Ke[dr.scheme]=dr,Ke[Kn.scheme]=Kn,Ke[Gr.scheme]=Gr,Ke[Qn.scheme]=Qn,Ke[li.scheme]=li,Ke[ci.scheme]=ci,Ke[ui.scheme]=ui,a.SCHEMES=Ke,a.pctEncChar=lt,a.pctDecChars=kt,a.parse=ye,a.removeDotSegments=St,a.serialize=Je,a.resolveComponents=gt,a.resolve=Lt,a.normalize=Ft,a.equal=Fr,a.escapeComponent=Ra,a.unescapeComponent=Ct,Object.defineProperty(a,"__esModule",{value:!0})}))});var ws=me((rP,Rd)=>{"use strict";Rd.exports=function a(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var s,r,o;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(r=s;r--!==0;)if(!a(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),s=o.length,s!==Object.keys(t).length)return!1;for(r=s;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[r]))return!1;for(r=s;r--!==0;){var c=o[r];if(!a(e[c],t[c]))return!1}return!0}return e!==e&&t!==t}});var Td=me((nP,Ad)=>{"use strict";Ad.exports=function(e){for(var t=0,s=e.length,r=0,o;r<s;)t++,o=e.charCodeAt(r++),o>=55296&&o<=56319&&r<s&&(o=e.charCodeAt(r),(o&64512)==56320&&r++);return t}});var Zn=me((aP,Cd)=>{"use strict";Cd.exports={copy:Sw,checkDataType:Wl,checkDataTypes:Pw,coerceToTypes:Rw,toHash:Kl,getProperty:Yl,escapeQuotes:Ql,equal:ws(),ucs2length:Td(),varOccurences:kw,varReplace:Ow,schemaHasRules:Cw,schemaHasRulesExcept:Dw,schemaUnknownRules:Iw,toQuotedString:Gl,getPathExpr:$w,getPath:Mw,getData:Fw,unescapeFragment:jw,unescapeJsonPointer:Xl,escapeFragment:qw,escapeJsonPointer:Jl};function Sw(a,e){e=e||{};for(var t in a)e[t]=a[t];return e}function Wl(a,e,t,s){var r=s?" !== ":" === ",o=s?" || ":" && ",c=s?"!":"",u=s?"":"!";switch(a){case"null":return e+r+"null";case"array":return c+"Array.isArray("+e+")";case"object":return"("+c+e+o+"typeof "+e+r+'"object"'+o+u+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+r+'"number"'+o+u+"("+e+" % 1)"+o+e+r+e+(t?o+c+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+r+'"'+a+'"'+(t?o+c+"isFinite("+e+")":"")+")";default:return"typeof "+e+r+'"'+a+'"'}}function Pw(a,e,t){switch(a.length){case 1:return Wl(a[0],e,t,!0);default:var s="",r=Kl(a);r.array&&r.object&&(s=r.null?"(":"(!"+e+" || ",s+="typeof "+e+' !== "object")',delete r.null,delete r.array,delete r.object),r.number&&delete r.integer;for(var o in r)s+=(s?" && ":"")+Wl(o,e,t,!0);return s}}var kd=Kl(["string","number","integer","boolean","null"]);function Rw(a,e){if(Array.isArray(e)){for(var t=[],s=0;s<e.length;s++){var r=e[s];(kd[r]||a==="array"&&r==="array")&&(t[t.length]=r)}if(t.length)return t}else{if(kd[e])return[e];if(a==="array"&&e==="array")return["array"]}}function Kl(a){for(var e={},t=0;t<a.length;t++)e[a[t]]=!0;return e}var Aw=/^[a-z$_][a-z$_0-9]*$/i,Tw=/'|\\/g;function Yl(a){return typeof a=="number"?"["+a+"]":Aw.test(a)?"."+a:"['"+Ql(a)+"']"}function Ql(a){return a.replace(Tw,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function kw(a,e){e+="[^0-9]";var t=a.match(new RegExp(e,"g"));return t?t.length:0}function Ow(a,e,t){return e+="([^0-9])",t=t.replace(/\$/g,"$$$$"),a.replace(new RegExp(e,"g"),t+"$1")}function Cw(a,e){if(typeof a=="boolean")return!a;for(var t in a)if(e[t])return!0}function Dw(a,e,t){if(typeof a=="boolean")return!a&&t!="not";for(var s in a)if(s!=t&&e[s])return!0}function Iw(a,e){if(typeof a!="boolean"){for(var t in a)if(!e[t])return t}}function Gl(a){return"'"+Ql(a)+"'"}function $w(a,e,t,s){var r=t?"'/' + "+e+(s?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):s?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return Od(a,r)}function Mw(a,e,t){var s=Gl(t?"/"+Jl(e):Yl(e));return Od(a,s)}var Nw=/^\/(?:[^~]|~0|~1)*$/,Lw=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Fw(a,e,t){var s,r,o,c;if(a==="")return"rootData";if(a[0]=="/"){if(!Nw.test(a))throw new Error("Invalid JSON-pointer: "+a);r=a,o="rootData"}else{if(c=a.match(Lw),!c)throw new Error("Invalid JSON-pointer: "+a);if(s=+c[1],r=c[2],r=="#"){if(s>=e)throw new Error("Cannot access property/index "+s+" levels up, current level is "+e);return t[e-s]}if(s>e)throw new Error("Cannot access data "+s+" levels up, current level is "+e);if(o="data"+(e-s||""),!r)return o}for(var u=o,f=r.split("/"),h=0;h<f.length;h++){var m=f[h];m&&(o+=Yl(Xl(m)),u+=" && "+o)}return u}function Od(a,e){return a=='""'?e:(a+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function jw(a){return Xl(decodeURIComponent(a))}function qw(a){return encodeURIComponent(Jl(a))}function Jl(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}function Xl(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")}});var ec=me((iP,Dd)=>{"use strict";var zw=Zn();Dd.exports=Uw;function Uw(a){zw.copy(a,this)}});var $d=me((sP,Id)=>{"use strict";var Tn=Id.exports=function(a,e,t){typeof e=="function"&&(t=e,e={}),t=e.cb||t;var s=typeof t=="function"?t:t.pre||function(){},r=t.post||function(){};Es(e,s,r,a,"",a)};Tn.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Tn.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Tn.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Tn.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Es(a,e,t,s,r,o,c,u,f,h){if(s&&typeof s=="object"&&!Array.isArray(s)){e(s,r,o,c,u,f,h);for(var m in s){var g=s[m];if(Array.isArray(g)){if(m in Tn.arrayKeywords)for(var v=0;v<g.length;v++)Es(a,e,t,g[v],r+"/"+m+"/"+v,o,r,m,s,v)}else if(m in Tn.propsKeywords){if(g&&typeof g=="object")for(var p in g)Es(a,e,t,g[p],r+"/"+m+"/"+Hw(p),o,r,m,s,p)}else(m in Tn.keywords||a.allKeys&&!(m in Tn.skipKeywords))&&Es(a,e,t,g,r+"/"+m,o,r,m,s)}t(s,r,o,c,u,f,h)}}function Hw(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}});var Ts=me((oP,Fd)=>{"use strict";var Qa=Pd(),Md=ws(),Rs=Zn(),xs=ec(),Zw=$d();Fd.exports=On;On.normalizeId=kn;On.fullPath=Ss;On.url=Ps;On.ids=Kw;On.inlineRef=tc;On.schema=As;function On(a,e,t){var s=this._refs[t];if(typeof s=="string")if(this._refs[s])s=this._refs[s];else return On.call(this,a,e,s);if(s=s||this._schemas[t],s instanceof xs)return tc(s.schema,this._opts.inlineRefs)?s.schema:s.validate||this._compile(s);var r=As.call(this,e,t),o,c,u;return r&&(o=r.schema,e=r.root,u=r.baseId),o instanceof xs?c=o.validate||a.call(this,o.schema,e,void 0,u):o!==void 0&&(c=tc(o,this._opts.inlineRefs)?o:a.call(this,o,e,void 0,u)),c}function As(a,e){var t=Qa.parse(e),s=Ld(t),r=Ss(this._getId(a.schema));if(Object.keys(a.schema).length===0||s!==r){var o=kn(s),c=this._refs[o];if(typeof c=="string")return Bw.call(this,a,c,t);if(c instanceof xs)c.validate||this._compile(c),a=c;else if(c=this._schemas[o],c instanceof xs){if(c.validate||this._compile(c),o==kn(e))return{schema:c,root:a,baseId:r};a=c}else return;if(!a.schema)return;r=Ss(this._getId(a.schema))}return Nd.call(this,t,r,a.schema,a)}function Bw(a,e,t){var s=As.call(this,a,e);if(s){var r=s.schema,o=s.baseId;a=s.root;var c=this._getId(r);return c&&(o=Ps(o,c)),Nd.call(this,t,o,r,a)}}var Vw=Rs.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function Nd(a,e,t,s){if(a.fragment=a.fragment||"",a.fragment.slice(0,1)=="/"){for(var r=a.fragment.split("/"),o=1;o<r.length;o++){var c=r[o];if(c){if(c=Rs.unescapeFragment(c),t=t[c],t===void 0)break;var u;if(!Vw[c]&&(u=this._getId(t),u&&(e=Ps(e,u)),t.$ref)){var f=Ps(e,t.$ref),h=As.call(this,s,f);h&&(t=h.schema,s=h.root,e=h.baseId)}}}if(t!==void 0&&t!==s.schema)return{schema:t,root:s,baseId:e}}}var Ww=Rs.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function tc(a,e){if(e===!1)return!1;if(e===void 0||e===!0)return rc(a);if(e)return nc(a)<=e}function rc(a){var e;if(Array.isArray(a)){for(var t=0;t<a.length;t++)if(e=a[t],typeof e=="object"&&!rc(e))return!1}else for(var s in a)if(s=="$ref"||(e=a[s],typeof e=="object"&&!rc(e)))return!1;return!0}function nc(a){var e=0,t;if(Array.isArray(a)){for(var s=0;s<a.length;s++)if(t=a[s],typeof t=="object"&&(e+=nc(t)),e==1/0)return 1/0}else for(var r in a){if(r=="$ref")return 1/0;if(Ww[r])e++;else if(t=a[r],typeof t=="object"&&(e+=nc(t)+1),e==1/0)return 1/0}return e}function Ss(a,e){e!==!1&&(a=kn(a));var t=Qa.parse(a);return Ld(t)}function Ld(a){return Qa.serialize(a).split("#")[0]+"#"}var Gw=/#\/?$/;function kn(a){return a?a.replace(Gw,""):""}function Ps(a,e){return e=kn(e),Qa.resolve(a,e)}function Kw(a){var e=kn(this._getId(a)),t={"":e},s={"":Ss(e,!1)},r={},o=this;return Zw(a,{allKeys:!0},function(c,u,f,h,m,g,v){if(u!==""){var p=o._getId(c),y=t[h],w=s[h]+"/"+m;if(v!==void 0&&(w+="/"+(typeof v=="number"?v:Rs.escapeFragment(v))),typeof p=="string"){p=y=kn(y?Qa.resolve(y,p):p);var E=o._refs[p];if(typeof E=="string"&&(E=o._refs[E]),E&&E.schema){if(!Md(c,E.schema))throw new Error('id "'+p+'" resolves to more than one schema')}else if(p!=kn(w))if(p[0]=="#"){if(r[p]&&!Md(c,r[p]))throw new Error('id "'+p+'" resolves to more than one schema');r[p]=c}else o._refs[p]=w}t[u]=y,s[u]=w}}),r}});var ks=me((lP,qd)=>{"use strict";var ac=Ts();qd.exports={Validation:jd(Yw),MissingRef:jd(ic)};function Yw(a){this.message="validation failed",this.errors=a,this.ajv=this.validation=!0}ic.message=function(a,e){return"can't resolve reference "+e+" from id "+a};function ic(a,e,t){this.message=t||ic.message(a,e),this.missingRef=ac.url(a,e),this.missingSchema=ac.normalizeId(ac.fullPath(this.missingRef))}function jd(a){return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}});var sc=me((cP,zd)=>{"use strict";zd.exports=function(a,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var t=typeof e.cycles=="boolean"?e.cycles:!1,s=e.cmp&&(function(o){return function(c){return function(u,f){var h={key:u,value:c[u]},m={key:f,value:c[f]};return o(h,m)}}})(e.cmp),r=[];return(function o(c){if(c&&c.toJSON&&typeof c.toJSON=="function"&&(c=c.toJSON()),c!==void 0){if(typeof c=="number")return isFinite(c)?""+c:"null";if(typeof c!="object")return JSON.stringify(c);var u,f;if(Array.isArray(c)){for(f="[",u=0;u<c.length;u++)u&&(f+=","),f+=o(c[u])||"null";return f+"]"}if(c===null)return"null";if(r.indexOf(c)!==-1){if(t)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var h=r.push(c)-1,m=Object.keys(c).sort(s&&s(c));for(f="",u=0;u<m.length;u++){var g=m[u],v=o(c[g]);v&&(f&&(f+=","),f+=JSON.stringify(g)+":"+v)}return r.splice(h,1),"{"+f+"}"}})(a)}});var oc=me((uP,Ud)=>{"use strict";Ud.exports=function(e,t,s){var r="",o=e.schema.$async===!0,c=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),u=e.self._getId(e.schema);if(e.opts.strictKeywords){var f=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(f){var h="unknown keyword: "+f;if(e.opts.strictKeywords==="log")e.logger.warn(h);else throw new Error(h)}}if(e.isTop&&(r+=" var validate = ",o&&(e.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",u&&(e.opts.sourceCode||e.opts.processCode)&&(r+=" "+("/*# sourceURL="+u+" */")+" ")),typeof e.schema=="boolean"||!(c||e.schema.$ref)){var t="false schema",m=e.level,g=e.dataLevel,v=e.schema[t],p=e.schemaPath+e.util.getProperty(t),y=e.errSchemaPath+"/"+t,M=!e.opts.allErrors,W,w="data"+(g||""),I="valid"+m;if(e.schema===!1){e.isTop?M=!0:r+=" var "+I+" = false; ";var E=E||[];E.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(W||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'boolean schema is false' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+w+" "),r+=" } "):r+=" {} ";var R=r;r=E.pop(),!e.compositeRule&&M?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?o?r+=" return data; ":r+=" validate.errors = null; return true; ":r+=" var "+I+" = true; ";return e.isTop&&(r+=" }; return validate; "),r}if(e.isTop){var $=e.isTop,m=e.level=0,g=e.dataLevel=0,w="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var N="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(N);else throw new Error(N)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{var m=e.level,g=e.dataLevel,w="data"+(g||"");if(u&&(e.baseId=e.resolve.url(e.baseId,u)),o&&!e.async)throw new Error("async schema in sync schema");r+=" var errs_"+m+" = errors;"}var I="valid"+m,M=!e.opts.allErrors,j="",z="",W,B=e.schema.type,J=Array.isArray(B);if(B&&e.opts.nullable&&e.schema.nullable===!0&&(J?B.indexOf("null")==-1&&(B=B.concat("null")):B!="null"&&(B=[B,"null"],J=!0)),J&&B.length==1&&(B=B[0],J=!1),e.schema.$ref&&c){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(c=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(r+=" "+e.RULES.all.$comment.code(e,"$comment")),B){if(e.opts.coerceTypes)var te=e.util.coerceToTypes(e.opts.coerceTypes,B);var ie=e.RULES.types[B];if(te||J||ie===!0||ie&&!bt(ie)){var p=e.schemaPath+".type",y=e.errSchemaPath+"/type",p=e.schemaPath+".type",y=e.errSchemaPath+"/type",G=J?"checkDataTypes":"checkDataType";if(r+=" if ("+e.util[G](B,w,e.opts.strictNumbers,!0)+") { ",te){var Q="dataType"+m,se="coerced"+m;r+=" var "+Q+" = typeof "+w+"; var "+se+" = undefined; ",e.opts.coerceTypes=="array"&&(r+=" if ("+Q+" == 'object' && Array.isArray("+w+") && "+w+".length == 1) { "+w+" = "+w+"[0]; "+Q+" = typeof "+w+"; if ("+e.util.checkDataType(e.schema.type,w,e.opts.strictNumbers)+") "+se+" = "+w+"; } "),r+=" if ("+se+" !== undefined) ; ";var Ue=te;if(Ue)for(var ge,_e=-1,Se=Ue.length-1;_e<Se;)ge=Ue[_e+=1],ge=="string"?r+=" else if ("+Q+" == 'number' || "+Q+" == 'boolean') "+se+" = '' + "+w+"; else if ("+w+" === null) "+se+" = ''; ":ge=="number"||ge=="integer"?(r+=" else if ("+Q+" == 'boolean' || "+w+" === null || ("+Q+" == 'string' && "+w+" && "+w+" == +"+w+" ",ge=="integer"&&(r+=" && !("+w+" % 1)"),r+=")) "+se+" = +"+w+"; "):ge=="boolean"?r+=" else if ("+w+" === 'false' || "+w+" === 0 || "+w+" === null) "+se+" = false; else if ("+w+" === 'true' || "+w+" === 1) "+se+" = true; ":ge=="null"?r+=" else if ("+w+" === '' || "+w+" === 0 || "+w+" === false) "+se+" = null; ":e.opts.coerceTypes=="array"&&ge=="array"&&(r+=" else if ("+Q+" == 'string' || "+Q+" == 'number' || "+Q+" == 'boolean' || "+w+" == null) "+se+" = ["+w+"]; ");r+=" else {   ";var E=E||[];E.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(W||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",J?r+=""+B.join(","):r+=""+B,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",J?r+=""+B.join(","):r+=""+B,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+w+" "),r+=" } "):r+=" {} ";var R=r;r=E.pop(),!e.compositeRule&&M?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } if ("+se+" !== undefined) {  ";var ce=g?"data"+(g-1||""):"parentData",Fe=g?e.dataPathArr[g]:"parentDataProperty";r+=" "+w+" = "+se+"; ",g||(r+="if ("+ce+" !== undefined)"),r+=" "+ce+"["+Fe+"] = "+se+"; } "}else{var E=E||[];E.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(W||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",J?r+=""+B.join(","):r+=""+B,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",J?r+=""+B.join(","):r+=""+B,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+w+" "),r+=" } "):r+=" {} ";var R=r;r=E.pop(),!e.compositeRule&&M?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(e.schema.$ref&&!c)r+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",M&&(r+=" } if (errors === ",$?r+="0":r+="errs_"+m,r+=") { ",z+="}");else{var xt=e.RULES;if(xt){for(var ie,Tt=-1,Ne=xt.length-1;Tt<Ne;)if(ie=xt[Tt+=1],bt(ie)){if(ie.type&&(r+=" if ("+e.util.checkDataType(ie.type,w,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(ie.type=="object"&&e.schema.properties){var v=e.schema.properties,Ke=Object.keys(v),lt=Ke;if(lt)for(var kt,Vt=-1,Nt=lt.length-1;Vt<Nt;){kt=lt[Vt+=1];var ft=v[kt];if(ft.default!==void 0){var Ye=w+e.util.getProperty(kt);if(e.compositeRule){if(e.opts.strictDefaults){var N="default is ignored for: "+Ye;if(e.opts.strictDefaults==="log")e.logger.warn(N);else throw new Error(N)}}else r+=" if ("+Ye+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+Ye+" === null || "+Ye+" === '' "),r+=" ) "+Ye+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(ft.default)+" ":r+=" "+JSON.stringify(ft.default)+" ",r+="; "}}}else if(ie.type=="array"&&Array.isArray(e.schema.items)){var fr=e.schema.items;if(fr){for(var ft,_e=-1,yt=fr.length-1;_e<yt;)if(ft=fr[_e+=1],ft.default!==void 0){var Ye=w+"["+_e+"]";if(e.compositeRule){if(e.opts.strictDefaults){var N="default is ignored for: "+Ye;if(e.opts.strictDefaults==="log")e.logger.warn(N);else throw new Error(N)}}else r+=" if ("+Ye+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+Ye+" === null || "+Ye+" === '' "),r+=" ) "+Ye+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(ft.default)+" ":r+=" "+JSON.stringify(ft.default)+" ",r+="; "}}}}var ye=ie.rules;if(ye){for(var Wt,Sr=-1,Ot=ye.length-1;Sr<Ot;)if(Wt=ye[Sr+=1],St(Wt)){var Lr=Wt.code(e,Wt.keyword,ie.type);Lr&&(r+=" "+Lr+" ",M&&(j+="}"))}}if(M&&(r+=" "+j+" ",j=""),ie.type&&(r+=" } ",B&&B===ie.type&&!te)){r+=" else { ";var p=e.schemaPath+".type",y=e.errSchemaPath+"/type",E=E||[];E.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(W||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",J?r+=""+B.join(","):r+=""+B,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",J?r+=""+B.join(","):r+=""+B,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+w+" "),r+=" } "):r+=" {} ";var R=r;r=E.pop(),!e.compositeRule&&M?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}M&&(r+=" if (errors === ",$?r+="0":r+="errs_"+m,r+=") { ",z+="}")}}}M&&(r+=" "+z+" "),$?(o?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+I+" = errors === errs_"+m+";";function bt(gt){for(var Lt=gt.rules,Ft=0;Ft<Lt.length;Ft++)if(St(Lt[Ft]))return!0}function St(gt){return e.schema[gt.keyword]!==void 0||gt.implements&&Je(gt)}function Je(gt){for(var Lt=gt.implements,Ft=0;Ft<Lt.length;Ft++)if(e.schema[Lt[Ft]]!==void 0)return!0}return r}});var Wd=me((fP,Vd)=>{"use strict";var Os=Ts(),Ds=Zn(),Zd=ks(),Qw=sc(),Hd=oc(),Jw=Ds.ucs2length,Xw=ws(),eE=Zd.Validation;Vd.exports=lc;function lc(a,e,t,s){var r=this,o=this._opts,c=[void 0],u={},f=[],h={},m=[],g={},v=[];e=e||{schema:a,refVal:c,refs:u};var p=tE.call(this,a,e,s),y=this._compilations[p.index];if(p.compiling)return y.callValidate=N;var w=this._formats,E=this.RULES;try{var R=I(a,e,t,s);y.validate=R;var $=y.callValidate;return $&&($.schema=R.schema,$.errors=null,$.refs=R.refs,$.refVal=R.refVal,$.root=R.root,$.$async=R.$async,o.sourceCode&&($.source=R.source)),R}finally{rE.call(this,a,e,s)}function N(){var G=y.validate,Q=G.apply(this,arguments);return N.errors=G.errors,Q}function I(G,Q,se,Ue){var ge=!Q||Q&&Q.schema==G;if(Q.schema!=e.schema)return lc.call(r,G,Q,se,Ue);var _e=G.$async===!0,Se=Hd({isTop:!0,schema:G,isRoot:ge,baseId:Ue,root:Q,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Zd.MissingRef,RULES:E,validate:Hd,util:Ds,resolve:Os,resolveRef:M,usePattern:J,useDefault:te,useCustomRule:ie,opts:o,formats:w,logger:r.logger,self:r});Se=Cs(c,iE)+Cs(f,nE)+Cs(m,aE)+Cs(v,sE)+Se,o.processCode&&(Se=o.processCode(Se,G));var ce;try{var Fe=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",Se);ce=Fe(r,E,w,e,c,m,v,Xw,Jw,eE),c[0]=ce}catch(xt){throw r.logger.error("Error compiling schema, function code:",Se),xt}return ce.schema=G,ce.errors=null,ce.refs=u,ce.refVal=c,ce.root=ge?ce:Q,_e&&(ce.$async=!0),o.sourceCode===!0&&(ce.source={code:Se,patterns:f,defaults:m}),ce}function M(G,Q,se){Q=Os.url(G,Q);var Ue=u[Q],ge,_e;if(Ue!==void 0)return ge=c[Ue],_e="refVal["+Ue+"]",B(ge,_e);if(!se&&e.refs){var Se=e.refs[Q];if(Se!==void 0)return ge=e.refVal[Se],_e=j(Q,ge),B(ge,_e)}_e=j(Q);var ce=Os.call(r,I,e,Q);if(ce===void 0){var Fe=t&&t[Q];Fe&&(ce=Os.inlineRef(Fe,o.inlineRefs)?Fe:lc.call(r,Fe,e,t,G))}if(ce===void 0)z(Q);else return W(Q,ce),B(ce,_e)}function j(G,Q){var se=c.length;return c[se]=Q,u[G]=se,"refVal"+se}function z(G){delete u[G]}function W(G,Q){var se=u[G];c[se]=Q}function B(G,Q){return typeof G=="object"||typeof G=="boolean"?{code:Q,schema:G,inline:!0}:{code:Q,$async:G&&!!G.$async}}function J(G){var Q=h[G];return Q===void 0&&(Q=h[G]=f.length,f[Q]=G),"pattern"+Q}function te(G){switch(typeof G){case"boolean":case"number":return""+G;case"string":return Ds.toQuotedString(G);case"object":if(G===null)return"null";var Q=Qw(G),se=g[Q];return se===void 0&&(se=g[Q]=m.length,m[se]=G),"default"+se}}function ie(G,Q,se,Ue){if(r._opts.validateSchema!==!1){var ge=G.definition.dependencies;if(ge&&!ge.every(function(lt){return Object.prototype.hasOwnProperty.call(se,lt)}))throw new Error("parent schema must have all required keywords: "+ge.join(","));var _e=G.definition.validateSchema;if(_e){var Se=_e(Q);if(!Se){var ce="keyword schema is invalid: "+r.errorsText(_e.errors);if(r._opts.validateSchema=="log")r.logger.error(ce);else throw new Error(ce)}}}var Fe=G.definition.compile,xt=G.definition.inline,Tt=G.definition.macro,Ne;if(Fe)Ne=Fe.call(r,Q,se,Ue);else if(Tt)Ne=Tt.call(r,Q,se,Ue),o.validateSchema!==!1&&r.validateSchema(Ne,!0);else if(xt)Ne=xt.call(r,Ue,G.keyword,Q,se);else if(Ne=G.definition.validate,!Ne)return;if(Ne===void 0)throw new Error('custom keyword "'+G.keyword+'"failed to compile');var Ke=v.length;return v[Ke]=Ne,{code:"customRule"+Ke,validate:Ne}}}function tE(a,e,t){var s=Bd.call(this,a,e,t);return s>=0?{index:s,compiling:!0}:(s=this._compilations.length,this._compilations[s]={schema:a,root:e,baseId:t},{index:s,compiling:!1})}function rE(a,e,t){var s=Bd.call(this,a,e,t);s>=0&&this._compilations.splice(s,1)}function Bd(a,e,t){for(var s=0;s<this._compilations.length;s++){var r=this._compilations[s];if(r.schema==a&&r.root==e&&r.baseId==t)return s}return-1}function nE(a,e){return"var pattern"+a+" = new RegExp("+Ds.toQuotedString(e[a])+");"}function aE(a){return"var default"+a+" = defaults["+a+"];"}function iE(a,e){return e[a]===void 0?"":"var refVal"+a+" = refVal["+a+"];"}function sE(a){return"var customRule"+a+" = customRules["+a+"];"}function Cs(a,e){if(!a.length)return"";for(var t="",s=0;s<a.length;s++)t+=e(s,a);return t}});var Kd=me((dP,Gd)=>{"use strict";var Is=Gd.exports=function(){this._cache={}};Is.prototype.put=function(e,t){this._cache[e]=t};Is.prototype.get=function(e){return this._cache[e]};Is.prototype.del=function(e){delete this._cache[e]};Is.prototype.clear=function(){this._cache={}}});var oh=me((hP,sh)=>{"use strict";var oE=Zn(),lE=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,cE=[0,31,28,31,30,31,30,31,31,30,31,30,31],uE=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Yd=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,fE=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,dE=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Qd=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Jd=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,Xd=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,eh=/^(?:\/(?:[^~/]|~0|~1)*)*$/,th=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,rh=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;sh.exports=$s;function $s(a){return a=a=="full"?"full":"fast",oE.copy($s[a])}$s.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":Qd,url:Jd,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:Yd,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:ih,uuid:Xd,"json-pointer":eh,"json-pointer-uri-fragment":th,"relative-json-pointer":rh};$s.full={date:nh,time:ah,"date-time":mE,uri:vE,"uri-reference":dE,"uri-template":Qd,url:Jd,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:Yd,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:ih,uuid:Xd,"json-pointer":eh,"json-pointer-uri-fragment":th,"relative-json-pointer":rh};function hE(a){return a%4===0&&(a%100!==0||a%400===0)}function nh(a){var e=a.match(lE);if(!e)return!1;var t=+e[1],s=+e[2],r=+e[3];return s>=1&&s<=12&&r>=1&&r<=(s==2&&hE(t)?29:cE[s])}function ah(a,e){var t=a.match(uE);if(!t)return!1;var s=t[1],r=t[2],o=t[3],c=t[5];return(s<=23&&r<=59&&o<=59||s==23&&r==59&&o==60)&&(!e||c)}var pE=/t|\s/i;function mE(a){var e=a.split(pE);return e.length==2&&nh(e[0])&&ah(e[1],!0)}var gE=/\/|:/;function vE(a){return gE.test(a)&&fE.test(a)}var _E=/[^\\]\\Z/;function ih(a){if(_E.test(a))return!1;try{return new RegExp(a),!0}catch{return!1}}});var ch=me((pP,lh)=>{"use strict";lh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(c||""),g="valid"+o,v,p;if(u=="#"||u=="#/")e.isRoot?(v=e.async,p="validate"):(v=e.root.schema.$async===!0,p="root.refVal[0]");else{var y=e.resolveRef(e.baseId,u,e.isRoot);if(y===void 0){var w=e.MissingRefError.message(e.baseId,u);if(e.opts.missingRefs=="fail"){e.logger.error(w);var E=E||[];E.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { ref: '"+e.util.escapeQuotes(u)+"' } ",e.opts.messages!==!1&&(r+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(u)+"' "),e.opts.verbose&&(r+=" , schema: "+e.util.toQuotedString(u)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var R=r;r=E.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h&&(r+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(w),h&&(r+=" if (true) { ");else throw new e.MissingRefError(e.baseId,u,w)}else if(y.inline){var $=e.util.copy(e);$.level++;var N="valid"+$.level;$.schema=y.schema,$.schemaPath="",$.errSchemaPath=u;var I=e.validate($).replace(/validate\.schema/g,y.code);r+=" "+I+" ",h&&(r+=" if ("+N+") { ")}else v=y.$async===!0||e.async&&y.$async!==!1,p=y.code}if(p){var E=E||[];E.push(r),r="",e.opts.passContext?r+=" "+p+".call(this, ":r+=" "+p+"( ",r+=" "+m+", (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var M=c?"data"+(c-1||""):"parentData",j=c?e.dataPathArr[c]:"parentDataProperty";r+=" , "+M+" , "+j+", rootData)  ";var z=r;if(r=E.pop(),v){if(!e.async)throw new Error("async schema referenced by sync schema");h&&(r+=" var "+g+"; "),r+=" try { await "+z+"; ",h&&(r+=" "+g+" = true; "),r+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",h&&(r+=" "+g+" = false; "),r+=" } ",h&&(r+=" if ("+g+") { ")}else r+=" if (!"+z+") { if (vErrors === null) vErrors = "+p+".errors; else vErrors = vErrors.concat("+p+".errors); errors = vErrors.length; } ",h&&(r+=" else { ")}return r}});var fh=me((mP,uh)=>{"use strict";uh.exports=function(e,t,s){var r=" ",o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h=e.util.copy(e),m="";h.level++;var g="valid"+h.level,v=h.baseId,p=!0,y=o;if(y)for(var w,E=-1,R=y.length-1;E<R;)w=y[E+=1],(e.opts.strictKeywords?typeof w=="object"&&Object.keys(w).length>0||w===!1:e.util.schemaHasRules(w,e.RULES.all))&&(p=!1,h.schema=w,h.schemaPath=c+"["+E+"]",h.errSchemaPath=u+"/"+E,r+="  "+e.validate(h)+" ",h.baseId=v,f&&(r+=" if ("+g+") { ",m+="}"));return f&&(p?r+=" if (true) { ":r+=" "+m.slice(0,-1)+" "),r}});var hh=me((gP,dh)=>{"use strict";dh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="valid"+o,p="errs__"+o,y=e.util.copy(e),w="";y.level++;var E="valid"+y.level,R=u.every(function(W){return e.opts.strictKeywords?typeof W=="object"&&Object.keys(W).length>0||W===!1:e.util.schemaHasRules(W,e.RULES.all)});if(R){var $=y.baseId;r+=" var "+p+" = errors; var "+v+" = false;  ";var N=e.compositeRule;e.compositeRule=y.compositeRule=!0;var I=u;if(I)for(var M,j=-1,z=I.length-1;j<z;)M=I[j+=1],y.schema=M,y.schemaPath=f+"["+j+"]",y.errSchemaPath=h+"/"+j,r+="  "+e.validate(y)+" ",y.baseId=$,r+=" "+v+" = "+v+" || "+E+"; if (!"+v+") { ",w+="}";e.compositeRule=y.compositeRule=N,r+=" "+w+" if (!"+v+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else m&&(r+=" if (true) { ");return r}});var mh=me((vP,ph)=>{"use strict";ph.exports=function(e,t,s){var r=" ",o=e.schema[t],c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,f=e.util.toQuotedString(o);return e.opts.$comment===!0?r+=" console.log("+f+");":typeof e.opts.$comment=="function"&&(r+=" self._opts.$comment("+f+", "+e.util.toQuotedString(c)+", validate.root.schema);"),r}});var vh=me((_P,gh)=>{"use strict";gh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="valid"+o,p=e.opts.$data&&u&&u.$data,y;p?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",y="schema"+o):y=u,p||(r+=" var schema"+o+" = validate.schema"+f+";"),r+="var "+v+" = equal("+g+", schema"+o+"); if (!"+v+") {   ";var w=w||[];w.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { allowedValue: schema"+o+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to constant' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var E=r;return r=w.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+E+"]); ":r+=" validate.errors = ["+E+"]; return false; ":r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",m&&(r+=" else { "),r}});var yh=me((yP,_h)=>{"use strict";_h.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="valid"+o,p="errs__"+o,y=e.util.copy(e),w="";y.level++;var E="valid"+y.level,R="i"+o,$=y.dataLevel=e.dataLevel+1,N="data"+$,I=e.baseId,M=e.opts.strictKeywords?typeof u=="object"&&Object.keys(u).length>0||u===!1:e.util.schemaHasRules(u,e.RULES.all);if(r+="var "+p+" = errors;var "+v+";",M){var j=e.compositeRule;e.compositeRule=y.compositeRule=!0,y.schema=u,y.schemaPath=f,y.errSchemaPath=h,r+=" var "+E+" = false; for (var "+R+" = 0; "+R+" < "+g+".length; "+R+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,R,e.opts.jsonPointers,!0);var z=g+"["+R+"]";y.dataPathArr[$]=R;var W=e.validate(y);y.baseId=I,e.util.varOccurences(W,N)<2?r+=" "+e.util.varReplace(W,N,z)+" ":r+=" var "+N+" = "+z+"; "+W+" ",r+=" if ("+E+") break; }  ",e.compositeRule=y.compositeRule=j,r+=" "+w+" if (!"+E+") {"}else r+=" if ("+g+".length == 0) {";var B=B||[];B.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should contain a valid item' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var J=r;return r=B.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+J+"]); ":r+=" validate.errors = ["+J+"]; return false; ":r+=" var err = "+J+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",M&&(r+="  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } "),e.opts.allErrors&&(r+=" } "),r}});var wh=me((bP,bh)=>{"use strict";bh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="errs__"+o,p=e.util.copy(e),y="";p.level++;var w="valid"+p.level,E={},R={},$=e.opts.ownProperties;for(j in u)if(j!="__proto__"){var N=u[j],I=Array.isArray(N)?R:E;I[j]=N}r+="var "+v+" = errors;";var M=e.errorPath;r+="var missing"+o+";";for(var j in R)if(I=R[j],I.length){if(r+=" if ( "+g+e.util.getProperty(j)+" !== undefined ",$&&(r+=" && Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(j)+"') "),m){r+=" && ( ";var z=I;if(z)for(var W,B=-1,J=z.length-1;B<J;){W=z[B+=1],B&&(r+=" || ");var te=e.util.getProperty(W),ie=g+te;r+=" ( ( "+ie+" === undefined ",$&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(W)+"') "),r+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?W:te)+") ) "}r+=")) {  ";var G="missing"+o,Q="' + "+G+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(M,G,!0):M+" + "+G);var se=se||[];se.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { property: '"+e.util.escapeQuotes(j)+"', missingProperty: '"+Q+"', depsCount: "+I.length+", deps: '"+e.util.escapeQuotes(I.length==1?I[0]:I.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",I.length==1?r+="property "+e.util.escapeQuotes(I[0]):r+="properties "+e.util.escapeQuotes(I.join(", ")),r+=" when property "+e.util.escapeQuotes(j)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var Ue=r;r=se.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+Ue+"]); ":r+=" validate.errors = ["+Ue+"]; return false; ":r+=" var err = "+Ue+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var ge=I;if(ge)for(var W,_e=-1,Se=ge.length-1;_e<Se;){W=ge[_e+=1];var te=e.util.getProperty(W),Q=e.util.escapeQuotes(W),ie=g+te;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(M,W,e.opts.jsonPointers)),r+=" if ( "+ie+" === undefined ",$&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(W)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { property: '"+e.util.escapeQuotes(j)+"', missingProperty: '"+Q+"', depsCount: "+I.length+", deps: '"+e.util.escapeQuotes(I.length==1?I[0]:I.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",I.length==1?r+="property "+e.util.escapeQuotes(I[0]):r+="properties "+e.util.escapeQuotes(I.join(", ")),r+=" when property "+e.util.escapeQuotes(j)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",m&&(y+="}",r+=" else { ")}e.errorPath=M;var ce=p.baseId;for(var j in E){var N=E[j];(e.opts.strictKeywords?typeof N=="object"&&Object.keys(N).length>0||N===!1:e.util.schemaHasRules(N,e.RULES.all))&&(r+=" "+w+" = true; if ( "+g+e.util.getProperty(j)+" !== undefined ",$&&(r+=" && Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(j)+"') "),r+=") { ",p.schema=N,p.schemaPath=f+e.util.getProperty(j),p.errSchemaPath=h+"/"+e.util.escapeFragment(j),r+="  "+e.validate(p)+" ",p.baseId=ce,r+=" }  ",m&&(r+=" if ("+w+") { ",y+="}"))}return m&&(r+="   "+y+" if ("+v+" == errors) {"),r}});var xh=me((wP,Eh)=>{"use strict";Eh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="valid"+o,p=e.opts.$data&&u&&u.$data,y;p?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",y="schema"+o):y=u;var w="i"+o,E="schema"+o;p||(r+=" var "+E+" = validate.schema"+f+";"),r+="var "+v+";",p&&(r+=" if (schema"+o+" === undefined) "+v+" = true; else if (!Array.isArray(schema"+o+")) "+v+" = false; else {"),r+=""+v+" = false;for (var "+w+"=0; "+w+"<"+E+".length; "+w+"++) if (equal("+g+", "+E+"["+w+"])) { "+v+" = true; break; }",p&&(r+="  }  "),r+=" if (!"+v+") {   ";var R=R||[];R.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { allowedValues: schema"+o+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var $=r;return r=R.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+$+"]); ":r+=" validate.errors = ["+$+"]; return false; ":r+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",m&&(r+=" else { "),r}});var Ph=me((EP,Sh)=>{"use strict";Sh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||"");if(e.opts.format===!1)return m&&(r+=" if (true) { "),r;var v=e.opts.$data&&u&&u.$data,p;v?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",p="schema"+o):p=u;var y=e.opts.unknownFormats,w=Array.isArray(y);if(v){var E="format"+o,R="isObject"+o,$="formatType"+o;r+=" var "+E+" = formats["+p+"]; var "+R+" = typeof "+E+" == 'object' && !("+E+" instanceof RegExp) && "+E+".validate; var "+$+" = "+R+" && "+E+".type || 'string'; if ("+R+") { ",e.async&&(r+=" var async"+o+" = "+E+".async; "),r+=" "+E+" = "+E+".validate; } if (  ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'string') || "),r+=" (",y!="ignore"&&(r+=" ("+p+" && !"+E+" ",w&&(r+=" && self._opts.unknownFormats.indexOf("+p+") == -1 "),r+=") || "),r+=" ("+E+" && "+$+" == '"+s+"' && !(typeof "+E+" == 'function' ? ",e.async?r+=" (async"+o+" ? await "+E+"("+g+") : "+E+"("+g+")) ":r+=" "+E+"("+g+") ",r+=" : "+E+".test("+g+"))))) {"}else{var E=e.formats[u];if(!E){if(y=="ignore")return e.logger.warn('unknown format "'+u+'" ignored in schema at path "'+e.errSchemaPath+'"'),m&&(r+=" if (true) { "),r;if(w&&y.indexOf(u)>=0)return m&&(r+=" if (true) { "),r;throw new Error('unknown format "'+u+'" is used in schema at path "'+e.errSchemaPath+'"')}var R=typeof E=="object"&&!(E instanceof RegExp)&&E.validate,$=R&&E.type||"string";if(R){var N=E.async===!0;E=E.validate}if($!=s)return m&&(r+=" if (true) { "),r;if(N){if(!e.async)throw new Error("async format in sync schema");var I="formats"+e.util.getProperty(u)+".validate";r+=" if (!(await "+I+"("+g+"))) { "}else{r+=" if (! ";var I="formats"+e.util.getProperty(u);R&&(I+=".validate"),typeof E=="function"?r+=" "+I+"("+g+") ":r+=" "+I+".test("+g+") ",r+=") { "}}var M=M||[];M.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { format:  ",v?r+=""+p:r+=""+e.util.toQuotedString(u),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match format "`,v?r+="' + "+p+" + '":r+=""+e.util.escapeQuotes(u),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+f:r+=""+e.util.toQuotedString(u),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var j=r;return r=M.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+j+"]); ":r+=" validate.errors = ["+j+"]; return false; ":r+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",m&&(r+=" else { "),r}});var Ah=me((xP,Rh)=>{"use strict";Rh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="valid"+o,p="errs__"+o,y=e.util.copy(e);y.level++;var w="valid"+y.level,E=e.schema.then,R=e.schema.else,$=E!==void 0&&(e.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:e.util.schemaHasRules(E,e.RULES.all)),N=R!==void 0&&(e.opts.strictKeywords?typeof R=="object"&&Object.keys(R).length>0||R===!1:e.util.schemaHasRules(R,e.RULES.all)),I=y.baseId;if($||N){var M;y.createErrors=!1,y.schema=u,y.schemaPath=f,y.errSchemaPath=h,r+=" var "+p+" = errors; var "+v+" = true;  ";var j=e.compositeRule;e.compositeRule=y.compositeRule=!0,r+="  "+e.validate(y)+" ",y.baseId=I,y.createErrors=!0,r+="  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; }  ",e.compositeRule=y.compositeRule=j,$?(r+=" if ("+w+") {  ",y.schema=e.schema.then,y.schemaPath=e.schemaPath+".then",y.errSchemaPath=e.errSchemaPath+"/then",r+="  "+e.validate(y)+" ",y.baseId=I,r+=" "+v+" = "+w+"; ",$&&N?(M="ifClause"+o,r+=" var "+M+" = 'then'; "):M="'then'",r+=" } ",N&&(r+=" else { ")):r+=" if (!"+w+") { ",N&&(y.schema=e.schema.else,y.schemaPath=e.schemaPath+".else",y.errSchemaPath=e.errSchemaPath+"/else",r+="  "+e.validate(y)+" ",y.baseId=I,r+=" "+v+" = "+w+"; ",$&&N?(M="ifClause"+o,r+=" var "+M+" = 'else'; "):M="'else'",r+=" } "),r+=" if (!"+v+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { failingKeyword: "+M+" } ",e.opts.messages!==!1&&(r+=` , message: 'should match "' + `+M+` + '" schema' `),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",m&&(r+=" else { ")}else m&&(r+=" if (true) { ");return r}});var kh=me((SP,Th)=>{"use strict";Th.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="valid"+o,p="errs__"+o,y=e.util.copy(e),w="";y.level++;var E="valid"+y.level,R="i"+o,$=y.dataLevel=e.dataLevel+1,N="data"+$,I=e.baseId;if(r+="var "+p+" = errors;var "+v+";",Array.isArray(u)){var M=e.schema.additionalItems;if(M===!1){r+=" "+v+" = "+g+".length <= "+u.length+"; ";var j=h;h=e.errSchemaPath+"/additionalItems",r+="  if (!"+v+") {   ";var z=z||[];z.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+u.length+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have more than "+u.length+" items' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var W=r;r=z.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+W+"]); ":r+=" validate.errors = ["+W+"]; return false; ":r+=" var err = "+W+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h=j,m&&(w+="}",r+=" else { ")}var B=u;if(B){for(var J,te=-1,ie=B.length-1;te<ie;)if(J=B[te+=1],e.opts.strictKeywords?typeof J=="object"&&Object.keys(J).length>0||J===!1:e.util.schemaHasRules(J,e.RULES.all)){r+=" "+E+" = true; if ("+g+".length > "+te+") { ";var G=g+"["+te+"]";y.schema=J,y.schemaPath=f+"["+te+"]",y.errSchemaPath=h+"/"+te,y.errorPath=e.util.getPathExpr(e.errorPath,te,e.opts.jsonPointers,!0),y.dataPathArr[$]=te;var Q=e.validate(y);y.baseId=I,e.util.varOccurences(Q,N)<2?r+=" "+e.util.varReplace(Q,N,G)+" ":r+=" var "+N+" = "+G+"; "+Q+" ",r+=" }  ",m&&(r+=" if ("+E+") { ",w+="}")}}if(typeof M=="object"&&(e.opts.strictKeywords?typeof M=="object"&&Object.keys(M).length>0||M===!1:e.util.schemaHasRules(M,e.RULES.all))){y.schema=M,y.schemaPath=e.schemaPath+".additionalItems",y.errSchemaPath=e.errSchemaPath+"/additionalItems",r+=" "+E+" = true; if ("+g+".length > "+u.length+") {  for (var "+R+" = "+u.length+"; "+R+" < "+g+".length; "+R+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,R,e.opts.jsonPointers,!0);var G=g+"["+R+"]";y.dataPathArr[$]=R;var Q=e.validate(y);y.baseId=I,e.util.varOccurences(Q,N)<2?r+=" "+e.util.varReplace(Q,N,G)+" ":r+=" var "+N+" = "+G+"; "+Q+" ",m&&(r+=" if (!"+E+") break; "),r+=" } }  ",m&&(r+=" if ("+E+") { ",w+="}")}}else if(e.opts.strictKeywords?typeof u=="object"&&Object.keys(u).length>0||u===!1:e.util.schemaHasRules(u,e.RULES.all)){y.schema=u,y.schemaPath=f,y.errSchemaPath=h,r+="  for (var "+R+" = 0; "+R+" < "+g+".length; "+R+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,R,e.opts.jsonPointers,!0);var G=g+"["+R+"]";y.dataPathArr[$]=R;var Q=e.validate(y);y.baseId=I,e.util.varOccurences(Q,N)<2?r+=" "+e.util.varReplace(Q,N,G)+" ":r+=" var "+N+" = "+G+"; "+Q+" ",m&&(r+=" if (!"+E+") break; "),r+=" }"}return m&&(r+=" "+w+" if ("+p+" == errors) {"),r}});var cc=me((PP,Oh)=>{"use strict";Oh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,I,g="data"+(c||""),v=e.opts.$data&&u&&u.$data,p;v?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",p="schema"+o):p=u;var y=t=="maximum",w=y?"exclusiveMaximum":"exclusiveMinimum",E=e.schema[w],R=e.opts.$data&&E&&E.$data,$=y?"<":">",N=y?">":"<",I=void 0;if(!(v||typeof u=="number"||u===void 0))throw new Error(t+" must be number");if(!(R||E===void 0||typeof E=="number"||typeof E=="boolean"))throw new Error(w+" must be number or boolean");if(R){var M=e.util.getData(E.$data,c,e.dataPathArr),j="exclusive"+o,z="exclType"+o,W="exclIsNumber"+o,B="op"+o,J="' + "+B+" + '";r+=" var schemaExcl"+o+" = "+M+"; ",M="schemaExcl"+o,r+=" var "+j+"; var "+z+" = typeof "+M+"; if ("+z+" != 'boolean' && "+z+" != 'undefined' && "+z+" != 'number') { ";var I=w,te=te||[];te.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(I||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: '"+w+" should be boolean' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var ie=r;r=te.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+ie+"]); ":r+=" validate.errors = ["+ie+"]; return false; ":r+=" var err = "+ie+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" "+z+" == 'number' ? ( ("+j+" = "+p+" === undefined || "+M+" "+$+"= "+p+") ? "+g+" "+N+"= "+M+" : "+g+" "+N+" "+p+" ) : ( ("+j+" = "+M+" === true) ? "+g+" "+N+"= "+p+" : "+g+" "+N+" "+p+" ) || "+g+" !== "+g+") { var op"+o+" = "+j+" ? '"+$+"' : '"+$+"='; ",u===void 0&&(I=w,h=e.errSchemaPath+"/"+w,p=M,v=R)}else{var W=typeof E=="number",J=$;if(W&&v){var B="'"+J+"'";r+=" if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" ( "+p+" === undefined || "+E+" "+$+"= "+p+" ? "+g+" "+N+"= "+E+" : "+g+" "+N+" "+p+" ) || "+g+" !== "+g+") { "}else{W&&u===void 0?(j=!0,I=w,h=e.errSchemaPath+"/"+w,p=E,N+="="):(W&&(p=Math[y?"min":"max"](E,u)),E===(W?p:!0)?(j=!0,I=w,h=e.errSchemaPath+"/"+w,N+="="):(j=!1,J+="="));var B="'"+J+"'";r+=" if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" "+g+" "+N+" "+p+" || "+g+" !== "+g+") { "}}I=I||t;var te=te||[];te.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(I||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { comparison: "+B+", limit: "+p+", exclusive: "+j+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be "+J+" ",v?r+="' + "+p:r+=""+p+"'"),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+f:r+=""+u,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var ie=r;return r=te.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+ie+"]); ":r+=" validate.errors = ["+ie+"]; return false; ":r+=" var err = "+ie+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",m&&(r+=" else { "),r}});var uc=me((RP,Ch)=>{"use strict";Ch.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,w,g="data"+(c||""),v=e.opts.$data&&u&&u.$data,p;if(v?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",p="schema"+o):p=u,!(v||typeof u=="number"))throw new Error(t+" must be number");var y=t=="maxItems"?">":"<";r+="if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" "+g+".length "+y+" "+p+") { ";var w=t,E=E||[];E.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(w||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+p+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxItems"?r+="more":r+="fewer",r+=" than ",v?r+="' + "+p+" + '":r+=""+u,r+=" items' "),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+f:r+=""+u,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var R=r;return r=E.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",m&&(r+=" else { "),r}});var fc=me((AP,Dh)=>{"use strict";Dh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,w,g="data"+(c||""),v=e.opts.$data&&u&&u.$data,p;if(v?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",p="schema"+o):p=u,!(v||typeof u=="number"))throw new Error(t+" must be number");var y=t=="maxLength"?">":"<";r+="if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),e.opts.unicode===!1?r+=" "+g+".length ":r+=" ucs2length("+g+") ",r+=" "+y+" "+p+") { ";var w=t,E=E||[];E.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(w||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+p+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be ",t=="maxLength"?r+="longer":r+="shorter",r+=" than ",v?r+="' + "+p+" + '":r+=""+u,r+=" characters' "),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+f:r+=""+u,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var R=r;return r=E.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",m&&(r+=" else { "),r}});var dc=me((TP,Ih)=>{"use strict";Ih.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,w,g="data"+(c||""),v=e.opts.$data&&u&&u.$data,p;if(v?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",p="schema"+o):p=u,!(v||typeof u=="number"))throw new Error(t+" must be number");var y=t=="maxProperties"?">":"<";r+="if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" Object.keys("+g+").length "+y+" "+p+") { ";var w=t,E=E||[];E.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(w||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+p+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxProperties"?r+="more":r+="fewer",r+=" than ",v?r+="' + "+p+" + '":r+=""+u,r+=" properties' "),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+f:r+=""+u,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var R=r;return r=E.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",m&&(r+=" else { "),r}});var Mh=me((kP,$h)=>{"use strict";$h.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v=e.opts.$data&&u&&u.$data,p;if(v?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",p="schema"+o):p=u,!(v||typeof u=="number"))throw new Error(t+" must be number");r+="var division"+o+";if (",v&&(r+=" "+p+" !== undefined && ( typeof "+p+" != 'number' || "),r+=" (division"+o+" = "+g+" / "+p+", ",e.opts.multipleOfPrecision?r+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":r+=" division"+o+" !== parseInt(division"+o+") ",r+=" ) ",v&&(r+="  )  "),r+=" ) {   ";var y=y||[];y.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { multipleOf: "+p+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be multiple of ",v?r+="' + "+p:r+=""+p+"'"),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+f:r+=""+u,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var w=r;return r=y.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+w+"]); ":r+=" validate.errors = ["+w+"]; return false; ":r+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",m&&(r+=" else { "),r}});var Lh=me((OP,Nh)=>{"use strict";Nh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="errs__"+o,p=e.util.copy(e);p.level++;var y="valid"+p.level;if(e.opts.strictKeywords?typeof u=="object"&&Object.keys(u).length>0||u===!1:e.util.schemaHasRules(u,e.RULES.all)){p.schema=u,p.schemaPath=f,p.errSchemaPath=h,r+=" var "+v+" = errors;  ";var w=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.createErrors=!1;var E;p.opts.allErrors&&(E=p.opts.allErrors,p.opts.allErrors=!1),r+=" "+e.validate(p)+" ",p.createErrors=!0,E&&(p.opts.allErrors=E),e.compositeRule=p.compositeRule=w,r+=" if ("+y+") {   ";var R=R||[];R.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var $=r;r=R.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+$+"]); ":r+=" validate.errors = ["+$+"]; return false; ":r+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+v+"; if (vErrors !== null) { if ("+v+") vErrors.length = "+v+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",m&&(r+=" if (false) { ");return r}});var jh=me((CP,Fh)=>{"use strict";Fh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="valid"+o,p="errs__"+o,y=e.util.copy(e),w="";y.level++;var E="valid"+y.level,R=y.baseId,$="prevValid"+o,N="passingSchemas"+o;r+="var "+p+" = errors , "+$+" = false , "+v+" = false , "+N+" = null; ";var I=e.compositeRule;e.compositeRule=y.compositeRule=!0;var M=u;if(M)for(var j,z=-1,W=M.length-1;z<W;)j=M[z+=1],(e.opts.strictKeywords?typeof j=="object"&&Object.keys(j).length>0||j===!1:e.util.schemaHasRules(j,e.RULES.all))?(y.schema=j,y.schemaPath=f+"["+z+"]",y.errSchemaPath=h+"/"+z,r+="  "+e.validate(y)+" ",y.baseId=R):r+=" var "+E+" = true; ",z&&(r+=" if ("+E+" && "+$+") { "+v+" = false; "+N+" = ["+N+", "+z+"]; } else { ",w+="}"),r+=" if ("+E+") { "+v+" = "+$+" = true; "+N+" = "+z+"; }";return e.compositeRule=y.compositeRule=I,r+=""+w+"if (!"+v+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { passingSchemas: "+N+" } ",e.opts.messages!==!1&&(r+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; }",e.opts.allErrors&&(r+=" } "),r}});var zh=me((DP,qh)=>{"use strict";qh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v=e.opts.$data&&u&&u.$data,p;v?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",p="schema"+o):p=u;var y=v?"(new RegExp("+p+"))":e.usePattern(u);r+="if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'string') || "),r+=" !"+y+".test("+g+") ) {   ";var w=w||[];w.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { pattern:  ",v?r+=""+p:r+=""+e.util.toQuotedString(u),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match pattern "`,v?r+="' + "+p+" + '":r+=""+e.util.escapeQuotes(u),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+f:r+=""+e.util.toQuotedString(u),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var E=r;return r=w.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+E+"]); ":r+=" validate.errors = ["+E+"]; return false; ":r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",m&&(r+=" else { "),r}});var Hh=me((IP,Uh)=>{"use strict";Uh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="errs__"+o,p=e.util.copy(e),y="";p.level++;var w="valid"+p.level,E="key"+o,R="idx"+o,$=p.dataLevel=e.dataLevel+1,N="data"+$,I="dataProperties"+o,M=Object.keys(u||{}).filter(_e),j=e.schema.patternProperties||{},z=Object.keys(j).filter(_e),W=e.schema.additionalProperties,B=M.length||z.length,J=W===!1,te=typeof W=="object"&&Object.keys(W).length,ie=e.opts.removeAdditional,G=J||te||ie,Q=e.opts.ownProperties,se=e.baseId,Ue=e.schema.required;if(Ue&&!(e.opts.$data&&Ue.$data)&&Ue.length<e.opts.loopRequired)var ge=e.util.toHash(Ue);function _e(Ct){return Ct!=="__proto__"}if(r+="var "+v+" = errors;var "+w+" = true;",Q&&(r+=" var "+I+" = undefined;"),G){if(Q?r+=" "+I+" = "+I+" || Object.keys("+g+"); for (var "+R+"=0; "+R+"<"+I+".length; "+R+"++) { var "+E+" = "+I+"["+R+"]; ":r+=" for (var "+E+" in "+g+") { ",B){if(r+=" var isAdditional"+o+" = !(false ",M.length)if(M.length>8)r+=" || validate.schema"+f+".hasOwnProperty("+E+") ";else{var Se=M;if(Se)for(var ce,Fe=-1,xt=Se.length-1;Fe<xt;)ce=Se[Fe+=1],r+=" || "+E+" == "+e.util.toQuotedString(ce)+" "}if(z.length){var Tt=z;if(Tt)for(var Ne,Ke=-1,lt=Tt.length-1;Ke<lt;)Ne=Tt[Ke+=1],r+=" || "+e.usePattern(Ne)+".test("+E+") "}r+=" ); if (isAdditional"+o+") { "}if(ie=="all")r+=" delete "+g+"["+E+"]; ";else{var kt=e.errorPath,Vt="' + "+E+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers)),J)if(ie)r+=" delete "+g+"["+E+"]; ";else{r+=" "+w+" = false; ";var Nt=h;h=e.errSchemaPath+"/additionalProperties";var ft=ft||[];ft.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { additionalProperty: '"+Vt+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var Ye=r;r=ft.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+Ye+"]); ":r+=" validate.errors = ["+Ye+"]; return false; ":r+=" var err = "+Ye+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h=Nt,m&&(r+=" break; ")}else if(te)if(ie=="failing"){r+=" var "+v+" = errors;  ";var fr=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=W,p.schemaPath=e.schemaPath+".additionalProperties",p.errSchemaPath=e.errSchemaPath+"/additionalProperties",p.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers);var yt=g+"["+E+"]";p.dataPathArr[$]=E;var ye=e.validate(p);p.baseId=se,e.util.varOccurences(ye,N)<2?r+=" "+e.util.varReplace(ye,N,yt)+" ":r+=" var "+N+" = "+yt+"; "+ye+" ",r+=" if (!"+w+") { errors = "+v+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+g+"["+E+"]; }  ",e.compositeRule=p.compositeRule=fr}else{p.schema=W,p.schemaPath=e.schemaPath+".additionalProperties",p.errSchemaPath=e.errSchemaPath+"/additionalProperties",p.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers);var yt=g+"["+E+"]";p.dataPathArr[$]=E;var ye=e.validate(p);p.baseId=se,e.util.varOccurences(ye,N)<2?r+=" "+e.util.varReplace(ye,N,yt)+" ":r+=" var "+N+" = "+yt+"; "+ye+" ",m&&(r+=" if (!"+w+") break; ")}e.errorPath=kt}B&&(r+=" } "),r+=" }  ",m&&(r+=" if ("+w+") { ",y+="}")}var Wt=e.opts.useDefaults&&!e.compositeRule;if(M.length){var Sr=M;if(Sr)for(var ce,Ot=-1,Lr=Sr.length-1;Ot<Lr;){ce=Sr[Ot+=1];var bt=u[ce];if(e.opts.strictKeywords?typeof bt=="object"&&Object.keys(bt).length>0||bt===!1:e.util.schemaHasRules(bt,e.RULES.all)){var St=e.util.getProperty(ce),yt=g+St,Je=Wt&&bt.default!==void 0;p.schema=bt,p.schemaPath=f+St,p.errSchemaPath=h+"/"+e.util.escapeFragment(ce),p.errorPath=e.util.getPath(e.errorPath,ce,e.opts.jsonPointers),p.dataPathArr[$]=e.util.toQuotedString(ce);var ye=e.validate(p);if(p.baseId=se,e.util.varOccurences(ye,N)<2){ye=e.util.varReplace(ye,N,yt);var gt=yt}else{var gt=N;r+=" var "+N+" = "+yt+"; "}if(Je)r+=" "+ye+" ";else{if(ge&&ge[ce]){r+=" if ( "+gt+" === undefined ",Q&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(ce)+"') "),r+=") { "+w+" = false; ";var kt=e.errorPath,Nt=h,Lt=e.util.escapeQuotes(ce);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(kt,ce,e.opts.jsonPointers)),h=e.errSchemaPath+"/required";var ft=ft||[];ft.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+Lt+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+Lt+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var Ye=r;r=ft.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+Ye+"]); ":r+=" validate.errors = ["+Ye+"]; return false; ":r+=" var err = "+Ye+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h=Nt,e.errorPath=kt,r+=" } else { "}else m?(r+=" if ( "+gt+" === undefined ",Q&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(ce)+"') "),r+=") { "+w+" = true; } else { "):(r+=" if ("+gt+" !== undefined ",Q&&(r+=" &&   Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(ce)+"') "),r+=" ) { ");r+=" "+ye+" } "}}m&&(r+=" if ("+w+") { ",y+="}")}}if(z.length){var Ft=z;if(Ft)for(var Ne,Fr=-1,Ra=Ft.length-1;Fr<Ra;){Ne=Ft[Fr+=1];var bt=j[Ne];if(e.opts.strictKeywords?typeof bt=="object"&&Object.keys(bt).length>0||bt===!1:e.util.schemaHasRules(bt,e.RULES.all)){p.schema=bt,p.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(Ne),p.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(Ne),Q?r+=" "+I+" = "+I+" || Object.keys("+g+"); for (var "+R+"=0; "+R+"<"+I+".length; "+R+"++) { var "+E+" = "+I+"["+R+"]; ":r+=" for (var "+E+" in "+g+") { ",r+=" if ("+e.usePattern(Ne)+".test("+E+")) { ",p.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers);var yt=g+"["+E+"]";p.dataPathArr[$]=E;var ye=e.validate(p);p.baseId=se,e.util.varOccurences(ye,N)<2?r+=" "+e.util.varReplace(ye,N,yt)+" ":r+=" var "+N+" = "+yt+"; "+ye+" ",m&&(r+=" if (!"+w+") break; "),r+=" } ",m&&(r+=" else "+w+" = true; "),r+=" }  ",m&&(r+=" if ("+w+") { ",y+="}")}}}return m&&(r+=" "+y+" if ("+v+" == errors) {"),r}});var Bh=me(($P,Zh)=>{"use strict";Zh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="errs__"+o,p=e.util.copy(e),y="";p.level++;var w="valid"+p.level;if(r+="var "+v+" = errors;",e.opts.strictKeywords?typeof u=="object"&&Object.keys(u).length>0||u===!1:e.util.schemaHasRules(u,e.RULES.all)){p.schema=u,p.schemaPath=f,p.errSchemaPath=h;var E="key"+o,R="idx"+o,$="i"+o,N="' + "+E+" + '",I=p.dataLevel=e.dataLevel+1,M="data"+I,j="dataProperties"+o,z=e.opts.ownProperties,W=e.baseId;z&&(r+=" var "+j+" = undefined; "),z?r+=" "+j+" = "+j+" || Object.keys("+g+"); for (var "+R+"=0; "+R+"<"+j+".length; "+R+"++) { var "+E+" = "+j+"["+R+"]; ":r+=" for (var "+E+" in "+g+") { ",r+=" var startErrs"+o+" = errors; ";var B=E,J=e.compositeRule;e.compositeRule=p.compositeRule=!0;var te=e.validate(p);p.baseId=W,e.util.varOccurences(te,M)<2?r+=" "+e.util.varReplace(te,M,B)+" ":r+=" var "+M+" = "+B+"; "+te+" ",e.compositeRule=p.compositeRule=J,r+=" if (!"+w+") { for (var "+$+"=startErrs"+o+"; "+$+"<errors; "+$+"++) { vErrors["+$+"].propertyName = "+E+"; }   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { propertyName: '"+N+"' } ",e.opts.messages!==!1&&(r+=" , message: 'property name \\'"+N+"\\' is invalid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),m&&(r+=" break; "),r+=" } }"}return m&&(r+=" "+y+" if ("+v+" == errors) {"),r}});var Wh=me((MP,Vh)=>{"use strict";Vh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="valid"+o,p=e.opts.$data&&u&&u.$data,y;p?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",y="schema"+o):y=u;var w="schema"+o;if(!p)if(u.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var E=[],R=u;if(R)for(var $,N=-1,I=R.length-1;N<I;){$=R[N+=1];var M=e.schema.properties[$];M&&(e.opts.strictKeywords?typeof M=="object"&&Object.keys(M).length>0||M===!1:e.util.schemaHasRules(M,e.RULES.all))||(E[E.length]=$)}}else var E=u;if(p||E.length){var j=e.errorPath,z=p||E.length>=e.opts.loopRequired,W=e.opts.ownProperties;if(m)if(r+=" var missing"+o+"; ",z){p||(r+=" var "+w+" = validate.schema"+f+"; ");var B="i"+o,J="schema"+o+"["+B+"]",te="' + "+J+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(j,J,e.opts.jsonPointers)),r+=" var "+v+" = true; ",p&&(r+=" if (schema"+o+" === undefined) "+v+" = true; else if (!Array.isArray(schema"+o+")) "+v+" = false; else {"),r+=" for (var "+B+" = 0; "+B+" < "+w+".length; "+B+"++) { "+v+" = "+g+"["+w+"["+B+"]] !== undefined ",W&&(r+=" &&   Object.prototype.hasOwnProperty.call("+g+", "+w+"["+B+"]) "),r+="; if (!"+v+") break; } ",p&&(r+="  }  "),r+="  if (!"+v+") {   ";var ie=ie||[];ie.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+te+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+te+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var G=r;r=ie.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+G+"]); ":r+=" validate.errors = ["+G+"]; return false; ":r+=" var err = "+G+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var Q=E;if(Q)for(var se,B=-1,Ue=Q.length-1;B<Ue;){se=Q[B+=1],B&&(r+=" || ");var ge=e.util.getProperty(se),_e=g+ge;r+=" ( ( "+_e+" === undefined ",W&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(se)+"') "),r+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?se:ge)+") ) "}r+=") {  ";var J="missing"+o,te="' + "+J+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(j,J,!0):j+" + "+J);var ie=ie||[];ie.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+te+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+te+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var G=r;r=ie.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+G+"]); ":r+=" validate.errors = ["+G+"]; return false; ":r+=" var err = "+G+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(z){p||(r+=" var "+w+" = validate.schema"+f+"; ");var B="i"+o,J="schema"+o+"["+B+"]",te="' + "+J+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(j,J,e.opts.jsonPointers)),p&&(r+=" if ("+w+" && !Array.isArray("+w+")) {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+te+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+te+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+w+" !== undefined) { "),r+=" for (var "+B+" = 0; "+B+" < "+w+".length; "+B+"++) { if ("+g+"["+w+"["+B+"]] === undefined ",W&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", "+w+"["+B+"]) "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+te+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+te+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",p&&(r+="  }  ")}else{var Se=E;if(Se)for(var se,ce=-1,Fe=Se.length-1;ce<Fe;){se=Se[ce+=1];var ge=e.util.getProperty(se),te=e.util.escapeQuotes(se),_e=g+ge;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(j,se,e.opts.jsonPointers)),r+=" if ( "+_e+" === undefined ",W&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(se)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+te+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+te+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=j}else m&&(r+=" if (true) {");return r}});var Kh=me((NP,Gh)=>{"use strict";Gh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="valid"+o,p=e.opts.$data&&u&&u.$data,y;if(p?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",y="schema"+o):y=u,(u||p)&&e.opts.uniqueItems!==!1){p&&(r+=" var "+v+"; if ("+y+" === false || "+y+" === undefined) "+v+" = true; else if (typeof "+y+" != 'boolean') "+v+" = false; else { "),r+=" var i = "+g+".length , "+v+" = true , j; if (i > 1) { ";var w=e.schema.items&&e.schema.items.type,E=Array.isArray(w);if(!w||w=="object"||w=="array"||E&&(w.indexOf("object")>=0||w.indexOf("array")>=0))r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+g+"[i], "+g+"[j])) { "+v+" = false; break outer; } } } ";else{r+=" var itemIndices = {}, item; for (;i--;) { var item = "+g+"[i]; ";var R="checkDataType"+(E?"s":"");r+=" if ("+e.util[R](w,"item",e.opts.strictNumbers,!0)+") continue; ",E&&(r+=` if (typeof item == 'string') item = '"' + item; `),r+=" if (typeof itemIndices[item] == 'number') { "+v+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}r+=" } ",p&&(r+="  }  "),r+=" if (!"+v+") {   ";var $=$||[];$.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(r+=" , schema:  ",p?r+="validate.schema"+f:r+=""+u,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var N=r;r=$.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+N+"]); ":r+=" validate.errors = ["+N+"]; return false; ":r+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",m&&(r+=" else { ")}else m&&(r+=" if (true) { ");return r}});var Qh=me((LP,Yh)=>{"use strict";Yh.exports={$ref:ch(),allOf:fh(),anyOf:hh(),$comment:mh(),const:vh(),contains:yh(),dependencies:wh(),enum:xh(),format:Ph(),if:Ah(),items:kh(),maximum:cc(),minimum:cc(),maxItems:uc(),minItems:uc(),maxLength:fc(),minLength:fc(),maxProperties:dc(),minProperties:dc(),multipleOf:Mh(),not:Lh(),oneOf:jh(),pattern:zh(),properties:Hh(),propertyNames:Bh(),required:Wh(),uniqueItems:Kh(),validate:oc()}});var ep=me((FP,Xh)=>{"use strict";var Jh=Qh(),hc=Zn().toHash;Xh.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"],s=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],r=["number","integer","string","array","object","boolean","null"];return e.all=hc(t),e.types=hc(r),e.forEach(function(o){o.rules=o.rules.map(function(c){var u;if(typeof c=="object"){var f=Object.keys(c)[0];u=c[f],c=f,u.forEach(function(m){t.push(m),e.all[m]=!0})}t.push(c);var h=e.all[c]={keyword:c,code:Jh[c],implements:u};return h}),e.all.$comment={keyword:"$comment",code:Jh.$comment},o.type&&(e.types[o.type]=o)}),e.keywords=hc(t.concat(s)),e.custom={},e}});var np=me((jP,rp)=>{"use strict";var tp=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];rp.exports=function(a,e){for(var t=0;t<e.length;t++){a=JSON.parse(JSON.stringify(a));var s=e[t].split("/"),r=a,o;for(o=1;o<s.length;o++)r=r[s[o]];for(o=0;o<tp.length;o++){var c=tp[o],u=r[c];u&&(r[c]={anyOf:[u,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return a}});var sp=me((qP,ip)=>{"use strict";var yE=ks().MissingRef;ip.exports=ap;function ap(a,e,t){var s=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(t=e,e=void 0);var r=o(a).then(function(){var u=s._addSchema(a,void 0,e);return u.validate||c(u)});return t&&r.then(function(u){t(null,u)},t),r;function o(u){var f=u.$schema;return f&&!s.getSchema(f)?ap.call(s,{$ref:f},!0):Promise.resolve()}function c(u){try{return s._compile(u)}catch(h){if(h instanceof yE)return f(h);throw h}function f(h){var m=h.missingSchema;if(p(m))throw new Error("Schema "+m+" is loaded but "+h.missingRef+" cannot be resolved");var g=s._loadingSchemas[m];return g||(g=s._loadingSchemas[m]=s._opts.loadSchema(m),g.then(v,v)),g.then(function(y){if(!p(m))return o(y).then(function(){p(m)||s.addSchema(y,m,void 0,e)})}).then(function(){return c(u)});function v(){delete s._loadingSchemas[m]}function p(y){return s._refs[y]||s._schemas[y]}}}}});var lp=me((zP,op)=>{"use strict";op.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g,v="data"+(c||""),p="valid"+o,y="errs__"+o,w=e.opts.$data&&u&&u.$data,E;w?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",E="schema"+o):E=u;var R=this,$="definition"+o,N=R.definition,I="",M,j,z,W,B;if(w&&N.$data){B="keywordValidate"+o;var J=N.validateSchema;r+=" var "+$+" = RULES.custom['"+t+"'].definition; var "+B+" = "+$+".validate;"}else{if(W=e.useCustomRule(R,u,e.schema,e),!W)return;E="validate.schema"+f,B=W.code,M=N.compile,j=N.inline,z=N.macro}var te=B+".errors",ie="i"+o,G="ruleErr"+o,Q=N.async;if(Q&&!e.async)throw new Error("async keyword in sync schema");if(j||z||(r+=""+te+" = null;"),r+="var "+y+" = errors;var "+p+";",w&&N.$data&&(I+="}",r+=" if ("+E+" === undefined) { "+p+" = true; } else { ",J&&(I+="}",r+=" "+p+" = "+$+".validateSchema("+E+"); if ("+p+") { ")),j)N.statements?r+=" "+W.validate+" ":r+=" "+p+" = "+W.validate+"; ";else if(z){var se=e.util.copy(e),I="";se.level++;var Ue="valid"+se.level;se.schema=W.validate,se.schemaPath="";var ge=e.compositeRule;e.compositeRule=se.compositeRule=!0;var _e=e.validate(se).replace(/validate\.schema/g,B);e.compositeRule=se.compositeRule=ge,r+=" "+_e}else{var Se=Se||[];Se.push(r),r="",r+="  "+B+".call( ",e.opts.passContext?r+="this":r+="self",M||N.schema===!1?r+=" , "+v+" ":r+=" , "+E+" , "+v+" , validate.schema"+e.schemaPath+" ",r+=" , (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var ce=c?"data"+(c-1||""):"parentData",Fe=c?e.dataPathArr[c]:"parentDataProperty";r+=" , "+ce+" , "+Fe+" , rootData )  ";var xt=r;r=Se.pop(),N.errors===!1?(r+=" "+p+" = ",Q&&(r+="await "),r+=""+xt+"; "):Q?(te="customErrors"+o,r+=" var "+te+" = null; try { "+p+" = await "+xt+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+te+" = e.errors; else throw e; } "):r+=" "+te+" = null; "+p+" = "+xt+"; "}if(N.modifying&&(r+=" if ("+ce+") "+v+" = "+ce+"["+Fe+"];"),r+=""+I,N.valid)m&&(r+=" if (true) { ");else{r+=" if ( ",N.valid===void 0?(r+=" !",z?r+=""+Ue:r+=""+p):r+=" "+!N.valid+" ",r+=") { ",g=R.keyword;var Se=Se||[];Se.push(r),r="";var Se=Se||[];Se.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(g||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { keyword: '"+R.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+R.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),r+=" } "):r+=" {} ";var Tt=r;r=Se.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+Tt+"]); ":r+=" validate.errors = ["+Tt+"]; return false; ":r+=" var err = "+Tt+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var Ne=r;r=Se.pop(),j?N.errors?N.errors!="full"&&(r+="  for (var "+ie+"="+y+"; "+ie+"<errors; "+ie+"++) { var "+G+" = vErrors["+ie+"]; if ("+G+".dataPath === undefined) "+G+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+G+".schemaPath === undefined) { "+G+'.schemaPath = "'+h+'"; } ',e.opts.verbose&&(r+=" "+G+".schema = "+E+"; "+G+".data = "+v+"; "),r+=" } "):N.errors===!1?r+=" "+Ne+" ":(r+=" if ("+y+" == errors) { "+Ne+" } else {  for (var "+ie+"="+y+"; "+ie+"<errors; "+ie+"++) { var "+G+" = vErrors["+ie+"]; if ("+G+".dataPath === undefined) "+G+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+G+".schemaPath === undefined) { "+G+'.schemaPath = "'+h+'"; } ',e.opts.verbose&&(r+=" "+G+".schema = "+E+"; "+G+".data = "+v+"; "),r+=" } } "):z?(r+="   var err =   ",e.createErrors!==!1?(r+=" { keyword: '"+(g||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { keyword: '"+R.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+R.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; ")):N.errors===!1?r+=" "+Ne+" ":(r+=" if (Array.isArray("+te+")) { if (vErrors === null) vErrors = "+te+"; else vErrors = vErrors.concat("+te+"); errors = vErrors.length;  for (var "+ie+"="+y+"; "+ie+"<errors; "+ie+"++) { var "+G+" = vErrors["+ie+"]; if ("+G+".dataPath === undefined) "+G+".dataPath = (dataPath || '') + "+e.errorPath+";  "+G+'.schemaPath = "'+h+'";  ',e.opts.verbose&&(r+=" "+G+".schema = "+E+"; "+G+".data = "+v+"; "),r+=" } } else { "+Ne+" } "),r+=" } ",m&&(r+=" else { ")}return r}});var pc=me((UP,bE)=>{bE.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var fp=me((HP,up)=>{"use strict";var cp=pc();up.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:cp.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:cp.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var hp=me((ZP,dp)=>{"use strict";var wE=/^[a-z_$][a-z0-9_$-]*$/i,EE=lp(),xE=fp();dp.exports={add:SE,get:PE,remove:RE,validate:mc};function SE(a,e){var t=this.RULES;if(t.keywords[a])throw new Error("Keyword "+a+" is already defined");if(!wE.test(a))throw new Error("Keyword "+a+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var s=e.type;if(Array.isArray(s))for(var r=0;r<s.length;r++)c(a,s[r],e);else c(a,s,e);var o=e.metaSchema;o&&(e.$data&&this._opts.$data&&(o={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(o,!0))}t.keywords[a]=t.all[a]=!0;function c(u,f,h){for(var m,g=0;g<t.length;g++){var v=t[g];if(v.type==f){m=v;break}}m||(m={type:f,rules:[]},t.push(m));var p={keyword:u,definition:h,custom:!0,code:EE,implements:h.implements};m.rules.push(p),t.custom[u]=p}return this}function PE(a){var e=this.RULES.custom[a];return e?e.definition:this.RULES.keywords[a]||!1}function RE(a){var e=this.RULES;delete e.keywords[a],delete e.all[a],delete e.custom[a];for(var t=0;t<e.length;t++)for(var s=e[t].rules,r=0;r<s.length;r++)if(s[r].keyword==a){s.splice(r,1);break}return this}function mc(a,e){mc.errors=null;var t=this._validateKeyword=this._validateKeyword||this.compile(xE,!0);if(t(a))return!0;if(mc.errors=t.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(t.errors));return!1}});var pp=me((BP,AE)=>{AE.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Sp=me((VP,xp)=>{"use strict";var gp=Wd(),Bn=Ts(),TE=Kd(),vp=ec(),kE=sc(),OE=oh(),CE=ep(),_p=np(),yp=Zn();xp.exports=pt;pt.prototype.validate=IE;pt.prototype.compile=$E;pt.prototype.addSchema=ME;pt.prototype.addMetaSchema=NE;pt.prototype.validateSchema=LE;pt.prototype.getSchema=jE;pt.prototype.removeSchema=zE;pt.prototype.addFormat=KE;pt.prototype.errorsText=GE;pt.prototype._addSchema=UE;pt.prototype._compile=HE;pt.prototype.compileAsync=sp();var Ls=hp();pt.prototype.addKeyword=Ls.add;pt.prototype.getKeyword=Ls.get;pt.prototype.removeKeyword=Ls.remove;pt.prototype.validateKeyword=Ls.validate;var bp=ks();pt.ValidationError=bp.Validation;pt.MissingRefError=bp.MissingRef;pt.$dataMetaSchema=_p;var Ns="http://json-schema.org/draft-07/schema",mp=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],DE=["/properties"];function pt(a){if(!(this instanceof pt))return new pt(a);a=this._opts=yp.copy(a)||{},tx(this),this._schemas={},this._refs={},this._fragments={},this._formats=OE(a.format),this._cache=a.cache||new TE,this._loadingSchemas={},this._compilations=[],this.RULES=CE(),this._getId=ZE(a),a.loopRequired=a.loopRequired||1/0,a.errorDataPath=="property"&&(a._errorDataPathProperty=!0),a.serialize===void 0&&(a.serialize=kE),this._metaOpts=ex(this),a.formats&&JE(this),a.keywords&&XE(this),YE(this),typeof a.meta=="object"&&this.addMetaSchema(a.meta),a.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),QE(this)}function IE(a,e){var t;if(typeof a=="string"){if(t=this.getSchema(a),!t)throw new Error('no schema with key or ref "'+a+'"')}else{var s=this._addSchema(a);t=s.validate||this._compile(s)}var r=t(e);return t.$async!==!0&&(this.errors=t.errors),r}function $E(a,e){var t=this._addSchema(a,void 0,e);return t.validate||this._compile(t)}function ME(a,e,t,s){if(Array.isArray(a)){for(var r=0;r<a.length;r++)this.addSchema(a[r],void 0,t,s);return this}var o=this._getId(a);if(o!==void 0&&typeof o!="string")throw new Error("schema id must be string");return e=Bn.normalizeId(e||o),Ep(this,e),this._schemas[e]=this._addSchema(a,t,s,!0),this}function NE(a,e,t){return this.addSchema(a,e,t,!0),this}function LE(a,e){var t=a.$schema;if(t!==void 0&&typeof t!="string")throw new Error("$schema must be a string");if(t=t||this._opts.defaultMeta||FE(this),!t)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var s=this.validate(t,a);if(!s&&e){var r="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(r);else throw new Error(r)}return s}function FE(a){var e=a._opts.meta;return a._opts.defaultMeta=typeof e=="object"?a._getId(e)||e:a.getSchema(Ns)?Ns:void 0,a._opts.defaultMeta}function jE(a){var e=wp(this,a);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return qE(this,a)}}function qE(a,e){var t=Bn.schema.call(a,{schema:{}},e);if(t){var s=t.schema,r=t.root,o=t.baseId,c=gp.call(a,s,r,void 0,o);return a._fragments[e]=new vp({ref:e,fragment:!0,schema:s,root:r,baseId:o,validate:c}),c}}function wp(a,e){return e=Bn.normalizeId(e),a._schemas[e]||a._refs[e]||a._fragments[e]}function zE(a){if(a instanceof RegExp)return Ms(this,this._schemas,a),Ms(this,this._refs,a),this;switch(typeof a){case"undefined":return Ms(this,this._schemas),Ms(this,this._refs),this._cache.clear(),this;case"string":var e=wp(this,a);return e&&this._cache.del(e.cacheKey),delete this._schemas[a],delete this._refs[a],this;case"object":var t=this._opts.serialize,s=t?t(a):a;this._cache.del(s);var r=this._getId(a);r&&(r=Bn.normalizeId(r),delete this._schemas[r],delete this._refs[r])}return this}function Ms(a,e,t){for(var s in e){var r=e[s];!r.meta&&(!t||t.test(s))&&(a._cache.del(r.cacheKey),delete e[s])}}function UE(a,e,t,s){if(typeof a!="object"&&typeof a!="boolean")throw new Error("schema should be object or boolean");var r=this._opts.serialize,o=r?r(a):a,c=this._cache.get(o);if(c)return c;s=s||this._opts.addUsedSchema!==!1;var u=Bn.normalizeId(this._getId(a));u&&s&&Ep(this,u);var f=this._opts.validateSchema!==!1&&!e,h;f&&!(h=u&&u==Bn.normalizeId(a.$schema))&&this.validateSchema(a,!0);var m=Bn.ids.call(this,a),g=new vp({id:u,schema:a,localRefs:m,cacheKey:o,meta:t});return u[0]!="#"&&s&&(this._refs[u]=g),this._cache.put(o,g),f&&h&&this.validateSchema(a,!0),g}function HE(a,e){if(a.compiling)return a.validate=r,r.schema=a.schema,r.errors=null,r.root=e||r,a.schema.$async===!0&&(r.$async=!0),r;a.compiling=!0;var t;a.meta&&(t=this._opts,this._opts=this._metaOpts);var s;try{s=gp.call(this,a.schema,e,a.localRefs)}catch(o){throw delete a.validate,o}finally{a.compiling=!1,a.meta&&(this._opts=t)}return a.validate=s,a.refs=s.refs,a.refVal=s.refVal,a.root=s.root,s;function r(){var o=a.validate,c=o.apply(this,arguments);return r.errors=o.errors,c}}function ZE(a){switch(a.schemaId){case"auto":return WE;case"id":return BE;default:return VE}}function BE(a){return a.$id&&this.logger.warn("schema $id ignored",a.$id),a.id}function VE(a){return a.id&&this.logger.warn("schema id ignored",a.id),a.$id}function WE(a){if(a.$id&&a.id&&a.$id!=a.id)throw new Error("schema $id is different from id");return a.$id||a.id}function GE(a,e){if(a=a||this.errors,!a)return"No errors";e=e||{};for(var t=e.separator===void 0?", ":e.separator,s=e.dataVar===void 0?"data":e.dataVar,r="",o=0;o<a.length;o++){var c=a[o];c&&(r+=s+c.dataPath+" "+c.message+t)}return r.slice(0,-t.length)}function KE(a,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[a]=e,this}function YE(a){var e;if(a._opts.$data&&(e=pp(),a.addMetaSchema(e,e.$id,!0)),a._opts.meta!==!1){var t=pc();a._opts.$data&&(t=_p(t,DE)),a.addMetaSchema(t,Ns,!0),a._refs["http://json-schema.org/schema"]=Ns}}function QE(a){var e=a._opts.schemas;if(e)if(Array.isArray(e))a.addSchema(e);else for(var t in e)a.addSchema(e[t],t)}function JE(a){for(var e in a._opts.formats){var t=a._opts.formats[e];a.addFormat(e,t)}}function XE(a){for(var e in a._opts.keywords){var t=a._opts.keywords[e];a.addKeyword(e,t)}}function Ep(a,e){if(a._schemas[e]||a._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function ex(a){for(var e=yp.copy(a._opts),t=0;t<mp.length;t++)delete e[mp[t]];return e}function tx(a){var e=a._opts.logger;if(e===!1)a.logger={log:gc,warn:gc,error:gc};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");a.logger=e}}function gc(){}});var Ec={};I1(Ec,{configSchema:()=>px,default:()=>um});var b=require("zod"),Ml="2025-06-18";var id=[Ml,"2025-03-26","2024-11-05","2024-10-07"],rs="2.0",sd=b.z.union([b.z.string(),b.z.number().int()]),od=b.z.string(),M1=b.z.object({progressToken:b.z.optional(sd)}).passthrough(),Er=b.z.object({_meta:b.z.optional(M1)}).passthrough(),er=b.z.object({method:b.z.string(),params:b.z.optional(Er)}),Ga=b.z.object({_meta:b.z.optional(b.z.object({}).passthrough())}).passthrough(),Br=b.z.object({method:b.z.string(),params:b.z.optional(Ga)}),xr=b.z.object({_meta:b.z.optional(b.z.object({}).passthrough())}).passthrough(),ns=b.z.union([b.z.string(),b.z.number().int()]),ld=b.z.object({jsonrpc:b.z.literal(rs),id:ns}).merge(er).strict(),cd=a=>ld.safeParse(a).success,ud=b.z.object({jsonrpc:b.z.literal(rs)}).merge(Br).strict(),fd=a=>ud.safeParse(a).success,dd=b.z.object({jsonrpc:b.z.literal(rs),id:ns,result:xr}).strict(),Nl=a=>dd.safeParse(a).success,tt;(function(a){a[a.ConnectionClosed=-32e3]="ConnectionClosed",a[a.RequestTimeout=-32001]="RequestTimeout",a[a.ParseError=-32700]="ParseError",a[a.InvalidRequest=-32600]="InvalidRequest",a[a.MethodNotFound=-32601]="MethodNotFound",a[a.InvalidParams=-32602]="InvalidParams",a[a.InternalError=-32603]="InternalError"})(tt||(tt={}));var hd=b.z.object({jsonrpc:b.z.literal(rs),id:ns,error:b.z.object({code:b.z.number().int(),message:b.z.string(),data:b.z.optional(b.z.unknown())})}).strict(),pd=a=>hd.safeParse(a).success,md=b.z.union([ld,ud,dd,hd]),as=xr.strict(),is=Br.extend({method:b.z.literal("notifications/cancelled"),params:Ga.extend({requestId:ns,reason:b.z.string().optional()})}),ss=b.z.object({src:b.z.string(),mimeType:b.z.optional(b.z.string()),sizes:b.z.optional(b.z.string())}).passthrough(),Ka=b.z.object({name:b.z.string(),title:b.z.optional(b.z.string())}).passthrough(),gd=Ka.extend({version:b.z.string(),websiteUrl:b.z.optional(b.z.string()),icons:b.z.optional(b.z.array(ss))}),N1=b.z.object({experimental:b.z.optional(b.z.object({}).passthrough()),sampling:b.z.optional(b.z.object({}).passthrough()),elicitation:b.z.optional(b.z.object({}).passthrough()),roots:b.z.optional(b.z.object({listChanged:b.z.optional(b.z.boolean())}).passthrough())}).passthrough(),Ll=er.extend({method:b.z.literal("initialize"),params:Er.extend({protocolVersion:b.z.string(),capabilities:N1,clientInfo:gd})});var L1=b.z.object({experimental:b.z.optional(b.z.object({}).passthrough()),logging:b.z.optional(b.z.object({}).passthrough()),completions:b.z.optional(b.z.object({}).passthrough()),prompts:b.z.optional(b.z.object({listChanged:b.z.optional(b.z.boolean())}).passthrough()),resources:b.z.optional(b.z.object({subscribe:b.z.optional(b.z.boolean()),listChanged:b.z.optional(b.z.boolean())}).passthrough()),tools:b.z.optional(b.z.object({listChanged:b.z.optional(b.z.boolean())}).passthrough())}).passthrough(),F1=xr.extend({protocolVersion:b.z.string(),capabilities:L1,serverInfo:gd,instructions:b.z.optional(b.z.string())}),Fl=Br.extend({method:b.z.literal("notifications/initialized")});var os=er.extend({method:b.z.literal("ping")}),j1=b.z.object({progress:b.z.number(),total:b.z.optional(b.z.number()),message:b.z.optional(b.z.string())}).passthrough(),ls=Br.extend({method:b.z.literal("notifications/progress"),params:Ga.merge(j1).extend({progressToken:sd})}),cs=er.extend({params:Er.extend({cursor:b.z.optional(od)}).optional()}),us=xr.extend({nextCursor:b.z.optional(od)}),vd=b.z.object({uri:b.z.string(),mimeType:b.z.optional(b.z.string()),_meta:b.z.optional(b.z.object({}).passthrough())}).passthrough(),_d=vd.extend({text:b.z.string()}),jl=b.z.string().refine(a=>{try{return atob(a),!0}catch{return!1}},{message:"Invalid Base64 string"}),yd=vd.extend({blob:jl}),bd=Ka.extend({uri:b.z.string(),description:b.z.optional(b.z.string()),mimeType:b.z.optional(b.z.string()),icons:b.z.optional(b.z.array(ss)),_meta:b.z.optional(b.z.object({}).passthrough())}),q1=Ka.extend({uriTemplate:b.z.string(),description:b.z.optional(b.z.string()),mimeType:b.z.optional(b.z.string()),_meta:b.z.optional(b.z.object({}).passthrough())}),fs=cs.extend({method:b.z.literal("resources/list")}),z1=us.extend({resources:b.z.array(bd)}),ds=cs.extend({method:b.z.literal("resources/templates/list")}),U1=us.extend({resourceTemplates:b.z.array(q1)}),hs=er.extend({method:b.z.literal("resources/read"),params:Er.extend({uri:b.z.string()})}),H1=xr.extend({contents:b.z.array(b.z.union([_d,yd]))}),Z1=Br.extend({method:b.z.literal("notifications/resources/list_changed")}),B1=er.extend({method:b.z.literal("resources/subscribe"),params:Er.extend({uri:b.z.string()})}),V1=er.extend({method:b.z.literal("resources/unsubscribe"),params:Er.extend({uri:b.z.string()})}),W1=Br.extend({method:b.z.literal("notifications/resources/updated"),params:Ga.extend({uri:b.z.string()})}),G1=b.z.object({name:b.z.string(),description:b.z.optional(b.z.string()),required:b.z.optional(b.z.boolean())}).passthrough(),K1=Ka.extend({description:b.z.optional(b.z.string()),arguments:b.z.optional(b.z.array(G1)),icons:b.z.optional(b.z.array(ss)),_meta:b.z.optional(b.z.object({}).passthrough())}),ps=cs.extend({method:b.z.literal("prompts/list")}),Y1=us.extend({prompts:b.z.array(K1)}),ms=er.extend({method:b.z.literal("prompts/get"),params:Er.extend({name:b.z.string(),arguments:b.z.optional(b.z.record(b.z.string()))})}),ql=b.z.object({type:b.z.literal("text"),text:b.z.string(),_meta:b.z.optional(b.z.object({}).passthrough())}).passthrough(),zl=b.z.object({type:b.z.literal("image"),data:jl,mimeType:b.z.string(),_meta:b.z.optional(b.z.object({}).passthrough())}).passthrough(),Ul=b.z.object({type:b.z.literal("audio"),data:jl,mimeType:b.z.string(),_meta:b.z.optional(b.z.object({}).passthrough())}).passthrough(),Q1=b.z.object({type:b.z.literal("resource"),resource:b.z.union([_d,yd]),_meta:b.z.optional(b.z.object({}).passthrough())}).passthrough(),J1=bd.extend({type:b.z.literal("resource_link")}),wd=b.z.union([ql,zl,Ul,J1,Q1]),X1=b.z.object({role:b.z.enum(["user","assistant"]),content:wd}).passthrough(),ew=xr.extend({description:b.z.optional(b.z.string()),messages:b.z.array(X1)}),tw=Br.extend({method:b.z.literal("notifications/prompts/list_changed")}),rw=b.z.object({title:b.z.optional(b.z.string()),readOnlyHint:b.z.optional(b.z.boolean()),destructiveHint:b.z.optional(b.z.boolean()),idempotentHint:b.z.optional(b.z.boolean()),openWorldHint:b.z.optional(b.z.boolean())}).passthrough(),nw=Ka.extend({description:b.z.optional(b.z.string()),inputSchema:b.z.object({type:b.z.literal("object"),properties:b.z.optional(b.z.object({}).passthrough()),required:b.z.optional(b.z.array(b.z.string()))}).passthrough(),outputSchema:b.z.optional(b.z.object({type:b.z.literal("object"),properties:b.z.optional(b.z.object({}).passthrough()),required:b.z.optional(b.z.array(b.z.string()))}).passthrough()),annotations:b.z.optional(rw),icons:b.z.optional(b.z.array(ss)),_meta:b.z.optional(b.z.object({}).passthrough())}),gs=cs.extend({method:b.z.literal("tools/list")}),aw=us.extend({tools:b.z.array(nw)}),Ed=xr.extend({content:b.z.array(wd).default([]),structuredContent:b.z.object({}).passthrough().optional(),isError:b.z.optional(b.z.boolean())}),VS=Ed.or(xr.extend({toolResult:b.z.unknown()})),vs=er.extend({method:b.z.literal("tools/call"),params:Er.extend({name:b.z.string(),arguments:b.z.optional(b.z.record(b.z.unknown()))})}),iw=Br.extend({method:b.z.literal("notifications/tools/list_changed")}),Ya=b.z.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),Hl=er.extend({method:b.z.literal("logging/setLevel"),params:Er.extend({level:Ya})}),sw=Br.extend({method:b.z.literal("notifications/message"),params:Ga.extend({level:Ya,logger:b.z.optional(b.z.string()),data:b.z.unknown()})}),ow=b.z.object({name:b.z.string().optional()}).passthrough(),lw=b.z.object({hints:b.z.optional(b.z.array(ow)),costPriority:b.z.optional(b.z.number().min(0).max(1)),speedPriority:b.z.optional(b.z.number().min(0).max(1)),intelligencePriority:b.z.optional(b.z.number().min(0).max(1))}).passthrough(),cw=b.z.object({role:b.z.enum(["user","assistant"]),content:b.z.union([ql,zl,Ul])}).passthrough(),uw=er.extend({method:b.z.literal("sampling/createMessage"),params:Er.extend({messages:b.z.array(cw),systemPrompt:b.z.optional(b.z.string()),includeContext:b.z.optional(b.z.enum(["none","thisServer","allServers"])),temperature:b.z.optional(b.z.number()),maxTokens:b.z.number().int(),stopSequences:b.z.optional(b.z.array(b.z.string())),metadata:b.z.optional(b.z.object({}).passthrough()),modelPreferences:b.z.optional(lw)})}),Zl=xr.extend({model:b.z.string(),stopReason:b.z.optional(b.z.enum(["endTurn","stopSequence","maxTokens"]).or(b.z.string())),role:b.z.enum(["user","assistant"]),content:b.z.discriminatedUnion("type",[ql,zl,Ul])}),fw=b.z.object({type:b.z.literal("boolean"),title:b.z.optional(b.z.string()),description:b.z.optional(b.z.string()),default:b.z.optional(b.z.boolean())}).passthrough(),dw=b.z.object({type:b.z.literal("string"),title:b.z.optional(b.z.string()),description:b.z.optional(b.z.string()),minLength:b.z.optional(b.z.number()),maxLength:b.z.optional(b.z.number()),format:b.z.optional(b.z.enum(["email","uri","date","date-time"]))}).passthrough(),hw=b.z.object({type:b.z.enum(["number","integer"]),title:b.z.optional(b.z.string()),description:b.z.optional(b.z.string()),minimum:b.z.optional(b.z.number()),maximum:b.z.optional(b.z.number())}).passthrough(),pw=b.z.object({type:b.z.literal("string"),title:b.z.optional(b.z.string()),description:b.z.optional(b.z.string()),enum:b.z.array(b.z.string()),enumNames:b.z.optional(b.z.array(b.z.string()))}).passthrough(),mw=b.z.union([fw,dw,hw,pw]),gw=er.extend({method:b.z.literal("elicitation/create"),params:Er.extend({message:b.z.string(),requestedSchema:b.z.object({type:b.z.literal("object"),properties:b.z.record(b.z.string(),mw),required:b.z.optional(b.z.array(b.z.string()))}).passthrough()})}),Bl=xr.extend({action:b.z.enum(["accept","decline","cancel"]),content:b.z.optional(b.z.record(b.z.string(),b.z.unknown()))}),vw=b.z.object({type:b.z.literal("ref/resource"),uri:b.z.string()}).passthrough();var _w=b.z.object({type:b.z.literal("ref/prompt"),name:b.z.string()}).passthrough(),_s=er.extend({method:b.z.literal("completion/complete"),params:Er.extend({ref:b.z.union([_w,vw]),argument:b.z.object({name:b.z.string(),value:b.z.string()}).passthrough(),context:b.z.optional(b.z.object({arguments:b.z.optional(b.z.record(b.z.string(),b.z.string()))}))})}),yw=xr.extend({completion:b.z.object({values:b.z.array(b.z.string()).max(100),total:b.z.optional(b.z.number().int()),hasMore:b.z.optional(b.z.boolean())}).passthrough()}),bw=b.z.object({uri:b.z.string().startsWith("file://"),name:b.z.optional(b.z.string()),_meta:b.z.optional(b.z.object({}).passthrough())}).passthrough(),ww=er.extend({method:b.z.literal("roots/list")}),Vl=xr.extend({roots:b.z.array(bw)}),Ew=Br.extend({method:b.z.literal("notifications/roots/list_changed")}),WS=b.z.union([os,Ll,_s,Hl,ms,ps,fs,ds,hs,B1,V1,vs,gs]),GS=b.z.union([is,ls,Fl,Ew]),KS=b.z.union([as,Zl,Bl,Vl]),YS=b.z.union([os,uw,gw,ww]),QS=b.z.union([is,ls,sw,W1,Z1,iw,tw]),JS=b.z.union([as,F1,yw,ew,Y1,z1,U1,H1,Ed,aw]),rt=class extends Error{constructor(e,t,s){super(`MCP error ${e}: ${t}`),this.code=e,this.data=s,this.name="McpError"}};var xw=6e4,ys=class{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(is,t=>{let s=this._requestHandlerAbortControllers.get(t.params.requestId);s?.abort(t.params.reason)}),this.setNotificationHandler(ls,t=>{this._onprogress(t)}),this.setRequestHandler(os,t=>({}))}_setupTimeout(e,t,s,r,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(r,t),startTime:Date.now(),timeout:t,maxTotalTimeout:s,resetTimeoutOnProgress:o,onTimeout:r})}_resetTimeout(e){let t=this._timeoutInfo.get(e);if(!t)return!1;let s=Date.now()-t.startTime;if(t.maxTotalTimeout&&s>=t.maxTotalTimeout)throw this._timeoutInfo.delete(e),new rt(tt.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:t.maxTotalTimeout,totalElapsed:s});return clearTimeout(t.timeoutId),t.timeoutId=setTimeout(t.onTimeout,t.timeout),!0}_cleanupTimeout(e){let t=this._timeoutInfo.get(e);t&&(clearTimeout(t.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var t,s,r;this._transport=e;let o=(t=this.transport)===null||t===void 0?void 0:t.onclose;this._transport.onclose=()=>{o?.(),this._onclose()};let c=(s=this.transport)===null||s===void 0?void 0:s.onerror;this._transport.onerror=f=>{c?.(f),this._onerror(f)};let u=(r=this._transport)===null||r===void 0?void 0:r.onmessage;this._transport.onmessage=(f,h)=>{u?.(f,h),Nl(f)||pd(f)?this._onresponse(f):cd(f)?this._onrequest(f,h):fd(f)?this._onnotification(f):this._onerror(new Error(`Unknown message type: ${JSON.stringify(f)}`))},await this._transport.start()}_onclose(){var e;let t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let s=new rt(tt.ConnectionClosed,"Connection closed");for(let r of t.values())r(s)}_onerror(e){var t;(t=this.onerror)===null||t===void 0||t.call(this,e)}_onnotification(e){var t;let s=(t=this._notificationHandlers.get(e.method))!==null&&t!==void 0?t:this.fallbackNotificationHandler;s!==void 0&&Promise.resolve().then(()=>s(e)).catch(r=>this._onerror(new Error(`Uncaught error in notification handler: ${r}`)))}_onrequest(e,t){var s,r;let o=(s=this._requestHandlers.get(e.method))!==null&&s!==void 0?s:this.fallbackRequestHandler,c=this._transport;if(o===void 0){c?.send({jsonrpc:"2.0",id:e.id,error:{code:tt.MethodNotFound,message:"Method not found"}}).catch(h=>this._onerror(new Error(`Failed to send an error response: ${h}`)));return}let u=new AbortController;this._requestHandlerAbortControllers.set(e.id,u);let f={signal:u.signal,sessionId:c?.sessionId,_meta:(r=e.params)===null||r===void 0?void 0:r._meta,sendNotification:h=>this.notification(h,{relatedRequestId:e.id}),sendRequest:(h,m,g)=>this.request(h,m,{...g,relatedRequestId:e.id}),authInfo:t?.authInfo,requestId:e.id,requestInfo:t?.requestInfo};Promise.resolve().then(()=>o(e,f)).then(h=>{if(!u.signal.aborted)return c?.send({result:h,jsonrpc:"2.0",id:e.id})},h=>{var m;if(!u.signal.aborted)return c?.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(h.code)?h.code:tt.InternalError,message:(m=h.message)!==null&&m!==void 0?m:"Internal error"}})}).catch(h=>this._onerror(new Error(`Failed to send response: ${h}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:t,...s}=e.params,r=Number(t),o=this._progressHandlers.get(r);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let c=this._responseHandlers.get(r),u=this._timeoutInfo.get(r);if(u&&c&&u.resetTimeoutOnProgress)try{this._resetTimeout(r)}catch(f){c(f);return}o(s)}_onresponse(e){let t=Number(e.id),s=this._responseHandlers.get(t);if(s===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(t),this._progressHandlers.delete(t),this._cleanupTimeout(t),Nl(e))s(e);else{let r=new rt(e.error.code,e.error.message,e.error.data);s(r)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,t,s){let{relatedRequestId:r,resumptionToken:o,onresumptiontoken:c}=s??{};return new Promise((u,f)=>{var h,m,g,v,p,y;if(!this._transport){f(new Error("Not connected"));return}((h=this._options)===null||h===void 0?void 0:h.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(m=s?.signal)===null||m===void 0||m.throwIfAborted();let w=this._requestMessageId++,E={...e,jsonrpc:"2.0",id:w};s?.onprogress&&(this._progressHandlers.set(w,s.onprogress),E.params={...e.params,_meta:{...((g=e.params)===null||g===void 0?void 0:g._meta)||{},progressToken:w}});let R=I=>{var M;this._responseHandlers.delete(w),this._progressHandlers.delete(w),this._cleanupTimeout(w),(M=this._transport)===null||M===void 0||M.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:w,reason:String(I)}},{relatedRequestId:r,resumptionToken:o,onresumptiontoken:c}).catch(j=>this._onerror(new Error(`Failed to send cancellation: ${j}`))),f(I)};this._responseHandlers.set(w,I=>{var M;if(!(!((M=s?.signal)===null||M===void 0)&&M.aborted)){if(I instanceof Error)return f(I);try{let j=t.parse(I.result);u(j)}catch(j){f(j)}}}),(v=s?.signal)===null||v===void 0||v.addEventListener("abort",()=>{var I;R((I=s?.signal)===null||I===void 0?void 0:I.reason)});let $=(p=s?.timeout)!==null&&p!==void 0?p:xw,N=()=>R(new rt(tt.RequestTimeout,"Request timed out",{timeout:$}));this._setupTimeout(w,$,s?.maxTotalTimeout,N,(y=s?.resetTimeoutOnProgress)!==null&&y!==void 0?y:!1),this._transport.send(E,{relatedRequestId:r,resumptionToken:o,onresumptiontoken:c}).catch(I=>{this._cleanupTimeout(w),f(I)})})}async notification(e,t){var s,r;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(e.method),((r=(s=this._options)===null||s===void 0?void 0:s.debouncedNotificationMethods)!==null&&r!==void 0?r:[]).includes(e.method)&&!e.params&&!t?.relatedRequestId){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{var f;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let h={...e,jsonrpc:"2.0"};(f=this._transport)===null||f===void 0||f.send(h,t).catch(m=>this._onerror(m))});return}let u={...e,jsonrpc:"2.0"};await this._transport.send(u,t)}setRequestHandler(e,t){let s=e.shape.method.value;this.assertRequestHandlerCapability(s),this._requestHandlers.set(s,(r,o)=>Promise.resolve(t(e.parse(r),o)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,t){this._notificationHandlers.set(e.shape.method.value,s=>Promise.resolve(t(e.parse(s))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function xd(a,e){return Object.entries(e).reduce((t,[s,r])=>(r&&typeof r=="object"?t[s]=t[s]?{...t[s],...r}:r:t[s]=r,t),{...a})}var Pp=$l(Sp(),1),Fs=class extends ys{constructor(e,t){var s;super(t),this._serverInfo=e,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(Ya.options.map((r,o)=>[r,o])),this.isMessageIgnored=(r,o)=>{let c=this._loggingLevels.get(o);return c?this.LOG_LEVEL_SEVERITY.get(r)<this.LOG_LEVEL_SEVERITY.get(c):!1},this._capabilities=(s=t?.capabilities)!==null&&s!==void 0?s:{},this._instructions=t?.instructions,this.setRequestHandler(Ll,r=>this._oninitialize(r)),this.setNotificationHandler(Fl,()=>{var r;return(r=this.oninitialized)===null||r===void 0?void 0:r.call(this)}),this._capabilities.logging&&this.setRequestHandler(Hl,async(r,o)=>{var c;let u=o.sessionId||((c=o.requestInfo)===null||c===void 0?void 0:c.headers["mcp-session-id"])||void 0,{level:f}=r.params,h=Ya.safeParse(f);return h.success&&this._loggingLevels.set(u,h.data),{}})}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=xd(this._capabilities,e)}assertCapabilityForMethod(e){var t,s,r;switch(e){case"sampling/createMessage":if(!(!((t=this._clientCapabilities)===null||t===void 0)&&t.sampling))throw new Error(`Client does not support sampling (required for ${e})`);break;case"elicitation/create":if(!(!((s=this._clientCapabilities)===null||s===void 0)&&s.elicitation))throw new Error(`Client does not support elicitation (required for ${e})`);break;case"roots/list":if(!(!((r=this._clientCapabilities)===null||r===void 0)&&r.roots))throw new Error(`Client does not support listing roots (required for ${e})`);break;case"ping":break}}assertNotificationCapability(e){switch(e){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${e})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${e})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${e})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Server does not support sampling (required for ${e})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${e})`);break;case"ping":case"initialize":break}}async _oninitialize(e){let t=e.params.protocolVersion;return this._clientCapabilities=e.params.capabilities,this._clientVersion=e.params.clientInfo,{protocolVersion:id.includes(t)?t:Ml,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},as)}async createMessage(e,t){return this.request({method:"sampling/createMessage",params:e},Zl,t)}async elicitInput(e,t){let s=await this.request({method:"elicitation/create",params:e},Bl,t);if(s.action==="accept"&&s.content)try{let r=new Pp.default,o=r.compile(e.requestedSchema);if(!o(s.content))throw new rt(tt.InvalidParams,`Elicitation response content does not match requested schema: ${r.errorsText(o.errors)}`)}catch(r){throw r instanceof rt?r:new rt(tt.InternalError,`Error validating elicitation response: ${r}`)}return s}async listRoots(e,t){return this.request({method:"roots/list",params:e},Vl,t)}async sendLoggingMessage(e,t){if(this._capabilities.logging&&!this.isMessageIgnored(e.level,t))return this.notification({method:"notifications/message",params:e})}async sendResourceUpdated(e){return this.notification({method:"notifications/resources/updated",params:e})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}};var Ap=Symbol("Let zodToJsonSchema decide on which parser to use");var Rp={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},Tp=a=>typeof a=="string"?{...Rp,name:a}:{...Rp,...a};var kp=a=>{let e=Tp(a),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:t,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([s,r])=>[r._def,{def:r._def,path:[...e.basePath,e.definitionPath,s],jsonSchema:void 0}]))}};function vc(a,e,t,s){s?.errorMessages&&t&&(a.errorMessage={...a.errorMessage,[e]:t})}function Me(a,e,t,s,r){a[e]=t,vc(a,e,s,r)}var js=(a,e)=>{let t=0;for(;t<a.length&&t<e.length&&a[t]===e[t];t++);return[(a.length-t).toString(),...e.slice(t)].join("/")};var ke=require("zod");function ot(a){if(a.target!=="openAi")return{};let e=[...a.basePath,a.definitionPath,a.openAiAnyTypeName];return a.flags.hasReferencedOpenAiAnyType=!0,{$ref:a.$refStrategy==="relative"?js(e,a.currentPath):e.join("/")}}var Op=require("zod");function Cp(a,e){let t={type:"array"};return a.type?._def&&a.type?._def?.typeName!==Op.ZodFirstPartyTypeKind.ZodAny&&(t.items=he(a.type._def,{...e,currentPath:[...e.currentPath,"items"]})),a.minLength&&Me(t,"minItems",a.minLength.value,a.minLength.message,e),a.maxLength&&Me(t,"maxItems",a.maxLength.value,a.maxLength.message,e),a.exactLength&&(Me(t,"minItems",a.exactLength.value,a.exactLength.message,e),Me(t,"maxItems",a.exactLength.value,a.exactLength.message,e)),t}function Dp(a,e){let t={type:"integer",format:"int64"};if(!a.checks)return t;for(let s of a.checks)switch(s.kind){case"min":e.target==="jsonSchema7"?s.inclusive?Me(t,"minimum",s.value,s.message,e):Me(t,"exclusiveMinimum",s.value,s.message,e):(s.inclusive||(t.exclusiveMinimum=!0),Me(t,"minimum",s.value,s.message,e));break;case"max":e.target==="jsonSchema7"?s.inclusive?Me(t,"maximum",s.value,s.message,e):Me(t,"exclusiveMaximum",s.value,s.message,e):(s.inclusive||(t.exclusiveMaximum=!0),Me(t,"maximum",s.value,s.message,e));break;case"multipleOf":Me(t,"multipleOf",s.value,s.message,e);break}return t}function Ip(){return{type:"boolean"}}function qs(a,e){return he(a.type._def,e)}var $p=(a,e)=>he(a.innerType._def,e);function _c(a,e,t){let s=t??e.dateStrategy;if(Array.isArray(s))return{anyOf:s.map((r,o)=>_c(a,e,r))};switch(s){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return rx(a,e)}}var rx=(a,e)=>{let t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(let s of a.checks)switch(s.kind){case"min":Me(t,"minimum",s.value,s.message,e);break;case"max":Me(t,"maximum",s.value,s.message,e);break}return t};function Mp(a,e){return{...he(a.innerType._def,e),default:a.defaultValue()}}function Np(a,e){return e.effectStrategy==="input"?he(a.schema._def,e):ot(e)}function Lp(a){return{type:"string",enum:Array.from(a.values)}}var nx=a=>"type"in a&&a.type==="string"?!1:"allOf"in a;function Fp(a,e){let t=[he(a.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),he(a.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o),s=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,r=[];return t.forEach(o=>{if(nx(o))r.push(...o.allOf),o.unevaluatedProperties===void 0&&(s=void 0);else{let c=o;if("additionalProperties"in o&&o.additionalProperties===!1){let{additionalProperties:u,...f}=o;c=f}else s=void 0;r.push(c)}}),r.length?{allOf:r,...s}:void 0}function jp(a,e){let t=typeof a.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(a.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[a.value]}:{type:t==="bigint"?"integer":t,const:a.value}}var ya=require("zod");var yc,Or={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(yc===void 0&&(yc=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),yc),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function zs(a,e){let t={type:"string"};if(a.checks)for(let s of a.checks)switch(s.kind){case"min":Me(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e);break;case"max":Me(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Cr(t,"email",s.message,e);break;case"format:idn-email":Cr(t,"idn-email",s.message,e);break;case"pattern:zod":Zt(t,Or.email,s.message,e);break}break;case"url":Cr(t,"uri",s.message,e);break;case"uuid":Cr(t,"uuid",s.message,e);break;case"regex":Zt(t,s.regex,s.message,e);break;case"cuid":Zt(t,Or.cuid,s.message,e);break;case"cuid2":Zt(t,Or.cuid2,s.message,e);break;case"startsWith":Zt(t,RegExp(`^${bc(s.value,e)}`),s.message,e);break;case"endsWith":Zt(t,RegExp(`${bc(s.value,e)}$`),s.message,e);break;case"datetime":Cr(t,"date-time",s.message,e);break;case"date":Cr(t,"date",s.message,e);break;case"time":Cr(t,"time",s.message,e);break;case"duration":Cr(t,"duration",s.message,e);break;case"length":Me(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e),Me(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"includes":{Zt(t,RegExp(bc(s.value,e)),s.message,e);break}case"ip":{s.version!=="v6"&&Cr(t,"ipv4",s.message,e),s.version!=="v4"&&Cr(t,"ipv6",s.message,e);break}case"base64url":Zt(t,Or.base64url,s.message,e);break;case"jwt":Zt(t,Or.jwt,s.message,e);break;case"cidr":{s.version!=="v6"&&Zt(t,Or.ipv4Cidr,s.message,e),s.version!=="v4"&&Zt(t,Or.ipv6Cidr,s.message,e);break}case"emoji":Zt(t,Or.emoji(),s.message,e);break;case"ulid":{Zt(t,Or.ulid,s.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Cr(t,"binary",s.message,e);break}case"contentEncoding:base64":{Me(t,"contentEncoding","base64",s.message,e);break}case"pattern:zod":{Zt(t,Or.base64,s.message,e);break}}break}case"nanoid":Zt(t,Or.nanoid,s.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return t}function bc(a,e){return e.patternStrategy==="escape"?ix(a):a}var ax=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function ix(a){let e="";for(let t=0;t<a.length;t++)ax.has(a[t])||(e+="\\"),e+=a[t];return e}function Cr(a,e,t,s){a.format||a.anyOf?.some(r=>r.format)?(a.anyOf||(a.anyOf=[]),a.format&&(a.anyOf.push({format:a.format,...a.errorMessage&&s.errorMessages&&{errorMessage:{format:a.errorMessage.format}}}),delete a.format,a.errorMessage&&(delete a.errorMessage.format,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.anyOf.push({format:e,...t&&s.errorMessages&&{errorMessage:{format:t}}})):Me(a,"format",e,t,s)}function Zt(a,e,t,s){a.pattern||a.allOf?.some(r=>r.pattern)?(a.allOf||(a.allOf=[]),a.pattern&&(a.allOf.push({pattern:a.pattern,...a.errorMessage&&s.errorMessages&&{errorMessage:{pattern:a.errorMessage.pattern}}}),delete a.pattern,a.errorMessage&&(delete a.errorMessage.pattern,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.allOf.push({pattern:qp(e,s),...t&&s.errorMessages&&{errorMessage:{pattern:t}}})):Me(a,"pattern",qp(e,s),t,s)}function qp(a,e){if(!e.applyRegexFlags||!a.flags)return a.source;let t={i:a.flags.includes("i"),m:a.flags.includes("m"),s:a.flags.includes("s")},s=t.i?a.source.toLowerCase():a.source,r="",o=!1,c=!1,u=!1;for(let f=0;f<s.length;f++){if(o){r+=s[f],o=!1;continue}if(t.i){if(c){if(s[f].match(/[a-z]/)){u?(r+=s[f],r+=`${s[f-2]}-${s[f]}`.toUpperCase(),u=!1):s[f+1]==="-"&&s[f+2]?.match(/[a-z]/)?(r+=s[f],u=!0):r+=`${s[f]}${s[f].toUpperCase()}`;continue}}else if(s[f].match(/[a-z]/)){r+=`[${s[f]}${s[f].toUpperCase()}]`;continue}}if(t.m){if(s[f]==="^"){r+=`(^|(?<=[\r
]))`;continue}else if(s[f]==="$"){r+=`($|(?=[\r
]))`;continue}}if(t.s&&s[f]==="."){r+=c?`${s[f]}\r
`:`[${s[f]}\r
]`;continue}r+=s[f],s[f]==="\\"?o=!0:c&&s[f]==="]"?c=!1:!c&&s[f]==="["&&(c=!0)}try{new RegExp(r)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),a.source}return r}function Us(a,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&a.keyType?._def.typeName===ya.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:a.keyType._def.values,properties:a.keyType._def.values.reduce((s,r)=>({...s,[r]:he(a.valueType._def,{...e,currentPath:[...e.currentPath,"properties",r]})??ot(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};let t={type:"object",additionalProperties:he(a.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return t;if(a.keyType?._def.typeName===ya.ZodFirstPartyTypeKind.ZodString&&a.keyType._def.checks?.length){let{type:s,...r}=zs(a.keyType._def,e);return{...t,propertyNames:r}}else{if(a.keyType?._def.typeName===ya.ZodFirstPartyTypeKind.ZodEnum)return{...t,propertyNames:{enum:a.keyType._def.values}};if(a.keyType?._def.typeName===ya.ZodFirstPartyTypeKind.ZodBranded&&a.keyType._def.type._def.typeName===ya.ZodFirstPartyTypeKind.ZodString&&a.keyType._def.type._def.checks?.length){let{type:s,...r}=qs(a.keyType._def,e);return{...t,propertyNames:r}}}return t}function zp(a,e){if(e.mapStrategy==="record")return Us(a,e);let t=he(a.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||ot(e),s=he(a.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||ot(e);return{type:"array",maxItems:125,items:{type:"array",items:[t,s],minItems:2,maxItems:2}}}function Up(a){let e=a.values,s=Object.keys(a.values).filter(o=>typeof e[e[o]]!="number").map(o=>e[o]),r=Array.from(new Set(s.map(o=>typeof o)));return{type:r.length===1?r[0]==="string"?"string":"number":["string","number"],enum:s}}function Hp(a){return a.target==="openAi"?void 0:{not:ot({...a,currentPath:[...a.currentPath,"not"]})}}function Zp(a){return a.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var Ja={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Vp(a,e){if(e.target==="openApi3")return Bp(a,e);let t=a.options instanceof Map?Array.from(a.options.values()):a.options;if(t.every(s=>s._def.typeName in Ja&&(!s._def.checks||!s._def.checks.length))){let s=t.reduce((r,o)=>{let c=Ja[o._def.typeName];return c&&!r.includes(c)?[...r,c]:r},[]);return{type:s.length>1?s:s[0]}}else if(t.every(s=>s._def.typeName==="ZodLiteral"&&!s.description)){let s=t.reduce((r,o)=>{let c=typeof o._def.value;switch(c){case"string":case"number":case"boolean":return[...r,c];case"bigint":return[...r,"integer"];case"object":if(o._def.value===null)return[...r,"null"];case"symbol":case"undefined":case"function":default:return r}},[]);if(s.length===t.length){let r=s.filter((o,c,u)=>u.indexOf(o)===c);return{type:r.length>1?r:r[0],enum:t.reduce((o,c)=>o.includes(c._def.value)?o:[...o,c._def.value],[])}}}else if(t.every(s=>s._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((s,r)=>[...s,...r._def.values.filter(o=>!s.includes(o))],[])};return Bp(a,e)}var Bp=(a,e)=>{let t=(a.options instanceof Map?Array.from(a.options.values()):a.options).map((s,r)=>he(s._def,{...e,currentPath:[...e.currentPath,"anyOf",`${r}`]})).filter(s=>!!s&&(!e.strictUnions||typeof s=="object"&&Object.keys(s).length>0));return t.length?{anyOf:t}:void 0};function Wp(a,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(a.innerType._def.typeName)&&(!a.innerType._def.checks||!a.innerType._def.checks.length))return e.target==="openApi3"?{type:Ja[a.innerType._def.typeName],nullable:!0}:{type:[Ja[a.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let s=he(a.innerType._def,{...e,currentPath:[...e.currentPath]});return s&&"$ref"in s?{allOf:[s],nullable:!0}:s&&{...s,nullable:!0}}let t=he(a.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function Gp(a,e){let t={type:"number"};if(!a.checks)return t;for(let s of a.checks)switch(s.kind){case"int":t.type="integer",vc(t,"type",s.message,e);break;case"min":e.target==="jsonSchema7"?s.inclusive?Me(t,"minimum",s.value,s.message,e):Me(t,"exclusiveMinimum",s.value,s.message,e):(s.inclusive||(t.exclusiveMinimum=!0),Me(t,"minimum",s.value,s.message,e));break;case"max":e.target==="jsonSchema7"?s.inclusive?Me(t,"maximum",s.value,s.message,e):Me(t,"exclusiveMaximum",s.value,s.message,e):(s.inclusive||(t.exclusiveMaximum=!0),Me(t,"maximum",s.value,s.message,e));break;case"multipleOf":Me(t,"multipleOf",s.value,s.message,e);break}return t}function Kp(a,e){let t=e.target==="openAi",s={type:"object",properties:{}},r=[],o=a.shape();for(let u in o){let f=o[u];if(f===void 0||f._def===void 0)continue;let h=ox(f);h&&t&&(f._def.typeName==="ZodOptional"&&(f=f._def.innerType),f.isNullable()||(f=f.nullable()),h=!1);let m=he(f._def,{...e,currentPath:[...e.currentPath,"properties",u],propertyPath:[...e.currentPath,"properties",u]});m!==void 0&&(s.properties[u]=m,h||r.push(u))}r.length&&(s.required=r);let c=sx(a,e);return c!==void 0&&(s.additionalProperties=c),s}function sx(a,e){if(a.catchall._def.typeName!=="ZodNever")return he(a.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(a.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function ox(a){try{return a.isOptional()}catch{return!0}}var Yp=(a,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return he(a.innerType._def,e);let t=he(a.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:ot(e)},t]}:ot(e)};var Qp=(a,e)=>{if(e.pipeStrategy==="input")return he(a.in._def,e);if(e.pipeStrategy==="output")return he(a.out._def,e);let t=he(a.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),s=he(a.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,s].filter(r=>r!==void 0)}};function Jp(a,e){return he(a.type._def,e)}function Xp(a,e){let s={type:"array",uniqueItems:!0,items:he(a.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return a.minSize&&Me(s,"minItems",a.minSize.value,a.minSize.message,e),a.maxSize&&Me(s,"maxItems",a.maxSize.value,a.maxSize.message,e),s}function em(a,e){return a.rest?{type:"array",minItems:a.items.length,items:a.items.map((t,s)=>he(t._def,{...e,currentPath:[...e.currentPath,"items",`${s}`]})).reduce((t,s)=>s===void 0?t:[...t,s],[]),additionalItems:he(a.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:a.items.length,maxItems:a.items.length,items:a.items.map((t,s)=>he(t._def,{...e,currentPath:[...e.currentPath,"items",`${s}`]})).reduce((t,s)=>s===void 0?t:[...t,s],[])}}function tm(a){return{not:ot(a)}}function rm(a){return ot(a)}var nm=(a,e)=>he(a.innerType._def,e);var am=(a,e,t)=>{switch(e){case ke.ZodFirstPartyTypeKind.ZodString:return zs(a,t);case ke.ZodFirstPartyTypeKind.ZodNumber:return Gp(a,t);case ke.ZodFirstPartyTypeKind.ZodObject:return Kp(a,t);case ke.ZodFirstPartyTypeKind.ZodBigInt:return Dp(a,t);case ke.ZodFirstPartyTypeKind.ZodBoolean:return Ip();case ke.ZodFirstPartyTypeKind.ZodDate:return _c(a,t);case ke.ZodFirstPartyTypeKind.ZodUndefined:return tm(t);case ke.ZodFirstPartyTypeKind.ZodNull:return Zp(t);case ke.ZodFirstPartyTypeKind.ZodArray:return Cp(a,t);case ke.ZodFirstPartyTypeKind.ZodUnion:case ke.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return Vp(a,t);case ke.ZodFirstPartyTypeKind.ZodIntersection:return Fp(a,t);case ke.ZodFirstPartyTypeKind.ZodTuple:return em(a,t);case ke.ZodFirstPartyTypeKind.ZodRecord:return Us(a,t);case ke.ZodFirstPartyTypeKind.ZodLiteral:return jp(a,t);case ke.ZodFirstPartyTypeKind.ZodEnum:return Lp(a);case ke.ZodFirstPartyTypeKind.ZodNativeEnum:return Up(a);case ke.ZodFirstPartyTypeKind.ZodNullable:return Wp(a,t);case ke.ZodFirstPartyTypeKind.ZodOptional:return Yp(a,t);case ke.ZodFirstPartyTypeKind.ZodMap:return zp(a,t);case ke.ZodFirstPartyTypeKind.ZodSet:return Xp(a,t);case ke.ZodFirstPartyTypeKind.ZodLazy:return()=>a.getter()._def;case ke.ZodFirstPartyTypeKind.ZodPromise:return Jp(a,t);case ke.ZodFirstPartyTypeKind.ZodNaN:case ke.ZodFirstPartyTypeKind.ZodNever:return Hp(t);case ke.ZodFirstPartyTypeKind.ZodEffects:return Np(a,t);case ke.ZodFirstPartyTypeKind.ZodAny:return ot(t);case ke.ZodFirstPartyTypeKind.ZodUnknown:return rm(t);case ke.ZodFirstPartyTypeKind.ZodDefault:return Mp(a,t);case ke.ZodFirstPartyTypeKind.ZodBranded:return qs(a,t);case ke.ZodFirstPartyTypeKind.ZodReadonly:return nm(a,t);case ke.ZodFirstPartyTypeKind.ZodCatch:return $p(a,t);case ke.ZodFirstPartyTypeKind.ZodPipeline:return Qp(a,t);case ke.ZodFirstPartyTypeKind.ZodFunction:case ke.ZodFirstPartyTypeKind.ZodVoid:case ke.ZodFirstPartyTypeKind.ZodSymbol:return;default:return(s=>{})(e)}};function he(a,e,t=!1){let s=e.seen.get(a);if(e.override){let u=e.override?.(a,e,s,t);if(u!==Ap)return u}if(s&&!t){let u=lx(s,e);if(u!==void 0)return u}let r={def:a,path:e.currentPath,jsonSchema:void 0};e.seen.set(a,r);let o=am(a,a.typeName,e),c=typeof o=="function"?he(o(),e):o;if(c&&cx(a,e,c),e.postProcess){let u=e.postProcess(c,a,e);return r.jsonSchema=c,u}return r.jsonSchema=c,c}var lx=(a,e)=>{switch(e.$refStrategy){case"root":return{$ref:a.path.join("/")};case"relative":return{$ref:js(e.currentPath,a.path)};case"none":case"seen":return a.path.length<e.currentPath.length&&a.path.every((t,s)=>e.currentPath[s]===t)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),ot(e)):e.$refStrategy==="seen"?ot(e):void 0}},cx=(a,e,t)=>(a.description&&(t.description=a.description,e.markdownDescription&&(t.markdownDescription=a.description)),t);var Hs=(a,e)=>{let t=kp(e),s=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((f,[h,m])=>({...f,[h]:he(m._def,{...t,currentPath:[...t.basePath,t.definitionPath,h]},!0)??ot(t)}),{}):void 0,r=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,o=he(a._def,r===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,r]},!1)??ot(t),c=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;c!==void 0&&(o.title=c),t.flags.hasReferencedOpenAiAnyType&&(s||(s={}),s[t.openAiAnyTypeName]||(s[t.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:t.$refStrategy==="relative"?"1":[...t.basePath,t.definitionPath,t.openAiAnyTypeName].join("/")}}));let u=r===void 0?s?{...o,[t.definitionPath]:s}:o:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,r].join("/"),[t.definitionPath]:{...s,[r]:o}};return t.target==="jsonSchema7"?u.$schema="http://json-schema.org/draft-07/schema#":(t.target==="jsonSchema2019-09"||t.target==="openAi")&&(u.$schema="https://json-schema.org/draft/2019-09/schema#"),t.target==="openAi"&&("anyOf"in u||"oneOf"in u||"allOf"in u||"type"in u&&Array.isArray(u.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),u};var wa=require("zod");var im=require("zod"),wc;(function(a){a.Completable="McpCompletable"})(wc||(wc={}));var ba=class extends im.ZodType{_parse(e){let{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}};ba.create=(a,e)=>new ba({type:a,typeName:wc.Completable,complete:e.complete,...ux(e)});function ux(a){if(!a)return{};let{errorMap:e,invalid_type_error:t,required_error:s,description:r}=a;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(c,u)=>{var f,h;let{message:m}=a;return c.code==="invalid_enum_value"?{message:m??u.defaultError}:typeof u.data>"u"?{message:(f=m??s)!==null&&f!==void 0?f:u.defaultError}:c.code!=="invalid_type"?{message:u.defaultError}:{message:(h=m??t)!==null&&h!==void 0?h:u.defaultError}},description:r}}var Bs=class{constructor(e,t){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new Fs(e,t)}async connect(e){return await this.server.connect(e)}async close(){await this.server.close()}setToolRequestHandlers(){this._toolHandlersInitialized||(this.server.assertCanSetRequestHandler(gs.shape.method.value),this.server.assertCanSetRequestHandler(vs.shape.method.value),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(gs,()=>({tools:Object.entries(this._registeredTools).filter(([,e])=>e.enabled).map(([e,t])=>{let s={name:e,title:t.title,description:t.description,inputSchema:t.inputSchema?Hs(t.inputSchema,{strictUnions:!0}):fx,annotations:t.annotations,_meta:t._meta};return t.outputSchema&&(s.outputSchema=Hs(t.outputSchema,{strictUnions:!0})),s})})),this.server.setRequestHandler(vs,async(e,t)=>{let s=this._registeredTools[e.params.name];if(!s)throw new rt(tt.InvalidParams,`Tool ${e.params.name} not found`);if(!s.enabled)throw new rt(tt.InvalidParams,`Tool ${e.params.name} disabled`);let r;if(s.inputSchema){let o=await s.inputSchema.safeParseAsync(e.params.arguments);if(!o.success)throw new rt(tt.InvalidParams,`Invalid arguments for tool ${e.params.name}: ${o.error.message}`);let c=o.data,u=s.callback;try{r=await Promise.resolve(u(c,t))}catch(f){r={content:[{type:"text",text:f instanceof Error?f.message:String(f)}],isError:!0}}}else{let o=s.callback;try{r=await Promise.resolve(o(t))}catch(c){r={content:[{type:"text",text:c instanceof Error?c.message:String(c)}],isError:!0}}}if(s.outputSchema&&!r.isError){if(!r.structuredContent)throw new rt(tt.InvalidParams,`Tool ${e.params.name} has an output schema but no structured content was provided`);let o=await s.outputSchema.safeParseAsync(r.structuredContent);if(!o.success)throw new rt(tt.InvalidParams,`Invalid structured content for tool ${e.params.name}: ${o.error.message}`)}return r}),this._toolHandlersInitialized=!0)}setCompletionRequestHandler(){this._completionHandlerInitialized||(this.server.assertCanSetRequestHandler(_s.shape.method.value),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler(_s,async e=>{switch(e.params.ref.type){case"ref/prompt":return this.handlePromptCompletion(e,e.params.ref);case"ref/resource":return this.handleResourceCompletion(e,e.params.ref);default:throw new rt(tt.InvalidParams,`Invalid completion reference: ${e.params.ref}`)}}),this._completionHandlerInitialized=!0)}async handlePromptCompletion(e,t){let s=this._registeredPrompts[t.name];if(!s)throw new rt(tt.InvalidParams,`Prompt ${t.name} not found`);if(!s.enabled)throw new rt(tt.InvalidParams,`Prompt ${t.name} disabled`);if(!s.argsSchema)return Zs;let r=s.argsSchema.shape[e.params.argument.name];if(!(r instanceof ba))return Zs;let c=await r._def.complete(e.params.argument.value,e.params.context);return om(c)}async handleResourceCompletion(e,t){let s=Object.values(this._registeredResourceTemplates).find(c=>c.resourceTemplate.uriTemplate.toString()===t.uri);if(!s){if(this._registeredResources[t.uri])return Zs;throw new rt(tt.InvalidParams,`Resource template ${e.params.ref.uri} not found`)}let r=s.resourceTemplate.completeCallback(e.params.argument.name);if(!r)return Zs;let o=await r(e.params.argument.value,e.params.context);return om(o)}setResourceRequestHandlers(){this._resourceHandlersInitialized||(this.server.assertCanSetRequestHandler(fs.shape.method.value),this.server.assertCanSetRequestHandler(ds.shape.method.value),this.server.assertCanSetRequestHandler(hs.shape.method.value),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(fs,async(e,t)=>{let s=Object.entries(this._registeredResources).filter(([o,c])=>c.enabled).map(([o,c])=>({uri:o,name:c.name,...c.metadata})),r=[];for(let o of Object.values(this._registeredResourceTemplates)){if(!o.resourceTemplate.listCallback)continue;let c=await o.resourceTemplate.listCallback(t);for(let u of c.resources)r.push({...o.metadata,...u})}return{resources:[...s,...r]}}),this.server.setRequestHandler(ds,async()=>({resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([t,s])=>({name:t,uriTemplate:s.resourceTemplate.uriTemplate.toString(),...s.metadata}))})),this.server.setRequestHandler(hs,async(e,t)=>{let s=new URL(e.params.uri),r=this._registeredResources[s.toString()];if(r){if(!r.enabled)throw new rt(tt.InvalidParams,`Resource ${s} disabled`);return r.readCallback(s,t)}for(let o of Object.values(this._registeredResourceTemplates)){let c=o.resourceTemplate.uriTemplate.match(s.toString());if(c)return o.readCallback(s,c,t)}throw new rt(tt.InvalidParams,`Resource ${s} not found`)}),this.setCompletionRequestHandler(),this._resourceHandlersInitialized=!0)}setPromptRequestHandlers(){this._promptHandlersInitialized||(this.server.assertCanSetRequestHandler(ps.shape.method.value),this.server.assertCanSetRequestHandler(ms.shape.method.value),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(ps,()=>({prompts:Object.entries(this._registeredPrompts).filter(([,e])=>e.enabled).map(([e,t])=>({name:e,title:t.title,description:t.description,arguments:t.argsSchema?hx(t.argsSchema):void 0}))})),this.server.setRequestHandler(ms,async(e,t)=>{let s=this._registeredPrompts[e.params.name];if(!s)throw new rt(tt.InvalidParams,`Prompt ${e.params.name} not found`);if(!s.enabled)throw new rt(tt.InvalidParams,`Prompt ${e.params.name} disabled`);if(s.argsSchema){let r=await s.argsSchema.safeParseAsync(e.params.arguments);if(!r.success)throw new rt(tt.InvalidParams,`Invalid arguments for prompt ${e.params.name}: ${r.error.message}`);let o=r.data,c=s.callback;return await Promise.resolve(c(o,t))}else{let r=s.callback;return await Promise.resolve(r(t))}}),this.setCompletionRequestHandler(),this._promptHandlersInitialized=!0)}resource(e,t,...s){let r;typeof s[0]=="object"&&(r=s.shift());let o=s[0];if(typeof t=="string"){if(this._registeredResources[t])throw new Error(`Resource ${t} is already registered`);let c=this._createRegisteredResource(e,void 0,t,r,o);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),c}else{if(this._registeredResourceTemplates[e])throw new Error(`Resource template ${e} is already registered`);let c=this._createRegisteredResourceTemplate(e,void 0,t,r,o);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),c}}registerResource(e,t,s,r){if(typeof t=="string"){if(this._registeredResources[t])throw new Error(`Resource ${t} is already registered`);let o=this._createRegisteredResource(e,s.title,t,s,r);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),o}else{if(this._registeredResourceTemplates[e])throw new Error(`Resource template ${e} is already registered`);let o=this._createRegisteredResourceTemplate(e,s.title,t,s,r);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),o}}_createRegisteredResource(e,t,s,r,o){let c={name:e,title:t,metadata:r,readCallback:o,enabled:!0,disable:()=>c.update({enabled:!1}),enable:()=>c.update({enabled:!0}),remove:()=>c.update({uri:null}),update:u=>{typeof u.uri<"u"&&u.uri!==s&&(delete this._registeredResources[s],u.uri&&(this._registeredResources[u.uri]=c)),typeof u.name<"u"&&(c.name=u.name),typeof u.title<"u"&&(c.title=u.title),typeof u.metadata<"u"&&(c.metadata=u.metadata),typeof u.callback<"u"&&(c.readCallback=u.callback),typeof u.enabled<"u"&&(c.enabled=u.enabled),this.sendResourceListChanged()}};return this._registeredResources[s]=c,c}_createRegisteredResourceTemplate(e,t,s,r,o){let c={resourceTemplate:s,title:t,metadata:r,readCallback:o,enabled:!0,disable:()=>c.update({enabled:!1}),enable:()=>c.update({enabled:!0}),remove:()=>c.update({name:null}),update:u=>{typeof u.name<"u"&&u.name!==e&&(delete this._registeredResourceTemplates[e],u.name&&(this._registeredResourceTemplates[u.name]=c)),typeof u.title<"u"&&(c.title=u.title),typeof u.template<"u"&&(c.resourceTemplate=u.template),typeof u.metadata<"u"&&(c.metadata=u.metadata),typeof u.callback<"u"&&(c.readCallback=u.callback),typeof u.enabled<"u"&&(c.enabled=u.enabled),this.sendResourceListChanged()}};return this._registeredResourceTemplates[e]=c,c}_createRegisteredPrompt(e,t,s,r,o){let c={title:t,description:s,argsSchema:r===void 0?void 0:wa.z.object(r),callback:o,enabled:!0,disable:()=>c.update({enabled:!1}),enable:()=>c.update({enabled:!0}),remove:()=>c.update({name:null}),update:u=>{typeof u.name<"u"&&u.name!==e&&(delete this._registeredPrompts[e],u.name&&(this._registeredPrompts[u.name]=c)),typeof u.title<"u"&&(c.title=u.title),typeof u.description<"u"&&(c.description=u.description),typeof u.argsSchema<"u"&&(c.argsSchema=wa.z.object(u.argsSchema)),typeof u.callback<"u"&&(c.callback=u.callback),typeof u.enabled<"u"&&(c.enabled=u.enabled),this.sendPromptListChanged()}};return this._registeredPrompts[e]=c,c}_createRegisteredTool(e,t,s,r,o,c,u,f){let h={title:t,description:s,inputSchema:r===void 0?void 0:wa.z.object(r),outputSchema:o===void 0?void 0:wa.z.object(o),annotations:c,_meta:u,callback:f,enabled:!0,disable:()=>h.update({enabled:!1}),enable:()=>h.update({enabled:!0}),remove:()=>h.update({name:null}),update:m=>{typeof m.name<"u"&&m.name!==e&&(delete this._registeredTools[e],m.name&&(this._registeredTools[m.name]=h)),typeof m.title<"u"&&(h.title=m.title),typeof m.description<"u"&&(h.description=m.description),typeof m.paramsSchema<"u"&&(h.inputSchema=wa.z.object(m.paramsSchema)),typeof m.callback<"u"&&(h.callback=m.callback),typeof m.annotations<"u"&&(h.annotations=m.annotations),typeof m._meta<"u"&&(h._meta=m._meta),typeof m.enabled<"u"&&(h.enabled=m.enabled),this.sendToolListChanged()}};return this._registeredTools[e]=h,this.setToolRequestHandlers(),this.sendToolListChanged(),h}tool(e,...t){if(this._registeredTools[e])throw new Error(`Tool ${e} is already registered`);let s,r,o,c;if(typeof t[0]=="string"&&(s=t.shift()),t.length>1){let f=t[0];sm(f)?(r=t.shift(),t.length>1&&typeof t[0]=="object"&&t[0]!==null&&!sm(t[0])&&(c=t.shift())):typeof f=="object"&&f!==null&&(c=t.shift())}let u=t[0];return this._createRegisteredTool(e,void 0,s,r,o,c,void 0,u)}registerTool(e,t,s){if(this._registeredTools[e])throw new Error(`Tool ${e} is already registered`);let{title:r,description:o,inputSchema:c,outputSchema:u,annotations:f,_meta:h}=t;return this._createRegisteredTool(e,r,o,c,u,f,h,s)}prompt(e,...t){if(this._registeredPrompts[e])throw new Error(`Prompt ${e} is already registered`);let s;typeof t[0]=="string"&&(s=t.shift());let r;t.length>1&&(r=t.shift());let o=t[0],c=this._createRegisteredPrompt(e,void 0,s,r,o);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),c}registerPrompt(e,t,s){if(this._registeredPrompts[e])throw new Error(`Prompt ${e} is already registered`);let{title:r,description:o,argsSchema:c}=t,u=this._createRegisteredPrompt(e,r,o,c,s);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),u}isConnected(){return this.server.transport!==void 0}async sendLoggingMessage(e,t){return this.server.sendLoggingMessage(e,t)}sendResourceListChanged(){this.isConnected()&&this.server.sendResourceListChanged()}sendToolListChanged(){this.isConnected()&&this.server.sendToolListChanged()}sendPromptListChanged(){this.isConnected()&&this.server.sendPromptListChanged()}};var fx={type:"object",properties:{}};function sm(a){return typeof a!="object"||a===null?!1:Object.keys(a).length===0||Object.values(a).some(dx)}function dx(a){return a!==null&&typeof a=="object"&&"parse"in a&&typeof a.parse=="function"&&"safeParse"in a&&typeof a.safeParse=="function"}function hx(a){return Object.entries(a.shape).map(([e,t])=>({name:e,description:t.description,required:!t.isOptional()}))}function om(a){return{completion:{values:a.slice(0,100),total:a.length,hasMore:a.length>100}}}var Zs={completion:{values:[],hasMore:!1}};var Ee=require("zod");var cm=$l(require("axios"),1);var lm=require("axios");var mt=class{static{this.DEFAULT_RETRY_OPTIONS={maxRetries:3,baseDelay:1e3,maxDelay:1e4,exponentialBase:2,retryableErrors:["NETWORK_ERROR","TIMEOUT_ERROR","RATE_LIMIT_ERROR","VEHICLE_ASLEEP_ERROR"]}}static classifyError(e){return e instanceof lm.AxiosError?this.classifyAxiosError(e):e instanceof Error?{type:"UNKNOWN_ERROR",message:e.message,originalError:e,retryable:!1,userFriendly:"An unexpected error occurred. Please try again.",suggestion:"If the problem persists, check your internet connection and API credentials."}:{type:"UNKNOWN_ERROR",message:String(e),originalError:e,retryable:!1,userFriendly:"An unknown error occurred.",suggestion:"Please try again or contact support if the issue persists."}}static classifyAxiosError(e){let t=e.response?.status,s=e.response?.data;if(s?.error){let r=s.error;if(r.includes("asleep")||r.includes("sleeping"))return{type:"VEHICLE_ASLEEP_ERROR",message:`Vehicle is asleep: ${r}`,originalError:e,retryable:!0,statusCode:t,userFriendly:"Your Tesla is currently asleep.",suggestion:"The vehicle will wake up automatically when needed. You can also wake it using the Tesla app."};if(r.includes("offline")||r.includes("not connected"))return{type:"VEHICLE_OFFLINE_ERROR",message:`Vehicle is offline: ${r}`,originalError:e,retryable:!1,statusCode:t,userFriendly:"Your Tesla is currently offline.",suggestion:"Check that your vehicle has cellular connectivity. Try starting the vehicle or using the Tesla app."}}switch(t){case 401:case 403:return{type:"AUTHENTICATION_ERROR",message:"Authentication failed",originalError:e,retryable:!1,statusCode:t,userFriendly:"Authentication failed - invalid API token.",suggestion:"Check your Tessie API token in the configuration. Get a valid token from tessie.com."};case 429:let r=e.response?.headers["retry-after"];return{type:"RATE_LIMIT_ERROR",message:`Rate limit exceeded${r?` - retry after ${r}s`:""}`,originalError:e,retryable:!0,statusCode:t,userFriendly:"Too many requests - please wait a moment.",suggestion:r?`Wait ${r} seconds before trying again.`:"Wait a few seconds and try again. Tessie has rate limits to protect the service."};case 404:return{type:"API_ERROR",message:"Resource not found",originalError:e,retryable:!1,statusCode:t,userFriendly:"Requested information not found.",suggestion:"Check that the VIN is correct and the vehicle is linked to your Tessie account."};case 500:case 502:case 503:case 504:return{type:"API_ERROR",message:`Server error (${t})`,originalError:e,retryable:!0,statusCode:t,userFriendly:"Tessie service is temporarily unavailable.",suggestion:"This is a temporary server issue. Please try again in a few moments."};case 408:return{type:"TIMEOUT_ERROR",message:"Request timeout",originalError:e,retryable:!0,statusCode:t,userFriendly:"Request timed out.",suggestion:"The request took too long. This often happens when the vehicle is waking up. Try again."};default:return e.code==="ECONNABORTED"||e.code==="ETIMEDOUT"?{type:"TIMEOUT_ERROR",message:"Connection timeout",originalError:e,retryable:!0,userFriendly:"Connection timed out.",suggestion:"Check your internet connection and try again."}:e.code==="ENOTFOUND"||e.code==="ECONNREFUSED"?{type:"NETWORK_ERROR",message:"Network connection failed",originalError:e,retryable:!0,userFriendly:"Unable to connect to Tessie service.",suggestion:"Check your internet connection and try again."}:{type:"API_ERROR",message:`HTTP ${t}: ${e.message}`,originalError:e,retryable:t?t>=500:!1,statusCode:t,userFriendly:"An API error occurred.",suggestion:"Please try again. If the problem persists, check the Tessie service status."}}}static async withRetry(e,t={}){let s={...this.DEFAULT_RETRY_OPTIONS,...t},r;for(let o=0;o<=s.maxRetries;o++)try{return await e()}catch(c){if(r=this.classifyError(c),o===s.maxRetries||!s.retryableErrors.includes(r.type))throw r;let f=Math.min(s.baseDelay*Math.pow(s.exponentialBase,o),s.maxDelay)+Math.random()*1e3;console.warn(`Attempt ${o+1} failed: ${r.message}. Retrying in ${Math.round(f)}ms...`),await this.sleep(f)}throw r}static sleep(e){return new Promise(t=>setTimeout(t,e))}static formatErrorForUser(e){let t=`\u274C ${e.userFriendly}`;return e.suggestion&&(t+=`
\u{1F4A1} ${e.suggestion}`),e.type==="RATE_LIMIT_ERROR"&&(t+=`
\u23F1\uFE0F Tessie API has rate limits to ensure service reliability.`),e.type==="VEHICLE_ASLEEP_ERROR"&&(t+=`
\u{1F634} Teslas sleep to conserve battery when not in use.`),t}static shouldDegrade(e){return["VEHICLE_ASLEEP_ERROR","VEHICLE_OFFLINE_ERROR","RATE_LIMIT_ERROR","TIMEOUT_ERROR"].includes(e.type)}static generateFallbackResponse(e,t){let s={status:"degraded",error_type:e.type,message:e.userFriendly,suggestion:e.suggestion,context:`${t} unavailable due to ${e.type.toLowerCase().replace("_"," ")}`,retry_recommended:e.retryable,fallback_data:{timestamp:new Date().toISOString(),note:"This is a fallback response due to service unavailability"}};return{content:[{type:"text",text:JSON.stringify(s,null,2)}]}}};var Vs=class{constructor(e){this.accessToken=e,this.client=cm.default.create({baseURL:"https://api.tessie.com",timeout:3e4,headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})}async getVehicleState(e,t=!0){return mt.withRetry(async()=>(await this.client.get(`/${e}/state${t?"?use_cache=true":""}`)).data,{maxRetries:t?2:3,baseDelay:1500})}async getVehicleStates(e,t,s){return mt.withRetry(async()=>{let r=new URLSearchParams;return t&&r.append("start",t),s&&r.append("end",s),(await this.client.get(`/${e}/states?${r.toString()}`)).data},{maxRetries:2,baseDelay:2e3})}async getVehicleLocation(e){return mt.withRetry(async()=>(await this.client.get(`/${e}/location`)).data,{maxRetries:3,baseDelay:1e3})}async getDrives(e,t,s,r=50){return mt.withRetry(async()=>{let o=new URLSearchParams;t&&o.append("start",t),s&&o.append("end",s),o.append("limit",r.toString());let c=await this.client.get(`/${e}/drives?${o.toString()}`);return c.data&&typeof c.data=="object"&&"results"in c.data?c.data.results:c.data},{maxRetries:2,baseDelay:2500})}async getDrivingPath(e,t,s){return mt.withRetry(async()=>{let r=new URLSearchParams;return r.append("start",t),r.append("end",s),(await this.client.get(`/${e}/path?${r.toString()}`)).data},{maxRetries:1,baseDelay:3e3})}async getVehicles(){return mt.withRetry(async()=>{let e=await this.client.get("/vehicles"),t;return e.data&&typeof e.data=="object"&&"results"in e.data?t=e.data.results:t=e.data,t.map(s=>({vin:s.vin,display_name:s.last_state?.vehicle_state?.vehicle_name||s.display_name||`Vehicle ${s.vin.slice(-6)}`}))},{maxRetries:2,baseDelay:1500})}async getTirePressure(e,t="psi",s,r){return mt.withRetry(async()=>{let o=new URLSearchParams;return o.append("pressure_format",t),s&&o.append("from",s.toString()),r&&o.append("to",r.toString()),(await this.client.get(`/${e}/tire_pressure?${o.toString()}`)).data},{maxRetries:2,baseDelay:1500})}};var Ws=class{analyzeQuery(e,t,s=1){let r=1,o=1,c=1,u=[];switch(e){case"get_driving_history":r=30,o=50*s,c=1,t.limit&&t.limit>100&&(u.push("Consider reducing limit to 100 or less for better performance"),r+=10);let f=this.calculateDateRange(t.start_date,t.end_date);f>90&&(u.push("Large date ranges may cause timeouts. Consider smaller chunks."),r+=20,c=Math.ceil(f/30));break;case"get_weekly_mileage":r=35,o=30*s,c=1,this.calculateDateRange(t.start_date,t.end_date)>30&&(u.push("Weekly breakdowns work best for 1-month periods"),r+=15);break;case"get_vehicle_current_state":r=5,o=2,c=1,t.use_cache===!1&&(u.push("Consider using cache to avoid waking the vehicle"),r+=5);break;case"analyze_latest_drive":r=40,o=25,c=1,t.days_back&&t.days_back>7&&(u.push("Consider limiting search to 7 days for faster analysis"),r+=10);break;default:r=10,o=5}return{estimatedResponseSize:o,complexity:r,apiCallsRequired:c,suggestions:u}}optimizeForMCP(e,t){let s=this.analyzeQuery(e,t),r={...t},o=[];switch(e){case"get_driving_history":(!t.limit||t.limit>50)&&(r.limit=50,o.push("Reduced limit to 50 for optimal MCP performance")),this.calculateDateRange(t.start_date,t.end_date)>30&&(r.chunked=!0,o.push("Large date range will be automatically chunked"));break;case"get_weekly_mileage":if(this.calculateDateRange(t.start_date,t.end_date)>30){let h=new Date(t.start_date);h.setDate(h.getDate()+30),r.end_date=h.toISOString(),o.push("Limited to 30-day window for weekly breakdown")}break;case"get_vehicle_current_state":t.use_cache===!1&&(r.use_cache=!0,o.push("Enabled cache to prevent vehicle wake-up"));break;case"analyze_latest_drive":(!t.days_back||t.days_back>14)&&(r.days_back=7,o.push("Limited search to 7 days for optimal performance"));break}let c=this.analyzeQuery(e,r);return{isOptimized:c.complexity<s.complexity,originalComplexity:s.complexity,optimizedComplexity:c.complexity,recommendations:[...s.suggestions,...o],optimizedParameters:r}}calculateDateRange(e,t){if(!e||!t)return 7;let s=new Date(e),r=new Date(t),o=Math.abs(r.getTime()-s.getTime());return Math.ceil(o/(1e3*60*60*24))}parseNaturalLanguage(e){let t=e.toLowerCase();if((t.includes("latest")||t.includes("last")||t.includes("recent"))&&(t.includes("drive")||t.includes("trip"))&&(t.includes("analyz")||t.includes("detail")||t.includes("how long")||t.includes("battery")||t.includes("fsd")||t.includes("duration")))return{operation:"analyze_latest_drive",parameters:{days_back:t.includes("yesterday")?2:t.includes("today")?1:7},confidence:.95};if((t.includes("finish")||t.includes("completed")||t.includes("just drove"))&&(t.includes("how long")||t.includes("battery")||t.includes("duration")||t.includes("analyz")||t.includes("fsd")))return{operation:"analyze_latest_drive",parameters:{days_back:1},confidence:.9};if((t.includes("week")||t.includes("month"))&&(t.includes("mile")||t.includes("driv"))){let s=this.extractTimeFrame(e);return t.includes("week by week")||t.includes("weekly breakdown")||t.includes("break")||t.includes("basis")?{operation:"get_weekly_mileage",parameters:s,confidence:.95}:{operation:"get_weekly_mileage",parameters:s,confidence:.9}}return t.includes("driv")&&(t.includes("history")||t.includes("trip"))?{operation:"get_driving_history",parameters:{...this.extractTimeFrame(e),limit:50},confidence:.8}:t.includes("location")||t.includes("place")||t.includes("where")?{operation:"get_mileage_at_location",parameters:{...this.extractTimeFrame(e),location:"extracted_location"},confidence:.6}:t.includes("current")||t.includes("now")||t.includes("status")?{operation:"get_vehicle_current_state",parameters:{use_cache:!0},confidence:.8}:t.includes("vehicle")&&(t.includes("list")||t.includes("all"))?{operation:"get_vehicles",parameters:{},confidence:.8}:{operation:"unknown",parameters:{},confidence:0}}extractTimeFrame(e){let t=new Date,s=e.toLowerCase();if(s.includes("last month")||s.includes("previous month")){let c=new Date(t);c.setMonth(c.getMonth()-1),c.setDate(1),c.setHours(0,0,0,0);let u=new Date(c);return u.setMonth(u.getMonth()+1),u.setDate(0),u.setHours(23,59,59,999),{start_date:c.toISOString(),end_date:u.toISOString()}}if(s.includes("this month")||s.includes("current month")){let c=new Date(t);return c.setDate(1),c.setHours(0,0,0,0),{start_date:c.toISOString(),end_date:t.toISOString()}}if(s.includes("last week")||s.includes("previous week")){let c=new Date(t);return c.setDate(c.getDate()-7),c.setHours(0,0,0,0),{start_date:c.toISOString(),end_date:t.toISOString()}}if(s.includes("this week")){let c=new Date(t),u=c.getDay(),f=u===0?6:u-1;return c.setDate(c.getDate()-f),c.setHours(0,0,0,0),{start_date:c.toISOString(),end_date:t.toISOString()}}let r=s.match(/last (\d+) days?/);if(r){let c=parseInt(r[1]),u=new Date(t);return u.setDate(u.getDate()-c),u.setHours(0,0,0,0),{start_date:u.toISOString(),end_date:t.toISOString()}}if(s.includes("today")){let c=new Date(t);return c.setHours(0,0,0,0),{start_date:c.toISOString(),end_date:t.toISOString()}}if(s.includes("yesterday")){let c=new Date(t);c.setDate(c.getDate()-1),c.setHours(0,0,0,0);let u=new Date(c);return u.setHours(23,59,59,999),{start_date:c.toISOString(),end_date:u.toISOString()}}let o=new Date(t);return o.setDate(o.getDate()-30),o.setHours(0,0,0,0),{start_date:o.toISOString(),end_date:t.toISOString()}}};var Gs=class{mergeDrives(e){if(e.length===0)return[];let t=[...e].sort((o,c)=>o.started_at-c.started_at),s=[],r=[t[0]];for(let o=1;o<t.length;o++){let c=t[o-1],u=t[o],f=(u.started_at-c.ended_at)/60;this.shouldMergeDrives(c,u,f)?r.push(u):(s.push(this.createMergedDrive(r)),r=[u])}return r.length>0&&s.push(this.createMergedDrive(r)),s}shouldMergeDrives(e,t,s){return s<7||t.starting_battery-e.ending_battery>5}createMergedDrive(e){if(e.length===0)throw new Error("Cannot create merged drive from empty array");let t=e[0],s=e[e.length-1],r=[];for(let v=0;v<e.length-1;v++){let p=e[v],y=e[v+1],w=(y.started_at-p.ended_at)/60;if(w>0){let R=y.starting_battery-p.ending_battery>5?"charging":w<7?"short":"excluded";r.push({location:p.ending_location,duration_minutes:Math.round(w*100)/100,stop_type:R,started_at:p.ended_at,ended_at:y.started_at})}}let o=e.reduce((v,p)=>v+p.odometer_distance,0),c=(s.ended_at-t.started_at)/60,u=e.reduce((v,p)=>v+(p.ended_at-p.started_at)/60,0),f=Math.max(...e.map(v=>v.max_speed||0)),h=o>0?o/(u/60):0,m={id:`merged_${e.map(v=>v.id).join("_")}`,originalDriveIds:e.map(v=>v.id),started_at:t.started_at,ended_at:s.ended_at,starting_location:t.starting_location,ending_location:s.ending_location,starting_battery:t.starting_battery,ending_battery:s.ending_battery,total_distance:Math.round(o*100)/100,total_duration_minutes:Math.round(c*100)/100,driving_duration_minutes:Math.round(u*100)/100,stops:r,autopilot_percentage:0,energy_consumed:t.starting_battery-s.ending_battery,average_speed:Math.round(h*100)/100,max_speed:Math.round(f*100)/100},g=this.predictAutopilotUsage(m);return m}analyzeLatestDrive(e){if(e.length===0)return null;let t=this.mergeDrives(e);if(t.length===0)return null;let s=t[t.length-1],r=this.analyzeBatteryConsumption(s),o=this.analyzeFSDUsage(s),c=this.generateDriveSummary(s,r,o);return{mergedDrive:s,batteryConsumption:r,fsdAnalysis:o,summary:c}}analyzeBatteryConsumption(e){let t=Math.round(e.energy_consumed*100)/100,r=Math.round(t/100*75*100)/100,o=e.total_distance>0&&r>0?Math.round(e.total_distance/r*100)/100:void 0;return{percentage_used:t,estimated_kwh_used:r,efficiency_miles_per_kwh:o}}analyzeFSDUsage(e){let t=this.predictAutopilotUsage(e),s=e.total_distance>0?Math.round(t/e.total_distance*1e4)/100:0;return{total_autopilot_miles:t,fsd_percentage:s,note:t>0?"Estimated based on highway driving patterns and speed consistency":"Low probability of FSD usage detected from driving patterns"}}predictAutopilotUsage(e){if(e.total_distance<2)return 0;let t=0;e.average_speed>35?t+=.5:e.average_speed>25?t+=.3:e.average_speed>15&&(t+=.1),e.total_distance>15?t+=.4:e.total_distance>8?t+=.3:e.total_distance>4&&(t+=.2),e.max_speed>65?t+=.2:e.max_speed>45&&(t+=.1);let s=this.calculateSpeedConsistency(e);if(t+=s*.15,e.driving_duration_minutes>20?t+=.15:e.driving_duration_minutes>10&&(t+=.1),t=Math.min(t,1),e.average_speed>40&&e.total_distance>20?t=Math.max(t,.75):e.average_speed>30&&e.total_distance>10&&(t=Math.max(t,.65)),e.total_distance>5){let o=Math.min(2/e.total_distance,.15);t=Math.max(0,t-o)}t=Math.min(t,.92);let r=e.total_distance*t;return Math.round(r*100)/100}calculateSpeedConsistency(e){if(e.average_speed===0||e.max_speed===0)return 0;let t=e.average_speed/e.max_speed;return t>.85?1:t>.75?.8:t>.65?.6:t>.55?.4:.2}generateDriveSummary(e,t,s){let r=e.total_duration_minutes,o=e.driving_duration_minutes,c=r-o,u=`Drive from ${e.starting_location} to ${e.ending_location}:
`;if(u+=`\u2022 Total time: ${Math.floor(r/60)}h ${Math.round(r%60)}m
`,u+=`\u2022 Driving time: ${Math.floor(o/60)}h ${Math.round(o%60)}m
`,c>1){if(u+=`\u2022 Stop time: ${Math.floor(c/60)}h ${Math.round(c%60)}m`,e.stops.length>0){let f=e.stops.filter(m=>m.stop_type==="charging").length,h=e.stops.filter(m=>m.stop_type==="short").length;f>0&&(u+=` (${f} charging stop${f>1?"s":""})`),h>0&&(u+=` (${h} short stop${h>1?"s":""})`)}u+=`
`}return u+=`\u2022 Distance: ${e.total_distance} miles
`,u+=`\u2022 Average speed: ${e.average_speed} mph (max: ${e.max_speed} mph)
`,u+=`\u2022 Battery used: ${t.percentage_used}% (\u2248${t.estimated_kwh_used} kWh)
`,t.efficiency_miles_per_kwh&&(u+=`\u2022 Efficiency: ${t.efficiency_miles_per_kwh} mi/kWh
`),s.total_autopilot_miles>0?u+=`\u2022 FSD/Autopilot: ${s.total_autopilot_miles} miles (${s.fsd_percentage}% of drive)`:u+=`\u2022 FSD/Autopilot: ${s.note||"Data not available"}`,u}};var Xa=class{constructor(e){this.customRates=e;this.defaultRates={home_rate_per_kwh:.13,supercharger_rate_per_kwh:.28,public_rate_per_kwh:.2,work_rate_per_kwh:0,time_of_use:{off_peak:{hours:"23:00-07:00",rate:.09},peak:{hours:"16:00-21:00",rate:.32}}};this.homeLocations=new Set;this.workLocations=new Set;this.frequentLocations=new Map;e&&(this.defaultRates={...this.defaultRates,...e})}detectChargingSessions(e){let t=[],s=[...e].sort((r,o)=>r.started_at-o.started_at);for(let r=1;r<s.length;r++){let o=s[r-1],c=s[r],u=c.starting_battery-o.ending_battery;if(u>2){let f=this.createChargingSession(o,c,u);t.push(f)}}return t}createChargingSession(e,t,s){let r=(t.started_at-e.ended_at)/60,o=e.ending_location,c=this.classifyLocation(o,r,s),f=s/100*75,h=r>0?f/(r/60):0,m=this.getRateForLocation(c,e.ended_at),g=f*m,v=f*4;return{id:`charge_${e.id}_${t.id}`,started_at:e.ended_at,ended_at:t.started_at,location:o,location_type:c,starting_battery:e.ending_battery,ending_battery:t.starting_battery,energy_added_kwh:Math.round(f*100)/100,cost_estimate:Math.round(g*100)/100,cost_per_kwh:m,miles_added:Math.round(v*100)/100,charge_rate_kw:Math.round(h*10)/10,duration_minutes:Math.round(r*100)/100}}classifyLocation(e,t,s){let r=e.toLowerCase();if(r.includes("supercharger")||r.includes("tesla")||t<60&&s>40)return"supercharger";if(this.homeLocations.has(e))return"home";if(this.workLocations.has(e))return"work";if(t>240){let o=this.frequentLocations.get(e)||0;return this.frequentLocations.set(e,o+1),o>5?(this.homeLocations.add(e),"home"):t>480?"home":"work"}return t>30&&t<240?"public":"unknown"}getRateForLocation(e,t){let s=new Date(t*1e3).getHours();switch(e){case"home":if(this.defaultRates.time_of_use){if(s>=23||s<7)return this.defaultRates.time_of_use.off_peak.rate;if(s>=16&&s<21)return this.defaultRates.time_of_use.peak.rate}return this.defaultRates.home_rate_per_kwh;case"supercharger":return this.defaultRates.supercharger_rate_per_kwh;case"public":return this.defaultRates.public_rate_per_kwh;case"work":return this.defaultRates.work_rate_per_kwh;default:return this.defaultRates.public_rate_per_kwh}}analyzeChargingCosts(e){if(e.length===0)return{total_sessions:0,total_cost:0,total_kwh:0,total_miles_added:0,average_cost_per_session:0,average_cost_per_kwh:0,average_cost_per_mile:0,sessions_by_location:{home:{sessions:0,cost:0,kwh:0},supercharger:{sessions:0,cost:0,kwh:0},public:{sessions:0,cost:0,kwh:0},work:{sessions:0,cost:0,kwh:0},unknown:{sessions:0,cost:0,kwh:0}},recommendations:["No charging sessions found in the selected period"],potential_savings:0};let t=e.reduce((f,h)=>f+h.cost_estimate,0),s=e.reduce((f,h)=>f+h.energy_added_kwh,0),r=e.reduce((f,h)=>f+h.miles_added,0),o={home:{sessions:0,cost:0,kwh:0},supercharger:{sessions:0,cost:0,kwh:0},public:{sessions:0,cost:0,kwh:0},work:{sessions:0,cost:0,kwh:0},unknown:{sessions:0,cost:0,kwh:0}};e.forEach(f=>{let h=o[f.location_type];h.sessions++,h.cost+=f.cost_estimate,h.kwh+=f.energy_added_kwh});let c=this.generateRecommendations(e,o),u=this.calculatePotentialSavings(e,o);return{total_sessions:e.length,total_cost:Math.round(t*100)/100,total_kwh:Math.round(s*100)/100,total_miles_added:Math.round(r*100)/100,average_cost_per_session:Math.round(t/e.length*100)/100,average_cost_per_kwh:Math.round(t/s*100)/100,average_cost_per_mile:Math.round(t/r*1e3)/1e3,sessions_by_location:o,recommendations:c,potential_savings:Math.round(u*100)/100}}generateRecommendations(e,t){let s=[],r=t.supercharger.cost/e.reduce((u,f)=>u+f.cost_estimate,0)*100;r>30&&s.push(`\u{1F4A1} ${Math.round(r)}% of charging costs are from Superchargers. Increase home charging to save ~$${Math.round(t.supercharger.cost*.5)}/month`);let o=e.filter(u=>{let f=new Date(u.started_at*1e3).getHours();return u.location_type==="home"&&f>=16&&f<21});if(o.length>0){let u=o.reduce((f,h)=>f+h.cost_estimate,0);s.push(`\u26A1 Shift ${o.length} peak-hour charging sessions to overnight to save ~$${Math.round(u*.6)}/month`)}let c=e.reduce((u,f)=>u+(f.charge_rate_kw||0),0)/e.length;return c<7&&t.home.sessions>0&&s.push(`\u{1F50C} Your average home charge rate is ${c.toFixed(1)}kW. Consider installing a Level 2 charger for faster charging`),t.work.sessions===0&&e.length>10&&s.push("\u{1F3E2} No workplace charging detected. Check if your employer offers free EV charging"),s.length>0?s:["\u2705 Your charging strategy is well optimized!"]}calculatePotentialSavings(e,t){let s=0,r=t.supercharger.kwh,o=this.defaultRates.time_of_use?.off_peak.rate||this.defaultRates.home_rate_per_kwh;s+=r*(this.defaultRates.supercharger_rate_per_kwh-o)*.5;let u=e.filter(f=>{let h=new Date(f.started_at*1e3).getHours();return f.location_type==="home"&&h>=16&&h<21}).reduce((f,h)=>f+h.energy_added_kwh,0);return this.defaultRates.time_of_use&&(s+=u*(this.defaultRates.time_of_use.peak.rate-this.defaultRates.time_of_use.off_peak.rate)),s}learnLocations(e){let t=new Map;for(let o=1;o<e.length;o++){let c=e[o-1],u=e[o],f=c.ending_location,h=(u.started_at-c.ended_at)/3600,m=t.get(f)||{count:0,overnight:0,duration:0};m.count++,m.duration+=h;let g=new Date(c.ended_at*1e3).getHours(),v=new Date(u.started_at*1e3).getHours();(g>20||g<6)&&h>6&&m.overnight++,t.set(f,m)}let s=0,r="";t.forEach((o,c)=>{o.overnight>s&&(s=o.overnight,r=c)}),r&&this.homeLocations.add(r),t.forEach((o,c)=>{o.count>10&&o.duration/o.count>6&&!this.homeLocations.has(c)&&this.workLocations.add(c)})}};var Ks=class{constructor(){this.BATTERY_CAPACITY_KWH=75;this.DEFAULT_HOME_RATE=.13;this.DEFAULT_SUPERCHARGER_RATE=.28;this.DEFAULT_GAS_PRICE=4.5;this.DEFAULT_MPG=30;this.CO2_PER_GALLON=19.6;this.CO2_PER_KWH_GRID=.855}calculateTripCost(e,t=this.DEFAULT_HOME_RATE,s=this.DEFAULT_SUPERCHARGER_RATE,r=this.DEFAULT_GAS_PRICE){if(e.length===0)return this.emptyAnalysis();let o=[...e].sort((E,R)=>E.started_at-R.started_at),c=e.reduce((E,R)=>E+R.odometer_distance,0),u=this.calculateTotalDuration(o),f=this.calculateTotalBatteryUsed(o),h=f/100*this.BATTERY_CAPACITY_KWH,m=h>0?c/h:0,g=this.estimateChargingCosts(o,h,t,s),v=this.calculateGasComparison(c,r),p=this.calculateOptimalCharging(h,t),y=this.generateChargingStrategy(o,f,g),w=this.calculateEnvironmentalImpact(c,h);return{trip_summary:{distance_miles:Math.round(c*100)/100,duration_hours:Math.round(u*100)/100,battery_used_percent:Math.round(f*100)/100,energy_used_kwh:Math.round(h*100)/100,efficiency_miles_per_kwh:Math.round(m*100)/100},cost_breakdown:{electricity_cost:Math.round(g.electricityCost*100)/100,charging_stops_cost:Math.round(g.chargingStopsCost*100)/100,total_cost:Math.round(g.totalCost*100)/100,cost_per_mile:Math.round(g.totalCost/c*1e3)/1e3},comparison:{vs_gas_vehicle:{gas_cost_estimate:Math.round(v.gasCost*100)/100,savings:Math.round(v.savings*100)/100,savings_percentage:Math.round(v.savingsPercent*100)/100},vs_optimal_charging:{optimal_cost:Math.round(p.optimal*100)/100,current_cost:Math.round(g.totalCost*100)/100,potential_savings:Math.round(p.savings*100)/100}},charging_strategy:y,environmental_impact:{co2_saved_lbs:Math.round(w.co2Saved*10)/10,trees_equivalent:Math.round(w.treesEquivalent)}}}emptyAnalysis(){return{trip_summary:{distance_miles:0,duration_hours:0,battery_used_percent:0,energy_used_kwh:0,efficiency_miles_per_kwh:0},cost_breakdown:{electricity_cost:0,charging_stops_cost:0,total_cost:0,cost_per_mile:0},comparison:{vs_gas_vehicle:{gas_cost_estimate:0,savings:0,savings_percentage:0},vs_optimal_charging:{optimal_cost:0,current_cost:0,potential_savings:0}},charging_strategy:["No trip data available"],environmental_impact:{co2_saved_lbs:0,trees_equivalent:0}}}calculateTotalDuration(e){if(e.length===0)return 0;let t=e[0].started_at;return(e[e.length-1].ended_at-t)/3600}calculateTotalBatteryUsed(e){let t=0,s=e[0].starting_battery;for(let r of e){r.starting_battery>s;let o=r.starting_battery-r.ending_battery;o>0&&(t+=o),s=r.ending_battery}return t}estimateChargingCosts(e,t,s,r){let o=0,c=0;for(let f=1;f<e.length;f++){let h=e[f-1],m=e[f],g=m.starting_battery-h.ending_battery;if(g>2){let v=g/100*this.BATTERY_CAPACITY_KWH;(m.started_at-h.ended_at)/3600<1&&g>30?c+=v*r:o+=v*s}}let u=o/s+c/r;if(u<t*.5){let f=t-u;o+=f*s}return{electricityCost:o,chargingStopsCost:c,totalCost:o+c}}calculateGasComparison(e,t){return{gasCost:e/this.DEFAULT_MPG*t,savings:0,savingsPercent:0}}calculateOptimalCharging(e,t){let s=t*.7;return{optimal:e*s,savings:0}}generateChargingStrategy(e,t,s){let r=[],o=s.chargingStopsCost/s.totalCost*100;o>40&&r.push(`\u26A1 High Supercharger usage (${Math.round(o)}%). Consider charging at home before long trips`),t<80&&r.push("\u{1F50B} This trip could be completed with a single overnight charge at home");let c=Math.min(90,t+20);return r.push(`\u{1F4CA} Optimal starting charge: ${Math.round(c)}% for this trip distance`),s.electricityCost>0&&r.push("\u{1F319} Schedule home charging for off-peak hours (11pm-7am) to save 30-50% on electricity"),r}calculateEnvironmentalImpact(e,t){let r=e/this.DEFAULT_MPG*this.CO2_PER_GALLON,o=t*this.CO2_PER_KWH_GRID,c=r-o,u=c/48;return{co2Saved:Math.max(0,c),treesEquivalent:Math.max(0,u)}}estimateFutureTripCost(e,t,s=this.DEFAULT_HOME_RATE,r=this.DEFAULT_SUPERCHARGER_RATE){let f=e/4/this.BATTERY_CAPACITY_KWH*100*1.15,h=f>t,m=Math.max(0,f-t),g=Math.ceil(m/50),v=0,p="";if(h)if(m<=60)v=m/100*this.BATTERY_CAPACITY_KWH*s,p=`Charge to ${Math.round(t+m)}% at home before departure`;else{let y=(90-t)/100*this.BATTERY_CAPACITY_KWH,w=(m-(90-t))/100*this.BATTERY_CAPACITY_KWH;v=y*s+w*r,p=`Charge to 90% at home, then ${g} Supercharger stop${g>1?"s":""} during trip`}else p=`No charging needed - current ${t}% is sufficient`;return{estimated_cost:Math.round(v*100)/100,charging_needed:h,recommended_charge_level:Math.min(100,Math.round(t+m)),charging_stops_needed:g,strategy:p}}};var Ys=class{constructor(){this.MIN_ROUTE_FREQUENCY=3;this.LOCATION_SIMILARITY_THRESHOLD=.8;this.HOME_RATE_PER_KWH=.13}analyzeCommutes(e){if(e.length<10)return this.emptyAnalysis("Not enough driving data to detect commute patterns");let s=this.groupDrivesByRoute(e).filter(f=>f.drives.length>=this.MIN_ROUTE_FREQUENCY).map(f=>this.analyzeRoute(f)),r=this.calculateWeeklySummary(e,s),o=this.generateCommuteRecommendations(s,r),c=s.reduce((f,h)=>f+h.typical_distance*h.frequency,0),u=this.calculateCommuteCost(c);return{routes_detected:s.length,total_commute_miles:Math.round(c*100)/100,total_commute_cost:Math.round(u*100)/100,avg_commute_efficiency:this.calculateAvgEfficiency(s),routes:s,recommendations:o,weekly_summary:r}}emptyAnalysis(e){return{routes_detected:0,total_commute_miles:0,total_commute_cost:0,avg_commute_efficiency:0,routes:[],recommendations:[e],weekly_summary:{total_drives:0,total_miles:0,total_cost:0,avg_efficiency:0,best_day:"N/A",worst_day:"N/A"}}}groupDrivesByRoute(e){let t=new Map;for(let s of e){let r=this.generateRouteId(s.starting_location,s.ending_location);t.has(r)||t.set(r,[]),t.get(r).push(s)}return Array.from(t.entries()).map(([s,r])=>({routeId:s,drives:r}))}generateRouteId(e,t){let s=c=>{let u=c.split(",");return u.length>=3?`${u[u.length-3].trim()}, ${u[u.length-2].trim()}`:c},r=s(e),o=s(t);return[r,o].sort().join(" \u2194 ")}analyzeRoute(e){let{drives:t}=e,s=t.map(m=>m.odometer_distance),r=t.map(m=>(m.ended_at-m.started_at)/60),o=t.map(m=>m.starting_battery-m.ending_battery),c=t.map(m=>{let g=m.odometer_distance,v=m.starting_battery-m.ending_battery;return g===0?0:v/100*75/g*100}).filter(m=>m>0&&m<50),u=this.analyzeTimePatterns(t),f=this.calculateEfficiencyTrend(t),h=this.generateRouteName(t[0]);return{id:e.routeId,name:h,from_location:t[0].starting_location,to_location:t[0].ending_location,typical_distance:this.average(s),frequency:this.calculateWeeklyFrequency(t),avg_duration_minutes:this.average(r),avg_efficiency_kwh_per_100mi:this.average(c),avg_battery_used:this.average(o),best_efficiency:Math.min(...c),worst_efficiency:Math.max(...c),recent_trend:f,time_patterns:u}}generateRouteName(e){let t=o=>{let c=o.split(",");return c.length>=2?c[c.length-3]?.trim()||c[0].trim():o.split(" ")[0]},s=t(e.starting_location),r=t(e.ending_location);return s===r?`${s} Local`:`${s} \u2194 ${r}`}analyzeTimePatterns(e){let t=e.filter(o=>{let c=new Date(o.started_at*1e3).getHours(),u=new Date(o.started_at*1e3).getDay();return c>=6&&c<=10&&u>=1&&u<=5}),s=e.filter(o=>{let c=new Date(o.started_at*1e3).getHours(),u=new Date(o.started_at*1e3).getDay();return c>=15&&c<=19&&u>=1&&u<=5}),r=e.filter(o=>{let c=new Date(o.started_at*1e3).getDay();return c===0||c===6});return{morning_commute:{count:t.length,avg_time:this.calculateAvgTime(t)},evening_commute:{count:s.length,avg_time:this.calculateAvgTime(s)},weekend:{count:r.length,avg_time:this.calculateAvgTime(r)}}}calculateAvgTime(e){if(e.length===0)return"N/A";let t=e.reduce((s,r)=>s+r.started_at,0)/e.length;return new Date(t*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}calculateEfficiencyTrend(e){if(e.length<6)return"stable";let t=e.sort((f,h)=>f.started_at-h.started_at),s=t.slice(-6),r=t.slice(0,Math.min(6,e.length-6));if(r.length===0)return"stable";let o=this.calculateAvgEfficiencyForDrives(s),c=this.calculateAvgEfficiencyForDrives(r),u=(c-o)/c*100;return u>5?"improving":u<-5?"declining":"stable"}calculateAvgEfficiencyForDrives(e){let t=e.map(s=>{let r=s.odometer_distance,o=s.starting_battery-s.ending_battery;return r===0?0:o/100*75/r*100}).filter(s=>s>0&&s<50);return this.average(t)}calculateWeeklyFrequency(e){if(e.length===0)return 0;let t=e.sort((c,u)=>c.started_at-u.started_at),s=t[0],o=(t[t.length-1].started_at-s.started_at)/(168*3600);return o===0?e.length:Math.round(e.length/o*100)/100}calculateWeeklySummary(e,t){let s=new Map,r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];r.forEach(v=>{s.set(v,{drives:0,miles:0,efficiency:0})}),e.forEach(v=>{let p=r[new Date(v.started_at*1e3).getDay()],y=s.get(p);y.drives++,y.miles+=v.odometer_distance;let w=v.odometer_distance,E=v.starting_battery-v.ending_battery;if(w>0){let R=E/100*75/w*100;y.efficiency=(y.efficiency*(y.drives-1)+R)/y.drives}});let o="N/A",c="N/A",u=1/0,f=0;s.forEach((v,p)=>{v.drives>0&&(v.efficiency<u&&v.efficiency>0&&(u=v.efficiency,o=p),v.efficiency>f&&(f=v.efficiency,c=p))});let h=e.reduce((v,p)=>v+p.odometer_distance,0),m=this.calculateCommuteCost(h),g=this.calculateAvgEfficiencyForDrives(e);return{total_drives:e.length,total_miles:Math.round(h*100)/100,total_cost:Math.round(m*100)/100,avg_efficiency:Math.round(g*100)/100,best_day:o,worst_day:c}}generateCommuteRecommendations(e,t){let s=[];return e.forEach(r=>{if(r.recent_trend==="declining"&&s.push(`\u{1F4C9} ${r.name}: Efficiency declining recently. Check tire pressure and driving habits.`),r.avg_efficiency_kwh_per_100mi>30&&s.push(`\u26A1 ${r.name}: High energy usage (${r.avg_efficiency_kwh_per_100mi.toFixed(1)} kWh/100mi). Try smoother acceleration and regenerative braking.`),r.frequency>10){let o=r.typical_distance*r.frequency*r.avg_efficiency_kwh_per_100mi/100*this.HOME_RATE_PER_KWH;s.push(`\u{1F697} ${r.name}: Your most frequent route (${r.frequency.toFixed(1)}x/week, ~$${o.toFixed(2)}/week)`)}}),e.length>2&&s.push(`\u{1F4CA} You have ${e.length} regular routes. Consider optimizing departure times to avoid traffic for better efficiency.`),s.push("\u{1F50B} Pro tip: Pre-condition your car while plugged in to save battery on commutes."),t.best_day!=="N/A"&&t.worst_day!=="N/A"&&s.push(`\u{1F4C8} Best efficiency day: ${t.best_day}. Worst: ${t.worst_day}. Traffic patterns may be affecting your efficiency.`),s}calculateCommuteCost(e){return e/4*this.HOME_RATE_PER_KWH}calculateAvgEfficiency(e){if(e.length===0)return 0;let t=e.reduce((s,r)=>s+r.avg_efficiency_kwh_per_100mi,0);return Math.round(t/e.length*100)/100}average(e){if(e.length===0)return 0;let t=e.reduce((s,r)=>s+r,0);return Math.round(t/e.length*100)/100}};var Qs=class{constructor(){this.BATTERY_CAPACITY_KWH=75;this.HIGHWAY_SPEED_THRESHOLD=55}analyzeEfficiencyTrends(e){if(e.length<5)return this.emptyAnalysis("Insufficient driving data for trend analysis (minimum 5 drives required)");let t=e.sort((h,m)=>h.started_at-m.started_at),s=this.convertToDataPoints(t),r=this.calculateCurrentPeriodStats(s),o=this.calculateTrends(s),c=this.analyzeEfficiencyFactors(t,s),u=this.generateInsights(s,o,c),f=this.generateRecommendations(o,c);return{current_period:r,trends:o,factors_analysis:c,recommendations:f,insights:u}}emptyAnalysis(e){let t={period:"N/A",trend_direction:"stable",trend_percentage:0,avg_efficiency:0,best_efficiency:0,worst_efficiency:0,confidence:"low"};return{current_period:{avg_efficiency:0,total_miles:0,total_drives:0,efficiency_range:{best:0,worst:0}},trends:{weekly:t,monthly:t,seasonal:t},factors_analysis:{weather_impact:{hot_weather_penalty:0,cold_weather_penalty:0,optimal_temp_range:"Unknown"},speed_impact:{highway_efficiency:0,city_efficiency:0,optimal_speed_range:"Unknown"},time_patterns:{best_day_of_week:"Unknown",worst_day_of_week:"Unknown",best_time_of_day:"Unknown"}},recommendations:[e],insights:[]}}convertToDataPoints(e){return e.map(t=>{let s=t.odometer_distance,r=t.starting_battery-t.ending_battery,o=s>0?r/100*this.BATTERY_CAPACITY_KWH/s*100:0,c=t.average_speed||0,u=c>this.HIGHWAY_SPEED_THRESHOLD?Math.min(100,(c-25)/45*100):0,f="mild";return o>35?f="cold":o>30&&(f="hot"),{date:new Date(t.started_at*1e3).toISOString().split("T")[0],efficiency_kwh_per_100mi:o,distance_miles:s,weather_factor:f,highway_percentage:u,avg_speed:c}}).filter(t=>t.efficiency_kwh_per_100mi>0&&t.efficiency_kwh_per_100mi<60)}calculateCurrentPeriodStats(e){let t=e.map(r=>r.efficiency_kwh_per_100mi),s=e.reduce((r,o)=>r+o.distance_miles,0);return{avg_efficiency:this.average(t),total_miles:Math.round(s*100)/100,total_drives:e.length,efficiency_range:{best:Math.min(...t),worst:Math.max(...t)}}}calculateTrends(e){let t=new Date,s=this.calculatePeriodTrend(e,7,"weekly"),r=this.calculatePeriodTrend(e,30,"monthly"),o=this.calculatePeriodTrend(e,90,"seasonal");return{weekly:s,monthly:r,seasonal:o}}calculatePeriodTrend(e,t,s){let r=new Date,o=new Date(r.getTime()-t*24*60*60*1e3),c=new Date(r.getTime()-2*t*24*60*60*1e3),u=e.filter(y=>new Date(y.date)>=o&&new Date(y.date)<=r),f=e.filter(y=>new Date(y.date)>=c&&new Date(y.date)<o);if(u.length<2||f.length<2)return{period:s,trend_direction:"stable",trend_percentage:0,avg_efficiency:u.length>0?this.average(u.map(y=>y.efficiency_kwh_per_100mi)):0,best_efficiency:u.length>0?Math.min(...u.map(y=>y.efficiency_kwh_per_100mi)):0,worst_efficiency:u.length>0?Math.max(...u.map(y=>y.efficiency_kwh_per_100mi)):0,confidence:"low"};let h=this.average(u.map(y=>y.efficiency_kwh_per_100mi)),m=this.average(f.map(y=>y.efficiency_kwh_per_100mi)),g=(m-h)/m*100,v="stable";g>3?v="improving":g<-3&&(v="declining");let p=u.length>=5&&f.length>=5?"high":u.length>=3&&f.length>=3?"medium":"low";return{period:s,trend_direction:v,trend_percentage:Math.abs(g),avg_efficiency:h,best_efficiency:Math.min(...u.map(y=>y.efficiency_kwh_per_100mi)),worst_efficiency:Math.max(...u.map(y=>y.efficiency_kwh_per_100mi)),confidence:p}}analyzeEfficiencyFactors(e,t){let s=t.filter(y=>y.weather_factor==="hot"),r=t.filter(y=>y.weather_factor==="cold"),o=t.filter(y=>y.weather_factor==="mild"),c=o.length>0?this.average(o.map(y=>y.efficiency_kwh_per_100mi)):0,u=s.length>0?this.average(s.map(y=>y.efficiency_kwh_per_100mi)):c,f=r.length>0?this.average(r.map(y=>y.efficiency_kwh_per_100mi)):c,h=t.filter(y=>y.highway_percentage>50),m=t.filter(y=>y.highway_percentage<=50),g=h.length>0?this.average(h.map(y=>y.efficiency_kwh_per_100mi)):0,v=m.length>0?this.average(m.map(y=>y.efficiency_kwh_per_100mi)):0,p=this.analyzeTimePatterns(e,t);return{weather_impact:{hot_weather_penalty:c>0?(u-c)/c*100:0,cold_weather_penalty:c>0?(f-c)/c*100:0,optimal_temp_range:"65-75\xB0F"},speed_impact:{highway_efficiency:Math.round(g*100)/100,city_efficiency:Math.round(v*100)/100,optimal_speed_range:"45-65 mph"},time_patterns:p}}analyzeTimePatterns(e,t){let s={},r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];e.forEach((v,p)=>{let y=r[new Date(v.started_at*1e3).getDay()];s[y]||(s[y]=[]),t[p]&&s[y].push(t[p].efficiency_kwh_per_100mi)});let o="Unknown",c="Unknown",u=1/0,f=0;Object.entries(s).forEach(([v,p])=>{if(p.length>0){let y=this.average(p);y<u&&(u=y,o=v),y>f&&(f=y,c=v)}});let h={};e.forEach((v,p)=>{let y=new Date(v.started_at*1e3).getHours();h[y]||(h[y]=[]),t[p]&&h[y].push(t[p].efficiency_kwh_per_100mi)});let m="Unknown",g=1/0;return Object.entries(h).forEach(([v,p])=>{if(p.length>=2){let y=this.average(p);if(y<g){g=y;let w=parseInt(v);m=`${w===0?12:w>12?w-12:w}${w<12?"AM":"PM"}`}}}),{best_day_of_week:o,worst_day_of_week:c,best_time_of_day:m}}generateInsights(e,t,s){let r=[];if(t.weekly.confidence!=="low"&&(t.weekly.trend_direction==="improving"?r.push(`\u{1F4C8} Your efficiency has improved ${t.weekly.trend_percentage.toFixed(1)}% this week - great driving habits!`):t.weekly.trend_direction==="declining"&&r.push(`\u{1F4C9} Your efficiency declined ${t.weekly.trend_percentage.toFixed(1)}% this week - check driving patterns and tire pressure`)),s.weather_impact.cold_weather_penalty>15&&r.push(`\u{1F976} Cold weather is significantly impacting efficiency (+${s.weather_impact.cold_weather_penalty.toFixed(1)}% consumption)`),s.weather_impact.hot_weather_penalty>10&&r.push(`\u{1F525} Hot weather and A/C usage is increasing consumption (+${s.weather_impact.hot_weather_penalty.toFixed(1)}%)`),s.speed_impact.highway_efficiency>0&&s.speed_impact.city_efficiency>0){let o=s.speed_impact.highway_efficiency-s.speed_impact.city_efficiency;Math.abs(o)>3&&(o>0?r.push(`\u{1F3D9}\uFE0F City driving is ${Math.abs(o).toFixed(1)} kWh/100mi more efficient than highway driving`):r.push(`\u{1F6E3}\uFE0F Highway driving is ${Math.abs(o).toFixed(1)} kWh/100mi more efficient than city driving`))}return s.time_patterns.best_day_of_week!=="Unknown"&&s.time_patterns.worst_day_of_week!=="Unknown"&&r.push(`\u{1F4C5} Most efficient driving: ${s.time_patterns.best_day_of_week}s. Least efficient: ${s.time_patterns.worst_day_of_week}s`),t.monthly.confidence==="high"&&t.monthly.trend_direction==="improving"&&r.push(`\u{1F3AF} Monthly trend shows ${t.monthly.trend_percentage.toFixed(1)}% efficiency improvement - your driving is optimizing!`),r}generateRecommendations(e,t){let s=[];return e.weekly.trend_direction==="declining"&&e.weekly.confidence!=="low"&&(s.push("\u26A1 Check tire pressure and reduce aggressive acceleration to improve efficiency"),s.push("\u{1F321}\uFE0F Use Eco mode in extreme weather conditions")),t.weather_impact.cold_weather_penalty>20&&(s.push("\u2744\uFE0F Pre-condition cabin while plugged in during cold weather"),s.push("\u{1F50B} Expect 15-25% reduced range in freezing temperatures")),t.weather_impact.hot_weather_penalty>15&&(s.push("\u2600\uFE0F Park in shade and use mobile app to pre-cool before driving"),s.push("\u{1F32C}\uFE0F Use seat heaters instead of cabin heat when possible")),t.speed_impact.highway_efficiency>t.speed_impact.city_efficiency+5&&(s.push("\u{1F3C1} Reduce highway speeds to 65-70 mph for optimal efficiency"),s.push("\u{1F6E3}\uFE0F Use cruise control on highways to maintain consistent speed")),s.push("\u{1F697} Maintain following distance to maximize regenerative braking"),s.push("\u{1F4F1} Monitor real-time efficiency display to develop efficient habits"),t.time_patterns.best_day_of_week!=="Unknown"&&s.push(`\u{1F4C5} Schedule non-urgent trips on ${t.time_patterns.best_day_of_week}s for best efficiency`),s}average(e){if(e.length===0)return 0;let t=e.reduce((s,r)=>s+r,0);return Math.round(t/e.length*100)/100}};var Js=class{constructor(){this.COMFORT_RANGE_THRESHOLD=50;this.EMERGENCY_RANGE_THRESHOLD=20;this.OPTIMAL_CHARGE_LEVEL=80;this.DAILY_CHARGE_LEVEL=90;this.COLD_WEATHER_THRESHOLD=32;this.HOT_WEATHER_THRESHOLD=85;this.OFF_PEAK_START=23;this.OFF_PEAK_END=7;this.PEAK_RATE=.35;this.OFF_PEAK_RATE=.13}generateChargingStrategy(e,t=40,s,r){let o=e.battery_level||0,c=e.battery_range||0,u=e.charging_state||"Disconnected",f=u!=="Disconnected"&&u!=="Complete",h=this.generateReminders(e,t,s,r),m=this.calculateOptimalSchedule(o,t),g=this.analyzeRange(o,c,t,s),v=this.generateSmartInsights(e,o,c,t,r);return{current_status:{battery_level:o,charging_state:u,range_miles:Math.round(c),plugged_in:f},recommendations:h.sort((p,y)=>this.getPriorityWeight(p.priority)-this.getPriorityWeight(y.priority)),charging_schedule:m,range_analysis:g,smart_insights:v}}generateReminders(e,t,s,r){let o=[],c=e.battery_level||0,u=e.battery_range||0,f=e.charging_state||"Disconnected",h=this.isHomeLocation(e);if(u<this.EMERGENCY_RANGE_THRESHOLD?o.push({priority:"urgent",type:"range_warning",title:"\u{1F6A8} Critical Range Alert",message:`Only ${Math.round(u)} miles remaining. Find charging immediately!`,action_required:!0,time_sensitive:!0,deadline:"ASAP"}):u<this.COMFORT_RANGE_THRESHOLD&&o.push({priority:"high",type:"range_warning",title:"\u26A0\uFE0F Low Range Warning",message:`${Math.round(u)} miles remaining. Plan charging for today.`,action_required:!0,time_sensitive:!0,deadline:"Today"}),h&&f==="Disconnected"&&c<this.OPTIMAL_CHARGE_LEVEL){let g=this.OPTIMAL_CHARGE_LEVEL-c,v=this.calculateOffPeakSavings(g);o.push({priority:c<30?"high":"medium",type:"optimal_charge",title:"\u{1F50C} Plug In Recommended",message:`Battery at ${c}%. Charge to ${this.OPTIMAL_CHARGE_LEVEL}% during off-peak hours.`,action_required:!0,estimated_savings:`$${v.toFixed(2)}/charge`,time_sensitive:!1})}if(f==="Charging"&&this.isDuringPeakHours()){let g=this.calculateOffPeakSavings(20);o.push({priority:"medium",type:"time_of_use",title:"\u{1F4B0} Peak Hour Charging Alert",message:"Currently charging during peak rates. Consider scheduling for off-peak hours.",action_required:!1,estimated_savings:`$${g.toFixed(2)}/session`,time_sensitive:!0})}if(r!==void 0&&(r<this.COLD_WEATHER_THRESHOLD&&c<90?o.push({priority:"medium",type:"weather_prep",title:"\u2744\uFE0F Cold Weather Prep",message:`Freezing weather ahead (${r}\xB0F). Charge to 90% and precondition cabin.`,action_required:!0,time_sensitive:!0,deadline:"Before tomorrow"}):r>this.HOT_WEATHER_THRESHOLD&&c<85&&o.push({priority:"medium",type:"weather_prep",title:"\u{1F525} Hot Weather Prep",message:`High temperatures forecast (${r}\xB0F). Charge to 85% and precondition.`,action_required:!0,time_sensitive:!0,deadline:"Before peak heat"})),s&&s>0){let g=s*1.3;if(u<g){let v=Math.ceil((g-u)/3);o.push({priority:"high",type:"trip_prep",title:"\u{1F6E3}\uFE0F Trip Charging Required",message:`${s}-mile trip needs ${v}% more charge. Plan charging stops if needed.`,action_required:!0,time_sensitive:!0,deadline:"Before departure"})}}let m=u-t;return m<this.COMFORT_RANGE_THRESHOLD&&h&&o.push({priority:"medium",type:"optimal_charge",title:"\u{1F305} Daily Routine Charging",message:`Tomorrow's commute (~${t} mi) will leave ${Math.round(m)} miles. Plug in tonight.`,action_required:!0,time_sensitive:!1}),c===100&&f==="Complete"&&o.push({priority:"low",type:"maintenance",title:"\u{1F50B} Battery Health Tip",message:"Avoid keeping battery at 100% unless needed for long trips. Consider setting daily limit to 80%.",action_required:!1,time_sensitive:!1}),o}calculateOptimalSchedule(e,t){let s=t*1.5,r=Math.max(0,this.OPTIMAL_CHARGE_LEVEL-e),o=Math.ceil(r*3/25),c=Math.max(this.OFF_PEAK_START,23),u=Math.min(this.OFF_PEAK_END+o,7),f=this.calculateOffPeakSavings(r);return{optimal_start_time:`${c===23?11:c}:00 PM`,optimal_end_time:`${u}:00 AM`,off_peak_window:"11:00 PM - 7:00 AM",estimated_cost_savings:Math.round(f*100)/100}}analyzeRange(e,t,s,r){let o=t>this.COMFORT_RANGE_THRESHOLD,c=t<this.EMERGENCY_RANGE_THRESHOLD,u=this.OPTIMAL_CHARGE_LEVEL;r&&r>200?u=Math.min(100,90):s>60&&(u=this.DAILY_CHARGE_LEVEL);let f=t-s,h="Not needed";return f<this.COMFORT_RANGE_THRESHOLD?h="Tonight":f<s*2?h="Tomorrow evening":h=`In ${Math.floor(f/s)} days`,{comfort_range:o,emergency_range:c,recommended_charge_level:u,next_charge_needed:h}}generateSmartInsights(e,t,s,r,o){let c=[],u=e.charging_state||"Disconnected";u==="Charging"&&(this.isDuringPeakHours()?c.push("\u{1F4B8} Charging during peak hours costs ~170% more than off-peak rates"):c.push("\u{1F49A} Great timing! Off-peak charging saves $2-5 per session")),t>95?c.push("\u{1F50B} Consider setting daily charge limit to 80% to optimize battery longevity"):t<20&&c.push("\u26A1 Low battery increases phantom drain - charge soon to maintain efficiency");let f=Math.floor(s/r);return f>=5?c.push(`\u{1F3AF} Current range covers ${f} days of typical driving - you're well prepared`):f<=1&&c.push("\u{1F4C5} Less than 2 days of range remaining - plan charging today"),o!==void 0&&(o<32?c.push("\u2744\uFE0F Cold weather reduces range ~20-30% - factor this into trip planning"):o>85?c.push("\u{1F321}\uFE0F Hot weather increases A/C usage - expect 10-15% range reduction"):c.push("\u{1F324}\uFE0F Mild weather conditions optimal for efficiency and range")),t<50&&u==="Disconnected"&&c.push("\u{1F50C} Plugging in now would complete charging during off-peak hours tonight"),c}isHomeLocation(e){return(e.speed||0)===0}isDuringPeakHours(){let e=new Date().getHours();return e>=16&&e<=21}calculateOffPeakSavings(e){let t=e/100*75,s=t*this.PEAK_RATE,r=t*this.OFF_PEAK_RATE;return s-r}getPriorityWeight(e){return{urgent:1,high:2,medium:3,low:4}[e]}};var ei=class{static{this.NOMINATIM_BASE_URL="https://nominatim.openstreetmap.org/reverse"}static{this.USER_AGENT="TessieMCP/1.1.1"}static{this.RATE_LIMIT_MS=1e3}static{this.lastRequestTime=0}static{this.cache=new Map}static async reverseGeocode(e,t){if(!e||!t||isNaN(e)||isNaN(t))return"Location unavailable";let s=`${e.toFixed(4)},${t.toFixed(4)}`;if(this.cache.has(s))return this.cache.get(s);try{await this.enforceRateLimit();let r=new URL(this.NOMINATIM_BASE_URL);r.searchParams.set("lat",e.toString()),r.searchParams.set("lon",t.toString()),r.searchParams.set("format","json"),r.searchParams.set("addressdetails","1"),r.searchParams.set("zoom","18");let o=await fetch(r.toString(),{headers:{"User-Agent":this.USER_AGENT,Accept:"application/json"},signal:AbortSignal.timeout(5e3)});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);let c=await o.json(),u=this.formatAddress(c);if(this.cache.set(s,u),this.cache.size>100){let f=this.cache.keys().next().value;this.cache.delete(f)}return u}catch(r){return console.warn(`Geocoding failed for ${e}, ${t}:`,r),`${e.toFixed(4)}, ${t.toFixed(4)}`}}static formatAddress(e){if(!e||!e.address)return e?.display_name?.split(",").slice(0,3).join(", ")||"Unknown location";let t=e.address,s=[];return t.house_number&&t.road?s.push(`${t.house_number} ${t.road}`):t.road?s.push(t.road):t.amenity&&s.push(t.amenity),t.city||t.town||t.village?s.push(t.city||t.town||t.village):t.county&&s.push(t.county),(t.state||t.province)&&s.push(t.state||t.province),t.country_code&&s.push(t.country_code.toUpperCase()),s.length===0?e.display_name?.split(",").slice(0,4).join(", ")||"Unknown location":s.join(", ")}static async enforceRateLimit(){let t=Date.now()-this.lastRequestTime;if(t<this.RATE_LIMIT_MS){let s=this.RATE_LIMIT_MS-t;await new Promise(r=>setTimeout(r,s))}this.lastRequestTime=Date.now()}static getDistance(e,t,s,r){let c=this.toRadians(s-e),u=this.toRadians(r-t),f=Math.sin(c/2)*Math.sin(c/2)+Math.cos(this.toRadians(e))*Math.cos(this.toRadians(s))*Math.sin(u/2)*Math.sin(u/2);return 3959*(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)))}static toRadians(e){return e*(Math.PI/180)}};var px=Ee.z.object({TESSIE_API_KEY:Ee.z.string().min(1).describe("Your Tessie API token from https://my.tessie.com/settings/api")});function um({config:a}){let e=a.TESSIE_API_KEY;if(!e||e.trim()==="")throw new Error("TESSIE_API_KEY is required. Get your API token from https://my.tessie.com/settings/api");if(e.length<10)throw new Error("TESSIE_API_KEY appears to be invalid. Please check your API token at https://my.tessie.com/settings/api");let t=new Bs({name:"tessie-mcp-server",title:"Tessie Vehicle Data",version:"1.1.1"}),s=new Vs(e),r=new Ws,o=new Gs,c=new Xa,u=new Ks,f=new Ys,h=new Qs,m=new Js;return t.tool("get_vehicle_current_state","Get the current state of a vehicle including location, battery level, odometer reading",{vin:Ee.z.string().describe("Vehicle identification number (VIN)"),use_cache:Ee.z.boolean().optional().default(!0).describe("Whether to use cached data to avoid waking the vehicle")},async({vin:g,use_cache:v=!0})=>{try{let p=await s.getVehicleState(g,v),y="Location unavailable";if(p.drive_state?.latitude&&p.drive_state?.longitude)try{y=await ei.reverseGeocode(p.drive_state.latitude,p.drive_state.longitude)}catch(E){console.warn("Geocoding failed:",E),y=`${p.drive_state.latitude.toFixed(4)}, ${p.drive_state.longitude.toFixed(4)}`}let w={vehicle:p.display_name||p.vehicle_state?.vehicle_name||`Vehicle ${p.vin?.slice(-6)}`,vin:p.vin,current_location:{address:y,latitude:p.drive_state?.latitude,longitude:p.drive_state?.longitude},battery:{level:p.charge_state?.battery_level,range:p.charge_state?.est_battery_range,charging_state:p.charge_state?.charging_state,time_to_full_charge:p.charge_state?.time_to_full_charge},vehicle_state:{locked:p.vehicle_state?.locked,sentry_mode:p.vehicle_state?.sentry_mode,odometer:p.vehicle_state?.odometer},climate:{inside_temp:p.climate_state?.inside_temp,outside_temp:p.climate_state?.outside_temp,climate_on:p.climate_state?.is_climate_on},last_updated:p.timestamp||new Date().toISOString()};return{content:[{type:"text",text:JSON.stringify(w,null,2)}]}}catch(p){let y=mt.classifyError(p);if(mt.shouldDegrade(y))return mt.generateFallbackResponse(y,"Vehicle state");throw new Error(mt.formatErrorForUser(y))}}),t.tool("get_driving_history","Get driving history for a vehicle within a date range",{vin:Ee.z.string().describe("Vehicle identification number (VIN)"),start_date:Ee.z.string().optional().describe("Start date in ISO format (YYYY-MM-DD or YYYY-MM-DDTHH:mm:ssZ)"),end_date:Ee.z.string().optional().describe("End date in ISO format (YYYY-MM-DD or YYYY-MM-DDTHH:mm:ssZ)"),limit:Ee.z.number().optional().default(50).describe("Maximum number of drives to return")},async({vin:g,start_date:v,end_date:p,limit:y=50})=>{try{let w=await s.getDrives(g,v,p,y),E={vehicle_vin:g,total_drives:w.length,date_range:{start:v||"Not specified",end:p||"Not specified"},drives:w.map(R=>({id:R.id,start_time:new Date(R.started_at*1e3).toISOString(),end_time:new Date(R.ended_at*1e3).toISOString(),starting_location:R.starting_location,ending_location:R.ending_location,distance_miles:R.odometer_distance,duration_minutes:Math.round((R.ended_at-R.started_at)/60*100)/100,starting_battery:R.starting_battery,ending_battery:R.ending_battery,battery_used:R.starting_battery-R.ending_battery,average_speed:R.average_speed,max_speed:R.max_speed}))};return{content:[{type:"text",text:JSON.stringify(E,null,2)}]}}catch(w){throw new Error(`Failed to get driving history: ${w}`)}}),t.tool("get_weekly_mileage","Calculate total miles driven in a specific week or time period",{vin:Ee.z.string().describe("Vehicle identification number (VIN)"),start_date:Ee.z.string().describe("Start date of the period (ISO format)"),end_date:Ee.z.string().describe("End date of the period (ISO format)")},async({vin:g,start_date:v,end_date:p})=>{try{let y=await s.getDrives(g,v,p,500),w=y.reduce((I,M)=>I+M.odometer_distance,0),E=0,R={};y.forEach(I=>{let M=new Date(I.started_at*1e3).toISOString().split("T")[0];R[M]||(R[M]={miles:0,drives:0,autopilot_miles:0});let j={id:`temp_${I.id}`,originalDriveIds:[I.id],started_at:I.started_at,ended_at:I.ended_at,starting_location:I.starting_location,ending_location:I.ending_location,starting_battery:I.starting_battery,ending_battery:I.ending_battery,total_distance:I.odometer_distance,total_duration_minutes:(I.ended_at-I.started_at)/60,driving_duration_minutes:(I.ended_at-I.started_at)/60,stops:[],autopilot_distance:0,autopilot_percentage:0,energy_consumed:I.starting_battery-I.ending_battery,average_speed:I.average_speed||0,max_speed:I.max_speed||0},z=o.predictAutopilotUsage(j);R[M].miles+=I.odometer_distance,R[M].drives+=1,R[M].autopilot_miles+=z,E+=z});let $=Object.entries(R).map(([I,M])=>({date:I,miles:Math.round(M.miles*100)/100,drives:M.drives,autopilot_miles:Math.round(M.autopilot_miles*100)/100,fsd_percentage:M.miles>0?Math.round(M.autopilot_miles/M.miles*1e4)/100:0})),N={vehicle_vin:g,period:{start_date:v,end_date:p},summary:{total_miles:Math.round(w*100)/100,total_drives:y.length,total_autopilot_miles:Math.round(E*100)/100,fsd_percentage:w>0?Math.round(E/w*1e4)/100:0},daily_breakdown:$.sort((I,M)=>I.date.localeCompare(M.date))};return{content:[{type:"text",text:JSON.stringify(N,null,2)}]}}catch(y){throw new Error(`Failed to get weekly mileage: ${y}`)}}),t.tool("analyze_latest_drive","Analyze the most recent drive with comprehensive metrics including duration, battery consumption, FSD usage, and drive merging for stops <7 minutes",{vin:Ee.z.string().describe("Vehicle identification number (VIN)"),days_back:Ee.z.number().optional().default(7).describe("Number of days to look back for recent drives")},async({vin:g,days_back:v=7})=>{try{let p=new Date,y=new Date;y.setDate(y.getDate()-v);let w=await s.getDrives(g,y.toISOString(),p.toISOString(),100);if(w.length===0)return{content:[{type:"text",text:JSON.stringify({error:"No drives found in the specified time period",period:`${y.toISOString().split("T")[0]} to ${p.toISOString().split("T")[0]}`,suggestion:"Try increasing days_back or check if the vehicle has been driven recently"},null,2)}]};let E=o.analyzeLatestDrive(w);if(!E)return{content:[{type:"text",text:JSON.stringify({error:"Could not analyze drives",drives_found:w.length,suggestion:"Drives may be incomplete or missing required data"},null,2)}]};let R={analysis_summary:E.summary,detailed_analysis:{drive_details:{id:E.mergedDrive.id,original_drives:E.mergedDrive.originalDriveIds.length,start_time:new Date(E.mergedDrive.started_at*1e3).toISOString(),end_time:new Date(E.mergedDrive.ended_at*1e3).toISOString(),route:`${E.mergedDrive.starting_location} \u2192 ${E.mergedDrive.ending_location}`,distance_miles:E.mergedDrive.total_distance,total_duration_minutes:E.mergedDrive.total_duration_minutes,driving_duration_minutes:E.mergedDrive.driving_duration_minutes,average_speed_mph:E.mergedDrive.average_speed,max_speed_mph:E.mergedDrive.max_speed},stops:E.mergedDrive.stops.map($=>({location:$.location,duration_minutes:$.duration_minutes,type:$.stop_type,time:`${new Date($.started_at*1e3).toLocaleTimeString()} - ${new Date($.ended_at*1e3).toLocaleTimeString()}`})),battery_analysis:{starting_level:`${E.mergedDrive.starting_battery}%`,ending_level:`${E.mergedDrive.ending_battery}%`,percentage_consumed:`${E.batteryConsumption.percentage_used}%`,estimated_kwh_used:E.batteryConsumption.estimated_kwh_used,efficiency_miles_per_kwh:E.batteryConsumption.efficiency_miles_per_kwh},fsd_analysis:{autopilot_miles:E.fsdAnalysis.total_autopilot_miles,fsd_percentage:`${E.fsdAnalysis.fsd_percentage}%`,data_available:!0,note:E.fsdAnalysis.note}},metadata:{analysis_time:new Date().toISOString(),drives_analyzed:w.length,period_searched:`${y.toISOString().split("T")[0]} to ${p.toISOString().split("T")[0]}`}};return{content:[{type:"text",text:JSON.stringify(R,null,2)}]}}catch(p){throw new Error(`Failed to analyze latest drive: ${p}`)}}),t.tool("analyze_charging_costs","Analyze charging sessions and costs from driving history, with recommendations to save money",{vin:Ee.z.string().describe("Vehicle identification number (VIN)"),start_date:Ee.z.string().optional().describe("Start date in ISO format (YYYY-MM-DD)"),end_date:Ee.z.string().optional().describe("End date in ISO format (YYYY-MM-DD)"),home_rate:Ee.z.number().optional().describe("Your home electricity rate per kWh (default: $0.13)"),peak_rate:Ee.z.number().optional().describe("Peak hour electricity rate per kWh (default: $0.32)"),off_peak_rate:Ee.z.number().optional().describe("Off-peak electricity rate per kWh (default: $0.09)")},async({vin:g,start_date:v,end_date:p,home_rate:y,peak_rate:w,off_peak_rate:E})=>{try{let R=await s.getDrives(g,v,p,500);if(R.length===0)return{content:[{type:"text",text:JSON.stringify({error:"No drives found in the specified period",suggestion:"Try a longer date range or check if the vehicle has been driven recently"},null,2)}]};let $=y||w||E?{home_rate_per_kwh:y||.13,time_of_use:{off_peak:{hours:"23:00-07:00",rate:E||.09},peak:{hours:"16:00-21:00",rate:w||.32}}}:void 0,N=$?new Xa($):c;N.learnLocations(R);let I=N.detectChargingSessions(R),M=N.analyzeChargingCosts(I),j={period:{start:v||"Not specified",end:p||"Not specified",days_analyzed:Math.ceil((R[R.length-1].started_at-R[0].started_at)/(3600*24))},summary:{total_sessions:M.total_sessions,total_cost:`$${M.total_cost.toFixed(2)}`,total_energy:`${M.total_kwh.toFixed(1)} kWh`,total_miles_added:`${M.total_miles_added.toFixed(0)} miles`,avg_cost_per_session:`$${M.average_cost_per_session.toFixed(2)}`,avg_cost_per_kwh:`$${M.average_cost_per_kwh.toFixed(3)}/kWh`,cost_per_mile:`$${M.average_cost_per_mile.toFixed(3)}/mile`},breakdown_by_location:{home:{sessions:M.sessions_by_location.home.sessions,cost:`$${M.sessions_by_location.home.cost.toFixed(2)}`,energy:`${M.sessions_by_location.home.kwh.toFixed(1)} kWh`,percentage:M.total_cost>0?`${(M.sessions_by_location.home.cost/M.total_cost*100).toFixed(1)}%`:"0%"},supercharger:{sessions:M.sessions_by_location.supercharger.sessions,cost:`$${M.sessions_by_location.supercharger.cost.toFixed(2)}`,energy:`${M.sessions_by_location.supercharger.kwh.toFixed(1)} kWh`,percentage:M.total_cost>0?`${(M.sessions_by_location.supercharger.cost/M.total_cost*100).toFixed(1)}%`:"0%"},public:{sessions:M.sessions_by_location.public.sessions,cost:`$${M.sessions_by_location.public.cost.toFixed(2)}`,energy:`${M.sessions_by_location.public.kwh.toFixed(1)} kWh`,percentage:M.total_cost>0?`${(M.sessions_by_location.public.cost/M.total_cost*100).toFixed(1)}%`:"0%"},work:{sessions:M.sessions_by_location.work.sessions,cost:`$${M.sessions_by_location.work.cost.toFixed(2)}`,energy:`${M.sessions_by_location.work.kwh.toFixed(1)} kWh`,note:M.sessions_by_location.work.sessions>0?"Free workplace charging!":"No workplace charging detected"}},money_saving_tips:M.recommendations,potential_monthly_savings:`$${M.potential_savings.toFixed(2)}`,detailed_sessions:I.slice(0,10).map(z=>({date:new Date(z.started_at*1e3).toLocaleDateString(),time:new Date(z.started_at*1e3).toLocaleTimeString(),location:z.location,type:z.location_type,battery_added:`${z.ending_battery-z.starting_battery}%`,energy:`${z.energy_added_kwh.toFixed(1)} kWh`,cost:`$${z.cost_estimate.toFixed(2)}`,duration:`${Math.round(z.duration_minutes)} min`,rate:z.charge_rate_kw?`${z.charge_rate_kw} kW`:"Unknown"}))};return{content:[{type:"text",text:JSON.stringify(j,null,2)}]}}catch(R){throw new Error(`Failed to analyze charging costs: ${R}`)}}),t.tool("calculate_trip_cost","Calculate the cost and environmental impact of completed trips with gas comparison and optimization tips",{vin:Ee.z.string().describe("Vehicle identification number (VIN)"),start_date:Ee.z.string().optional().describe("Start date in ISO format (YYYY-MM-DD)"),end_date:Ee.z.string().optional().describe("End date in ISO format (YYYY-MM-DD)"),home_rate:Ee.z.number().optional().describe("Your home electricity rate per kWh (default: $0.13)"),gas_price:Ee.z.number().optional().describe("Current gas price per gallon (default: $4.50)")},async({vin:g,start_date:v,end_date:p,home_rate:y,gas_price:w})=>{try{let E=await s.getDrives(g,v,p,100);if(E.length===0)return{content:[{type:"text",text:JSON.stringify({error:"No drives found in the specified period",suggestion:"Try a longer date range or check if the vehicle has been driven recently"},null,2)}]};let R=u.calculateTripCost(E,y||.13,.28,w||4.5),$=R.comparison.vs_gas_vehicle.gas_cost_estimate,N=R.cost_breakdown.total_cost,I=$-N,M=$>0?I/$*100:0,j=R.comparison.vs_optimal_charging.optimal_cost,z=N-j,W={trip_overview:{distance:`${R.trip_summary.distance_miles} miles`,duration:`${R.trip_summary.duration_hours} hours`,efficiency:`${R.trip_summary.efficiency_miles_per_kwh} mi/kWh`,battery_used:`${R.trip_summary.battery_used_percent}%`,energy_consumed:`${R.trip_summary.energy_used_kwh} kWh`},cost_analysis:{total_cost:`$${R.cost_breakdown.total_cost.toFixed(2)}`,cost_per_mile:`$${R.cost_breakdown.cost_per_mile.toFixed(3)}/mile`,home_charging:`$${R.cost_breakdown.electricity_cost.toFixed(2)}`,supercharger_stops:`$${R.cost_breakdown.charging_stops_cost.toFixed(2)}`},savings_vs_gas:{gas_vehicle_cost:`$${$.toFixed(2)}`,your_ev_cost:`$${N.toFixed(2)}`,money_saved:`$${I.toFixed(2)}`,savings_percentage:`${M.toFixed(1)}%`,note:I>0?"\u{1F389} You saved money vs gas!":"\u26A0\uFE0F Gas would have been cheaper"},optimization_opportunities:{current_cost:`$${N.toFixed(2)}`,optimal_cost:`$${j.toFixed(2)}`,potential_savings:`$${z.toFixed(2)}`,efficiency_tips:R.charging_strategy},environmental_impact:{co2_emissions_avoided:`${R.environmental_impact.co2_saved_lbs} lbs`,trees_planted_equivalent:`${R.environmental_impact.trees_equivalent} trees`,impact_note:R.environmental_impact.co2_saved_lbs>0?"\u{1F331} Your trip was carbon-friendly!":"\u26A0\uFE0F Grid emissions offset EV benefits"}};return{content:[{type:"text",text:JSON.stringify(W,null,2)}]}}catch(E){throw new Error(`Failed to calculate trip cost: ${E}`)}}),t.tool("estimate_future_trip","Estimate cost and charging strategy for a planned trip based on distance and current battery level",{distance_miles:Ee.z.number().describe("Trip distance in miles"),current_battery_percent:Ee.z.number().min(0).max(100).describe("Current battery percentage"),home_rate:Ee.z.number().optional().describe("Your home electricity rate per kWh (default: $0.13)"),supercharger_rate:Ee.z.number().optional().describe("Supercharger rate per kWh (default: $0.28)")},async({distance_miles:g,current_battery_percent:v,home_rate:p,supercharger_rate:y})=>{try{let w=u.estimateFutureTripCost(g,v,p||.13,y||.28),E={trip_feasibility:{distance:`${g} miles`,current_charge:`${v}%`,charging_required:w.charging_needed?"Yes":"No",estimated_cost:`$${w.estimated_cost.toFixed(2)}`},charging_strategy:{recommended_departure_charge:`${w.recommended_charge_level}%`,supercharger_stops_needed:w.charging_stops_needed,strategy_details:w.strategy},cost_breakdown:{total_estimated_cost:`$${w.estimated_cost.toFixed(2)}`,cost_per_mile:`$${(w.estimated_cost/g).toFixed(3)}/mile`},preparation_tips:w.charging_needed?[`\u{1F50C} Pre-charge to ${w.recommended_charge_level}% before departure`,"\u{1F5FA}\uFE0F Plan Supercharger stops using Tesla navigation","\u{1F4F1} Check Supercharger availability along your route","\u23F0 Allow extra time for charging stops",w.charging_stops_needed>0?`\u{1F6D1} Plan for ${w.charging_stops_needed} charging stop${w.charging_stops_needed>1?"s":""}`:""].filter(Boolean):["\u2705 No additional charging needed for this trip!","\u{1F3AF} Your current charge is sufficient","\u{1F4CA} Monitor efficiency during the trip"]};return{content:[{type:"text",text:JSON.stringify(E,null,2)}]}}catch(w){throw new Error(`Failed to estimate future trip: ${w}`)}}),t.tool("analyze_commute_patterns","Detect regular commute routes and analyze efficiency trends, time patterns, and costs",{vin:Ee.z.string().describe("Vehicle identification number (VIN)"),days_back:Ee.z.number().optional().default(30).describe("Number of days to analyze (default: 30)")},async({vin:g,days_back:v=30})=>{try{let p=new Date,y=new Date;y.setDate(y.getDate()-v);let w=await s.getDrives(g,y.toISOString(),p.toISOString(),500);if(w.length<10)return{content:[{type:"text",text:JSON.stringify({error:"Not enough driving data to detect commute patterns",drives_found:w.length,suggestion:"Try increasing days_back parameter or drive more regularly to establish patterns"},null,2)}]};let E=f.analyzeCommutes(w),R={analysis_period:{days_analyzed:v,drives_analyzed:w.length,start_date:y.toISOString().split("T")[0],end_date:p.toISOString().split("T")[0]},commute_overview:{routes_detected:E.routes_detected,total_weekly_commute_miles:E.total_commute_miles,estimated_weekly_cost:`$${E.total_commute_cost.toFixed(2)}`,avg_commute_efficiency:`${E.avg_commute_efficiency} kWh/100mi`},regular_routes:E.routes.map($=>({route_name:$.name,frequency:`${$.frequency.toFixed(1)} times/week`,typical_distance:`${$.typical_distance} miles`,avg_duration:`${Math.round($.avg_duration_minutes)} minutes`,efficiency:`${$.avg_efficiency_kwh_per_100mi.toFixed(1)} kWh/100mi`,trend:$.recent_trend,trend_emoji:$.recent_trend==="improving"?"\u{1F4C8}":$.recent_trend==="declining"?"\u{1F4C9}":"\u27A1\uFE0F",commute_times:{morning_rush:$.time_patterns.morning_commute.count>0?`${$.time_patterns.morning_commute.count} drives, avg ${$.time_patterns.morning_commute.avg_time}`:"No morning commutes detected",evening_rush:$.time_patterns.evening_commute.count>0?`${$.time_patterns.evening_commute.count} drives, avg ${$.time_patterns.evening_commute.avg_time}`:"No evening commutes detected",weekend:$.time_patterns.weekend.count>0?`${$.time_patterns.weekend.count} drives, avg ${$.time_patterns.weekend.avg_time}`:"No weekend drives"},efficiency_range:{best:`${$.best_efficiency.toFixed(1)} kWh/100mi`,worst:`${$.worst_efficiency.toFixed(1)} kWh/100mi`,variation:`${(($.worst_efficiency-$.best_efficiency)/$.best_efficiency*100).toFixed(1)}%`}})),weekly_patterns:{total_drives:E.weekly_summary.total_drives,total_miles:`${E.weekly_summary.total_miles} miles`,estimated_cost:`$${E.weekly_summary.total_cost.toFixed(2)}`,avg_efficiency:`${E.weekly_summary.avg_efficiency} kWh/100mi`,most_efficient_day:E.weekly_summary.best_day,least_efficient_day:E.weekly_summary.worst_day},optimization_tips:E.recommendations,cost_insights:E.routes.length>0?[`\u{1F4B0} Your regular commutes cost approximately $${E.total_commute_cost.toFixed(2)}/week`,`\u26A1 At current efficiency, you use ~${(E.total_commute_miles*E.avg_commute_efficiency/100).toFixed(1)} kWh/week for commuting`,E.avg_commute_efficiency>25?"\u{1F6A8} High commute energy usage - consider eco-driving techniques":"\u2705 Good commute efficiency - you're driving efficiently!"]:["No regular commute patterns detected"]};return{content:[{type:"text",text:JSON.stringify(R,null,2)}]}}catch(p){throw new Error(`Failed to analyze commute patterns: ${p}`)}}),t.tool("analyze_efficiency_trends","Analyze driving efficiency trends over time with weather, speed, and time pattern insights",{vin:Ee.z.string().describe("Vehicle identification number (VIN)"),days_back:Ee.z.number().optional().default(45).describe("Number of days to analyze (default: 45, minimum: 14)")},async({vin:g,days_back:v=45})=>{try{if(v<14)return{content:[{type:"text",text:JSON.stringify({error:"Minimum 14 days required for meaningful trend analysis",suggestion:"Try days_back >= 14 for better insights"},null,2)}]};let p=new Date,y=new Date;y.setDate(y.getDate()-v);let w=await s.getDrives(g,y.toISOString(),p.toISOString(),200);if(w.length<5)return{content:[{type:"text",text:JSON.stringify({error:"Insufficient driving data for trend analysis",drives_found:w.length,suggestion:"Need at least 5 drives for efficiency analysis"},null,2)}]};let E=h.analyzeEfficiencyTrends(w),R={analysis_period:{days_analyzed:v,drives_analyzed:w.length,start_date:y.toISOString().split("T")[0],end_date:p.toISOString().split("T")[0]},current_efficiency:{average:`${E.current_period.avg_efficiency} kWh/100mi`,total_miles:`${E.current_period.total_miles} miles`,total_drives:E.current_period.total_drives,efficiency_range:{best:`${E.current_period.efficiency_range.best} kWh/100mi`,worst:`${E.current_period.efficiency_range.worst} kWh/100mi`,spread:`${(E.current_period.efficiency_range.worst-E.current_period.efficiency_range.best).toFixed(1)} kWh/100mi variation`}},trends:{weekly:{direction:E.trends.weekly.trend_direction,change:`${E.trends.weekly.trend_percentage.toFixed(1)}%`,confidence:E.trends.weekly.confidence,emoji:E.trends.weekly.trend_direction==="improving"?"\u{1F4C8}":E.trends.weekly.trend_direction==="declining"?"\u{1F4C9}":"\u27A1\uFE0F",summary:E.trends.weekly.trend_direction==="stable"?`Stable efficiency at ${E.trends.weekly.avg_efficiency} kWh/100mi`:`${E.trends.weekly.trend_direction==="improving"?"Improving":"Declining"} by ${E.trends.weekly.trend_percentage.toFixed(1)}% - current avg: ${E.trends.weekly.avg_efficiency} kWh/100mi`},monthly:{direction:E.trends.monthly.trend_direction,change:`${E.trends.monthly.trend_percentage.toFixed(1)}%`,confidence:E.trends.monthly.confidence,summary:E.trends.monthly.confidence!=="low"?`Monthly trend: ${E.trends.monthly.trend_direction} (${E.trends.monthly.trend_percentage.toFixed(1)}%)`:"Insufficient data for monthly trend"},seasonal:{direction:E.trends.seasonal.trend_direction,change:`${E.trends.seasonal.trend_percentage.toFixed(1)}%`,confidence:E.trends.seasonal.confidence,summary:E.trends.seasonal.confidence!=="low"?`Seasonal trend: ${E.trends.seasonal.trend_direction} (${E.trends.seasonal.trend_percentage.toFixed(1)}%)`:"Need more data for seasonal analysis"}},efficiency_factors:{weather_impact:{hot_weather_penalty:`+${E.factors_analysis.weather_impact.hot_weather_penalty.toFixed(1)}%`,cold_weather_penalty:`+${E.factors_analysis.weather_impact.cold_weather_penalty.toFixed(1)}%`,optimal_temp_range:E.factors_analysis.weather_impact.optimal_temp_range,insight:E.factors_analysis.weather_impact.cold_weather_penalty>15?"\u2744\uFE0F Cold weather significantly impacting efficiency":E.factors_analysis.weather_impact.hot_weather_penalty>10?"\u{1F525} Hot weather and A/C affecting efficiency":"\u{1F321}\uFE0F Weather impact is minimal"},speed_impact:{highway_efficiency:`${E.factors_analysis.speed_impact.highway_efficiency} kWh/100mi`,city_efficiency:`${E.factors_analysis.speed_impact.city_efficiency} kWh/100mi`,optimal_speed_range:E.factors_analysis.speed_impact.optimal_speed_range,preference:E.factors_analysis.speed_impact.highway_efficiency<E.factors_analysis.speed_impact.city_efficiency?"\u{1F6E3}\uFE0F Highway driving is more efficient":"\u{1F3D9}\uFE0F City driving is more efficient"},time_patterns:{best_day:E.factors_analysis.time_patterns.best_day_of_week,worst_day:E.factors_analysis.time_patterns.worst_day_of_week,best_time:E.factors_analysis.time_patterns.best_time_of_day,scheduling_tip:E.factors_analysis.time_patterns.best_day_of_week!=="Unknown"?`\u{1F4C5} Schedule trips on ${E.factors_analysis.time_patterns.best_day_of_week}s for best efficiency`:"\u{1F4C5} No clear daily efficiency patterns detected"}},actionable_insights:E.insights,optimization_recommendations:E.recommendations,efficiency_score:{current:E.current_period.avg_efficiency<25?"Excellent":E.current_period.avg_efficiency<30?"Good":E.current_period.avg_efficiency<35?"Average":"Needs Improvement",benchmark:"Model 3/Y typical: 25-30 kWh/100mi",comparison:E.current_period.avg_efficiency<25?"\u{1F3C6} You're driving very efficiently!":E.current_period.avg_efficiency<30?"\u2705 Good efficiency - room for minor improvements":E.current_period.avg_efficiency<35?"\u26A0\uFE0F Average efficiency - focus on eco-driving techniques":"\u{1F6A8} High consumption - review driving habits and vehicle maintenance"}};return{content:[{type:"text",text:JSON.stringify(R,null,2)}]}}catch(p){throw new Error(`Failed to analyze efficiency trends: ${p}`)}}),t.tool("get_smart_charging_reminders","Get intelligent charging reminders and optimization strategy based on current vehicle state, usage patterns, and conditions",{vin:Ee.z.string().describe("Vehicle identification number (VIN)"),daily_miles:Ee.z.number().optional().default(40).describe("Average daily driving miles (default: 40)"),next_trip_distance:Ee.z.number().optional().describe("Distance of upcoming trip in miles"),weather_temp:Ee.z.number().optional().describe("Current or forecast temperature in Fahrenheit")},async({vin:g,daily_miles:v=40,next_trip_distance:p,weather_temp:y})=>{try{let w=await s.getVehicleState(g);if(!w.charge_state?.battery_level)return{content:[{type:"text",text:JSON.stringify({error:"Unable to get battery information",suggestion:"Make sure vehicle is awake and connected to Tessie"},null,2)}]};let R={...w,battery_level:w.charge_state?.battery_level,battery_range:w.charge_state?.est_battery_range,charging_state:w.charge_state?.charging_state,latitude:w.drive_state?.latitude,longitude:w.drive_state?.longitude},$=m.generateChargingStrategy(R,v,p,y),N={vehicle_info:{vin:g,timestamp:new Date().toISOString(),location:w.drive_state?.latitude&&w.drive_state?.longitude?await ei.reverseGeocode(w.drive_state.latitude,w.drive_state.longitude):"Location unavailable"},charging_status:{battery_level:`${$.current_status.battery_level}%`,estimated_range:`${$.current_status.range_miles} miles`,charging_state:$.current_status.charging_state,plugged_in:$.current_status.plugged_in,status_emoji:$.current_status.plugged_in?"\u{1F50C}":$.current_status.battery_level<20?"\u{1F50B}":$.current_status.battery_level>80?"\u2705":"\u26A1"},urgent_reminders:$.recommendations.filter(I=>I.priority==="urgent"||I.priority==="high").map(I=>({priority:I.priority.toUpperCase(),title:I.title,message:I.message,action_required:I.action_required,deadline:I.deadline||"None",savings:I.estimated_savings||"N/A",emoji:I.priority==="urgent"?"\u{1F6A8}":"\u26A0\uFE0F"})),optimization_suggestions:$.recommendations.filter(I=>I.priority==="medium"||I.priority==="low").map(I=>({category:I.type.replace("_"," ").toUpperCase(),title:I.title,message:I.message,potential_savings:I.estimated_savings||"N/A",time_sensitive:I.time_sensitive||!1})),charging_schedule:{optimal_timing:{start:$.charging_schedule.optimal_start_time,end:$.charging_schedule.optimal_end_time,off_peak_window:$.charging_schedule.off_peak_window,estimated_savings:`$${$.charging_schedule.estimated_cost_savings.toFixed(2)}`},current_recommendation:$.current_status.plugged_in?"Currently charging - monitor for completion":$.current_status.battery_level<50?"\u{1F50C} Plug in tonight for off-peak charging":$.current_status.battery_level>80?"\u2705 Well charged - no immediate action needed":"\u26A1 Consider charging if planning long trips"},range_analysis:{comfort_level:$.range_analysis.comfort_range?"Comfortable":"Low",emergency_status:$.range_analysis.emergency_range?"CRITICAL":"Safe",recommended_charge_target:`${$.range_analysis.recommended_charge_level}%`,next_charge_timing:$.range_analysis.next_charge_needed,range_emoji:$.range_analysis.emergency_range?"\u{1F6A8}":$.range_analysis.comfort_range?"\u2705":"\u26A0\uFE0F"},smart_insights:$.smart_insights.map(I=>({insight:I,category:I.includes("\u{1F4B8}")?"Cost Optimization":I.includes("\u{1F50B}")?"Battery Health":I.includes("\u2744\uFE0F")||I.includes("\u{1F321}\uFE0F")?"Weather Impact":I.includes("\u{1F4C5}")?"Planning":"General"})),weather_considerations:y?{current_temp:`${y}\xB0F`,impact:y<32?"\u2744\uFE0F Cold weather reduces range 20-30%":y>85?"\u{1F525} Hot weather increases A/C usage 10-15%":"\u{1F324}\uFE0F Mild weather - optimal efficiency conditions",recommendation:y<32?"Charge to 90% and precondition cabin":y>85?"Precondition cabin and consider shade parking":"Standard charging routine is fine"}:{current_temp:"Not provided",impact:"\u{1F321}\uFE0F Weather data not available",recommendation:"Provide weather_temp parameter for weather-specific advice"},cost_optimization:{peak_vs_offpeak:"Off-peak charging saves ~60-70% on electricity costs",daily_cost_estimate:v?`~$${(v*.04).toFixed(2)}/day at off-peak rates`:"Varies by usage",monthly_savings_potential:`$${($.charging_schedule.estimated_cost_savings*15).toFixed(2)}/month with optimal timing`,tip:"\u{1F4A1} Use Tesla app to schedule charging for 11 PM - 7 AM"}};return{content:[{type:"text",text:JSON.stringify(N,null,2)}]}}catch(w){throw new Error(`Failed to get charging reminders: ${w}`)}}),t.tool("get_vehicles","List all vehicles in the Tessie account",{},async()=>{try{let g=await s.getVehicles(),v={total_vehicles:g.length,vehicles:g.map(p=>({vin:p.vin,display_name:p.display_name}))};return{content:[{type:"text",text:JSON.stringify(v,null,2)}]}}catch(g){let v=mt.classifyError(g);if(mt.shouldDegrade(v)){let p={status:"degraded",error_type:v.type,message:v.userFriendly,suggestion:v.suggestion,vehicles:[],fallback_note:"Vehicle list temporarily unavailable. Try again in a few moments."};return{content:[{type:"text",text:JSON.stringify(p,null,2)}]}}throw new Error(mt.formatErrorForUser(v))}}),t.tool("get_tire_pressure","Get current tire pressure readings for all four tires with status indicators",{vin:Ee.z.string().describe("Vehicle identification number (VIN)"),pressure_format:Ee.z.enum(["bar","kpa","psi"]).optional().default("psi").describe("Pressure unit (default: psi)"),from:Ee.z.number().optional().describe("Start timestamp for historical data (Unix timestamp in seconds)"),to:Ee.z.number().optional().describe("End timestamp for historical data (Unix timestamp in seconds)")},async({vin:g,pressure_format:v="psi",from:p,to:y})=>{try{let w=await s.getTirePressure(g,v,p,y),E={vehicle_vin:g,timestamp:new Date(w.timestamp*1e3).toISOString(),pressure_unit:v,tire_pressures:{front_left:{pressure:w.front_left,status:w.front_left_status,emoji:w.front_left_status==="low"?"\u26A0\uFE0F":w.front_left_status==="normal"?"\u2705":"\u2753"},front_right:{pressure:w.front_right,status:w.front_right_status,emoji:w.front_right_status==="low"?"\u26A0\uFE0F":w.front_right_status==="normal"?"\u2705":"\u2753"},rear_left:{pressure:w.rear_left,status:w.rear_left_status,emoji:w.rear_left_status==="low"?"\u26A0\uFE0F":w.rear_left_status==="normal"?"\u2705":"\u2753"},rear_right:{pressure:w.rear_right,status:w.rear_right_status,emoji:w.rear_right_status==="low"?"\u26A0\uFE0F":w.rear_right_status==="normal"?"\u2705":"\u2753"}},overall_status:{all_normal:[w.front_left_status,w.front_right_status,w.rear_left_status,w.rear_right_status].every(R=>R==="normal"),low_pressure_count:[w.front_left_status,w.front_right_status,w.rear_left_status,w.rear_right_status].filter(R=>R==="low").length,summary:[w.front_left_status,w.front_right_status,w.rear_left_status,w.rear_right_status].every(R=>R==="normal")?"\u2705 All tires are properly inflated":[w.front_left_status,w.front_right_status,w.rear_left_status,w.rear_right_status].filter(R=>R==="low").length>0?`\u26A0\uFE0F ${[w.front_left_status,w.front_right_status,w.rear_left_status,w.rear_right_status].filter(R=>R==="low").length} tire(s) with low pressure - inflate soon`:"\u2753 Tire pressure status unknown - check vehicle display"},recommendations:[w.front_left_status,w.front_right_status,w.rear_left_status,w.rear_right_status].some(R=>R==="low")?["\u{1F527} Inflate low pressure tires to recommended PSI (check door jamb sticker)","\u26A1 Proper tire pressure improves efficiency by 3-5%","\u{1F6E1}\uFE0F Correct pressure extends tire life and improves safety"]:["\u2705 Tire pressures are good","\u{1F4C5} Check tire pressure monthly for optimal performance","\u{1F321}\uFE0F Remember: tire pressure drops ~1 PSI per 10\xB0F temperature decrease"]};return{content:[{type:"text",text:JSON.stringify(E,null,2)}]}}catch(w){let E=mt.classifyError(w);if(mt.shouldDegrade(E))return mt.generateFallbackResponse(E,"Tire pressure data");throw new Error(mt.formatErrorForUser(E))}}),t.tool("natural_language_query",'Process natural language queries about your vehicle data (e.g., "How many miles did I drive last week?")',{query:Ee.z.string().describe("Natural language query about vehicle data"),vin:Ee.z.string().optional().describe("Vehicle identification number (VIN) - optional if only one vehicle")},async({query:g,vin:v})=>{try{let p=r.parseNaturalLanguage(g);if(p.confidence<.5)return{content:[{type:"text",text:JSON.stringify({error:"Could not understand the query",confidence:p.confidence,suggestions:["Try queries like: 'How many miles did I drive last week?'","Or: 'What's my current battery level?'","Or: 'Analyze my latest drive'"]},null,2)}]};let y=v;if(!y){let w=await s.getVehicles();if(w.length===0)throw new Error("No vehicles found in account");y=w[0].vin}switch(p.operation){case"get_vehicle_current_state":let w=await s.getVehicleState(y,!0);return{content:[{type:"text",text:JSON.stringify({query_understood:g,confidence:p.confidence,result:{vehicle:w.display_name,battery_level:w.charge_state?.battery_level,location:{latitude:w.drive_state?.latitude,longitude:w.drive_state?.longitude},locked:w.vehicle_state?.locked,odometer:w.vehicle_state?.odometer}},null,2)}]};case"get_weekly_mileage":case"get_driving_history":let E=await s.getDrives(y,p.parameters.start_date,p.parameters.end_date,50),R=E.reduce((j,z)=>j+z.odometer_distance,0);return{content:[{type:"text",text:JSON.stringify({query_understood:g,confidence:p.confidence,result:{total_miles:Math.round(R*100)/100,total_drives:E.length,period:{start:p.parameters.start_date,end:p.parameters.end_date}}},null,2)}]};case"analyze_latest_drive":let $=new Date,N=new Date;N.setDate(N.getDate()-(p.parameters.days_back||7));let I=await s.getDrives(y,N.toISOString(),$.toISOString(),100),M=o.analyzeLatestDrive(I);return{content:[{type:"text",text:JSON.stringify({query_understood:g,confidence:p.confidence,result:M?{summary:M.summary,drive_distance:M.mergedDrive.total_distance,battery_used:M.batteryConsumption.percentage_used,fsd_miles:M.fsdAnalysis.total_autopilot_miles}:{error:"No recent drives found"}},null,2)}]};default:return{content:[{type:"text",text:JSON.stringify({query_understood:g,confidence:p.confidence,error:"Query understood but operation not yet implemented",parsed_operation:p.operation},null,2)}]}}}catch(p){throw new Error(`Failed to process natural language query: ${p}`)}}),t.server}var xc=$l(require("node:process"),1);var Xs=class{append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let t=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),mx(t)}clear(){this._buffer=void 0}};function mx(a){return md.parse(JSON.parse(a))}function fm(a){return JSON.stringify(a)+`
`}var eo=class{constructor(e=xc.default.stdin,t=xc.default.stdout){this._stdin=e,this._stdout=t,this._readBuffer=new Xs,this._started=!1,this._ondata=s=>{this._readBuffer.append(s),this.processReadBuffer()},this._onerror=s=>{var r;(r=this.onerror)===null||r===void 0||r.call(this,s)}}async start(){if(this._started)throw new Error("StdioServerTransport already started! If using Server class, note that connect() calls start() automatically.");this._started=!0,this._stdin.on("data",this._ondata),this._stdin.on("error",this._onerror)}processReadBuffer(){for(var e,t;;)try{let s=this._readBuffer.readMessage();if(s===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,s)}catch(s){(t=this.onerror)===null||t===void 0||t.call(this,s)}}async close(){var e;this._stdin.off("data",this._ondata),this._stdin.off("error",this._onerror),this._stdin.listenerCount("data")===0&&this._stdin.pause(),this._readBuffer.clear(),(e=this.onclose)===null||e===void 0||e.call(this)}send(e){return new Promise(t=>{let s=fm(e);this._stdout.write(s)?t():this._stdout.once("drain",t)})}};var gx=Object.create,bm=Object.defineProperty,vx=Object.getOwnPropertyDescriptor,wm=Object.getOwnPropertyNames,_x=Object.getPrototypeOf,yx=Object.prototype.hasOwnProperty,dm=(a=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(a,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):a)(function(a){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+a+'" is not supported')}),Nr=(a,e)=>function(){return e||(0,a[wm(a)[0]])((e={exports:{}}).exports,e),e.exports},bx=(a,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of wm(e))!yx.call(a,r)&&r!==t&&bm(a,r,{get:()=>e[r],enumerable:!(s=vx(e,r))||s.enumerable});return a},Em=(a,e,t)=>(t=a!=null?gx(_x(a)):{},bx(e||!a||!a.__esModule?bm(t,"default",{value:a,enumerable:!0}):t,a)),wx=Nr({"node_modules/color-name/index.js"(a,e){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}}),xm=Nr({"node_modules/color-convert/conversions.js"(a,e){var t=wx(),s={};for(let c of Object.keys(t))s[t[c]]=c;var r={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};e.exports=r;for(let c of Object.keys(r)){if(!("channels"in r[c]))throw new Error("missing channels property: "+c);if(!("labels"in r[c]))throw new Error("missing channel labels property: "+c);if(r[c].labels.length!==r[c].channels)throw new Error("channel and label counts mismatch: "+c);let{channels:u,labels:f}=r[c];delete r[c].channels,delete r[c].labels,Object.defineProperty(r[c],"channels",{value:u}),Object.defineProperty(r[c],"labels",{value:f})}r.rgb.hsl=function(c){let u=c[0]/255,f=c[1]/255,h=c[2]/255,m=Math.min(u,f,h),g=Math.max(u,f,h),v=g-m,p,y;g===m?p=0:u===g?p=(f-h)/v:f===g?p=2+(h-u)/v:h===g&&(p=4+(u-f)/v),p=Math.min(p*60,360),p<0&&(p+=360);let w=(m+g)/2;return g===m?y=0:w<=.5?y=v/(g+m):y=v/(2-g-m),[p,y*100,w*100]},r.rgb.hsv=function(c){let u,f,h,m,g,v=c[0]/255,p=c[1]/255,y=c[2]/255,w=Math.max(v,p,y),E=w-Math.min(v,p,y),R=function($){return(w-$)/6/E+1/2};return E===0?(m=0,g=0):(g=E/w,u=R(v),f=R(p),h=R(y),v===w?m=h-f:p===w?m=1/3+u-h:y===w&&(m=2/3+f-u),m<0?m+=1:m>1&&(m-=1)),[m*360,g*100,w*100]},r.rgb.hwb=function(c){let u=c[0],f=c[1],h=c[2],m=r.rgb.hsl(c)[0],g=1/255*Math.min(u,Math.min(f,h));return h=1-1/255*Math.max(u,Math.max(f,h)),[m,g*100,h*100]},r.rgb.cmyk=function(c){let u=c[0]/255,f=c[1]/255,h=c[2]/255,m=Math.min(1-u,1-f,1-h),g=(1-u-m)/(1-m)||0,v=(1-f-m)/(1-m)||0,p=(1-h-m)/(1-m)||0;return[g*100,v*100,p*100,m*100]};function o(c,u){return(c[0]-u[0])**2+(c[1]-u[1])**2+(c[2]-u[2])**2}r.rgb.keyword=function(c){let u=s[c];if(u)return u;let f=1/0,h;for(let m of Object.keys(t)){let g=t[m],v=o(c,g);v<f&&(f=v,h=m)}return h},r.keyword.rgb=function(c){return t[c]},r.rgb.xyz=function(c){let u=c[0]/255,f=c[1]/255,h=c[2]/255;u=u>.04045?((u+.055)/1.055)**2.4:u/12.92,f=f>.04045?((f+.055)/1.055)**2.4:f/12.92,h=h>.04045?((h+.055)/1.055)**2.4:h/12.92;let m=u*.4124+f*.3576+h*.1805,g=u*.2126+f*.7152+h*.0722,v=u*.0193+f*.1192+h*.9505;return[m*100,g*100,v*100]},r.rgb.lab=function(c){let u=r.rgb.xyz(c),f=u[0],h=u[1],m=u[2];f/=95.047,h/=100,m/=108.883,f=f>.008856?f**(1/3):7.787*f+16/116,h=h>.008856?h**(1/3):7.787*h+16/116,m=m>.008856?m**(1/3):7.787*m+16/116;let g=116*h-16,v=500*(f-h),p=200*(h-m);return[g,v,p]},r.hsl.rgb=function(c){let u=c[0]/360,f=c[1]/100,h=c[2]/100,m,g,v;if(f===0)return v=h*255,[v,v,v];h<.5?m=h*(1+f):m=h+f-h*f;let p=2*h-m,y=[0,0,0];for(let w=0;w<3;w++)g=u+1/3*-(w-1),g<0&&g++,g>1&&g--,6*g<1?v=p+(m-p)*6*g:2*g<1?v=m:3*g<2?v=p+(m-p)*(2/3-g)*6:v=p,y[w]=v*255;return y},r.hsl.hsv=function(c){let u=c[0],f=c[1]/100,h=c[2]/100,m=f,g=Math.max(h,.01);h*=2,f*=h<=1?h:2-h,m*=g<=1?g:2-g;let v=(h+f)/2,p=h===0?2*m/(g+m):2*f/(h+f);return[u,p*100,v*100]},r.hsv.rgb=function(c){let u=c[0]/60,f=c[1]/100,h=c[2]/100,m=Math.floor(u)%6,g=u-Math.floor(u),v=255*h*(1-f),p=255*h*(1-f*g),y=255*h*(1-f*(1-g));switch(h*=255,m){case 0:return[h,y,v];case 1:return[p,h,v];case 2:return[v,h,y];case 3:return[v,p,h];case 4:return[y,v,h];case 5:return[h,v,p]}},r.hsv.hsl=function(c){let u=c[0],f=c[1]/100,h=c[2]/100,m=Math.max(h,.01),g,v;v=(2-f)*h;let p=(2-f)*m;return g=f*m,g/=p<=1?p:2-p,g=g||0,v/=2,[u,g*100,v*100]},r.hwb.rgb=function(c){let u=c[0]/360,f=c[1]/100,h=c[2]/100,m=f+h,g;m>1&&(f/=m,h/=m);let v=Math.floor(6*u),p=1-h;g=6*u-v,(v&1)!==0&&(g=1-g);let y=f+g*(p-f),w,E,R;switch(v){default:case 6:case 0:w=p,E=y,R=f;break;case 1:w=y,E=p,R=f;break;case 2:w=f,E=p,R=y;break;case 3:w=f,E=y,R=p;break;case 4:w=y,E=f,R=p;break;case 5:w=p,E=f,R=y;break}return[w*255,E*255,R*255]},r.cmyk.rgb=function(c){let u=c[0]/100,f=c[1]/100,h=c[2]/100,m=c[3]/100,g=1-Math.min(1,u*(1-m)+m),v=1-Math.min(1,f*(1-m)+m),p=1-Math.min(1,h*(1-m)+m);return[g*255,v*255,p*255]},r.xyz.rgb=function(c){let u=c[0]/100,f=c[1]/100,h=c[2]/100,m,g,v;return m=u*3.2406+f*-1.5372+h*-.4986,g=u*-.9689+f*1.8758+h*.0415,v=u*.0557+f*-.204+h*1.057,m=m>.0031308?1.055*m**(1/2.4)-.055:m*12.92,g=g>.0031308?1.055*g**(1/2.4)-.055:g*12.92,v=v>.0031308?1.055*v**(1/2.4)-.055:v*12.92,m=Math.min(Math.max(0,m),1),g=Math.min(Math.max(0,g),1),v=Math.min(Math.max(0,v),1),[m*255,g*255,v*255]},r.xyz.lab=function(c){let u=c[0],f=c[1],h=c[2];u/=95.047,f/=100,h/=108.883,u=u>.008856?u**(1/3):7.787*u+16/116,f=f>.008856?f**(1/3):7.787*f+16/116,h=h>.008856?h**(1/3):7.787*h+16/116;let m=116*f-16,g=500*(u-f),v=200*(f-h);return[m,g,v]},r.lab.xyz=function(c){let u=c[0],f=c[1],h=c[2],m,g,v;g=(u+16)/116,m=f/500+g,v=g-h/200;let p=g**3,y=m**3,w=v**3;return g=p>.008856?p:(g-16/116)/7.787,m=y>.008856?y:(m-16/116)/7.787,v=w>.008856?w:(v-16/116)/7.787,m*=95.047,g*=100,v*=108.883,[m,g,v]},r.lab.lch=function(c){let u=c[0],f=c[1],h=c[2],m;m=Math.atan2(h,f)*360/2/Math.PI,m<0&&(m+=360);let v=Math.sqrt(f*f+h*h);return[u,v,m]},r.lch.lab=function(c){let u=c[0],f=c[1],m=c[2]/360*2*Math.PI,g=f*Math.cos(m),v=f*Math.sin(m);return[u,g,v]},r.rgb.ansi16=function(c,u=null){let[f,h,m]=c,g=u===null?r.rgb.hsv(c)[2]:u;if(g=Math.round(g/50),g===0)return 30;let v=30+(Math.round(m/255)<<2|Math.round(h/255)<<1|Math.round(f/255));return g===2&&(v+=60),v},r.hsv.ansi16=function(c){return r.rgb.ansi16(r.hsv.rgb(c),c[2])},r.rgb.ansi256=function(c){let u=c[0],f=c[1],h=c[2];return u===f&&f===h?u<8?16:u>248?231:Math.round((u-8)/247*24)+232:16+36*Math.round(u/255*5)+6*Math.round(f/255*5)+Math.round(h/255*5)},r.ansi16.rgb=function(c){let u=c%10;if(u===0||u===7)return c>50&&(u+=3.5),u=u/10.5*255,[u,u,u];let f=(~~(c>50)+1)*.5,h=(u&1)*f*255,m=(u>>1&1)*f*255,g=(u>>2&1)*f*255;return[h,m,g]},r.ansi256.rgb=function(c){if(c>=232){let g=(c-232)*10+8;return[g,g,g]}c-=16;let u,f=Math.floor(c/36)/5*255,h=Math.floor((u=c%36)/6)/5*255,m=u%6/5*255;return[f,h,m]},r.rgb.hex=function(c){let f=(((Math.round(c[0])&255)<<16)+((Math.round(c[1])&255)<<8)+(Math.round(c[2])&255)).toString(16).toUpperCase();return"000000".substring(f.length)+f},r.hex.rgb=function(c){let u=c.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!u)return[0,0,0];let f=u[0];u[0].length===3&&(f=f.split("").map(p=>p+p).join(""));let h=parseInt(f,16),m=h>>16&255,g=h>>8&255,v=h&255;return[m,g,v]},r.rgb.hcg=function(c){let u=c[0]/255,f=c[1]/255,h=c[2]/255,m=Math.max(Math.max(u,f),h),g=Math.min(Math.min(u,f),h),v=m-g,p,y;return v<1?p=g/(1-v):p=0,v<=0?y=0:m===u?y=(f-h)/v%6:m===f?y=2+(h-u)/v:y=4+(u-f)/v,y/=6,y%=1,[y*360,v*100,p*100]},r.hsl.hcg=function(c){let u=c[1]/100,f=c[2]/100,h=f<.5?2*u*f:2*u*(1-f),m=0;return h<1&&(m=(f-.5*h)/(1-h)),[c[0],h*100,m*100]},r.hsv.hcg=function(c){let u=c[1]/100,f=c[2]/100,h=u*f,m=0;return h<1&&(m=(f-h)/(1-h)),[c[0],h*100,m*100]},r.hcg.rgb=function(c){let u=c[0]/360,f=c[1]/100,h=c[2]/100;if(f===0)return[h*255,h*255,h*255];let m=[0,0,0],g=u%1*6,v=g%1,p=1-v,y=0;switch(Math.floor(g)){case 0:m[0]=1,m[1]=v,m[2]=0;break;case 1:m[0]=p,m[1]=1,m[2]=0;break;case 2:m[0]=0,m[1]=1,m[2]=v;break;case 3:m[0]=0,m[1]=p,m[2]=1;break;case 4:m[0]=v,m[1]=0,m[2]=1;break;default:m[0]=1,m[1]=0,m[2]=p}return y=(1-f)*h,[(f*m[0]+y)*255,(f*m[1]+y)*255,(f*m[2]+y)*255]},r.hcg.hsv=function(c){let u=c[1]/100,f=c[2]/100,h=u+f*(1-u),m=0;return h>0&&(m=u/h),[c[0],m*100,h*100]},r.hcg.hsl=function(c){let u=c[1]/100,h=c[2]/100*(1-u)+.5*u,m=0;return h>0&&h<.5?m=u/(2*h):h>=.5&&h<1&&(m=u/(2*(1-h))),[c[0],m*100,h*100]},r.hcg.hwb=function(c){let u=c[1]/100,f=c[2]/100,h=u+f*(1-u);return[c[0],(h-u)*100,(1-h)*100]},r.hwb.hcg=function(c){let u=c[1]/100,h=1-c[2]/100,m=h-u,g=0;return m<1&&(g=(h-m)/(1-m)),[c[0],m*100,g*100]},r.apple.rgb=function(c){return[c[0]/65535*255,c[1]/65535*255,c[2]/65535*255]},r.rgb.apple=function(c){return[c[0]/255*65535,c[1]/255*65535,c[2]/255*65535]},r.gray.rgb=function(c){return[c[0]/100*255,c[0]/100*255,c[0]/100*255]},r.gray.hsl=function(c){return[0,0,c[0]]},r.gray.hsv=r.gray.hsl,r.gray.hwb=function(c){return[0,100,c[0]]},r.gray.cmyk=function(c){return[0,0,0,c[0]]},r.gray.lab=function(c){return[c[0],0,0]},r.gray.hex=function(c){let u=Math.round(c[0]/100*255)&255,h=((u<<16)+(u<<8)+u).toString(16).toUpperCase();return"000000".substring(h.length)+h},r.rgb.gray=function(c){return[(c[0]+c[1]+c[2])/3/255*100]}}}),Ex=Nr({"node_modules/color-convert/route.js"(a,e){var t=xm();function s(){let u={},f=Object.keys(t);for(let h=f.length,m=0;m<h;m++)u[f[m]]={distance:-1,parent:null};return u}function r(u){let f=s(),h=[u];for(f[u].distance=0;h.length;){let m=h.pop(),g=Object.keys(t[m]);for(let v=g.length,p=0;p<v;p++){let y=g[p],w=f[y];w.distance===-1&&(w.distance=f[m].distance+1,w.parent=m,h.unshift(y))}}return f}function o(u,f){return function(h){return f(u(h))}}function c(u,f){let h=[f[u].parent,u],m=t[f[u].parent][u],g=f[u].parent;for(;f[g].parent;)h.unshift(f[g].parent),m=o(t[f[g].parent][g],m),g=f[g].parent;return m.conversion=h,m}e.exports=function(u){let f=r(u),h={},m=Object.keys(f);for(let g=m.length,v=0;v<g;v++){let p=m[v];f[p].parent!==null&&(h[p]=c(p,f))}return h}}}),xx=Nr({"node_modules/color-convert/index.js"(a,e){var t=xm(),s=Ex(),r={},o=Object.keys(t);function c(f){let h=function(...m){let g=m[0];return g==null?g:(g.length>1&&(m=g),f(m))};return"conversion"in f&&(h.conversion=f.conversion),h}function u(f){let h=function(...m){let g=m[0];if(g==null)return g;g.length>1&&(m=g);let v=f(m);if(typeof v=="object")for(let p=v.length,y=0;y<p;y++)v[y]=Math.round(v[y]);return v};return"conversion"in f&&(h.conversion=f.conversion),h}o.forEach(f=>{r[f]={},Object.defineProperty(r[f],"channels",{value:t[f].channels}),Object.defineProperty(r[f],"labels",{value:t[f].labels});let h=s(f);Object.keys(h).forEach(g=>{let v=h[g];r[f][g]=u(v),r[f][g].raw=c(v)})}),e.exports=r}}),Sx=Nr({"node_modules/ansi-styles/index.js"(a,e){"use strict";var t=(g,v)=>(...p)=>`\x1B[${g(...p)+v}m`,s=(g,v)=>(...p)=>{let y=g(...p);return`\x1B[${38+v};5;${y}m`},r=(g,v)=>(...p)=>{let y=g(...p);return`\x1B[${38+v};2;${y[0]};${y[1]};${y[2]}m`},o=g=>g,c=(g,v,p)=>[g,v,p],u=(g,v,p)=>{Object.defineProperty(g,v,{get:()=>{let y=p();return Object.defineProperty(g,v,{value:y,enumerable:!0,configurable:!0}),y},enumerable:!0,configurable:!0})},f,h=(g,v,p,y)=>{f===void 0&&(f=xx());let w=y?10:0,E={};for(let[R,$]of Object.entries(f)){let N=R==="ansi16"?"ansi":R;R===v?E[N]=g(p,w):typeof $=="object"&&(E[N]=g($[v],w))}return E};function m(){let g=new Map,v={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};v.color.gray=v.color.blackBright,v.bgColor.bgGray=v.bgColor.bgBlackBright,v.color.grey=v.color.blackBright,v.bgColor.bgGrey=v.bgColor.bgBlackBright;for(let[p,y]of Object.entries(v)){for(let[w,E]of Object.entries(y))v[w]={open:`\x1B[${E[0]}m`,close:`\x1B[${E[1]}m`},y[w]=v[w],g.set(E[0],E[1]);Object.defineProperty(v,p,{value:y,enumerable:!1})}return Object.defineProperty(v,"codes",{value:g,enumerable:!1}),v.color.close="\x1B[39m",v.bgColor.close="\x1B[49m",u(v.color,"ansi",()=>h(t,"ansi16",o,!1)),u(v.color,"ansi256",()=>h(s,"ansi256",o,!1)),u(v.color,"ansi16m",()=>h(r,"rgb",c,!1)),u(v.bgColor,"ansi",()=>h(t,"ansi16",o,!0)),u(v.bgColor,"ansi256",()=>h(s,"ansi256",o,!0)),u(v.bgColor,"ansi16m",()=>h(r,"rgb",c,!0)),v}Object.defineProperty(e,"exports",{enumerable:!0,get:m})}}),Px=Nr({"node_modules/has-flag/index.js"(a,e){"use strict";e.exports=(t,s=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",o=s.indexOf(r+t),c=s.indexOf("--");return o!==-1&&(c===-1||o<c)}}}),Rx=Nr({"node_modules/supports-color/index.js"(a,e){"use strict";var t=dm("os"),s=dm("tty"),r=Px(),{env:o}=process,c;r("no-color")||r("no-colors")||r("color=false")||r("color=never")?c=0:(r("color")||r("colors")||r("color=true")||r("color=always"))&&(c=1),"FORCE_COLOR"in o&&(o.FORCE_COLOR==="true"?c=1:o.FORCE_COLOR==="false"?c=0:c=o.FORCE_COLOR.length===0?1:Math.min(parseInt(o.FORCE_COLOR,10),3));function u(m){return m===0?!1:{level:m,hasBasic:!0,has256:m>=2,has16m:m>=3}}function f(m,g){if(c===0)return 0;if(r("color=16m")||r("color=full")||r("color=truecolor"))return 3;if(r("color=256"))return 2;if(m&&!g&&c===void 0)return 0;let v=c||0;if(o.TERM==="dumb")return v;if(process.platform==="win32"){let p=t.release().split(".");return Number(p[0])>=10&&Number(p[2])>=10586?Number(p[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(p=>p in o)||o.CI_NAME==="codeship"?1:v;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if(o.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in o){let p=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return p>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:v}function h(m){let g=f(m,m&&m.isTTY);return u(g)}e.exports={supportsColor:h,stdout:u(f(!0,s.isatty(1))),stderr:u(f(!0,s.isatty(2)))}}}),Ax=Nr({"node_modules/chalk/source/util.js"(a,e){"use strict";var t=(r,o,c)=>{let u=r.indexOf(o);if(u===-1)return r;let f=o.length,h=0,m="";do m+=r.substr(h,u-h)+o+c,h=u+f,u=r.indexOf(o,h);while(u!==-1);return m+=r.substr(h),m},s=(r,o,c,u)=>{let f=0,h="";do{let m=r[u-1]==="\r";h+=r.substr(f,(m?u-1:u)-f)+o+(m?`\r
`:`
`)+c,f=u+1,u=r.indexOf(`
`,f)}while(u!==-1);return h+=r.substr(f),h};e.exports={stringReplaceAll:t,stringEncaseCRLFWithFirstIndex:s}}}),Tx=Nr({"node_modules/chalk/source/templates.js"(a,e){"use strict";var t=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,s=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,r=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,o=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,c=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function u(g){let v=g[0]==="u",p=g[1]==="{";return v&&!p&&g.length===5||g[0]==="x"&&g.length===3?String.fromCharCode(parseInt(g.slice(1),16)):v&&p?String.fromCodePoint(parseInt(g.slice(2,-1),16)):c.get(g)||g}function f(g,v){let p=[],y=v.trim().split(/\s*,\s*/g),w;for(let E of y){let R=Number(E);if(!Number.isNaN(R))p.push(R);else if(w=E.match(r))p.push(w[2].replace(o,($,N,I)=>N?u(N):I));else throw new Error(`Invalid Chalk template style argument: ${E} (in style '${g}')`)}return p}function h(g){s.lastIndex=0;let v=[],p;for(;(p=s.exec(g))!==null;){let y=p[1];if(p[2]){let w=f(y,p[2]);v.push([y].concat(w))}else v.push([y])}return v}function m(g,v){let p={};for(let w of v)for(let E of w.styles)p[E[0]]=w.inverse?null:E.slice(1);let y=g;for(let[w,E]of Object.entries(p))if(Array.isArray(E)){if(!(w in y))throw new Error(`Unknown Chalk style: ${w}`);y=E.length>0?y[w](...E):y[w]}return y}e.exports=(g,v)=>{let p=[],y=[],w=[];if(v.replace(t,(E,R,$,N,I,M)=>{if(R)w.push(u(R));else if(N){let j=w.join("");w=[],y.push(p.length===0?j:m(g,p)(j)),p.push({inverse:$,styles:h(N)})}else if(I){if(p.length===0)throw new Error("Found extraneous } in Chalk template literal");y.push(m(g,p)(w.join(""))),w=[],p.pop()}else w.push(M)}),y.push(w.join("")),p.length>0){let E=`Chalk template literal is missing ${p.length} closing bracket${p.length===1?"":"s"} (\`}\`)`;throw new Error(E)}return y.join("")}}}),kx=Nr({"node_modules/chalk/source/index.js"(a,e){"use strict";var t=Sx(),{stdout:s,stderr:r}=Rx(),{stringReplaceAll:o,stringEncaseCRLFWithFirstIndex:c}=Ax(),{isArray:u}=Array,f=["ansi","ansi","ansi256","ansi16m"],h=Object.create(null),m=(j,z={})=>{if(z.level&&!(Number.isInteger(z.level)&&z.level>=0&&z.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let W=s?s.level:0;j.level=z.level===void 0?W:z.level},g=class{constructor(j){return v(j)}},v=j=>{let z={};return m(z,j),z.template=(...W)=>I(z.template,...W),Object.setPrototypeOf(z,p.prototype),Object.setPrototypeOf(z.template,z),z.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},z.template.Instance=g,z.template};function p(j){return v(j)}for(let[j,z]of Object.entries(t))h[j]={get(){let W=R(this,E(z.open,z.close,this._styler),this._isEmpty);return Object.defineProperty(this,j,{value:W}),W}};h.visible={get(){let j=R(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:j}),j}};var y=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(let j of y)h[j]={get(){let{level:z}=this;return function(...W){let B=E(t.color[f[z]][j](...W),t.color.close,this._styler);return R(this,B,this._isEmpty)}}};for(let j of y){let z="bg"+j[0].toUpperCase()+j.slice(1);h[z]={get(){let{level:W}=this;return function(...B){let J=E(t.bgColor[f[W]][j](...B),t.bgColor.close,this._styler);return R(this,J,this._isEmpty)}}}}var w=Object.defineProperties(()=>{},{...h,level:{enumerable:!0,get(){return this._generator.level},set(j){this._generator.level=j}}}),E=(j,z,W)=>{let B,J;return W===void 0?(B=j,J=z):(B=W.openAll+j,J=z+W.closeAll),{open:j,close:z,openAll:B,closeAll:J,parent:W}},R=(j,z,W)=>{let B=(...J)=>u(J[0])&&u(J[0].raw)?$(B,I(B,...J)):$(B,J.length===1?""+J[0]:J.join(" "));return Object.setPrototypeOf(B,w),B._generator=j,B._styler=z,B._isEmpty=W,B},$=(j,z)=>{if(j.level<=0||!z)return j._isEmpty?"":z;let W=j._styler;if(W===void 0)return z;let{openAll:B,closeAll:J}=W;if(z.indexOf("\x1B")!==-1)for(;W!==void 0;)z=o(z,W.close,W.open),W=W.parent;let te=z.indexOf(`
`);return te!==-1&&(z=c(z,J,B,te)),B+z+J},N,I=(j,...z)=>{let[W]=z;if(!u(W)||!u(W.raw))return z.join(" ");let B=z.slice(1),J=[W.raw[0]];for(let te=1;te<W.length;te++)J.push(String(B[te-1]).replace(/[{}\\]/g,"\\$&"),String(W.raw[te]));return N===void 0&&(N=Tx()),N(j,J.join(""))};Object.defineProperties(p.prototype,h);var M=p();M.supportsColor=s,M.stderr=p({level:r?r.level:0}),M.stderr.supportsColor=r,e.exports=M}}),Ox=Nr({"node_modules/lodash/lodash.js"(a,e){(function(){var t,s="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",u="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",h=500,m="__lodash_placeholder__",g=1,v=2,p=4,y=1,w=2,E=1,R=2,$=4,N=8,I=16,M=32,j=64,z=128,W=256,B=512,J=30,te="...",ie=800,G=16,Q=1,se=2,Ue=3,ge=1/0,_e=9007199254740991,Se=17976931348623157e292,ce=NaN,Fe=4294967295,xt=Fe-1,Tt=Fe>>>1,Ne=[["ary",z],["bind",E],["bindKey",R],["curry",N],["curryRight",I],["flip",B],["partial",M],["partialRight",j],["rearg",W]],Ke="[object Arguments]",lt="[object Array]",kt="[object AsyncFunction]",Vt="[object Boolean]",Nt="[object Date]",ft="[object DOMException]",Ye="[object Error]",fr="[object Function]",yt="[object GeneratorFunction]",ye="[object Map]",Wt="[object Number]",Sr="[object Null]",Ot="[object Object]",Lr="[object Promise]",bt="[object Proxy]",St="[object RegExp]",Je="[object Set]",gt="[object String]",Lt="[object Symbol]",Ft="[object Undefined]",Fr="[object WeakMap]",Ra="[object WeakSet]",Ct="[object ArrayBuffer]",dr="[object DataView]",Kn="[object Float32Array]",Yn="[object Float64Array]",Gr="[object Int8Array]",Qn="[object Int16Array]",Aa="[object Int32Array]",Ta="[object Uint8Array]",Jn="[object Uint8ClampedArray]",Gt="[object Uint16Array]",ka="[object Uint32Array]",yo=/\b__p \+= '';/g,bo=/\b(__p \+=) '' \+/g,wo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ii=/&(?:amp|lt|gt|quot|#39);/g,si=/[&<>"']/g,pn=RegExp(ii.source),Eo=RegExp(si.source),oi=/<%-([\s\S]+?)%>/g,xo=/<%([\s\S]+?)%>/g,Xn=/<%=([\s\S]+?)%>/g,li=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,So=/^\w*$/,ci=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Oa=/[\\^$.*+?()[\]{}|]/g,ui=RegExp(Oa.source),T=/^\s+/,P=/\s/,O=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,L=/\{\n\/\* \[wrapped with (.+)\] \*/,q=/,? & /,re=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,be=/[()=,{}\[\]\/\s]/,Ie=/\\(\\)?/g,ze=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ct=/\w*$/,Ce=/^[-+]0x[0-9a-f]+$/i,nt=/^0b[01]+$/i,dt=/^\[object .+?Constructor\]$/,Xe=/^0o[0-7]+$/i,Le=/^(?:0|[1-9]\d*)$/,at=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,je=/($^)/,Kr=/['\n\r\u2028\u2029\\]/g,Pt="\\ud800-\\udfff",Kt="\\u0300-\\u036f",Ve="\\ufe20-\\ufe2f",jt="\\u20d0-\\u20ff",qt=Kt+Ve+jt,nr="\\u2700-\\u27bf",jr="a-z\\xdf-\\xf6\\xf8-\\xff",Pr="\\xac\\xb1\\xd7\\xf7",In="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ea="\\u2000-\\u206f",ta=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Yr="A-Z\\xc0-\\xd6\\xd8-\\xde",Qr="\\ufe0e\\ufe0f",hr=Pr+In+ea+ta,qr="['\u2019]",Ca="["+Pt+"]",zr="["+hr+"]",ra="["+qt+"]",fi="\\d+",di="["+nr+"]",mn="["+jr+"]",gn="[^"+Pt+hr+fi+nr+jr+Yr+"]",na="\\ud83c[\\udffb-\\udfff]",$n="(?:"+ra+"|"+na+")",hi="[^"+Pt+"]",aa="(?:\\ud83c[\\udde6-\\uddff]){2}",Da="[\\ud800-\\udbff][\\udc00-\\udfff]",It="["+Yr+"]",Jr="\\u200d",ia="(?:"+mn+"|"+gn+")",sa="(?:"+It+"|"+gn+")",Xr="(?:"+qr+"(?:d|ll|m|re|s|t|ve))?",Po="(?:"+qr+"(?:D|LL|M|RE|S|T|VE))?",en=$n+"?",vn="["+Qr+"]?",pi="(?:"+Jr+"(?:"+[hi,aa,Da].join("|")+")"+vn+en+")*",Ro="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ao="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",mi=vn+en+pi,Bc="(?:"+[di,aa,Da].join("|")+")"+mi,Vc="(?:"+[hi+ra+"?",ra,aa,Da,Ca].join("|")+")",Wc=RegExp(qr,"g"),Gc=RegExp(ra,"g"),gi=RegExp(na+"(?="+na+")|"+Vc+mi,"g"),Kc=RegExp([It+"?"+mn+"+"+Xr+"(?="+[zr,It,"$"].join("|")+")",sa+"+"+Po+"(?="+[zr,It+ia,"$"].join("|")+")",It+"?"+ia+"+"+Xr,It+"+"+Po,Ao,Ro,fi,Bc].join("|"),"g"),Yc=RegExp("["+Jr+Pt+qt+Qr+"]"),zm=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Um=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Hm=-1,it={};it[Kn]=it[Yn]=it[Gr]=it[Qn]=it[Aa]=it[Ta]=it[Jn]=it[Gt]=it[ka]=!0,it[Ke]=it[lt]=it[Ct]=it[Vt]=it[dr]=it[Nt]=it[Ye]=it[fr]=it[ye]=it[Wt]=it[Ot]=it[St]=it[Je]=it[gt]=it[Fr]=!1;var et={};et[Ke]=et[lt]=et[Ct]=et[dr]=et[Vt]=et[Nt]=et[Kn]=et[Yn]=et[Gr]=et[Qn]=et[Aa]=et[ye]=et[Wt]=et[Ot]=et[St]=et[Je]=et[gt]=et[Lt]=et[Ta]=et[Jn]=et[Gt]=et[ka]=!0,et[Ye]=et[fr]=et[Fr]=!1;var Zm={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Bm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Vm={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Wm={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Gm=parseFloat,Km=parseInt,Qc=typeof global=="object"&&global&&global.Object===Object&&global,Ym=typeof self=="object"&&self&&self.Object===Object&&self,Rt=Qc||Ym||Function("return this")(),To=typeof a=="object"&&a&&!a.nodeType&&a,Mn=To&&typeof e=="object"&&e&&!e.nodeType&&e,Jc=Mn&&Mn.exports===To,ko=Jc&&Qc.process,pr=(function(){try{var C=Mn&&Mn.require&&Mn.require("util").types;return C||ko&&ko.binding&&ko.binding("util")}catch{}})(),Xc=pr&&pr.isArrayBuffer,eu=pr&&pr.isDate,tu=pr&&pr.isMap,ru=pr&&pr.isRegExp,nu=pr&&pr.isSet,au=pr&&pr.isTypedArray;function ar(C,U,F){switch(F.length){case 0:return C.call(U);case 1:return C.call(U,F[0]);case 2:return C.call(U,F[0],F[1]);case 3:return C.call(U,F[0],F[1],F[2])}return C.apply(U,F)}function Qm(C,U,F,ae){for(var ve=-1,He=C==null?0:C.length;++ve<He;){var wt=C[ve];U(ae,wt,F(wt),C)}return ae}function mr(C,U){for(var F=-1,ae=C==null?0:C.length;++F<ae&&U(C[F],F,C)!==!1;);return C}function Jm(C,U){for(var F=C==null?0:C.length;F--&&U(C[F],F,C)!==!1;);return C}function iu(C,U){for(var F=-1,ae=C==null?0:C.length;++F<ae;)if(!U(C[F],F,C))return!1;return!0}function _n(C,U){for(var F=-1,ae=C==null?0:C.length,ve=0,He=[];++F<ae;){var wt=C[F];U(wt,F,C)&&(He[ve++]=wt)}return He}function vi(C,U){var F=C==null?0:C.length;return!!F&&oa(C,U,0)>-1}function Oo(C,U,F){for(var ae=-1,ve=C==null?0:C.length;++ae<ve;)if(F(U,C[ae]))return!0;return!1}function st(C,U){for(var F=-1,ae=C==null?0:C.length,ve=Array(ae);++F<ae;)ve[F]=U(C[F],F,C);return ve}function yn(C,U){for(var F=-1,ae=U.length,ve=C.length;++F<ae;)C[ve+F]=U[F];return C}function Co(C,U,F,ae){var ve=-1,He=C==null?0:C.length;for(ae&&He&&(F=C[++ve]);++ve<He;)F=U(F,C[ve],ve,C);return F}function Xm(C,U,F,ae){var ve=C==null?0:C.length;for(ae&&ve&&(F=C[--ve]);ve--;)F=U(F,C[ve],ve,C);return F}function Do(C,U){for(var F=-1,ae=C==null?0:C.length;++F<ae;)if(U(C[F],F,C))return!0;return!1}var eg=Io("length");function tg(C){return C.split("")}function rg(C){return C.match(re)||[]}function su(C,U,F){var ae;return F(C,function(ve,He,wt){if(U(ve,He,wt))return ae=He,!1}),ae}function _i(C,U,F,ae){for(var ve=C.length,He=F+(ae?1:-1);ae?He--:++He<ve;)if(U(C[He],He,C))return He;return-1}function oa(C,U,F){return U===U?pg(C,U,F):_i(C,ou,F)}function ng(C,U,F,ae){for(var ve=F-1,He=C.length;++ve<He;)if(ae(C[ve],U))return ve;return-1}function ou(C){return C!==C}function lu(C,U){var F=C==null?0:C.length;return F?Mo(C,U)/F:ce}function Io(C){return function(U){return U==null?t:U[C]}}function $o(C){return function(U){return C==null?t:C[U]}}function cu(C,U,F,ae,ve){return ve(C,function(He,wt,Qe){F=ae?(ae=!1,He):U(F,He,wt,Qe)}),F}function ag(C,U){var F=C.length;for(C.sort(U);F--;)C[F]=C[F].value;return C}function Mo(C,U){for(var F,ae=-1,ve=C.length;++ae<ve;){var He=U(C[ae]);He!==t&&(F=F===t?He:F+He)}return F}function No(C,U){for(var F=-1,ae=Array(C);++F<C;)ae[F]=U(F);return ae}function ig(C,U){return st(U,function(F){return[F,C[F]]})}function uu(C){return C&&C.slice(0,pu(C)+1).replace(T,"")}function ir(C){return function(U){return C(U)}}function Lo(C,U){return st(U,function(F){return C[F]})}function Ia(C,U){return C.has(U)}function fu(C,U){for(var F=-1,ae=C.length;++F<ae&&oa(U,C[F],0)>-1;);return F}function du(C,U){for(var F=C.length;F--&&oa(U,C[F],0)>-1;);return F}function sg(C,U){for(var F=C.length,ae=0;F--;)C[F]===U&&++ae;return ae}var og=$o(Zm),lg=$o(Bm);function cg(C){return"\\"+Wm[C]}function ug(C,U){return C==null?t:C[U]}function la(C){return Yc.test(C)}function fg(C){return zm.test(C)}function dg(C){for(var U,F=[];!(U=C.next()).done;)F.push(U.value);return F}function Fo(C){var U=-1,F=Array(C.size);return C.forEach(function(ae,ve){F[++U]=[ve,ae]}),F}function hu(C,U){return function(F){return C(U(F))}}function bn(C,U){for(var F=-1,ae=C.length,ve=0,He=[];++F<ae;){var wt=C[F];(wt===U||wt===m)&&(C[F]=m,He[ve++]=F)}return He}function yi(C){var U=-1,F=Array(C.size);return C.forEach(function(ae){F[++U]=ae}),F}function hg(C){var U=-1,F=Array(C.size);return C.forEach(function(ae){F[++U]=[ae,ae]}),F}function pg(C,U,F){for(var ae=F-1,ve=C.length;++ae<ve;)if(C[ae]===U)return ae;return-1}function mg(C,U,F){for(var ae=F+1;ae--;)if(C[ae]===U)return ae;return ae}function ca(C){return la(C)?vg(C):eg(C)}function Rr(C){return la(C)?_g(C):tg(C)}function pu(C){for(var U=C.length;U--&&P.test(C.charAt(U)););return U}var gg=$o(Vm);function vg(C){for(var U=gi.lastIndex=0;gi.test(C);)++U;return U}function _g(C){return C.match(gi)||[]}function yg(C){return C.match(Kc)||[]}var bg=(function C(U){U=U==null?Rt:wn.defaults(Rt.Object(),U,wn.pick(Rt,Um));var F=U.Array,ae=U.Date,ve=U.Error,He=U.Function,wt=U.Math,Qe=U.Object,jo=U.RegExp,wg=U.String,gr=U.TypeError,bi=F.prototype,Eg=He.prototype,ua=Qe.prototype,wi=U["__core-js_shared__"],Ei=Eg.toString,We=ua.hasOwnProperty,xg=0,mu=(function(){var n=/[^.]+$/.exec(wi&&wi.keys&&wi.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})(),xi=ua.toString,Sg=Ei.call(Qe),Pg=Rt._,Rg=jo("^"+Ei.call(We).replace(Oa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Si=Jc?U.Buffer:t,En=U.Symbol,Pi=U.Uint8Array,gu=Si?Si.allocUnsafe:t,Ri=hu(Qe.getPrototypeOf,Qe),vu=Qe.create,_u=ua.propertyIsEnumerable,Ai=bi.splice,yu=En?En.isConcatSpreadable:t,$a=En?En.iterator:t,Nn=En?En.toStringTag:t,Ti=(function(){try{var n=zn(Qe,"defineProperty");return n({},"",{}),n}catch{}})(),Ag=U.clearTimeout!==Rt.clearTimeout&&U.clearTimeout,Tg=ae&&ae.now!==Rt.Date.now&&ae.now,kg=U.setTimeout!==Rt.setTimeout&&U.setTimeout,ki=wt.ceil,Oi=wt.floor,qo=Qe.getOwnPropertySymbols,Og=Si?Si.isBuffer:t,bu=U.isFinite,Cg=bi.join,Dg=hu(Qe.keys,Qe),Et=wt.max,$t=wt.min,Ig=ae.now,$g=U.parseInt,wu=wt.random,Mg=bi.reverse,zo=zn(U,"DataView"),Ma=zn(U,"Map"),Uo=zn(U,"Promise"),fa=zn(U,"Set"),Na=zn(U,"WeakMap"),La=zn(Qe,"create"),Ci=Na&&new Na,da={},Ng=Un(zo),Lg=Un(Ma),Fg=Un(Uo),jg=Un(fa),qg=Un(Na),Di=En?En.prototype:t,Fa=Di?Di.valueOf:t,Eu=Di?Di.toString:t;function x(n){if(ht(n)&&!we(n)&&!(n instanceof De)){if(n instanceof vr)return n;if(We.call(n,"__wrapped__"))return Sf(n)}return new vr(n)}var ha=(function(){function n(){}return function(i){if(!ut(i))return{};if(vu)return vu(i);n.prototype=i;var l=new n;return n.prototype=t,l}})();function Ii(){}function vr(n,i){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=t}x.templateSettings={escape:oi,evaluate:xo,interpolate:Xn,variable:"",imports:{_:x}},x.prototype=Ii.prototype,x.prototype.constructor=x,vr.prototype=ha(Ii.prototype),vr.prototype.constructor=vr;function De(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Fe,this.__views__=[]}function zg(){var n=new De(this.__wrapped__);return n.__actions__=Yt(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Yt(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Yt(this.__views__),n}function Ug(){if(this.__filtered__){var n=new De(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Hg(){var n=this.__wrapped__.value(),i=this.__dir__,l=we(n),d=i<0,_=l?n.length:0,S=t_(0,_,this.__views__),A=S.start,k=S.end,D=k-A,H=d?k:A-1,Z=this.__iteratees__,V=Z.length,X=0,oe=$t(D,this.__takeCount__);if(!l||!d&&_==D&&oe==D)return Vu(n,this.__actions__);var fe=[];e:for(;D--&&X<oe;){H+=i;for(var Re=-1,de=n[H];++Re<V;){var Te=Z[Re],$e=Te.iteratee,lr=Te.type,Ht=$e(de);if(lr==se)de=Ht;else if(!Ht){if(lr==Q)continue e;break e}}fe[X++]=de}return fe}De.prototype=ha(Ii.prototype),De.prototype.constructor=De;function Ln(n){var i=-1,l=n==null?0:n.length;for(this.clear();++i<l;){var d=n[i];this.set(d[0],d[1])}}function Zg(){this.__data__=La?La(null):{},this.size=0}function Bg(n){var i=this.has(n)&&delete this.__data__[n];return this.size-=i?1:0,i}function Vg(n){var i=this.__data__;if(La){var l=i[n];return l===f?t:l}return We.call(i,n)?i[n]:t}function Wg(n){var i=this.__data__;return La?i[n]!==t:We.call(i,n)}function Gg(n,i){var l=this.__data__;return this.size+=this.has(n)?0:1,l[n]=La&&i===t?f:i,this}Ln.prototype.clear=Zg,Ln.prototype.delete=Bg,Ln.prototype.get=Vg,Ln.prototype.has=Wg,Ln.prototype.set=Gg;function tn(n){var i=-1,l=n==null?0:n.length;for(this.clear();++i<l;){var d=n[i];this.set(d[0],d[1])}}function Kg(){this.__data__=[],this.size=0}function Yg(n){var i=this.__data__,l=$i(i,n);if(l<0)return!1;var d=i.length-1;return l==d?i.pop():Ai.call(i,l,1),--this.size,!0}function Qg(n){var i=this.__data__,l=$i(i,n);return l<0?t:i[l][1]}function Jg(n){return $i(this.__data__,n)>-1}function Xg(n,i){var l=this.__data__,d=$i(l,n);return d<0?(++this.size,l.push([n,i])):l[d][1]=i,this}tn.prototype.clear=Kg,tn.prototype.delete=Yg,tn.prototype.get=Qg,tn.prototype.has=Jg,tn.prototype.set=Xg;function rn(n){var i=-1,l=n==null?0:n.length;for(this.clear();++i<l;){var d=n[i];this.set(d[0],d[1])}}function ev(){this.size=0,this.__data__={hash:new Ln,map:new(Ma||tn),string:new Ln}}function tv(n){var i=Vi(this,n).delete(n);return this.size-=i?1:0,i}function rv(n){return Vi(this,n).get(n)}function nv(n){return Vi(this,n).has(n)}function av(n,i){var l=Vi(this,n),d=l.size;return l.set(n,i),this.size+=l.size==d?0:1,this}rn.prototype.clear=ev,rn.prototype.delete=tv,rn.prototype.get=rv,rn.prototype.has=nv,rn.prototype.set=av;function Fn(n){var i=-1,l=n==null?0:n.length;for(this.__data__=new rn;++i<l;)this.add(n[i])}function iv(n){return this.__data__.set(n,f),this}function sv(n){return this.__data__.has(n)}Fn.prototype.add=Fn.prototype.push=iv,Fn.prototype.has=sv;function Ar(n){var i=this.__data__=new tn(n);this.size=i.size}function ov(){this.__data__=new tn,this.size=0}function lv(n){var i=this.__data__,l=i.delete(n);return this.size=i.size,l}function cv(n){return this.__data__.get(n)}function uv(n){return this.__data__.has(n)}function fv(n,i){var l=this.__data__;if(l instanceof tn){var d=l.__data__;if(!Ma||d.length<r-1)return d.push([n,i]),this.size=++l.size,this;l=this.__data__=new rn(d)}return l.set(n,i),this.size=l.size,this}Ar.prototype.clear=ov,Ar.prototype.delete=lv,Ar.prototype.get=cv,Ar.prototype.has=uv,Ar.prototype.set=fv;function xu(n,i){var l=we(n),d=!l&&Hn(n),_=!l&&!d&&An(n),S=!l&&!d&&!_&&va(n),A=l||d||_||S,k=A?No(n.length,wg):[],D=k.length;for(var H in n)(i||We.call(n,H))&&!(A&&(H=="length"||_&&(H=="offset"||H=="parent")||S&&(H=="buffer"||H=="byteLength"||H=="byteOffset")||on(H,D)))&&k.push(H);return k}function Su(n){var i=n.length;return i?n[Xo(0,i-1)]:t}function dv(n,i){return Wi(Yt(n),jn(i,0,n.length))}function hv(n){return Wi(Yt(n))}function Ho(n,i,l){(l!==t&&!Tr(n[i],l)||l===t&&!(i in n))&&nn(n,i,l)}function ja(n,i,l){var d=n[i];(!(We.call(n,i)&&Tr(d,l))||l===t&&!(i in n))&&nn(n,i,l)}function $i(n,i){for(var l=n.length;l--;)if(Tr(n[l][0],i))return l;return-1}function pv(n,i,l,d){return xn(n,function(_,S,A){i(d,_,l(_),A)}),d}function Pu(n,i){return n&&Hr(i,At(i),n)}function mv(n,i){return n&&Hr(i,Jt(i),n)}function nn(n,i,l){i=="__proto__"&&Ti?Ti(n,i,{configurable:!0,enumerable:!0,value:l,writable:!0}):n[i]=l}function Zo(n,i){for(var l=-1,d=i.length,_=F(d),S=n==null;++l<d;)_[l]=S?t:Sl(n,i[l]);return _}function jn(n,i,l){return n===n&&(l!==t&&(n=n<=l?n:l),i!==t&&(n=n>=i?n:i)),n}function _r(n,i,l,d,_,S){var A,k=i&g,D=i&v,H=i&p;if(l&&(A=_?l(n,d,_,S):l(n)),A!==t)return A;if(!ut(n))return n;var Z=we(n);if(Z){if(A=n_(n),!k)return Yt(n,A)}else{var V=Mt(n),X=V==fr||V==yt;if(An(n))return Ku(n,k);if(V==Ot||V==Ke||X&&!_){if(A=D||X?{}:mf(n),!k)return D?Vv(n,mv(A,n)):Bv(n,Pu(A,n))}else{if(!et[V])return _?n:{};A=a_(n,V,k)}}S||(S=new Ar);var oe=S.get(n);if(oe)return oe;S.set(n,A),Zf(n)?n.forEach(function(de){A.add(_r(de,i,l,de,n,S))}):Uf(n)&&n.forEach(function(de,Te){A.set(Te,_r(de,i,l,Te,n,S))});var fe=H?D?ul:cl:D?Jt:At,Re=Z?t:fe(n);return mr(Re||n,function(de,Te){Re&&(Te=de,de=n[Te]),ja(A,Te,_r(de,i,l,Te,n,S))}),A}function gv(n){var i=At(n);return function(l){return Ru(l,n,i)}}function Ru(n,i,l){var d=l.length;if(n==null)return!d;for(n=Qe(n);d--;){var _=l[d],S=i[_],A=n[_];if(A===t&&!(_ in n)||!S(A))return!1}return!0}function Au(n,i,l){if(typeof n!="function")throw new gr(c);return Va(function(){n.apply(t,l)},i)}function qa(n,i,l,d){var _=-1,S=vi,A=!0,k=n.length,D=[],H=i.length;if(!k)return D;l&&(i=st(i,ir(l))),d?(S=Oo,A=!1):i.length>=r&&(S=Ia,A=!1,i=new Fn(i));e:for(;++_<k;){var Z=n[_],V=l==null?Z:l(Z);if(Z=d||Z!==0?Z:0,A&&V===V){for(var X=H;X--;)if(i[X]===V)continue e;D.push(Z)}else S(i,V,d)||D.push(Z)}return D}var xn=ef(Ur),Tu=ef(Vo,!0);function vv(n,i){var l=!0;return xn(n,function(d,_,S){return l=!!i(d,_,S),l}),l}function Mi(n,i,l){for(var d=-1,_=n.length;++d<_;){var S=n[d],A=i(S);if(A!=null&&(k===t?A===A&&!or(A):l(A,k)))var k=A,D=S}return D}function _v(n,i,l,d){var _=n.length;for(l=Pe(l),l<0&&(l=-l>_?0:_+l),d=d===t||d>_?_:Pe(d),d<0&&(d+=_),d=l>d?0:Vf(d);l<d;)n[l++]=i;return n}function ku(n,i){var l=[];return xn(n,function(d,_,S){i(d,_,S)&&l.push(d)}),l}function Dt(n,i,l,d,_){var S=-1,A=n.length;for(l||(l=s_),_||(_=[]);++S<A;){var k=n[S];i>0&&l(k)?i>1?Dt(k,i-1,l,d,_):yn(_,k):d||(_[_.length]=k)}return _}var Bo=tf(),Ou=tf(!0);function Ur(n,i){return n&&Bo(n,i,At)}function Vo(n,i){return n&&Ou(n,i,At)}function Ni(n,i){return _n(i,function(l){return ln(n[l])})}function qn(n,i){i=Pn(i,n);for(var l=0,d=i.length;n!=null&&l<d;)n=n[Zr(i[l++])];return l&&l==d?n:t}function Cu(n,i,l){var d=i(n);return we(n)?d:yn(d,l(n))}function zt(n){return n==null?n===t?Ft:Sr:Nn&&Nn in Qe(n)?e_(n):h_(n)}function Wo(n,i){return n>i}function yv(n,i){return n!=null&&We.call(n,i)}function bv(n,i){return n!=null&&i in Qe(n)}function wv(n,i,l){return n>=$t(i,l)&&n<Et(i,l)}function Go(n,i,l){for(var d=l?Oo:vi,_=n[0].length,S=n.length,A=S,k=F(S),D=1/0,H=[];A--;){var Z=n[A];A&&i&&(Z=st(Z,ir(i))),D=$t(Z.length,D),k[A]=!l&&(i||_>=120&&Z.length>=120)?new Fn(A&&Z):t}Z=n[0];var V=-1,X=k[0];e:for(;++V<_&&H.length<D;){var oe=Z[V],fe=i?i(oe):oe;if(oe=l||oe!==0?oe:0,!(X?Ia(X,fe):d(H,fe,l))){for(A=S;--A;){var Re=k[A];if(!(Re?Ia(Re,fe):d(n[A],fe,l)))continue e}X&&X.push(fe),H.push(oe)}}return H}function Ev(n,i,l,d){return Ur(n,function(_,S,A){i(d,l(_),S,A)}),d}function za(n,i,l){i=Pn(i,n),n=yf(n,i);var d=n==null?n:n[Zr(br(i))];return d==null?t:ar(d,n,l)}function Du(n){return ht(n)&&zt(n)==Ke}function xv(n){return ht(n)&&zt(n)==Ct}function Sv(n){return ht(n)&&zt(n)==Nt}function Ua(n,i,l,d,_){return n===i?!0:n==null||i==null||!ht(n)&&!ht(i)?n!==n&&i!==i:Pv(n,i,l,d,Ua,_)}function Pv(n,i,l,d,_,S){var A=we(n),k=we(i),D=A?lt:Mt(n),H=k?lt:Mt(i);D=D==Ke?Ot:D,H=H==Ke?Ot:H;var Z=D==Ot,V=H==Ot,X=D==H;if(X&&An(n)){if(!An(i))return!1;A=!0,Z=!1}if(X&&!Z)return S||(S=new Ar),A||va(n)?df(n,i,l,d,_,S):Jv(n,i,D,l,d,_,S);if(!(l&y)){var oe=Z&&We.call(n,"__wrapped__"),fe=V&&We.call(i,"__wrapped__");if(oe||fe){var Re=oe?n.value():n,de=fe?i.value():i;return S||(S=new Ar),_(Re,de,l,d,S)}}return X?(S||(S=new Ar),Xv(n,i,l,d,_,S)):!1}function Rv(n){return ht(n)&&Mt(n)==ye}function Ko(n,i,l,d){var _=l.length,S=_,A=!d;if(n==null)return!S;for(n=Qe(n);_--;){var k=l[_];if(A&&k[2]?k[1]!==n[k[0]]:!(k[0]in n))return!1}for(;++_<S;){k=l[_];var D=k[0],H=n[D],Z=k[1];if(A&&k[2]){if(H===t&&!(D in n))return!1}else{var V=new Ar;if(d)var X=d(H,Z,D,n,i,V);if(!(X===t?Ua(Z,H,y|w,d,V):X))return!1}}return!0}function Iu(n){if(!ut(n)||l_(n))return!1;var i=ln(n)?Rg:dt;return i.test(Un(n))}function Av(n){return ht(n)&&zt(n)==St}function Tv(n){return ht(n)&&Mt(n)==Je}function kv(n){return ht(n)&&Xi(n.length)&&!!it[zt(n)]}function $u(n){return typeof n=="function"?n:n==null?Xt:typeof n=="object"?we(n)?Lu(n[0],n[1]):Nu(n):nd(n)}function Yo(n){if(!Ba(n))return Dg(n);var i=[];for(var l in Qe(n))We.call(n,l)&&l!="constructor"&&i.push(l);return i}function Ov(n){if(!ut(n))return d_(n);var i=Ba(n),l=[];for(var d in n)d=="constructor"&&(i||!We.call(n,d))||l.push(d);return l}function Qo(n,i){return n<i}function Mu(n,i){var l=-1,d=Qt(n)?F(n.length):[];return xn(n,function(_,S,A){d[++l]=i(_,S,A)}),d}function Nu(n){var i=dl(n);return i.length==1&&i[0][2]?vf(i[0][0],i[0][1]):function(l){return l===n||Ko(l,n,i)}}function Lu(n,i){return pl(n)&&gf(i)?vf(Zr(n),i):function(l){var d=Sl(l,n);return d===t&&d===i?Pl(l,n):Ua(i,d,y|w)}}function Li(n,i,l,d,_){n!==i&&Bo(i,function(S,A){if(_||(_=new Ar),ut(S))Cv(n,i,A,l,Li,d,_);else{var k=d?d(gl(n,A),S,A+"",n,i,_):t;k===t&&(k=S),Ho(n,A,k)}},Jt)}function Cv(n,i,l,d,_,S,A){var k=gl(n,l),D=gl(i,l),H=A.get(D);if(H){Ho(n,l,H);return}var Z=S?S(k,D,l+"",n,i,A):t,V=Z===t;if(V){var X=we(D),oe=!X&&An(D),fe=!X&&!oe&&va(D);Z=D,X||oe||fe?we(k)?Z=k:vt(k)?Z=Yt(k):oe?(V=!1,Z=Ku(D,!0)):fe?(V=!1,Z=Yu(D,!0)):Z=[]:Wa(D)||Hn(D)?(Z=k,Hn(k)?Z=Wf(k):(!ut(k)||ln(k))&&(Z=mf(D))):V=!1}V&&(A.set(D,Z),_(Z,D,d,S,A),A.delete(D)),Ho(n,l,Z)}function Fu(n,i){var l=n.length;if(l)return i+=i<0?l:0,on(i,l)?n[i]:t}function ju(n,i,l){i.length?i=st(i,function(S){return we(S)?function(A){return qn(A,S.length===1?S[0]:S)}:S}):i=[Xt];var d=-1;i=st(i,ir(ue()));var _=Mu(n,function(S,A,k){var D=st(i,function(H){return H(S)});return{criteria:D,index:++d,value:S}});return ag(_,function(S,A){return Zv(S,A,l)})}function Dv(n,i){return qu(n,i,function(l,d){return Pl(n,d)})}function qu(n,i,l){for(var d=-1,_=i.length,S={};++d<_;){var A=i[d],k=qn(n,A);l(k,A)&&Ha(S,Pn(A,n),k)}return S}function Iv(n){return function(i){return qn(i,n)}}function Jo(n,i,l,d){var _=d?ng:oa,S=-1,A=i.length,k=n;for(n===i&&(i=Yt(i)),l&&(k=st(n,ir(l)));++S<A;)for(var D=0,H=i[S],Z=l?l(H):H;(D=_(k,Z,D,d))>-1;)k!==n&&Ai.call(k,D,1),Ai.call(n,D,1);return n}function zu(n,i){for(var l=n?i.length:0,d=l-1;l--;){var _=i[l];if(l==d||_!==S){var S=_;on(_)?Ai.call(n,_,1):rl(n,_)}}return n}function Xo(n,i){return n+Oi(wu()*(i-n+1))}function $v(n,i,l,d){for(var _=-1,S=Et(ki((i-n)/(l||1)),0),A=F(S);S--;)A[d?S:++_]=n,n+=l;return A}function el(n,i){var l="";if(!n||i<1||i>_e)return l;do i%2&&(l+=n),i=Oi(i/2),i&&(n+=n);while(i);return l}function Ae(n,i){return vl(_f(n,i,Xt),n+"")}function Mv(n){return Su(_a(n))}function Nv(n,i){var l=_a(n);return Wi(l,jn(i,0,l.length))}function Ha(n,i,l,d){if(!ut(n))return n;i=Pn(i,n);for(var _=-1,S=i.length,A=S-1,k=n;k!=null&&++_<S;){var D=Zr(i[_]),H=l;if(D==="__proto__"||D==="constructor"||D==="prototype")return n;if(_!=A){var Z=k[D];H=d?d(Z,D,k):t,H===t&&(H=ut(Z)?Z:on(i[_+1])?[]:{})}ja(k,D,H),k=k[D]}return n}var Uu=Ci?function(n,i){return Ci.set(n,i),n}:Xt,Lv=Ti?function(n,i){return Ti(n,"toString",{configurable:!0,enumerable:!1,value:Al(i),writable:!0})}:Xt;function Fv(n){return Wi(_a(n))}function yr(n,i,l){var d=-1,_=n.length;i<0&&(i=-i>_?0:_+i),l=l>_?_:l,l<0&&(l+=_),_=i>l?0:l-i>>>0,i>>>=0;for(var S=F(_);++d<_;)S[d]=n[d+i];return S}function jv(n,i){var l;return xn(n,function(d,_,S){return l=i(d,_,S),!l}),!!l}function Fi(n,i,l){var d=0,_=n==null?d:n.length;if(typeof i=="number"&&i===i&&_<=Tt){for(;d<_;){var S=d+_>>>1,A=n[S];A!==null&&!or(A)&&(l?A<=i:A<i)?d=S+1:_=S}return _}return tl(n,i,Xt,l)}function tl(n,i,l,d){var _=0,S=n==null?0:n.length;if(S===0)return 0;i=l(i);for(var A=i!==i,k=i===null,D=or(i),H=i===t;_<S;){var Z=Oi((_+S)/2),V=l(n[Z]),X=V!==t,oe=V===null,fe=V===V,Re=or(V);if(A)var de=d||fe;else H?de=fe&&(d||X):k?de=fe&&X&&(d||!oe):D?de=fe&&X&&!oe&&(d||!Re):oe||Re?de=!1:de=d?V<=i:V<i;de?_=Z+1:S=Z}return $t(S,xt)}function Hu(n,i){for(var l=-1,d=n.length,_=0,S=[];++l<d;){var A=n[l],k=i?i(A):A;if(!l||!Tr(k,D)){var D=k;S[_++]=A===0?0:A}}return S}function Zu(n){return typeof n=="number"?n:or(n)?ce:+n}function sr(n){if(typeof n=="string")return n;if(we(n))return st(n,sr)+"";if(or(n))return Eu?Eu.call(n):"";var i=n+"";return i=="0"&&1/n==-ge?"-0":i}function Sn(n,i,l){var d=-1,_=vi,S=n.length,A=!0,k=[],D=k;if(l)A=!1,_=Oo;else if(S>=r){var H=i?null:Yv(n);if(H)return yi(H);A=!1,_=Ia,D=new Fn}else D=i?[]:k;e:for(;++d<S;){var Z=n[d],V=i?i(Z):Z;if(Z=l||Z!==0?Z:0,A&&V===V){for(var X=D.length;X--;)if(D[X]===V)continue e;i&&D.push(V),k.push(Z)}else _(D,V,l)||(D!==k&&D.push(V),k.push(Z))}return k}function rl(n,i){return i=Pn(i,n),n=yf(n,i),n==null||delete n[Zr(br(i))]}function Bu(n,i,l,d){return Ha(n,i,l(qn(n,i)),d)}function ji(n,i,l,d){for(var _=n.length,S=d?_:-1;(d?S--:++S<_)&&i(n[S],S,n););return l?yr(n,d?0:S,d?S+1:_):yr(n,d?S+1:0,d?_:S)}function Vu(n,i){var l=n;return l instanceof De&&(l=l.value()),Co(i,function(d,_){return _.func.apply(_.thisArg,yn([d],_.args))},l)}function nl(n,i,l){var d=n.length;if(d<2)return d?Sn(n[0]):[];for(var _=-1,S=F(d);++_<d;)for(var A=n[_],k=-1;++k<d;)k!=_&&(S[_]=qa(S[_]||A,n[k],i,l));return Sn(Dt(S,1),i,l)}function Wu(n,i,l){for(var d=-1,_=n.length,S=i.length,A={};++d<_;){var k=d<S?i[d]:t;l(A,n[d],k)}return A}function al(n){return vt(n)?n:[]}function il(n){return typeof n=="function"?n:Xt}function Pn(n,i){return we(n)?n:pl(n,i)?[n]:xf(Be(n))}var qv=Ae;function Rn(n,i,l){var d=n.length;return l=l===t?d:l,!i&&l>=d?n:yr(n,i,l)}var Gu=Ag||function(n){return Rt.clearTimeout(n)};function Ku(n,i){if(i)return n.slice();var l=n.length,d=gu?gu(l):new n.constructor(l);return n.copy(d),d}function sl(n){var i=new n.constructor(n.byteLength);return new Pi(i).set(new Pi(n)),i}function zv(n,i){var l=i?sl(n.buffer):n.buffer;return new n.constructor(l,n.byteOffset,n.byteLength)}function Uv(n){var i=new n.constructor(n.source,ct.exec(n));return i.lastIndex=n.lastIndex,i}function Hv(n){return Fa?Qe(Fa.call(n)):{}}function Yu(n,i){var l=i?sl(n.buffer):n.buffer;return new n.constructor(l,n.byteOffset,n.length)}function Qu(n,i){if(n!==i){var l=n!==t,d=n===null,_=n===n,S=or(n),A=i!==t,k=i===null,D=i===i,H=or(i);if(!k&&!H&&!S&&n>i||S&&A&&D&&!k&&!H||d&&A&&D||!l&&D||!_)return 1;if(!d&&!S&&!H&&n<i||H&&l&&_&&!d&&!S||k&&l&&_||!A&&_||!D)return-1}return 0}function Zv(n,i,l){for(var d=-1,_=n.criteria,S=i.criteria,A=_.length,k=l.length;++d<A;){var D=Qu(_[d],S[d]);if(D){if(d>=k)return D;var H=l[d];return D*(H=="desc"?-1:1)}}return n.index-i.index}function Ju(n,i,l,d){for(var _=-1,S=n.length,A=l.length,k=-1,D=i.length,H=Et(S-A,0),Z=F(D+H),V=!d;++k<D;)Z[k]=i[k];for(;++_<A;)(V||_<S)&&(Z[l[_]]=n[_]);for(;H--;)Z[k++]=n[_++];return Z}function Xu(n,i,l,d){for(var _=-1,S=n.length,A=-1,k=l.length,D=-1,H=i.length,Z=Et(S-k,0),V=F(Z+H),X=!d;++_<Z;)V[_]=n[_];for(var oe=_;++D<H;)V[oe+D]=i[D];for(;++A<k;)(X||_<S)&&(V[oe+l[A]]=n[_++]);return V}function Yt(n,i){var l=-1,d=n.length;for(i||(i=F(d));++l<d;)i[l]=n[l];return i}function Hr(n,i,l,d){var _=!l;l||(l={});for(var S=-1,A=i.length;++S<A;){var k=i[S],D=d?d(l[k],n[k],k,l,n):t;D===t&&(D=n[k]),_?nn(l,k,D):ja(l,k,D)}return l}function Bv(n,i){return Hr(n,hl(n),i)}function Vv(n,i){return Hr(n,hf(n),i)}function qi(n,i){return function(l,d){var _=we(l)?Qm:pv,S=i?i():{};return _(l,n,ue(d,2),S)}}function pa(n){return Ae(function(i,l){var d=-1,_=l.length,S=_>1?l[_-1]:t,A=_>2?l[2]:t;for(S=n.length>3&&typeof S=="function"?(_--,S):t,A&&Ut(l[0],l[1],A)&&(S=_<3?t:S,_=1),i=Qe(i);++d<_;){var k=l[d];k&&n(i,k,d,S)}return i})}function ef(n,i){return function(l,d){if(l==null)return l;if(!Qt(l))return n(l,d);for(var _=l.length,S=i?_:-1,A=Qe(l);(i?S--:++S<_)&&d(A[S],S,A)!==!1;);return l}}function tf(n){return function(i,l,d){for(var _=-1,S=Qe(i),A=d(i),k=A.length;k--;){var D=A[n?k:++_];if(l(S[D],D,S)===!1)break}return i}}function Wv(n,i,l){var d=i&E,_=Za(n);function S(){var A=this&&this!==Rt&&this instanceof S?_:n;return A.apply(d?l:this,arguments)}return S}function rf(n){return function(i){i=Be(i);var l=la(i)?Rr(i):t,d=l?l[0]:i.charAt(0),_=l?Rn(l,1).join(""):i.slice(1);return d[n]()+_}}function ma(n){return function(i){return Co(td(ed(i).replace(Wc,"")),n,"")}}function Za(n){return function(){var i=arguments;switch(i.length){case 0:return new n;case 1:return new n(i[0]);case 2:return new n(i[0],i[1]);case 3:return new n(i[0],i[1],i[2]);case 4:return new n(i[0],i[1],i[2],i[3]);case 5:return new n(i[0],i[1],i[2],i[3],i[4]);case 6:return new n(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new n(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var l=ha(n.prototype),d=n.apply(l,i);return ut(d)?d:l}}function Gv(n,i,l){var d=Za(n);function _(){for(var S=arguments.length,A=F(S),k=S,D=ga(_);k--;)A[k]=arguments[k];var H=S<3&&A[0]!==D&&A[S-1]!==D?[]:bn(A,D);if(S-=H.length,S<l)return lf(n,i,zi,_.placeholder,t,A,H,t,t,l-S);var Z=this&&this!==Rt&&this instanceof _?d:n;return ar(Z,this,A)}return _}function nf(n){return function(i,l,d){var _=Qe(i);if(!Qt(i)){var S=ue(l,3);i=At(i),l=function(k){return S(_[k],k,_)}}var A=n(i,l,d);return A>-1?_[S?i[A]:A]:t}}function af(n){return sn(function(i){var l=i.length,d=l,_=vr.prototype.thru;for(n&&i.reverse();d--;){var S=i[d];if(typeof S!="function")throw new gr(c);if(_&&!A&&Bi(S)=="wrapper")var A=new vr([],!0)}for(d=A?d:l;++d<l;){S=i[d];var k=Bi(S),D=k=="wrapper"?fl(S):t;D&&ml(D[0])&&D[1]==(z|N|M|W)&&!D[4].length&&D[9]==1?A=A[Bi(D[0])].apply(A,D[3]):A=S.length==1&&ml(S)?A[k]():A.thru(S)}return function(){var H=arguments,Z=H[0];if(A&&H.length==1&&we(Z))return A.plant(Z).value();for(var V=0,X=l?i[V].apply(this,H):Z;++V<l;)X=i[V].call(this,X);return X}})}function zi(n,i,l,d,_,S,A,k,D,H){var Z=i&z,V=i&E,X=i&R,oe=i&(N|I),fe=i&B,Re=X?t:Za(n);function de(){for(var Te=arguments.length,$e=F(Te),lr=Te;lr--;)$e[lr]=arguments[lr];if(oe)var Ht=ga(de),cr=sg($e,Ht);if(d&&($e=Ju($e,d,_,oe)),S&&($e=Xu($e,S,A,oe)),Te-=cr,oe&&Te<H){var _t=bn($e,Ht);return lf(n,i,zi,de.placeholder,l,$e,_t,k,D,H-Te)}var kr=V?l:this,un=X?kr[n]:n;return Te=$e.length,k?$e=p_($e,k):fe&&Te>1&&$e.reverse(),Z&&D<Te&&($e.length=D),this&&this!==Rt&&this instanceof de&&(un=Re||Za(un)),un.apply(kr,$e)}return de}function sf(n,i){return function(l,d){return Ev(l,n,i(d),{})}}function Ui(n,i){return function(l,d){var _;if(l===t&&d===t)return i;if(l!==t&&(_=l),d!==t){if(_===t)return d;typeof l=="string"||typeof d=="string"?(l=sr(l),d=sr(d)):(l=Zu(l),d=Zu(d)),_=n(l,d)}return _}}function ol(n){return sn(function(i){return i=st(i,ir(ue())),Ae(function(l){var d=this;return n(i,function(_){return ar(_,d,l)})})})}function Hi(n,i){i=i===t?" ":sr(i);var l=i.length;if(l<2)return l?el(i,n):i;var d=el(i,ki(n/ca(i)));return la(i)?Rn(Rr(d),0,n).join(""):d.slice(0,n)}function Kv(n,i,l,d){var _=i&E,S=Za(n);function A(){for(var k=-1,D=arguments.length,H=-1,Z=d.length,V=F(Z+D),X=this&&this!==Rt&&this instanceof A?S:n;++H<Z;)V[H]=d[H];for(;D--;)V[H++]=arguments[++k];return ar(X,_?l:this,V)}return A}function of(n){return function(i,l,d){return d&&typeof d!="number"&&Ut(i,l,d)&&(l=d=t),i=cn(i),l===t?(l=i,i=0):l=cn(l),d=d===t?i<l?1:-1:cn(d),$v(i,l,d,n)}}function Zi(n){return function(i,l){return typeof i=="string"&&typeof l=="string"||(i=wr(i),l=wr(l)),n(i,l)}}function lf(n,i,l,d,_,S,A,k,D,H){var Z=i&N,V=Z?A:t,X=Z?t:A,oe=Z?S:t,fe=Z?t:S;i|=Z?M:j,i&=~(Z?j:M),i&$||(i&=~(E|R));var Re=[n,i,_,oe,V,fe,X,k,D,H],de=l.apply(t,Re);return ml(n)&&bf(de,Re),de.placeholder=d,wf(de,n,i)}function ll(n){var i=wt[n];return function(l,d){if(l=wr(l),d=d==null?0:$t(Pe(d),292),d&&bu(l)){var _=(Be(l)+"e").split("e"),S=i(_[0]+"e"+(+_[1]+d));return _=(Be(S)+"e").split("e"),+(_[0]+"e"+(+_[1]-d))}return i(l)}}var Yv=fa&&1/yi(new fa([,-0]))[1]==ge?function(n){return new fa(n)}:Ol;function cf(n){return function(i){var l=Mt(i);return l==ye?Fo(i):l==Je?hg(i):ig(i,n(i))}}function an(n,i,l,d,_,S,A,k){var D=i&R;if(!D&&typeof n!="function")throw new gr(c);var H=d?d.length:0;if(H||(i&=~(M|j),d=_=t),A=A===t?A:Et(Pe(A),0),k=k===t?k:Pe(k),H-=_?_.length:0,i&j){var Z=d,V=_;d=_=t}var X=D?t:fl(n),oe=[n,i,l,d,_,Z,V,S,A,k];if(X&&f_(oe,X),n=oe[0],i=oe[1],l=oe[2],d=oe[3],_=oe[4],k=oe[9]=oe[9]===t?D?0:n.length:Et(oe[9]-H,0),!k&&i&(N|I)&&(i&=~(N|I)),!i||i==E)var fe=Wv(n,i,l);else i==N||i==I?fe=Gv(n,i,k):(i==M||i==(E|M))&&!_.length?fe=Kv(n,i,l,d):fe=zi.apply(t,oe);var Re=X?Uu:bf;return wf(Re(fe,oe),n,i)}function uf(n,i,l,d){return n===t||Tr(n,ua[l])&&!We.call(d,l)?i:n}function ff(n,i,l,d,_,S){return ut(n)&&ut(i)&&(S.set(i,n),Li(n,i,t,ff,S),S.delete(i)),n}function Qv(n){return Wa(n)?t:n}function df(n,i,l,d,_,S){var A=l&y,k=n.length,D=i.length;if(k!=D&&!(A&&D>k))return!1;var H=S.get(n),Z=S.get(i);if(H&&Z)return H==i&&Z==n;var V=-1,X=!0,oe=l&w?new Fn:t;for(S.set(n,i),S.set(i,n);++V<k;){var fe=n[V],Re=i[V];if(d)var de=A?d(Re,fe,V,i,n,S):d(fe,Re,V,n,i,S);if(de!==t){if(de)continue;X=!1;break}if(oe){if(!Do(i,function(Te,$e){if(!Ia(oe,$e)&&(fe===Te||_(fe,Te,l,d,S)))return oe.push($e)})){X=!1;break}}else if(!(fe===Re||_(fe,Re,l,d,S))){X=!1;break}}return S.delete(n),S.delete(i),X}function Jv(n,i,l,d,_,S,A){switch(l){case dr:if(n.byteLength!=i.byteLength||n.byteOffset!=i.byteOffset)return!1;n=n.buffer,i=i.buffer;case Ct:return!(n.byteLength!=i.byteLength||!S(new Pi(n),new Pi(i)));case Vt:case Nt:case Wt:return Tr(+n,+i);case Ye:return n.name==i.name&&n.message==i.message;case St:case gt:return n==i+"";case ye:var k=Fo;case Je:var D=d&y;if(k||(k=yi),n.size!=i.size&&!D)return!1;var H=A.get(n);if(H)return H==i;d|=w,A.set(n,i);var Z=df(k(n),k(i),d,_,S,A);return A.delete(n),Z;case Lt:if(Fa)return Fa.call(n)==Fa.call(i)}return!1}function Xv(n,i,l,d,_,S){var A=l&y,k=cl(n),D=k.length,H=cl(i),Z=H.length;if(D!=Z&&!A)return!1;for(var V=D;V--;){var X=k[V];if(!(A?X in i:We.call(i,X)))return!1}var oe=S.get(n),fe=S.get(i);if(oe&&fe)return oe==i&&fe==n;var Re=!0;S.set(n,i),S.set(i,n);for(var de=A;++V<D;){X=k[V];var Te=n[X],$e=i[X];if(d)var lr=A?d($e,Te,X,i,n,S):d(Te,$e,X,n,i,S);if(!(lr===t?Te===$e||_(Te,$e,l,d,S):lr)){Re=!1;break}de||(de=X=="constructor")}if(Re&&!de){var Ht=n.constructor,cr=i.constructor;Ht!=cr&&"constructor"in n&&"constructor"in i&&!(typeof Ht=="function"&&Ht instanceof Ht&&typeof cr=="function"&&cr instanceof cr)&&(Re=!1)}return S.delete(n),S.delete(i),Re}function sn(n){return vl(_f(n,t,Af),n+"")}function cl(n){return Cu(n,At,hl)}function ul(n){return Cu(n,Jt,hf)}var fl=Ci?function(n){return Ci.get(n)}:Ol;function Bi(n){for(var i=n.name+"",l=da[i],d=We.call(da,i)?l.length:0;d--;){var _=l[d],S=_.func;if(S==null||S==n)return _.name}return i}function ga(n){var i=We.call(x,"placeholder")?x:n;return i.placeholder}function ue(){var n=x.iteratee||Tl;return n=n===Tl?$u:n,arguments.length?n(arguments[0],arguments[1]):n}function Vi(n,i){var l=n.__data__;return o_(i)?l[typeof i=="string"?"string":"hash"]:l.map}function dl(n){for(var i=At(n),l=i.length;l--;){var d=i[l],_=n[d];i[l]=[d,_,gf(_)]}return i}function zn(n,i){var l=ug(n,i);return Iu(l)?l:t}function e_(n){var i=We.call(n,Nn),l=n[Nn];try{n[Nn]=t;var d=!0}catch{}var _=xi.call(n);return d&&(i?n[Nn]=l:delete n[Nn]),_}var hl=qo?function(n){return n==null?[]:(n=Qe(n),_n(qo(n),function(i){return _u.call(n,i)}))}:Cl,hf=qo?function(n){for(var i=[];n;)yn(i,hl(n)),n=Ri(n);return i}:Cl,Mt=zt;(zo&&Mt(new zo(new ArrayBuffer(1)))!=dr||Ma&&Mt(new Ma)!=ye||Uo&&Mt(Uo.resolve())!=Lr||fa&&Mt(new fa)!=Je||Na&&Mt(new Na)!=Fr)&&(Mt=function(n){var i=zt(n),l=i==Ot?n.constructor:t,d=l?Un(l):"";if(d)switch(d){case Ng:return dr;case Lg:return ye;case Fg:return Lr;case jg:return Je;case qg:return Fr}return i});function t_(n,i,l){for(var d=-1,_=l.length;++d<_;){var S=l[d],A=S.size;switch(S.type){case"drop":n+=A;break;case"dropRight":i-=A;break;case"take":i=$t(i,n+A);break;case"takeRight":n=Et(n,i-A);break}}return{start:n,end:i}}function r_(n){var i=n.match(L);return i?i[1].split(q):[]}function pf(n,i,l){i=Pn(i,n);for(var d=-1,_=i.length,S=!1;++d<_;){var A=Zr(i[d]);if(!(S=n!=null&&l(n,A)))break;n=n[A]}return S||++d!=_?S:(_=n==null?0:n.length,!!_&&Xi(_)&&on(A,_)&&(we(n)||Hn(n)))}function n_(n){var i=n.length,l=new n.constructor(i);return i&&typeof n[0]=="string"&&We.call(n,"index")&&(l.index=n.index,l.input=n.input),l}function mf(n){return typeof n.constructor=="function"&&!Ba(n)?ha(Ri(n)):{}}function a_(n,i,l){var d=n.constructor;switch(i){case Ct:return sl(n);case Vt:case Nt:return new d(+n);case dr:return zv(n,l);case Kn:case Yn:case Gr:case Qn:case Aa:case Ta:case Jn:case Gt:case ka:return Yu(n,l);case ye:return new d;case Wt:case gt:return new d(n);case St:return Uv(n);case Je:return new d;case Lt:return Hv(n)}}function i_(n,i){var l=i.length;if(!l)return n;var d=l-1;return i[d]=(l>1?"& ":"")+i[d],i=i.join(l>2?", ":" "),n.replace(O,`{
/* [wrapped with `+i+`] */
`)}function s_(n){return we(n)||Hn(n)||!!(yu&&n&&n[yu])}function on(n,i){var l=typeof n;return i=i??_e,!!i&&(l=="number"||l!="symbol"&&Le.test(n))&&n>-1&&n%1==0&&n<i}function Ut(n,i,l){if(!ut(l))return!1;var d=typeof i;return(d=="number"?Qt(l)&&on(i,l.length):d=="string"&&i in l)?Tr(l[i],n):!1}function pl(n,i){if(we(n))return!1;var l=typeof n;return l=="number"||l=="symbol"||l=="boolean"||n==null||or(n)?!0:So.test(n)||!li.test(n)||i!=null&&n in Qe(i)}function o_(n){var i=typeof n;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?n!=="__proto__":n===null}function ml(n){var i=Bi(n),l=x[i];if(typeof l!="function"||!(i in De.prototype))return!1;if(n===l)return!0;var d=fl(l);return!!d&&n===d[0]}function l_(n){return!!mu&&mu in n}var c_=wi?ln:Dl;function Ba(n){var i=n&&n.constructor,l=typeof i=="function"&&i.prototype||ua;return n===l}function gf(n){return n===n&&!ut(n)}function vf(n,i){return function(l){return l==null?!1:l[n]===i&&(i!==t||n in Qe(l))}}function u_(n){var i=Qi(n,function(d){return l.size===h&&l.clear(),d}),l=i.cache;return i}function f_(n,i){var l=n[1],d=i[1],_=l|d,S=_<(E|R|z),A=d==z&&l==N||d==z&&l==W&&n[7].length<=i[8]||d==(z|W)&&i[7].length<=i[8]&&l==N;if(!(S||A))return n;d&E&&(n[2]=i[2],_|=l&E?0:$);var k=i[3];if(k){var D=n[3];n[3]=D?Ju(D,k,i[4]):k,n[4]=D?bn(n[3],m):i[4]}return k=i[5],k&&(D=n[5],n[5]=D?Xu(D,k,i[6]):k,n[6]=D?bn(n[5],m):i[6]),k=i[7],k&&(n[7]=k),d&z&&(n[8]=n[8]==null?i[8]:$t(n[8],i[8])),n[9]==null&&(n[9]=i[9]),n[0]=i[0],n[1]=_,n}function d_(n){var i=[];if(n!=null)for(var l in Qe(n))i.push(l);return i}function h_(n){return xi.call(n)}function _f(n,i,l){return i=Et(i===t?n.length-1:i,0),function(){for(var d=arguments,_=-1,S=Et(d.length-i,0),A=F(S);++_<S;)A[_]=d[i+_];_=-1;for(var k=F(i+1);++_<i;)k[_]=d[_];return k[i]=l(A),ar(n,this,k)}}function yf(n,i){return i.length<2?n:qn(n,yr(i,0,-1))}function p_(n,i){for(var l=n.length,d=$t(i.length,l),_=Yt(n);d--;){var S=i[d];n[d]=on(S,l)?_[S]:t}return n}function gl(n,i){if(!(i==="constructor"&&typeof n[i]=="function")&&i!="__proto__")return n[i]}var bf=Ef(Uu),Va=kg||function(n,i){return Rt.setTimeout(n,i)},vl=Ef(Lv);function wf(n,i,l){var d=i+"";return vl(n,i_(d,m_(r_(d),l)))}function Ef(n){var i=0,l=0;return function(){var d=Ig(),_=G-(d-l);if(l=d,_>0){if(++i>=ie)return arguments[0]}else i=0;return n.apply(t,arguments)}}function Wi(n,i){var l=-1,d=n.length,_=d-1;for(i=i===t?d:i;++l<i;){var S=Xo(l,_),A=n[S];n[S]=n[l],n[l]=A}return n.length=i,n}var xf=u_(function(n){var i=[];return n.charCodeAt(0)===46&&i.push(""),n.replace(ci,function(l,d,_,S){i.push(_?S.replace(Ie,"$1"):d||l)}),i});function Zr(n){if(typeof n=="string"||or(n))return n;var i=n+"";return i=="0"&&1/n==-ge?"-0":i}function Un(n){if(n!=null){try{return Ei.call(n)}catch{}try{return n+""}catch{}}return""}function m_(n,i){return mr(Ne,function(l){var d="_."+l[0];i&l[1]&&!vi(n,d)&&n.push(d)}),n.sort()}function Sf(n){if(n instanceof De)return n.clone();var i=new vr(n.__wrapped__,n.__chain__);return i.__actions__=Yt(n.__actions__),i.__index__=n.__index__,i.__values__=n.__values__,i}function g_(n,i,l){(l?Ut(n,i,l):i===t)?i=1:i=Et(Pe(i),0);var d=n==null?0:n.length;if(!d||i<1)return[];for(var _=0,S=0,A=F(ki(d/i));_<d;)A[S++]=yr(n,_,_+=i);return A}function v_(n){for(var i=-1,l=n==null?0:n.length,d=0,_=[];++i<l;){var S=n[i];S&&(_[d++]=S)}return _}function __(){var n=arguments.length;if(!n)return[];for(var i=F(n-1),l=arguments[0],d=n;d--;)i[d-1]=arguments[d];return yn(we(l)?Yt(l):[l],Dt(i,1))}var y_=Ae(function(n,i){return vt(n)?qa(n,Dt(i,1,vt,!0)):[]}),b_=Ae(function(n,i){var l=br(i);return vt(l)&&(l=t),vt(n)?qa(n,Dt(i,1,vt,!0),ue(l,2)):[]}),w_=Ae(function(n,i){var l=br(i);return vt(l)&&(l=t),vt(n)?qa(n,Dt(i,1,vt,!0),t,l):[]});function E_(n,i,l){var d=n==null?0:n.length;return d?(i=l||i===t?1:Pe(i),yr(n,i<0?0:i,d)):[]}function x_(n,i,l){var d=n==null?0:n.length;return d?(i=l||i===t?1:Pe(i),i=d-i,yr(n,0,i<0?0:i)):[]}function S_(n,i){return n&&n.length?ji(n,ue(i,3),!0,!0):[]}function P_(n,i){return n&&n.length?ji(n,ue(i,3),!0):[]}function R_(n,i,l,d){var _=n==null?0:n.length;return _?(l&&typeof l!="number"&&Ut(n,i,l)&&(l=0,d=_),_v(n,i,l,d)):[]}function Pf(n,i,l){var d=n==null?0:n.length;if(!d)return-1;var _=l==null?0:Pe(l);return _<0&&(_=Et(d+_,0)),_i(n,ue(i,3),_)}function Rf(n,i,l){var d=n==null?0:n.length;if(!d)return-1;var _=d-1;return l!==t&&(_=Pe(l),_=l<0?Et(d+_,0):$t(_,d-1)),_i(n,ue(i,3),_,!0)}function Af(n){var i=n==null?0:n.length;return i?Dt(n,1):[]}function A_(n){var i=n==null?0:n.length;return i?Dt(n,ge):[]}function T_(n,i){var l=n==null?0:n.length;return l?(i=i===t?1:Pe(i),Dt(n,i)):[]}function k_(n){for(var i=-1,l=n==null?0:n.length,d={};++i<l;){var _=n[i];d[_[0]]=_[1]}return d}function Tf(n){return n&&n.length?n[0]:t}function O_(n,i,l){var d=n==null?0:n.length;if(!d)return-1;var _=l==null?0:Pe(l);return _<0&&(_=Et(d+_,0)),oa(n,i,_)}function C_(n){var i=n==null?0:n.length;return i?yr(n,0,-1):[]}var D_=Ae(function(n){var i=st(n,al);return i.length&&i[0]===n[0]?Go(i):[]}),I_=Ae(function(n){var i=br(n),l=st(n,al);return i===br(l)?i=t:l.pop(),l.length&&l[0]===n[0]?Go(l,ue(i,2)):[]}),$_=Ae(function(n){var i=br(n),l=st(n,al);return i=typeof i=="function"?i:t,i&&l.pop(),l.length&&l[0]===n[0]?Go(l,t,i):[]});function M_(n,i){return n==null?"":Cg.call(n,i)}function br(n){var i=n==null?0:n.length;return i?n[i-1]:t}function N_(n,i,l){var d=n==null?0:n.length;if(!d)return-1;var _=d;return l!==t&&(_=Pe(l),_=_<0?Et(d+_,0):$t(_,d-1)),i===i?mg(n,i,_):_i(n,ou,_,!0)}function L_(n,i){return n&&n.length?Fu(n,Pe(i)):t}var F_=Ae(kf);function kf(n,i){return n&&n.length&&i&&i.length?Jo(n,i):n}function j_(n,i,l){return n&&n.length&&i&&i.length?Jo(n,i,ue(l,2)):n}function q_(n,i,l){return n&&n.length&&i&&i.length?Jo(n,i,t,l):n}var z_=sn(function(n,i){var l=n==null?0:n.length,d=Zo(n,i);return zu(n,st(i,function(_){return on(_,l)?+_:_}).sort(Qu)),d});function U_(n,i){var l=[];if(!(n&&n.length))return l;var d=-1,_=[],S=n.length;for(i=ue(i,3);++d<S;){var A=n[d];i(A,d,n)&&(l.push(A),_.push(d))}return zu(n,_),l}function _l(n){return n==null?n:Mg.call(n)}function H_(n,i,l){var d=n==null?0:n.length;return d?(l&&typeof l!="number"&&Ut(n,i,l)?(i=0,l=d):(i=i==null?0:Pe(i),l=l===t?d:Pe(l)),yr(n,i,l)):[]}function Z_(n,i){return Fi(n,i)}function B_(n,i,l){return tl(n,i,ue(l,2))}function V_(n,i){var l=n==null?0:n.length;if(l){var d=Fi(n,i);if(d<l&&Tr(n[d],i))return d}return-1}function W_(n,i){return Fi(n,i,!0)}function G_(n,i,l){return tl(n,i,ue(l,2),!0)}function K_(n,i){var l=n==null?0:n.length;if(l){var d=Fi(n,i,!0)-1;if(Tr(n[d],i))return d}return-1}function Y_(n){return n&&n.length?Hu(n):[]}function Q_(n,i){return n&&n.length?Hu(n,ue(i,2)):[]}function J_(n){var i=n==null?0:n.length;return i?yr(n,1,i):[]}function X_(n,i,l){return n&&n.length?(i=l||i===t?1:Pe(i),yr(n,0,i<0?0:i)):[]}function e0(n,i,l){var d=n==null?0:n.length;return d?(i=l||i===t?1:Pe(i),i=d-i,yr(n,i<0?0:i,d)):[]}function t0(n,i){return n&&n.length?ji(n,ue(i,3),!1,!0):[]}function r0(n,i){return n&&n.length?ji(n,ue(i,3)):[]}var n0=Ae(function(n){return Sn(Dt(n,1,vt,!0))}),a0=Ae(function(n){var i=br(n);return vt(i)&&(i=t),Sn(Dt(n,1,vt,!0),ue(i,2))}),i0=Ae(function(n){var i=br(n);return i=typeof i=="function"?i:t,Sn(Dt(n,1,vt,!0),t,i)});function s0(n){return n&&n.length?Sn(n):[]}function o0(n,i){return n&&n.length?Sn(n,ue(i,2)):[]}function l0(n,i){return i=typeof i=="function"?i:t,n&&n.length?Sn(n,t,i):[]}function yl(n){if(!(n&&n.length))return[];var i=0;return n=_n(n,function(l){if(vt(l))return i=Et(l.length,i),!0}),No(i,function(l){return st(n,Io(l))})}function Of(n,i){if(!(n&&n.length))return[];var l=yl(n);return i==null?l:st(l,function(d){return ar(i,t,d)})}var c0=Ae(function(n,i){return vt(n)?qa(n,i):[]}),u0=Ae(function(n){return nl(_n(n,vt))}),f0=Ae(function(n){var i=br(n);return vt(i)&&(i=t),nl(_n(n,vt),ue(i,2))}),d0=Ae(function(n){var i=br(n);return i=typeof i=="function"?i:t,nl(_n(n,vt),t,i)}),h0=Ae(yl);function p0(n,i){return Wu(n||[],i||[],ja)}function m0(n,i){return Wu(n||[],i||[],Ha)}var g0=Ae(function(n){var i=n.length,l=i>1?n[i-1]:t;return l=typeof l=="function"?(n.pop(),l):t,Of(n,l)});function Cf(n){var i=x(n);return i.__chain__=!0,i}function v0(n,i){return i(n),n}function Gi(n,i){return i(n)}var _0=sn(function(n){var i=n.length,l=i?n[0]:0,d=this.__wrapped__,_=function(S){return Zo(S,n)};return i>1||this.__actions__.length||!(d instanceof De)||!on(l)?this.thru(_):(d=d.slice(l,+l+(i?1:0)),d.__actions__.push({func:Gi,args:[_],thisArg:t}),new vr(d,this.__chain__).thru(function(S){return i&&!S.length&&S.push(t),S}))});function y0(){return Cf(this)}function b0(){return new vr(this.value(),this.__chain__)}function w0(){this.__values__===t&&(this.__values__=Bf(this.value()));var n=this.__index__>=this.__values__.length,i=n?t:this.__values__[this.__index__++];return{done:n,value:i}}function E0(){return this}function x0(n){for(var i,l=this;l instanceof Ii;){var d=Sf(l);d.__index__=0,d.__values__=t,i?_.__wrapped__=d:i=d;var _=d;l=l.__wrapped__}return _.__wrapped__=n,i}function S0(){var n=this.__wrapped__;if(n instanceof De){var i=n;return this.__actions__.length&&(i=new De(this)),i=i.reverse(),i.__actions__.push({func:Gi,args:[_l],thisArg:t}),new vr(i,this.__chain__)}return this.thru(_l)}function P0(){return Vu(this.__wrapped__,this.__actions__)}var R0=qi(function(n,i,l){We.call(n,l)?++n[l]:nn(n,l,1)});function A0(n,i,l){var d=we(n)?iu:vv;return l&&Ut(n,i,l)&&(i=t),d(n,ue(i,3))}function T0(n,i){var l=we(n)?_n:ku;return l(n,ue(i,3))}var k0=nf(Pf),O0=nf(Rf);function C0(n,i){return Dt(Ki(n,i),1)}function D0(n,i){return Dt(Ki(n,i),ge)}function I0(n,i,l){return l=l===t?1:Pe(l),Dt(Ki(n,i),l)}function Df(n,i){var l=we(n)?mr:xn;return l(n,ue(i,3))}function If(n,i){var l=we(n)?Jm:Tu;return l(n,ue(i,3))}var $0=qi(function(n,i,l){We.call(n,l)?n[l].push(i):nn(n,l,[i])});function M0(n,i,l,d){n=Qt(n)?n:_a(n),l=l&&!d?Pe(l):0;var _=n.length;return l<0&&(l=Et(_+l,0)),es(n)?l<=_&&n.indexOf(i,l)>-1:!!_&&oa(n,i,l)>-1}var N0=Ae(function(n,i,l){var d=-1,_=typeof i=="function",S=Qt(n)?F(n.length):[];return xn(n,function(A){S[++d]=_?ar(i,A,l):za(A,i,l)}),S}),L0=qi(function(n,i,l){nn(n,l,i)});function Ki(n,i){var l=we(n)?st:Mu;return l(n,ue(i,3))}function F0(n,i,l,d){return n==null?[]:(we(i)||(i=i==null?[]:[i]),l=d?t:l,we(l)||(l=l==null?[]:[l]),ju(n,i,l))}var j0=qi(function(n,i,l){n[l?0:1].push(i)},function(){return[[],[]]});function q0(n,i,l){var d=we(n)?Co:cu,_=arguments.length<3;return d(n,ue(i,4),l,_,xn)}function z0(n,i,l){var d=we(n)?Xm:cu,_=arguments.length<3;return d(n,ue(i,4),l,_,Tu)}function U0(n,i){var l=we(n)?_n:ku;return l(n,Ji(ue(i,3)))}function H0(n){var i=we(n)?Su:Mv;return i(n)}function Z0(n,i,l){(l?Ut(n,i,l):i===t)?i=1:i=Pe(i);var d=we(n)?dv:Nv;return d(n,i)}function B0(n){var i=we(n)?hv:Fv;return i(n)}function V0(n){if(n==null)return 0;if(Qt(n))return es(n)?ca(n):n.length;var i=Mt(n);return i==ye||i==Je?n.size:Yo(n).length}function W0(n,i,l){var d=we(n)?Do:jv;return l&&Ut(n,i,l)&&(i=t),d(n,ue(i,3))}var G0=Ae(function(n,i){if(n==null)return[];var l=i.length;return l>1&&Ut(n,i[0],i[1])?i=[]:l>2&&Ut(i[0],i[1],i[2])&&(i=[i[0]]),ju(n,Dt(i,1),[])}),Yi=Tg||function(){return Rt.Date.now()};function K0(n,i){if(typeof i!="function")throw new gr(c);return n=Pe(n),function(){if(--n<1)return i.apply(this,arguments)}}function $f(n,i,l){return i=l?t:i,i=n&&i==null?n.length:i,an(n,z,t,t,t,t,i)}function Mf(n,i){var l;if(typeof i!="function")throw new gr(c);return n=Pe(n),function(){return--n>0&&(l=i.apply(this,arguments)),n<=1&&(i=t),l}}var bl=Ae(function(n,i,l){var d=E;if(l.length){var _=bn(l,ga(bl));d|=M}return an(n,d,i,l,_)}),Nf=Ae(function(n,i,l){var d=E|R;if(l.length){var _=bn(l,ga(Nf));d|=M}return an(i,d,n,l,_)});function Lf(n,i,l){i=l?t:i;var d=an(n,N,t,t,t,t,t,i);return d.placeholder=Lf.placeholder,d}function Ff(n,i,l){i=l?t:i;var d=an(n,I,t,t,t,t,t,i);return d.placeholder=Ff.placeholder,d}function jf(n,i,l){var d,_,S,A,k,D,H=0,Z=!1,V=!1,X=!0;if(typeof n!="function")throw new gr(c);i=wr(i)||0,ut(l)&&(Z=!!l.leading,V="maxWait"in l,S=V?Et(wr(l.maxWait)||0,i):S,X="trailing"in l?!!l.trailing:X);function oe(_t){var kr=d,un=_;return d=_=t,H=_t,A=n.apply(un,kr),A}function fe(_t){return H=_t,k=Va(Te,i),Z?oe(_t):A}function Re(_t){var kr=_t-D,un=_t-H,ad=i-kr;return V?$t(ad,S-un):ad}function de(_t){var kr=_t-D,un=_t-H;return D===t||kr>=i||kr<0||V&&un>=S}function Te(){var _t=Yi();if(de(_t))return $e(_t);k=Va(Te,Re(_t))}function $e(_t){return k=t,X&&d?oe(_t):(d=_=t,A)}function lr(){k!==t&&Gu(k),H=0,d=D=_=k=t}function Ht(){return k===t?A:$e(Yi())}function cr(){var _t=Yi(),kr=de(_t);if(d=arguments,_=this,D=_t,kr){if(k===t)return fe(D);if(V)return Gu(k),k=Va(Te,i),oe(D)}return k===t&&(k=Va(Te,i)),A}return cr.cancel=lr,cr.flush=Ht,cr}var Y0=Ae(function(n,i){return Au(n,1,i)}),Q0=Ae(function(n,i,l){return Au(n,wr(i)||0,l)});function J0(n){return an(n,B)}function Qi(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new gr(c);var l=function(){var d=arguments,_=i?i.apply(this,d):d[0],S=l.cache;if(S.has(_))return S.get(_);var A=n.apply(this,d);return l.cache=S.set(_,A)||S,A};return l.cache=new(Qi.Cache||rn),l}Qi.Cache=rn;function Ji(n){if(typeof n!="function")throw new gr(c);return function(){var i=arguments;switch(i.length){case 0:return!n.call(this);case 1:return!n.call(this,i[0]);case 2:return!n.call(this,i[0],i[1]);case 3:return!n.call(this,i[0],i[1],i[2])}return!n.apply(this,i)}}function X0(n){return Mf(2,n)}var ey=qv(function(n,i){i=i.length==1&&we(i[0])?st(i[0],ir(ue())):st(Dt(i,1),ir(ue()));var l=i.length;return Ae(function(d){for(var _=-1,S=$t(d.length,l);++_<S;)d[_]=i[_].call(this,d[_]);return ar(n,this,d)})}),wl=Ae(function(n,i){var l=bn(i,ga(wl));return an(n,M,t,i,l)}),qf=Ae(function(n,i){var l=bn(i,ga(qf));return an(n,j,t,i,l)}),ty=sn(function(n,i){return an(n,W,t,t,t,i)});function ry(n,i){if(typeof n!="function")throw new gr(c);return i=i===t?i:Pe(i),Ae(n,i)}function ny(n,i){if(typeof n!="function")throw new gr(c);return i=i==null?0:Et(Pe(i),0),Ae(function(l){var d=l[i],_=Rn(l,0,i);return d&&yn(_,d),ar(n,this,_)})}function ay(n,i,l){var d=!0,_=!0;if(typeof n!="function")throw new gr(c);return ut(l)&&(d="leading"in l?!!l.leading:d,_="trailing"in l?!!l.trailing:_),jf(n,i,{leading:d,maxWait:i,trailing:_})}function iy(n){return $f(n,1)}function sy(n,i){return wl(il(i),n)}function oy(){if(!arguments.length)return[];var n=arguments[0];return we(n)?n:[n]}function ly(n){return _r(n,p)}function cy(n,i){return i=typeof i=="function"?i:t,_r(n,p,i)}function uy(n){return _r(n,g|p)}function fy(n,i){return i=typeof i=="function"?i:t,_r(n,g|p,i)}function dy(n,i){return i==null||Ru(n,i,At(i))}function Tr(n,i){return n===i||n!==n&&i!==i}var hy=Zi(Wo),py=Zi(function(n,i){return n>=i}),Hn=Du((function(){return arguments})())?Du:function(n){return ht(n)&&We.call(n,"callee")&&!_u.call(n,"callee")},we=F.isArray,my=Xc?ir(Xc):xv;function Qt(n){return n!=null&&Xi(n.length)&&!ln(n)}function vt(n){return ht(n)&&Qt(n)}function gy(n){return n===!0||n===!1||ht(n)&&zt(n)==Vt}var An=Og||Dl,vy=eu?ir(eu):Sv;function _y(n){return ht(n)&&n.nodeType===1&&!Wa(n)}function yy(n){if(n==null)return!0;if(Qt(n)&&(we(n)||typeof n=="string"||typeof n.splice=="function"||An(n)||va(n)||Hn(n)))return!n.length;var i=Mt(n);if(i==ye||i==Je)return!n.size;if(Ba(n))return!Yo(n).length;for(var l in n)if(We.call(n,l))return!1;return!0}function by(n,i){return Ua(n,i)}function wy(n,i,l){l=typeof l=="function"?l:t;var d=l?l(n,i):t;return d===t?Ua(n,i,t,l):!!d}function El(n){if(!ht(n))return!1;var i=zt(n);return i==Ye||i==ft||typeof n.message=="string"&&typeof n.name=="string"&&!Wa(n)}function Ey(n){return typeof n=="number"&&bu(n)}function ln(n){if(!ut(n))return!1;var i=zt(n);return i==fr||i==yt||i==kt||i==bt}function zf(n){return typeof n=="number"&&n==Pe(n)}function Xi(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=_e}function ut(n){var i=typeof n;return n!=null&&(i=="object"||i=="function")}function ht(n){return n!=null&&typeof n=="object"}var Uf=tu?ir(tu):Rv;function xy(n,i){return n===i||Ko(n,i,dl(i))}function Sy(n,i,l){return l=typeof l=="function"?l:t,Ko(n,i,dl(i),l)}function Py(n){return Hf(n)&&n!=+n}function Ry(n){if(c_(n))throw new ve(o);return Iu(n)}function Ay(n){return n===null}function Ty(n){return n==null}function Hf(n){return typeof n=="number"||ht(n)&&zt(n)==Wt}function Wa(n){if(!ht(n)||zt(n)!=Ot)return!1;var i=Ri(n);if(i===null)return!0;var l=We.call(i,"constructor")&&i.constructor;return typeof l=="function"&&l instanceof l&&Ei.call(l)==Sg}var xl=ru?ir(ru):Av;function ky(n){return zf(n)&&n>=-_e&&n<=_e}var Zf=nu?ir(nu):Tv;function es(n){return typeof n=="string"||!we(n)&&ht(n)&&zt(n)==gt}function or(n){return typeof n=="symbol"||ht(n)&&zt(n)==Lt}var va=au?ir(au):kv;function Oy(n){return n===t}function Cy(n){return ht(n)&&Mt(n)==Fr}function Dy(n){return ht(n)&&zt(n)==Ra}var Iy=Zi(Qo),$y=Zi(function(n,i){return n<=i});function Bf(n){if(!n)return[];if(Qt(n))return es(n)?Rr(n):Yt(n);if($a&&n[$a])return dg(n[$a]());var i=Mt(n),l=i==ye?Fo:i==Je?yi:_a;return l(n)}function cn(n){if(!n)return n===0?n:0;if(n=wr(n),n===ge||n===-ge){var i=n<0?-1:1;return i*Se}return n===n?n:0}function Pe(n){var i=cn(n),l=i%1;return i===i?l?i-l:i:0}function Vf(n){return n?jn(Pe(n),0,Fe):0}function wr(n){if(typeof n=="number")return n;if(or(n))return ce;if(ut(n)){var i=typeof n.valueOf=="function"?n.valueOf():n;n=ut(i)?i+"":i}if(typeof n!="string")return n===0?n:+n;n=uu(n);var l=nt.test(n);return l||Xe.test(n)?Km(n.slice(2),l?2:8):Ce.test(n)?ce:+n}function Wf(n){return Hr(n,Jt(n))}function My(n){return n?jn(Pe(n),-_e,_e):n===0?n:0}function Be(n){return n==null?"":sr(n)}var Ny=pa(function(n,i){if(Ba(i)||Qt(i)){Hr(i,At(i),n);return}for(var l in i)We.call(i,l)&&ja(n,l,i[l])}),Gf=pa(function(n,i){Hr(i,Jt(i),n)}),ts=pa(function(n,i,l,d){Hr(i,Jt(i),n,d)}),Ly=pa(function(n,i,l,d){Hr(i,At(i),n,d)}),Fy=sn(Zo);function jy(n,i){var l=ha(n);return i==null?l:Pu(l,i)}var qy=Ae(function(n,i){n=Qe(n);var l=-1,d=i.length,_=d>2?i[2]:t;for(_&&Ut(i[0],i[1],_)&&(d=1);++l<d;)for(var S=i[l],A=Jt(S),k=-1,D=A.length;++k<D;){var H=A[k],Z=n[H];(Z===t||Tr(Z,ua[H])&&!We.call(n,H))&&(n[H]=S[H])}return n}),zy=Ae(function(n){return n.push(t,ff),ar(Kf,t,n)});function Uy(n,i){return su(n,ue(i,3),Ur)}function Hy(n,i){return su(n,ue(i,3),Vo)}function Zy(n,i){return n==null?n:Bo(n,ue(i,3),Jt)}function By(n,i){return n==null?n:Ou(n,ue(i,3),Jt)}function Vy(n,i){return n&&Ur(n,ue(i,3))}function Wy(n,i){return n&&Vo(n,ue(i,3))}function Gy(n){return n==null?[]:Ni(n,At(n))}function Ky(n){return n==null?[]:Ni(n,Jt(n))}function Sl(n,i,l){var d=n==null?t:qn(n,i);return d===t?l:d}function Yy(n,i){return n!=null&&pf(n,i,yv)}function Pl(n,i){return n!=null&&pf(n,i,bv)}var Qy=sf(function(n,i,l){i!=null&&typeof i.toString!="function"&&(i=xi.call(i)),n[i]=l},Al(Xt)),Jy=sf(function(n,i,l){i!=null&&typeof i.toString!="function"&&(i=xi.call(i)),We.call(n,i)?n[i].push(l):n[i]=[l]},ue),Xy=Ae(za);function At(n){return Qt(n)?xu(n):Yo(n)}function Jt(n){return Qt(n)?xu(n,!0):Ov(n)}function eb(n,i){var l={};return i=ue(i,3),Ur(n,function(d,_,S){nn(l,i(d,_,S),d)}),l}function tb(n,i){var l={};return i=ue(i,3),Ur(n,function(d,_,S){nn(l,_,i(d,_,S))}),l}var rb=pa(function(n,i,l){Li(n,i,l)}),Kf=pa(function(n,i,l,d){Li(n,i,l,d)}),nb=sn(function(n,i){var l={};if(n==null)return l;var d=!1;i=st(i,function(S){return S=Pn(S,n),d||(d=S.length>1),S}),Hr(n,ul(n),l),d&&(l=_r(l,g|v|p,Qv));for(var _=i.length;_--;)rl(l,i[_]);return l});function ab(n,i){return Yf(n,Ji(ue(i)))}var ib=sn(function(n,i){return n==null?{}:Dv(n,i)});function Yf(n,i){if(n==null)return{};var l=st(ul(n),function(d){return[d]});return i=ue(i),qu(n,l,function(d,_){return i(d,_[0])})}function sb(n,i,l){i=Pn(i,n);var d=-1,_=i.length;for(_||(_=1,n=t);++d<_;){var S=n==null?t:n[Zr(i[d])];S===t&&(d=_,S=l),n=ln(S)?S.call(n):S}return n}function ob(n,i,l){return n==null?n:Ha(n,i,l)}function lb(n,i,l,d){return d=typeof d=="function"?d:t,n==null?n:Ha(n,i,l,d)}var Qf=cf(At),Jf=cf(Jt);function cb(n,i,l){var d=we(n),_=d||An(n)||va(n);if(i=ue(i,4),l==null){var S=n&&n.constructor;_?l=d?new S:[]:ut(n)?l=ln(S)?ha(Ri(n)):{}:l={}}return(_?mr:Ur)(n,function(A,k,D){return i(l,A,k,D)}),l}function ub(n,i){return n==null?!0:rl(n,i)}function fb(n,i,l){return n==null?n:Bu(n,i,il(l))}function db(n,i,l,d){return d=typeof d=="function"?d:t,n==null?n:Bu(n,i,il(l),d)}function _a(n){return n==null?[]:Lo(n,At(n))}function hb(n){return n==null?[]:Lo(n,Jt(n))}function pb(n,i,l){return l===t&&(l=i,i=t),l!==t&&(l=wr(l),l=l===l?l:0),i!==t&&(i=wr(i),i=i===i?i:0),jn(wr(n),i,l)}function mb(n,i,l){return i=cn(i),l===t?(l=i,i=0):l=cn(l),n=wr(n),wv(n,i,l)}function gb(n,i,l){if(l&&typeof l!="boolean"&&Ut(n,i,l)&&(i=l=t),l===t&&(typeof i=="boolean"?(l=i,i=t):typeof n=="boolean"&&(l=n,n=t)),n===t&&i===t?(n=0,i=1):(n=cn(n),i===t?(i=n,n=0):i=cn(i)),n>i){var d=n;n=i,i=d}if(l||n%1||i%1){var _=wu();return $t(n+_*(i-n+Gm("1e-"+((_+"").length-1))),i)}return Xo(n,i)}var vb=ma(function(n,i,l){return i=i.toLowerCase(),n+(l?Xf(i):i)});function Xf(n){return Rl(Be(n).toLowerCase())}function ed(n){return n=Be(n),n&&n.replace(at,og).replace(Gc,"")}function _b(n,i,l){n=Be(n),i=sr(i);var d=n.length;l=l===t?d:jn(Pe(l),0,d);var _=l;return l-=i.length,l>=0&&n.slice(l,_)==i}function yb(n){return n=Be(n),n&&Eo.test(n)?n.replace(si,lg):n}function bb(n){return n=Be(n),n&&ui.test(n)?n.replace(Oa,"\\$&"):n}var wb=ma(function(n,i,l){return n+(l?"-":"")+i.toLowerCase()}),Eb=ma(function(n,i,l){return n+(l?" ":"")+i.toLowerCase()}),xb=rf("toLowerCase");function Sb(n,i,l){n=Be(n),i=Pe(i);var d=i?ca(n):0;if(!i||d>=i)return n;var _=(i-d)/2;return Hi(Oi(_),l)+n+Hi(ki(_),l)}function Pb(n,i,l){n=Be(n),i=Pe(i);var d=i?ca(n):0;return i&&d<i?n+Hi(i-d,l):n}function Rb(n,i,l){n=Be(n),i=Pe(i);var d=i?ca(n):0;return i&&d<i?Hi(i-d,l)+n:n}function Ab(n,i,l){return l||i==null?i=0:i&&(i=+i),$g(Be(n).replace(T,""),i||0)}function Tb(n,i,l){return(l?Ut(n,i,l):i===t)?i=1:i=Pe(i),el(Be(n),i)}function kb(){var n=arguments,i=Be(n[0]);return n.length<3?i:i.replace(n[1],n[2])}var Ob=ma(function(n,i,l){return n+(l?"_":"")+i.toLowerCase()});function Cb(n,i,l){return l&&typeof l!="number"&&Ut(n,i,l)&&(i=l=t),l=l===t?Fe:l>>>0,l?(n=Be(n),n&&(typeof i=="string"||i!=null&&!xl(i))&&(i=sr(i),!i&&la(n))?Rn(Rr(n),0,l):n.split(i,l)):[]}var Db=ma(function(n,i,l){return n+(l?" ":"")+Rl(i)});function Ib(n,i,l){return n=Be(n),l=l==null?0:jn(Pe(l),0,n.length),i=sr(i),n.slice(l,l+i.length)==i}function $b(n,i,l){var d=x.templateSettings;l&&Ut(n,i,l)&&(i=t),n=Be(n),i=ts({},i,d,uf);var _=ts({},i.imports,d.imports,uf),S=At(_),A=Lo(_,S),k,D,H=0,Z=i.interpolate||je,V="__p += '",X=jo((i.escape||je).source+"|"+Z.source+"|"+(Z===Xn?ze:je).source+"|"+(i.evaluate||je).source+"|$","g"),oe="//# sourceURL="+(We.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Hm+"]")+`
`;n.replace(X,function(de,Te,$e,lr,Ht,cr){return $e||($e=lr),V+=n.slice(H,cr).replace(Kr,cg),Te&&(k=!0,V+=`' +
__e(`+Te+`) +
'`),Ht&&(D=!0,V+=`';
`+Ht+`;
__p += '`),$e&&(V+=`' +
((__t = (`+$e+`)) == null ? '' : __t) +
'`),H=cr+de.length,de}),V+=`';
`;var fe=We.call(i,"variable")&&i.variable;if(!fe)V=`with (obj) {
`+V+`
}
`;else if(be.test(fe))throw new ve(u);V=(D?V.replace(yo,""):V).replace(bo,"$1").replace(wo,"$1;"),V="function("+(fe||"obj")+`) {
`+(fe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(k?", __e = _.escape":"")+(D?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+V+`return __p
}`;var Re=rd(function(){return He(S,oe+"return "+V).apply(t,A)});if(Re.source=V,El(Re))throw Re;return Re}function Mb(n){return Be(n).toLowerCase()}function Nb(n){return Be(n).toUpperCase()}function Lb(n,i,l){if(n=Be(n),n&&(l||i===t))return uu(n);if(!n||!(i=sr(i)))return n;var d=Rr(n),_=Rr(i),S=fu(d,_),A=du(d,_)+1;return Rn(d,S,A).join("")}function Fb(n,i,l){if(n=Be(n),n&&(l||i===t))return n.slice(0,pu(n)+1);if(!n||!(i=sr(i)))return n;var d=Rr(n),_=du(d,Rr(i))+1;return Rn(d,0,_).join("")}function jb(n,i,l){if(n=Be(n),n&&(l||i===t))return n.replace(T,"");if(!n||!(i=sr(i)))return n;var d=Rr(n),_=fu(d,Rr(i));return Rn(d,_).join("")}function qb(n,i){var l=J,d=te;if(ut(i)){var _="separator"in i?i.separator:_;l="length"in i?Pe(i.length):l,d="omission"in i?sr(i.omission):d}n=Be(n);var S=n.length;if(la(n)){var A=Rr(n);S=A.length}if(l>=S)return n;var k=l-ca(d);if(k<1)return d;var D=A?Rn(A,0,k).join(""):n.slice(0,k);if(_===t)return D+d;if(A&&(k+=D.length-k),xl(_)){if(n.slice(k).search(_)){var H,Z=D;for(_.global||(_=jo(_.source,Be(ct.exec(_))+"g")),_.lastIndex=0;H=_.exec(Z);)var V=H.index;D=D.slice(0,V===t?k:V)}}else if(n.indexOf(sr(_),k)!=k){var X=D.lastIndexOf(_);X>-1&&(D=D.slice(0,X))}return D+d}function zb(n){return n=Be(n),n&&pn.test(n)?n.replace(ii,gg):n}var Ub=ma(function(n,i,l){return n+(l?" ":"")+i.toUpperCase()}),Rl=rf("toUpperCase");function td(n,i,l){return n=Be(n),i=l?t:i,i===t?fg(n)?yg(n):rg(n):n.match(i)||[]}var rd=Ae(function(n,i){try{return ar(n,t,i)}catch(l){return El(l)?l:new ve(l)}}),Hb=sn(function(n,i){return mr(i,function(l){l=Zr(l),nn(n,l,bl(n[l],n))}),n});function Zb(n){var i=n==null?0:n.length,l=ue();return n=i?st(n,function(d){if(typeof d[1]!="function")throw new gr(c);return[l(d[0]),d[1]]}):[],Ae(function(d){for(var _=-1;++_<i;){var S=n[_];if(ar(S[0],this,d))return ar(S[1],this,d)}})}function Bb(n){return gv(_r(n,g))}function Al(n){return function(){return n}}function Vb(n,i){return n==null||n!==n?i:n}var Wb=af(),Gb=af(!0);function Xt(n){return n}function Tl(n){return $u(typeof n=="function"?n:_r(n,g))}function Kb(n){return Nu(_r(n,g))}function Yb(n,i){return Lu(n,_r(i,g))}var Qb=Ae(function(n,i){return function(l){return za(l,n,i)}}),Jb=Ae(function(n,i){return function(l){return za(n,l,i)}});function kl(n,i,l){var d=At(i),_=Ni(i,d);l==null&&!(ut(i)&&(_.length||!d.length))&&(l=i,i=n,n=this,_=Ni(i,At(i)));var S=!(ut(l)&&"chain"in l)||!!l.chain,A=ln(n);return mr(_,function(k){var D=i[k];n[k]=D,A&&(n.prototype[k]=function(){var H=this.__chain__;if(S||H){var Z=n(this.__wrapped__),V=Z.__actions__=Yt(this.__actions__);return V.push({func:D,args:arguments,thisArg:n}),Z.__chain__=H,Z}return D.apply(n,yn([this.value()],arguments))})}),n}function Xb(){return Rt._===this&&(Rt._=Pg),this}function Ol(){}function e1(n){return n=Pe(n),Ae(function(i){return Fu(i,n)})}var t1=ol(st),r1=ol(iu),n1=ol(Do);function nd(n){return pl(n)?Io(Zr(n)):Iv(n)}function a1(n){return function(i){return n==null?t:qn(n,i)}}var i1=of(),s1=of(!0);function Cl(){return[]}function Dl(){return!1}function o1(){return{}}function l1(){return""}function c1(){return!0}function u1(n,i){if(n=Pe(n),n<1||n>_e)return[];var l=Fe,d=$t(n,Fe);i=ue(i),n-=Fe;for(var _=No(d,i);++l<n;)i(l);return _}function f1(n){return we(n)?st(n,Zr):or(n)?[n]:Yt(xf(Be(n)))}function d1(n){var i=++xg;return Be(n)+i}var h1=Ui(function(n,i){return n+i},0),p1=ll("ceil"),m1=Ui(function(n,i){return n/i},1),g1=ll("floor");function v1(n){return n&&n.length?Mi(n,Xt,Wo):t}function _1(n,i){return n&&n.length?Mi(n,ue(i,2),Wo):t}function y1(n){return lu(n,Xt)}function b1(n,i){return lu(n,ue(i,2))}function w1(n){return n&&n.length?Mi(n,Xt,Qo):t}function E1(n,i){return n&&n.length?Mi(n,ue(i,2),Qo):t}var x1=Ui(function(n,i){return n*i},1),S1=ll("round"),P1=Ui(function(n,i){return n-i},0);function R1(n){return n&&n.length?Mo(n,Xt):0}function A1(n,i){return n&&n.length?Mo(n,ue(i,2)):0}return x.after=K0,x.ary=$f,x.assign=Ny,x.assignIn=Gf,x.assignInWith=ts,x.assignWith=Ly,x.at=Fy,x.before=Mf,x.bind=bl,x.bindAll=Hb,x.bindKey=Nf,x.castArray=oy,x.chain=Cf,x.chunk=g_,x.compact=v_,x.concat=__,x.cond=Zb,x.conforms=Bb,x.constant=Al,x.countBy=R0,x.create=jy,x.curry=Lf,x.curryRight=Ff,x.debounce=jf,x.defaults=qy,x.defaultsDeep=zy,x.defer=Y0,x.delay=Q0,x.difference=y_,x.differenceBy=b_,x.differenceWith=w_,x.drop=E_,x.dropRight=x_,x.dropRightWhile=S_,x.dropWhile=P_,x.fill=R_,x.filter=T0,x.flatMap=C0,x.flatMapDeep=D0,x.flatMapDepth=I0,x.flatten=Af,x.flattenDeep=A_,x.flattenDepth=T_,x.flip=J0,x.flow=Wb,x.flowRight=Gb,x.fromPairs=k_,x.functions=Gy,x.functionsIn=Ky,x.groupBy=$0,x.initial=C_,x.intersection=D_,x.intersectionBy=I_,x.intersectionWith=$_,x.invert=Qy,x.invertBy=Jy,x.invokeMap=N0,x.iteratee=Tl,x.keyBy=L0,x.keys=At,x.keysIn=Jt,x.map=Ki,x.mapKeys=eb,x.mapValues=tb,x.matches=Kb,x.matchesProperty=Yb,x.memoize=Qi,x.merge=rb,x.mergeWith=Kf,x.method=Qb,x.methodOf=Jb,x.mixin=kl,x.negate=Ji,x.nthArg=e1,x.omit=nb,x.omitBy=ab,x.once=X0,x.orderBy=F0,x.over=t1,x.overArgs=ey,x.overEvery=r1,x.overSome=n1,x.partial=wl,x.partialRight=qf,x.partition=j0,x.pick=ib,x.pickBy=Yf,x.property=nd,x.propertyOf=a1,x.pull=F_,x.pullAll=kf,x.pullAllBy=j_,x.pullAllWith=q_,x.pullAt=z_,x.range=i1,x.rangeRight=s1,x.rearg=ty,x.reject=U0,x.remove=U_,x.rest=ry,x.reverse=_l,x.sampleSize=Z0,x.set=ob,x.setWith=lb,x.shuffle=B0,x.slice=H_,x.sortBy=G0,x.sortedUniq=Y_,x.sortedUniqBy=Q_,x.split=Cb,x.spread=ny,x.tail=J_,x.take=X_,x.takeRight=e0,x.takeRightWhile=t0,x.takeWhile=r0,x.tap=v0,x.throttle=ay,x.thru=Gi,x.toArray=Bf,x.toPairs=Qf,x.toPairsIn=Jf,x.toPath=f1,x.toPlainObject=Wf,x.transform=cb,x.unary=iy,x.union=n0,x.unionBy=a0,x.unionWith=i0,x.uniq=s0,x.uniqBy=o0,x.uniqWith=l0,x.unset=ub,x.unzip=yl,x.unzipWith=Of,x.update=fb,x.updateWith=db,x.values=_a,x.valuesIn=hb,x.without=c0,x.words=td,x.wrap=sy,x.xor=u0,x.xorBy=f0,x.xorWith=d0,x.zip=h0,x.zipObject=p0,x.zipObjectDeep=m0,x.zipWith=g0,x.entries=Qf,x.entriesIn=Jf,x.extend=Gf,x.extendWith=ts,kl(x,x),x.add=h1,x.attempt=rd,x.camelCase=vb,x.capitalize=Xf,x.ceil=p1,x.clamp=pb,x.clone=ly,x.cloneDeep=uy,x.cloneDeepWith=fy,x.cloneWith=cy,x.conformsTo=dy,x.deburr=ed,x.defaultTo=Vb,x.divide=m1,x.endsWith=_b,x.eq=Tr,x.escape=yb,x.escapeRegExp=bb,x.every=A0,x.find=k0,x.findIndex=Pf,x.findKey=Uy,x.findLast=O0,x.findLastIndex=Rf,x.findLastKey=Hy,x.floor=g1,x.forEach=Df,x.forEachRight=If,x.forIn=Zy,x.forInRight=By,x.forOwn=Vy,x.forOwnRight=Wy,x.get=Sl,x.gt=hy,x.gte=py,x.has=Yy,x.hasIn=Pl,x.head=Tf,x.identity=Xt,x.includes=M0,x.indexOf=O_,x.inRange=mb,x.invoke=Xy,x.isArguments=Hn,x.isArray=we,x.isArrayBuffer=my,x.isArrayLike=Qt,x.isArrayLikeObject=vt,x.isBoolean=gy,x.isBuffer=An,x.isDate=vy,x.isElement=_y,x.isEmpty=yy,x.isEqual=by,x.isEqualWith=wy,x.isError=El,x.isFinite=Ey,x.isFunction=ln,x.isInteger=zf,x.isLength=Xi,x.isMap=Uf,x.isMatch=xy,x.isMatchWith=Sy,x.isNaN=Py,x.isNative=Ry,x.isNil=Ty,x.isNull=Ay,x.isNumber=Hf,x.isObject=ut,x.isObjectLike=ht,x.isPlainObject=Wa,x.isRegExp=xl,x.isSafeInteger=ky,x.isSet=Zf,x.isString=es,x.isSymbol=or,x.isTypedArray=va,x.isUndefined=Oy,x.isWeakMap=Cy,x.isWeakSet=Dy,x.join=M_,x.kebabCase=wb,x.last=br,x.lastIndexOf=N_,x.lowerCase=Eb,x.lowerFirst=xb,x.lt=Iy,x.lte=$y,x.max=v1,x.maxBy=_1,x.mean=y1,x.meanBy=b1,x.min=w1,x.minBy=E1,x.stubArray=Cl,x.stubFalse=Dl,x.stubObject=o1,x.stubString=l1,x.stubTrue=c1,x.multiply=x1,x.nth=L_,x.noConflict=Xb,x.noop=Ol,x.now=Yi,x.pad=Sb,x.padEnd=Pb,x.padStart=Rb,x.parseInt=Ab,x.random=gb,x.reduce=q0,x.reduceRight=z0,x.repeat=Tb,x.replace=kb,x.result=sb,x.round=S1,x.runInContext=C,x.sample=H0,x.size=V0,x.snakeCase=Ob,x.some=W0,x.sortedIndex=Z_,x.sortedIndexBy=B_,x.sortedIndexOf=V_,x.sortedLastIndex=W_,x.sortedLastIndexBy=G_,x.sortedLastIndexOf=K_,x.startCase=Db,x.startsWith=Ib,x.subtract=P1,x.sum=R1,x.sumBy=A1,x.template=$b,x.times=u1,x.toFinite=cn,x.toInteger=Pe,x.toLength=Vf,x.toLower=Mb,x.toNumber=wr,x.toSafeInteger=My,x.toString=Be,x.toUpper=Nb,x.trim=Lb,x.trimEnd=Fb,x.trimStart=jb,x.truncate=qb,x.unescape=zb,x.uniqueId=d1,x.upperCase=Ub,x.upperFirst=Rl,x.each=Df,x.eachRight=If,x.first=Tf,kl(x,(function(){var n={};return Ur(x,function(i,l){We.call(x.prototype,l)||(n[l]=i)}),n})(),{chain:!1}),x.VERSION=s,mr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){x[n].placeholder=x}),mr(["drop","take"],function(n,i){De.prototype[n]=function(l){l=l===t?1:Et(Pe(l),0);var d=this.__filtered__&&!i?new De(this):this.clone();return d.__filtered__?d.__takeCount__=$t(l,d.__takeCount__):d.__views__.push({size:$t(l,Fe),type:n+(d.__dir__<0?"Right":"")}),d},De.prototype[n+"Right"]=function(l){return this.reverse()[n](l).reverse()}}),mr(["filter","map","takeWhile"],function(n,i){var l=i+1,d=l==Q||l==Ue;De.prototype[n]=function(_){var S=this.clone();return S.__iteratees__.push({iteratee:ue(_,3),type:l}),S.__filtered__=S.__filtered__||d,S}}),mr(["head","last"],function(n,i){var l="take"+(i?"Right":"");De.prototype[n]=function(){return this[l](1).value()[0]}}),mr(["initial","tail"],function(n,i){var l="drop"+(i?"":"Right");De.prototype[n]=function(){return this.__filtered__?new De(this):this[l](1)}}),De.prototype.compact=function(){return this.filter(Xt)},De.prototype.find=function(n){return this.filter(n).head()},De.prototype.findLast=function(n){return this.reverse().find(n)},De.prototype.invokeMap=Ae(function(n,i){return typeof n=="function"?new De(this):this.map(function(l){return za(l,n,i)})}),De.prototype.reject=function(n){return this.filter(Ji(ue(n)))},De.prototype.slice=function(n,i){n=Pe(n);var l=this;return l.__filtered__&&(n>0||i<0)?new De(l):(n<0?l=l.takeRight(-n):n&&(l=l.drop(n)),i!==t&&(i=Pe(i),l=i<0?l.dropRight(-i):l.take(i-n)),l)},De.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},De.prototype.toArray=function(){return this.take(Fe)},Ur(De.prototype,function(n,i){var l=/^(?:filter|find|map|reject)|While$/.test(i),d=/^(?:head|last)$/.test(i),_=x[d?"take"+(i=="last"?"Right":""):i],S=d||/^find/.test(i);_&&(x.prototype[i]=function(){var A=this.__wrapped__,k=d?[1]:arguments,D=A instanceof De,H=k[0],Z=D||we(A),V=function(Te){var $e=_.apply(x,yn([Te],k));return d&&X?$e[0]:$e};Z&&l&&typeof H=="function"&&H.length!=1&&(D=Z=!1);var X=this.__chain__,oe=!!this.__actions__.length,fe=S&&!X,Re=D&&!oe;if(!S&&Z){A=Re?A:new De(this);var de=n.apply(A,k);return de.__actions__.push({func:Gi,args:[V],thisArg:t}),new vr(de,X)}return fe&&Re?n.apply(this,k):(de=this.thru(V),fe?d?de.value()[0]:de.value():de)})}),mr(["pop","push","shift","sort","splice","unshift"],function(n){var i=bi[n],l=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",d=/^(?:pop|shift)$/.test(n);x.prototype[n]=function(){var _=arguments;if(d&&!this.__chain__){var S=this.value();return i.apply(we(S)?S:[],_)}return this[l](function(A){return i.apply(we(A)?A:[],_)})}}),Ur(De.prototype,function(n,i){var l=x[i];if(l){var d=l.name+"";We.call(da,d)||(da[d]=[]),da[d].push({name:i,func:l})}}),da[zi(t,R).name]=[{name:"wrapper",func:t}],De.prototype.clone=zg,De.prototype.reverse=Ug,De.prototype.value=Hg,x.prototype.at=_0,x.prototype.chain=y0,x.prototype.commit=b0,x.prototype.next=w0,x.prototype.plant=x0,x.prototype.reverse=S0,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=P0,x.prototype.first=x.prototype.head,$a&&(x.prototype[$a]=E0),x}),wn=bg();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Rt._=wn,define(function(){return wn})):Mn?((Mn.exports=wn)._=wn,To._=wn):Rt._=wn}).call(a)}}),Vn=Em(kx(),1),Cx=Em(Ox(),1),Dx=Symbol("Let zodToJsonSchema decide on which parser to use"),hm={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},Ix=a=>typeof a=="string"?{...hm,name:a}:{...hm,...a},$x=a=>{let e=Ix(a),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:t,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([s,r])=>[r._def,{def:r._def,path:[...e.basePath,e.definitionPath,s],jsonSchema:void 0}]))}};function Sm(a,e,t,s){s?.errorMessages&&t&&(a.errorMessage={...a.errorMessage,[e]:t})}function Ge(a,e,t,s,r){a[e]=t,Sm(a,e,s,r)}var Pm=(a,e)=>{let t=0;for(;t<a.length&&t<e.length&&a[t]===e[t];t++);return[(a.length-t).toString(),...e.slice(t)].join("/")},qe;(function(a){a.assertEqual=r=>{};function e(r){}a.assertIs=e;function t(r){throw new Error}a.assertNever=t,a.arrayToEnum=r=>{let o={};for(let c of r)o[c]=c;return o},a.getValidEnumValues=r=>{let o=a.objectKeys(r).filter(u=>typeof r[r[u]]!="number"),c={};for(let u of o)c[u]=r[u];return a.objectValues(c)},a.objectValues=r=>a.objectKeys(r).map(function(o){return r[o]}),a.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{let o=[];for(let c in r)Object.prototype.hasOwnProperty.call(r,c)&&o.push(c);return o},a.find=(r,o)=>{for(let c of r)if(o(c))return c},a.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function s(r,o=" | "){return r.map(c=>typeof c=="string"?`'${c}'`:c).join(o)}a.joinValues=s,a.jsonStringifyReplacer=(r,o)=>typeof o=="bigint"?o.toString():o})(qe||(qe={}));var pm;(function(a){a.mergeShapes=(e,t)=>({...e,...t})})(pm||(pm={}));var ne=qe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Cn=a=>{switch(typeof a){case"undefined":return ne.undefined;case"string":return ne.string;case"number":return Number.isNaN(a)?ne.nan:ne.number;case"boolean":return ne.boolean;case"function":return ne.function;case"bigint":return ne.bigint;case"symbol":return ne.symbol;case"object":return Array.isArray(a)?ne.array:a===null?ne.null:a.then&&typeof a.then=="function"&&a.catch&&typeof a.catch=="function"?ne.promise:typeof Map<"u"&&a instanceof Map?ne.map:typeof Set<"u"&&a instanceof Set?ne.set:typeof Date<"u"&&a instanceof Date?ne.date:ne.object;default:return ne.unknown}},K=qe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Vr=class Rm extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(o){return o.message},s={_errors:[]},r=o=>{for(let c of o.issues)if(c.code==="invalid_union")c.unionErrors.map(r);else if(c.code==="invalid_return_type")r(c.returnTypeError);else if(c.code==="invalid_arguments")r(c.argumentsError);else if(c.path.length===0)s._errors.push(t(c));else{let u=s,f=0;for(;f<c.path.length;){let h=c.path[f];f===c.path.length-1?(u[h]=u[h]||{_errors:[]},u[h]._errors.push(t(c))):u[h]=u[h]||{_errors:[]},u=u[h],f++}}};return r(this),s}static assert(e){if(!(e instanceof Rm))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,qe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},s=[];for(let r of this.issues)if(r.path.length>0){let o=r.path[0];t[o]=t[o]||[],t[o].push(e(r))}else s.push(e(r));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}};Vr.create=a=>new Vr(a);var Mx=(a,e)=>{let t;switch(a.code){case K.invalid_type:a.received===ne.undefined?t="Required":t=`Expected ${a.expected}, received ${a.received}`;break;case K.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(a.expected,qe.jsonStringifyReplacer)}`;break;case K.unrecognized_keys:t=`Unrecognized key(s) in object: ${qe.joinValues(a.keys,", ")}`;break;case K.invalid_union:t="Invalid input";break;case K.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${qe.joinValues(a.options)}`;break;case K.invalid_enum_value:t=`Invalid enum value. Expected ${qe.joinValues(a.options)}, received '${a.received}'`;break;case K.invalid_arguments:t="Invalid function arguments";break;case K.invalid_return_type:t="Invalid function return type";break;case K.invalid_date:t="Invalid date";break;case K.invalid_string:typeof a.validation=="object"?"includes"in a.validation?(t=`Invalid input: must include "${a.validation.includes}"`,typeof a.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?t=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?t=`Invalid input: must end with "${a.validation.endsWith}"`:qe.assertNever(a.validation):a.validation!=="regex"?t=`Invalid ${a.validation}`:t="Invalid";break;case K.too_small:a.type==="array"?t=`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:a.type==="string"?t=`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:a.type==="number"?t=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="bigint"?t=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="date"?t=`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:t="Invalid input";break;case K.too_big:a.type==="array"?t=`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:a.type==="string"?t=`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:a.type==="number"?t=`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="bigint"?t=`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="date"?t=`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:t="Invalid input";break;case K.custom:t="Invalid input";break;case K.invalid_intersection_types:t="Intersection results could not be merged";break;case K.not_multiple_of:t=`Number must be a multiple of ${a.multipleOf}`;break;case K.not_finite:t="Number must be finite";break;default:t=e.defaultError,qe.assertNever(a)}return{message:t}},ni=Mx,Nx=ni;function Ac(){return Nx}var Tc=a=>{let{data:e,path:t,errorMaps:s,issueData:r}=a,o=[...t,...r.path||[]],c={...r,path:o};if(r.message!==void 0)return{...r,path:o,message:r.message};let u="",f=s.filter(h=>!!h).slice().reverse();for(let h of f)u=h(c,{data:e,defaultError:u}).message;return{...r,path:o,message:u}};function ee(a,e){let t=Ac(),s=Tc({issueData:e,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,t,t===ni?void 0:ni].filter(r=>!!r)});a.common.issues.push(s)}var ur=class Am{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let s=[];for(let r of t){if(r.status==="aborted")return pe;r.status==="dirty"&&e.dirty(),s.push(r.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){let s=[];for(let r of t){let o=await r.key,c=await r.value;s.push({key:o,value:c})}return Am.mergeObjectSync(e,s)}static mergeObjectSync(e,t){let s={};for(let r of t){let{key:o,value:c}=r;if(o.status==="aborted"||c.status==="aborted")return pe;o.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof c.value<"u"||r.alwaysSet)&&(s[o.value]=c.value)}return{status:e.value,value:s}}},pe=Object.freeze({status:"aborted"}),ti=a=>({status:"dirty",value:a}),tr=a=>({status:"valid",value:a}),mm=a=>a.status==="aborted",gm=a=>a.status==="dirty",Sa=a=>a.status==="valid",ao=a=>typeof Promise<"u"&&a instanceof Promise,le;(function(a){a.errToObj=e=>typeof e=="string"?{message:e}:e||{},a.toString=e=>typeof e=="string"?e:e?.message})(le||(le={}));var Wr=class{constructor(a,e,t,s){this._cachedPath=[],this.parent=a,this.data=e,this._path=t,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},vm=(a,e)=>{if(Sa(e))return{success:!0,data:e.value};if(!a.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new Vr(a.common.issues);return this._error=t,this._error}}};function xe(a){if(!a)return{};let{errorMap:e,invalid_type_error:t,required_error:s,description:r}=a;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(c,u)=>{let{message:f}=a;return c.code==="invalid_enum_value"?{message:f??u.defaultError}:typeof u.data>"u"?{message:f??s??u.defaultError}:c.code!=="invalid_type"?{message:u.defaultError}:{message:f??t??u.defaultError}},description:r}}var Oe=class{get description(){return this._def.description}_getType(a){return Cn(a.data)}_getOrReturnCtx(a,e){return e||{common:a.parent.common,data:a.data,parsedType:Cn(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}_processInputParams(a){return{status:new ur,ctx:{common:a.parent.common,data:a.data,parsedType:Cn(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}}_parseSync(a){let e=this._parse(a);if(ao(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(a){let e=this._parse(a);return Promise.resolve(e)}parse(a,e){let t=this.safeParse(a,e);if(t.success)return t.data;throw t.error}safeParse(a,e){let t={common:{issues:[],async:e?.async??!1,contextualErrorMap:e?.errorMap},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:Cn(a)},s=this._parseSync({data:a,path:t.path,parent:t});return vm(t,s)}"~validate"(a){let e={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:Cn(a)};if(!this["~standard"].async)try{let t=this._parseSync({data:a,path:[],parent:e});return Sa(t)?{value:t.value}:{issues:e.common.issues}}catch(t){t?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),e.common={issues:[],async:!0}}return this._parseAsync({data:a,path:[],parent:e}).then(t=>Sa(t)?{value:t.value}:{issues:e.common.issues})}async parseAsync(a,e){let t=await this.safeParseAsync(a,e);if(t.success)return t.data;throw t.error}async safeParseAsync(a,e){let t={common:{issues:[],contextualErrorMap:e?.errorMap,async:!0},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:Cn(a)},s=this._parse({data:a,path:t.path,parent:t}),r=await(ao(s)?s:Promise.resolve(s));return vm(t,r)}refine(a,e){let t=s=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(s):e;return this._refinement((s,r)=>{let o=a(s),c=()=>r.addIssue({code:K.custom,...t(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(a,e){return this._refinement((t,s)=>a(t)?!0:(s.addIssue(typeof e=="function"?e(t,s):e),!1))}_refinement(a){return new hn({schema:this,typeName:Y.ZodEffects,effect:{type:"refinement",refinement:a}})}superRefine(a){return this._refinement(a)}constructor(a){this.spa=this.safeParseAsync,this._def=a,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return dn.create(this,this._def)}nullable(){return Gn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Pa.create(this)}promise(){return ai.create(this,this._def)}or(a){return lo.create([this,a],this._def)}and(a){return co.create(this,a,this._def)}transform(a){return new hn({...xe(this._def),schema:this,typeName:Y.ZodEffects,effect:{type:"transform",transform:a}})}default(a){let e=typeof a=="function"?a:()=>a;return new po({...xe(this._def),innerType:this,defaultValue:e,typeName:Y.ZodDefault})}brand(){return new $m({typeName:Y.ZodBranded,type:this,...xe(this._def)})}catch(a){let e=typeof a=="function"?a:()=>a;return new mo({...xe(this._def),innerType:this,catchValue:e,typeName:Y.ZodCatch})}describe(a){let e=this.constructor;return new e({...this._def,description:a})}pipe(a){return Mm.create(this,a)}readonly(){return go.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Lx=/^c[^\s-]{8,}$/i,Fx=/^[0-9a-z]+$/,jx=/^[0-9A-HJKMNP-TV-Z]{26}$/i,qx=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,zx=/^[a-z0-9_-]{21}$/i,Ux=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Hx=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Zx=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Bx="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Sc,Vx=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Wx=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Gx=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Kx=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Yx=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Qx=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Tm="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Jx=new RegExp(`^${Tm}$`);function km(a){let e="[0-5]\\d";a.precision?e=`${e}\\.\\d{${a.precision}}`:a.precision==null&&(e=`${e}(\\.\\d+)?`);let t=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function Xx(a){return new RegExp(`^${km(a)}$`)}function eS(a){let e=`${Tm}T${km(a)}`,t=[];return t.push(a.local?"Z?":"Z"),a.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function tS(a,e){return!!((e==="v4"||!e)&&Vx.test(a)||(e==="v6"||!e)&&Gx.test(a))}function rS(a,e){if(!Ux.test(a))return!1;try{let[t]=a.split(".");if(!t)return!1;let s=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),r=JSON.parse(atob(s));return!(typeof r!="object"||r===null||"typ"in r&&r?.typ!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function nS(a,e){return!!((e==="v4"||!e)&&Wx.test(a)||(e==="v6"||!e)&&Kx.test(a))}var io=class ri extends Oe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ne.string){let o=this._getOrReturnCtx(e);return ee(o,{code:K.invalid_type,expected:ne.string,received:o.parsedType}),pe}let s=new ur,r;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(r=this._getOrReturnCtx(e,r),ee(r,{code:K.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),s.dirty());else if(o.kind==="max")e.data.length>o.value&&(r=this._getOrReturnCtx(e,r),ee(r,{code:K.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),s.dirty());else if(o.kind==="length"){let c=e.data.length>o.value,u=e.data.length<o.value;(c||u)&&(r=this._getOrReturnCtx(e,r),c?ee(r,{code:K.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):u&&ee(r,{code:K.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),s.dirty())}else if(o.kind==="email")Zx.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"email",code:K.invalid_string,message:o.message}),s.dirty());else if(o.kind==="emoji")Sc||(Sc=new RegExp(Bx,"u")),Sc.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"emoji",code:K.invalid_string,message:o.message}),s.dirty());else if(o.kind==="uuid")qx.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"uuid",code:K.invalid_string,message:o.message}),s.dirty());else if(o.kind==="nanoid")zx.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"nanoid",code:K.invalid_string,message:o.message}),s.dirty());else if(o.kind==="cuid")Lx.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"cuid",code:K.invalid_string,message:o.message}),s.dirty());else if(o.kind==="cuid2")Fx.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"cuid2",code:K.invalid_string,message:o.message}),s.dirty());else if(o.kind==="ulid")jx.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"ulid",code:K.invalid_string,message:o.message}),s.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),ee(r,{validation:"url",code:K.invalid_string,message:o.message}),s.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"regex",code:K.invalid_string,message:o.message}),s.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(r=this._getOrReturnCtx(e,r),ee(r,{code:K.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),s.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(r=this._getOrReturnCtx(e,r),ee(r,{code:K.invalid_string,validation:{startsWith:o.value},message:o.message}),s.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(r=this._getOrReturnCtx(e,r),ee(r,{code:K.invalid_string,validation:{endsWith:o.value},message:o.message}),s.dirty()):o.kind==="datetime"?eS(o).test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{code:K.invalid_string,validation:"datetime",message:o.message}),s.dirty()):o.kind==="date"?Jx.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{code:K.invalid_string,validation:"date",message:o.message}),s.dirty()):o.kind==="time"?Xx(o).test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{code:K.invalid_string,validation:"time",message:o.message}),s.dirty()):o.kind==="duration"?Hx.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"duration",code:K.invalid_string,message:o.message}),s.dirty()):o.kind==="ip"?tS(e.data,o.version)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"ip",code:K.invalid_string,message:o.message}),s.dirty()):o.kind==="jwt"?rS(e.data,o.alg)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"jwt",code:K.invalid_string,message:o.message}),s.dirty()):o.kind==="cidr"?nS(e.data,o.version)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"cidr",code:K.invalid_string,message:o.message}),s.dirty()):o.kind==="base64"?Yx.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"base64",code:K.invalid_string,message:o.message}),s.dirty()):o.kind==="base64url"?Qx.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"base64url",code:K.invalid_string,message:o.message}),s.dirty()):qe.assertNever(o);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(r=>e.test(r),{validation:t,code:K.invalid_string,...le.errToObj(s)})}_addCheck(e){return new ri({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...le.errToObj(e)})}url(e){return this._addCheck({kind:"url",...le.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...le.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...le.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...le.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...le.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...le.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...le.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...le.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...le.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...le.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...le.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...le.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...le.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...le.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...le.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...le.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...le.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...le.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...le.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...le.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...le.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...le.errToObj(t)})}nonempty(e){return this.min(1,le.errToObj(e))}trim(){return new ri({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ri({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ri({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};io.create=a=>new io({checks:[],typeName:Y.ZodString,coerce:a?.coerce??!1,...xe(a)});function aS(a,e){let t=(a.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,r=t>s?t:s,o=Number.parseInt(a.toFixed(r).replace(".","")),c=Number.parseInt(e.toFixed(r).replace(".",""));return o%c/10**r}var kc=class Oc extends Oe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ne.number){let o=this._getOrReturnCtx(e);return ee(o,{code:K.invalid_type,expected:ne.number,received:o.parsedType}),pe}let s,r=new ur;for(let o of this._def.checks)o.kind==="int"?qe.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:K.invalid_type,expected:"integer",received:"float",message:o.message}),r.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),r.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),r.dirty()):o.kind==="multipleOf"?aS(e.data,o.value)!==0&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.not_multiple_of,multipleOf:o.value,message:o.message}),r.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:K.not_finite,message:o.message}),r.dirty()):qe.assertNever(o);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,le.toString(t))}gt(e,t){return this.setLimit("min",e,!1,le.toString(t))}lte(e,t){return this.setLimit("max",e,!0,le.toString(t))}lt(e,t){return this.setLimit("max",e,!1,le.toString(t))}setLimit(e,t,s,r){return new Oc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:le.toString(r)}]})}_addCheck(e){return new Oc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:le.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:le.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:le.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:le.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:le.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&qe.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}};kc.create=a=>new kc({checks:[],typeName:Y.ZodNumber,coerce:a?.coerce||!1,...xe(a)});var Cc=class Dc extends Oe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ne.bigint)return this._getInvalidInput(e);let s,r=new ur;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),r.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),r.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.not_multiple_of,multipleOf:o.value,message:o.message}),r.dirty()):qe.assertNever(o);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return ee(t,{code:K.invalid_type,expected:ne.bigint,received:t.parsedType}),pe}gte(e,t){return this.setLimit("min",e,!0,le.toString(t))}gt(e,t){return this.setLimit("min",e,!1,le.toString(t))}lte(e,t){return this.setLimit("max",e,!0,le.toString(t))}lt(e,t){return this.setLimit("max",e,!1,le.toString(t))}setLimit(e,t,s,r){return new Dc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:le.toString(r)}]})}_addCheck(e){return new Dc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:le.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};Cc.create=a=>new Cc({checks:[],typeName:Y.ZodBigInt,coerce:a?.coerce??!1,...xe(a)});var Ic=class extends Oe{_parse(a){if(this._def.coerce&&(a.data=!!a.data),this._getType(a)!==ne.boolean){let t=this._getOrReturnCtx(a);return ee(t,{code:K.invalid_type,expected:ne.boolean,received:t.parsedType}),pe}return tr(a.data)}};Ic.create=a=>new Ic({typeName:Y.ZodBoolean,coerce:a?.coerce||!1,...xe(a)});var $c=class Om extends Oe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ne.date){let o=this._getOrReturnCtx(e);return ee(o,{code:K.invalid_type,expected:ne.date,received:o.parsedType}),pe}if(Number.isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return ee(o,{code:K.invalid_date}),pe}let s=new ur,r;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(r=this._getOrReturnCtx(e,r),ee(r,{code:K.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),s.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(r=this._getOrReturnCtx(e,r),ee(r,{code:K.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),s.dirty()):qe.assertNever(o);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Om({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:le.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:le.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};$c.create=a=>new $c({checks:[],coerce:a?.coerce||!1,typeName:Y.ZodDate,...xe(a)});var Mc=class extends Oe{_parse(a){if(this._getType(a)!==ne.symbol){let t=this._getOrReturnCtx(a);return ee(t,{code:K.invalid_type,expected:ne.symbol,received:t.parsedType}),pe}return tr(a.data)}};Mc.create=a=>new Mc({typeName:Y.ZodSymbol,...xe(a)});var so=class extends Oe{_parse(a){if(this._getType(a)!==ne.undefined){let t=this._getOrReturnCtx(a);return ee(t,{code:K.invalid_type,expected:ne.undefined,received:t.parsedType}),pe}return tr(a.data)}};so.create=a=>new so({typeName:Y.ZodUndefined,...xe(a)});var oo=class extends Oe{_parse(a){if(this._getType(a)!==ne.null){let t=this._getOrReturnCtx(a);return ee(t,{code:K.invalid_type,expected:ne.null,received:t.parsedType}),pe}return tr(a.data)}};oo.create=a=>new oo({typeName:Y.ZodNull,...xe(a)});var Nc=class extends Oe{constructor(){super(...arguments),this._any=!0}_parse(a){return tr(a.data)}};Nc.create=a=>new Nc({typeName:Y.ZodAny,...xe(a)});var xa=class extends Oe{constructor(){super(...arguments),this._unknown=!0}_parse(a){return tr(a.data)}};xa.create=a=>new xa({typeName:Y.ZodUnknown,...xe(a)});var Dn=class extends Oe{_parse(a){let e=this._getOrReturnCtx(a);return ee(e,{code:K.invalid_type,expected:ne.never,received:e.parsedType}),pe}};Dn.create=a=>new Dn({typeName:Y.ZodNever,...xe(a)});var Lc=class extends Oe{_parse(a){if(this._getType(a)!==ne.undefined){let t=this._getOrReturnCtx(a);return ee(t,{code:K.invalid_type,expected:ne.void,received:t.parsedType}),pe}return tr(a.data)}};Lc.create=a=>new Lc({typeName:Y.ZodVoid,...xe(a)});var Pa=class ro extends Oe{_parse(e){let{ctx:t,status:s}=this._processInputParams(e),r=this._def;if(t.parsedType!==ne.array)return ee(t,{code:K.invalid_type,expected:ne.array,received:t.parsedType}),pe;if(r.exactLength!==null){let c=t.data.length>r.exactLength.value,u=t.data.length<r.exactLength.value;(c||u)&&(ee(t,{code:c?K.too_big:K.too_small,minimum:u?r.exactLength.value:void 0,maximum:c?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(ee(t,{code:K.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(ee(t,{code:K.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((c,u)=>r.type._parseAsync(new Wr(t,c,t.path,u)))).then(c=>ur.mergeArray(s,c));let o=[...t.data].map((c,u)=>r.type._parseSync(new Wr(t,c,t.path,u)));return ur.mergeArray(s,o)}get element(){return this._def.type}min(e,t){return new ro({...this._def,minLength:{value:e,message:le.toString(t)}})}max(e,t){return new ro({...this._def,maxLength:{value:e,message:le.toString(t)}})}length(e,t){return new ro({...this._def,exactLength:{value:e,message:le.toString(t)}})}nonempty(e){return this.min(1,e)}};Pa.create=(a,e)=>new Pa({type:a,minLength:null,maxLength:null,exactLength:null,typeName:Y.ZodArray,...xe(e)});function Ea(a){if(a instanceof Mr){let e={};for(let t in a.shape){let s=a.shape[t];e[t]=dn.create(Ea(s))}return new Mr({...a._def,shape:()=>e})}else return a instanceof Pa?new Pa({...a._def,type:Ea(a.element)}):a instanceof dn?dn.create(Ea(a.unwrap())):a instanceof Gn?Gn.create(Ea(a.unwrap())):a instanceof Wn?Wn.create(a.items.map(e=>Ea(e))):a}var Mr=class $r extends Oe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=qe.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==ne.object){let h=this._getOrReturnCtx(e);return ee(h,{code:K.invalid_type,expected:ne.object,received:h.parsedType}),pe}let{status:s,ctx:r}=this._processInputParams(e),{shape:o,keys:c}=this._getCached(),u=[];if(!(this._def.catchall instanceof Dn&&this._def.unknownKeys==="strip"))for(let h in r.data)c.includes(h)||u.push(h);let f=[];for(let h of c){let m=o[h],g=r.data[h];f.push({key:{status:"valid",value:h},value:m._parse(new Wr(r,g,r.path,h)),alwaysSet:h in r.data})}if(this._def.catchall instanceof Dn){let h=this._def.unknownKeys;if(h==="passthrough")for(let m of u)f.push({key:{status:"valid",value:m},value:{status:"valid",value:r.data[m]}});else if(h==="strict")u.length>0&&(ee(r,{code:K.unrecognized_keys,keys:u}),s.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let h=this._def.catchall;for(let m of u){let g=r.data[m];f.push({key:{status:"valid",value:m},value:h._parse(new Wr(r,g,r.path,m)),alwaysSet:m in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let h=[];for(let m of f){let g=await m.key,v=await m.value;h.push({key:g,value:v,alwaysSet:m.alwaysSet})}return h}).then(h=>ur.mergeObjectSync(s,h)):ur.mergeObjectSync(s,f)}get shape(){return this._def.shape()}strict(e){return le.errToObj,new $r({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{let r=this._def.errorMap?.(t,s).message??s.defaultError;return t.code==="unrecognized_keys"?{message:le.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new $r({...this._def,unknownKeys:"strip"})}passthrough(){return new $r({...this._def,unknownKeys:"passthrough"})}extend(e){return new $r({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new $r({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Y.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new $r({...this._def,catchall:e})}pick(e){let t={};for(let s of qe.objectKeys(e))e[s]&&this.shape[s]&&(t[s]=this.shape[s]);return new $r({...this._def,shape:()=>t})}omit(e){let t={};for(let s of qe.objectKeys(this.shape))e[s]||(t[s]=this.shape[s]);return new $r({...this._def,shape:()=>t})}deepPartial(){return Ea(this)}partial(e){let t={};for(let s of qe.objectKeys(this.shape)){let r=this.shape[s];e&&!e[s]?t[s]=r:t[s]=r.optional()}return new $r({...this._def,shape:()=>t})}required(e){let t={};for(let s of qe.objectKeys(this.shape))if(e&&!e[s])t[s]=this.shape[s];else{let o=this.shape[s];for(;o instanceof dn;)o=o._def.innerType;t[s]=o}return new $r({...this._def,shape:()=>t})}keyof(){return Im(qe.objectKeys(this.shape))}};Mr.create=(a,e)=>new Mr({shape:()=>a,unknownKeys:"strip",catchall:Dn.create(),typeName:Y.ZodObject,...xe(e)});Mr.strictCreate=(a,e)=>new Mr({shape:()=>a,unknownKeys:"strict",catchall:Dn.create(),typeName:Y.ZodObject,...xe(e)});Mr.lazycreate=(a,e)=>new Mr({shape:a,unknownKeys:"strip",catchall:Dn.create(),typeName:Y.ZodObject,...xe(e)});var lo=class extends Oe{_parse(a){let{ctx:e}=this._processInputParams(a),t=this._def.options;function s(r){for(let c of r)if(c.result.status==="valid")return c.result;for(let c of r)if(c.result.status==="dirty")return e.common.issues.push(...c.ctx.common.issues),c.result;let o=r.map(c=>new Vr(c.ctx.common.issues));return ee(e,{code:K.invalid_union,unionErrors:o}),pe}if(e.common.async)return Promise.all(t.map(async r=>{let o={...e,common:{...e.common,issues:[]},parent:null};return{result:await r._parseAsync({data:e.data,path:e.path,parent:o}),ctx:o}})).then(s);{let r,o=[];for(let u of t){let f={...e,common:{...e.common,issues:[]},parent:null},h=u._parseSync({data:e.data,path:e.path,parent:f});if(h.status==="valid")return h;h.status==="dirty"&&!r&&(r={result:h,ctx:f}),f.common.issues.length&&o.push(f.common.issues)}if(r)return e.common.issues.push(...r.ctx.common.issues),r.result;let c=o.map(u=>new Vr(u));return ee(e,{code:K.invalid_union,unionErrors:c}),pe}}get options(){return this._def.options}};lo.create=(a,e)=>new lo({options:a,typeName:Y.ZodUnion,...xe(e)});var fn=a=>a instanceof uo?fn(a.schema):a instanceof hn?fn(a.innerType()):a instanceof fo?[a.value]:a instanceof _o?a.options:a instanceof ho?qe.objectValues(a.enum):a instanceof po?fn(a._def.innerType):a instanceof so?[void 0]:a instanceof oo?[null]:a instanceof dn?[void 0,...fn(a.unwrap())]:a instanceof Gn?[null,...fn(a.unwrap())]:a instanceof $m||a instanceof go?fn(a.unwrap()):a instanceof mo?fn(a._def.innerType):[],iS=class Cm extends Oe{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==ne.object)return ee(t,{code:K.invalid_type,expected:ne.object,received:t.parsedType}),pe;let s=this.discriminator,r=t.data[s],o=this.optionsMap.get(r);return o?t.common.async?o._parseAsync({data:t.data,path:t.path,parent:t}):o._parseSync({data:t.data,path:t.path,parent:t}):(ee(t,{code:K.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),pe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){let r=new Map;for(let o of t){let c=fn(o.shape[e]);if(!c.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let u of c){if(r.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);r.set(u,o)}}return new Cm({typeName:Y.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...xe(s)})}};function Fc(a,e){let t=Cn(a),s=Cn(e);if(a===e)return{valid:!0,data:a};if(t===ne.object&&s===ne.object){let r=qe.objectKeys(e),o=qe.objectKeys(a).filter(u=>r.indexOf(u)!==-1),c={...a,...e};for(let u of o){let f=Fc(a[u],e[u]);if(!f.valid)return{valid:!1};c[u]=f.data}return{valid:!0,data:c}}else if(t===ne.array&&s===ne.array){if(a.length!==e.length)return{valid:!1};let r=[];for(let o=0;o<a.length;o++){let c=a[o],u=e[o],f=Fc(c,u);if(!f.valid)return{valid:!1};r.push(f.data)}return{valid:!0,data:r}}else return t===ne.date&&s===ne.date&&+a==+e?{valid:!0,data:a}:{valid:!1}}var co=class extends Oe{_parse(a){let{status:e,ctx:t}=this._processInputParams(a),s=(r,o)=>{if(mm(r)||mm(o))return pe;let c=Fc(r.value,o.value);return c.valid?((gm(r)||gm(o))&&e.dirty(),{status:e.value,value:c.data}):(ee(t,{code:K.invalid_intersection_types}),pe)};return t.common.async?Promise.all([this._def.left._parseAsync({data:t.data,path:t.path,parent:t}),this._def.right._parseAsync({data:t.data,path:t.path,parent:t})]).then(([r,o])=>s(r,o)):s(this._def.left._parseSync({data:t.data,path:t.path,parent:t}),this._def.right._parseSync({data:t.data,path:t.path,parent:t}))}};co.create=(a,e,t)=>new co({left:a,right:e,typeName:Y.ZodIntersection,...xe(t)});var Wn=class Dm extends Oe{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==ne.array)return ee(s,{code:K.invalid_type,expected:ne.array,received:s.parsedType}),pe;if(s.data.length<this._def.items.length)return ee(s,{code:K.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),pe;!this._def.rest&&s.data.length>this._def.items.length&&(ee(s,{code:K.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let o=[...s.data].map((c,u)=>{let f=this._def.items[u]||this._def.rest;return f?f._parse(new Wr(s,c,s.path,u)):null}).filter(c=>!!c);return s.common.async?Promise.all(o).then(c=>ur.mergeArray(t,c)):ur.mergeArray(t,o)}get items(){return this._def.items}rest(e){return new Dm({...this._def,rest:e})}};Wn.create=(a,e)=>{if(!Array.isArray(a))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Wn({items:a,typeName:Y.ZodTuple,rest:null,...xe(e)})};var sS=class jc extends Oe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==ne.object)return ee(s,{code:K.invalid_type,expected:ne.object,received:s.parsedType}),pe;let r=[],o=this._def.keyType,c=this._def.valueType;for(let u in s.data)r.push({key:o._parse(new Wr(s,u,s.path,u)),value:c._parse(new Wr(s,s.data[u],s.path,u)),alwaysSet:u in s.data});return s.common.async?ur.mergeObjectAsync(t,r):ur.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof Oe?new jc({keyType:e,valueType:t,typeName:Y.ZodRecord,...xe(s)}):new jc({keyType:io.create(),valueType:e,typeName:Y.ZodRecord,...xe(t)})}},qc=class extends Oe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:e,ctx:t}=this._processInputParams(a);if(t.parsedType!==ne.map)return ee(t,{code:K.invalid_type,expected:ne.map,received:t.parsedType}),pe;let s=this._def.keyType,r=this._def.valueType,o=[...t.data.entries()].map(([c,u],f)=>({key:s._parse(new Wr(t,c,t.path,[f,"key"])),value:r._parse(new Wr(t,u,t.path,[f,"value"]))}));if(t.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let u of o){let f=await u.key,h=await u.value;if(f.status==="aborted"||h.status==="aborted")return pe;(f.status==="dirty"||h.status==="dirty")&&e.dirty(),c.set(f.value,h.value)}return{status:e.value,value:c}})}else{let c=new Map;for(let u of o){let f=u.key,h=u.value;if(f.status==="aborted"||h.status==="aborted")return pe;(f.status==="dirty"||h.status==="dirty")&&e.dirty(),c.set(f.value,h.value)}return{status:e.value,value:c}}}};qc.create=(a,e,t)=>new qc({valueType:e,keyType:a,typeName:Y.ZodMap,...xe(t)});var zc=class Uc extends Oe{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==ne.set)return ee(s,{code:K.invalid_type,expected:ne.set,received:s.parsedType}),pe;let r=this._def;r.minSize!==null&&s.data.size<r.minSize.value&&(ee(s,{code:K.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&s.data.size>r.maxSize.value&&(ee(s,{code:K.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());let o=this._def.valueType;function c(f){let h=new Set;for(let m of f){if(m.status==="aborted")return pe;m.status==="dirty"&&t.dirty(),h.add(m.value)}return{status:t.value,value:h}}let u=[...s.data.values()].map((f,h)=>o._parse(new Wr(s,f,s.path,h)));return s.common.async?Promise.all(u).then(f=>c(f)):c(u)}min(e,t){return new Uc({...this._def,minSize:{value:e,message:le.toString(t)}})}max(e,t){return new Uc({...this._def,maxSize:{value:e,message:le.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};zc.create=(a,e)=>new zc({valueType:a,minSize:null,maxSize:null,typeName:Y.ZodSet,...xe(e)});var oS=class no extends Oe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==ne.function)return ee(t,{code:K.invalid_type,expected:ne.function,received:t.parsedType}),pe;function s(u,f){return Tc({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ac(),ni].filter(h=>!!h),issueData:{code:K.invalid_arguments,argumentsError:f}})}function r(u,f){return Tc({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ac(),ni].filter(h=>!!h),issueData:{code:K.invalid_return_type,returnTypeError:f}})}let o={errorMap:t.common.contextualErrorMap},c=t.data;if(this._def.returns instanceof ai){let u=this;return tr(async function(...f){let h=new Vr([]),m=await u._def.args.parseAsync(f,o).catch(p=>{throw h.addIssue(s(f,p)),h}),g=await Reflect.apply(c,this,m);return await u._def.returns._def.type.parseAsync(g,o).catch(p=>{throw h.addIssue(r(g,p)),h})})}else{let u=this;return tr(function(...f){let h=u._def.args.safeParse(f,o);if(!h.success)throw new Vr([s(f,h.error)]);let m=Reflect.apply(c,this,h.data),g=u._def.returns.safeParse(m,o);if(!g.success)throw new Vr([r(m,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new no({...this._def,args:Wn.create(e).rest(xa.create())})}returns(e){return new no({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new no({args:e||Wn.create([]).rest(xa.create()),returns:t||xa.create(),typeName:Y.ZodFunction,...xe(s)})}},uo=class extends Oe{get schema(){return this._def.getter()}_parse(a){let{ctx:e}=this._processInputParams(a);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}};uo.create=(a,e)=>new uo({getter:a,typeName:Y.ZodLazy,...xe(e)});var fo=class extends Oe{_parse(a){if(a.data!==this._def.value){let e=this._getOrReturnCtx(a);return ee(e,{received:e.data,code:K.invalid_literal,expected:this._def.value}),pe}return{status:"valid",value:a.data}}get value(){return this._def.value}};fo.create=(a,e)=>new fo({value:a,typeName:Y.ZodLiteral,...xe(e)});function Im(a,e){return new _o({values:a,typeName:Y.ZodEnum,...xe(e)})}var _o=class Hc extends Oe{_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),s=this._def.values;return ee(t,{expected:qe.joinValues(s),received:t.parsedType,code:K.invalid_type}),pe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),s=this._def.values;return ee(t,{received:t.data,code:K.invalid_enum_value,options:s}),pe}return tr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Hc.create(e,{...this._def,...t})}exclude(e,t=this._def){return Hc.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}};_o.create=Im;var ho=class extends Oe{_parse(a){let e=qe.getValidEnumValues(this._def.values),t=this._getOrReturnCtx(a);if(t.parsedType!==ne.string&&t.parsedType!==ne.number){let s=qe.objectValues(e);return ee(t,{expected:qe.joinValues(s),received:t.parsedType,code:K.invalid_type}),pe}if(this._cache||(this._cache=new Set(qe.getValidEnumValues(this._def.values))),!this._cache.has(a.data)){let s=qe.objectValues(e);return ee(t,{received:t.data,code:K.invalid_enum_value,options:s}),pe}return tr(a.data)}get enum(){return this._def.values}};ho.create=(a,e)=>new ho({values:a,typeName:Y.ZodNativeEnum,...xe(e)});var ai=class extends Oe{unwrap(){return this._def.type}_parse(a){let{ctx:e}=this._processInputParams(a);if(e.parsedType!==ne.promise&&e.common.async===!1)return ee(e,{code:K.invalid_type,expected:ne.promise,received:e.parsedType}),pe;let t=e.parsedType===ne.promise?e.data:Promise.resolve(e.data);return tr(t.then(s=>this._def.type.parseAsync(s,{path:e.path,errorMap:e.common.contextualErrorMap})))}};ai.create=(a,e)=>new ai({type:a,typeName:Y.ZodPromise,...xe(e)});var hn=class extends Oe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Y.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(a){let{status:e,ctx:t}=this._processInputParams(a),s=this._def.effect||null,r={addIssue:o=>{ee(t,o),o.fatal?e.abort():e.dirty()},get path(){return t.path}};if(r.addIssue=r.addIssue.bind(r),s.type==="preprocess"){let o=s.transform(t.data,r);if(t.common.async)return Promise.resolve(o).then(async c=>{if(e.value==="aborted")return pe;let u=await this._def.schema._parseAsync({data:c,path:t.path,parent:t});return u.status==="aborted"?pe:u.status==="dirty"||e.value==="dirty"?ti(u.value):u});{if(e.value==="aborted")return pe;let c=this._def.schema._parseSync({data:o,path:t.path,parent:t});return c.status==="aborted"?pe:c.status==="dirty"||e.value==="dirty"?ti(c.value):c}}if(s.type==="refinement"){let o=c=>{let u=s.refinement(c,r);if(t.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(t.common.async===!1){let c=this._def.schema._parseSync({data:t.data,path:t.path,parent:t});return c.status==="aborted"?pe:(c.status==="dirty"&&e.dirty(),o(c.value),{status:e.value,value:c.value})}else return this._def.schema._parseAsync({data:t.data,path:t.path,parent:t}).then(c=>c.status==="aborted"?pe:(c.status==="dirty"&&e.dirty(),o(c.value).then(()=>({status:e.value,value:c.value}))))}if(s.type==="transform")if(t.common.async===!1){let o=this._def.schema._parseSync({data:t.data,path:t.path,parent:t});if(!Sa(o))return pe;let c=s.transform(o.value,r);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:c}}else return this._def.schema._parseAsync({data:t.data,path:t.path,parent:t}).then(o=>Sa(o)?Promise.resolve(s.transform(o.value,r)).then(c=>({status:e.value,value:c})):pe);qe.assertNever(s)}};hn.create=(a,e,t)=>new hn({schema:a,typeName:Y.ZodEffects,effect:e,...xe(t)});hn.createWithPreprocess=(a,e,t)=>new hn({schema:e,effect:{type:"preprocess",transform:a},typeName:Y.ZodEffects,...xe(t)});var dn=class extends Oe{_parse(a){return this._getType(a)===ne.undefined?tr(void 0):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}};dn.create=(a,e)=>new dn({innerType:a,typeName:Y.ZodOptional,...xe(e)});var Gn=class extends Oe{_parse(a){return this._getType(a)===ne.null?tr(null):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}};Gn.create=(a,e)=>new Gn({innerType:a,typeName:Y.ZodNullable,...xe(e)});var po=class extends Oe{_parse(a){let{ctx:e}=this._processInputParams(a),t=e.data;return e.parsedType===ne.undefined&&(t=this._def.defaultValue()),this._def.innerType._parse({data:t,path:e.path,parent:e})}removeDefault(){return this._def.innerType}};po.create=(a,e)=>new po({innerType:a,typeName:Y.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...xe(e)});var mo=class extends Oe{_parse(a){let{ctx:e}=this._processInputParams(a),t={...e,common:{...e.common,issues:[]}},s=this._def.innerType._parse({data:t.data,path:t.path,parent:{...t}});return ao(s)?s.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Vr(t.common.issues)},input:t.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Vr(t.common.issues)},input:t.data})}}removeCatch(){return this._def.innerType}};mo.create=(a,e)=>new mo({innerType:a,typeName:Y.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...xe(e)});var Zc=class extends Oe{_parse(a){if(this._getType(a)!==ne.nan){let t=this._getOrReturnCtx(a);return ee(t,{code:K.invalid_type,expected:ne.nan,received:t.parsedType}),pe}return{status:"valid",value:a.data}}};Zc.create=a=>new Zc({typeName:Y.ZodNaN,...xe(a)});var ST=Symbol("zod_brand"),$m=class extends Oe{_parse(a){let{ctx:e}=this._processInputParams(a),t=e.data;return this._def.type._parse({data:t,path:e.path,parent:e})}unwrap(){return this._def.type}},Mm=class Nm extends Oe{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?pe:o.status==="dirty"?(t.dirty(),ti(o.value)):this._def.out._parseAsync({data:o.value,path:s.path,parent:s})})();{let r=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?pe:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:s.path,parent:s})}}static create(e,t){return new Nm({in:e,out:t,typeName:Y.ZodPipeline})}},go=class extends Oe{_parse(a){let e=this._def.innerType._parse(a),t=s=>(Sa(s)&&(s.value=Object.freeze(s.value)),s);return ao(e)?e.then(s=>t(s)):t(e)}unwrap(){return this._def.innerType}};go.create=(a,e)=>new go({innerType:a,typeName:Y.ZodReadonly,...xe(e)});var PT={object:Mr.lazycreate},Y;(function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"})(Y||(Y={}));var RT=io.create,AT=kc.create,TT=Zc.create,kT=Cc.create,OT=Ic.create,CT=$c.create,DT=Mc.create,IT=so.create,$T=oo.create,MT=Nc.create,NT=xa.create,LT=Dn.create,FT=Lc.create,jT=Pa.create,qT=Mr.create,zT=Mr.strictCreate,UT=lo.create,HT=iS.create,ZT=co.create,BT=Wn.create,VT=sS.create,WT=qc.create,GT=zc.create,KT=oS.create,YT=uo.create,QT=fo.create,JT=_o.create,XT=ho.create,ek=ai.create,tk=hn.create,rk=dn.create,nk=Gn.create,ak=hn.createWithPreprocess,ik=Mm.create;function rr(a){if(a.target!=="openAi")return{};let e=[...a.basePath,a.definitionPath,a.openAiAnyTypeName];return a.flags.hasReferencedOpenAiAnyType=!0,{$ref:a.$refStrategy==="relative"?Pm(e,a.currentPath):e.join("/")}}function lS(a,e){let t={type:"array"};return a.type?._def&&a.type?._def?.typeName!==Y.ZodAny&&(t.items=Ze(a.type._def,{...e,currentPath:[...e.currentPath,"items"]})),a.minLength&&Ge(t,"minItems",a.minLength.value,a.minLength.message,e),a.maxLength&&Ge(t,"maxItems",a.maxLength.value,a.maxLength.message,e),a.exactLength&&(Ge(t,"minItems",a.exactLength.value,a.exactLength.message,e),Ge(t,"maxItems",a.exactLength.value,a.exactLength.message,e)),t}function cS(a,e){let t={type:"integer",format:"int64"};if(!a.checks)return t;for(let s of a.checks)switch(s.kind){case"min":e.target==="jsonSchema7"?s.inclusive?Ge(t,"minimum",s.value,s.message,e):Ge(t,"exclusiveMinimum",s.value,s.message,e):(s.inclusive||(t.exclusiveMinimum=!0),Ge(t,"minimum",s.value,s.message,e));break;case"max":e.target==="jsonSchema7"?s.inclusive?Ge(t,"maximum",s.value,s.message,e):Ge(t,"exclusiveMaximum",s.value,s.message,e):(s.inclusive||(t.exclusiveMaximum=!0),Ge(t,"maximum",s.value,s.message,e));break;case"multipleOf":Ge(t,"multipleOf",s.value,s.message,e);break}return t}function uS(){return{type:"boolean"}}function Lm(a,e){return Ze(a.type._def,e)}var fS=(a,e)=>Ze(a.innerType._def,e);function Fm(a,e,t){let s=t??e.dateStrategy;if(Array.isArray(s))return{anyOf:s.map((r,o)=>Fm(a,e,r))};switch(s){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return dS(a,e)}}var dS=(a,e)=>{let t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(let s of a.checks)switch(s.kind){case"min":Ge(t,"minimum",s.value,s.message,e);break;case"max":Ge(t,"maximum",s.value,s.message,e);break}return t};function hS(a,e){return{...Ze(a.innerType._def,e),default:a.defaultValue()}}function pS(a,e){return e.effectStrategy==="input"?Ze(a.schema._def,e):rr(e)}function mS(a){return{type:"string",enum:Array.from(a.values)}}var gS=a=>"type"in a&&a.type==="string"?!1:"allOf"in a;function vS(a,e){let t=[Ze(a.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Ze(a.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o),s=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,r=[];return t.forEach(o=>{if(gS(o))r.push(...o.allOf),o.unevaluatedProperties===void 0&&(s=void 0);else{let c=o;if("additionalProperties"in o&&o.additionalProperties===!1){let{additionalProperties:u,...f}=o;c=f}else s=void 0;r.push(c)}}),r.length?{allOf:r,...s}:void 0}function _S(a,e){let t=typeof a.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(a.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[a.value]}:{type:t==="bigint"?"integer":t,const:a.value}}var Pc=void 0,Dr={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Pc===void 0&&(Pc=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Pc),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function jm(a,e){let t={type:"string"};if(a.checks)for(let s of a.checks)switch(s.kind){case"min":Ge(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e);break;case"max":Ge(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Ir(t,"email",s.message,e);break;case"format:idn-email":Ir(t,"idn-email",s.message,e);break;case"pattern:zod":Bt(t,Dr.email,s.message,e);break}break;case"url":Ir(t,"uri",s.message,e);break;case"uuid":Ir(t,"uuid",s.message,e);break;case"regex":Bt(t,s.regex,s.message,e);break;case"cuid":Bt(t,Dr.cuid,s.message,e);break;case"cuid2":Bt(t,Dr.cuid2,s.message,e);break;case"startsWith":Bt(t,RegExp(`^${Rc(s.value,e)}`),s.message,e);break;case"endsWith":Bt(t,RegExp(`${Rc(s.value,e)}$`),s.message,e);break;case"datetime":Ir(t,"date-time",s.message,e);break;case"date":Ir(t,"date",s.message,e);break;case"time":Ir(t,"time",s.message,e);break;case"duration":Ir(t,"duration",s.message,e);break;case"length":Ge(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e),Ge(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"includes":{Bt(t,RegExp(Rc(s.value,e)),s.message,e);break}case"ip":{s.version!=="v6"&&Ir(t,"ipv4",s.message,e),s.version!=="v4"&&Ir(t,"ipv6",s.message,e);break}case"base64url":Bt(t,Dr.base64url,s.message,e);break;case"jwt":Bt(t,Dr.jwt,s.message,e);break;case"cidr":{s.version!=="v6"&&Bt(t,Dr.ipv4Cidr,s.message,e),s.version!=="v4"&&Bt(t,Dr.ipv6Cidr,s.message,e);break}case"emoji":Bt(t,Dr.emoji(),s.message,e);break;case"ulid":{Bt(t,Dr.ulid,s.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Ir(t,"binary",s.message,e);break}case"contentEncoding:base64":{Ge(t,"contentEncoding","base64",s.message,e);break}case"pattern:zod":{Bt(t,Dr.base64,s.message,e);break}}break}case"nanoid":Bt(t,Dr.nanoid,s.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return t}function Rc(a,e){return e.patternStrategy==="escape"?bS(a):a}var yS=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function bS(a){let e="";for(let t=0;t<a.length;t++)yS.has(a[t])||(e+="\\"),e+=a[t];return e}function Ir(a,e,t,s){a.format||a.anyOf?.some(r=>r.format)?(a.anyOf||(a.anyOf=[]),a.format&&(a.anyOf.push({format:a.format,...a.errorMessage&&s.errorMessages&&{errorMessage:{format:a.errorMessage.format}}}),delete a.format,a.errorMessage&&(delete a.errorMessage.format,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.anyOf.push({format:e,...t&&s.errorMessages&&{errorMessage:{format:t}}})):Ge(a,"format",e,t,s)}function Bt(a,e,t,s){a.pattern||a.allOf?.some(r=>r.pattern)?(a.allOf||(a.allOf=[]),a.pattern&&(a.allOf.push({pattern:a.pattern,...a.errorMessage&&s.errorMessages&&{errorMessage:{pattern:a.errorMessage.pattern}}}),delete a.pattern,a.errorMessage&&(delete a.errorMessage.pattern,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.allOf.push({pattern:_m(e,s),...t&&s.errorMessages&&{errorMessage:{pattern:t}}})):Ge(a,"pattern",_m(e,s),t,s)}function _m(a,e){if(!e.applyRegexFlags||!a.flags)return a.source;let t={i:a.flags.includes("i"),m:a.flags.includes("m"),s:a.flags.includes("s")},s=t.i?a.source.toLowerCase():a.source,r="",o=!1,c=!1,u=!1;for(let f=0;f<s.length;f++){if(o){r+=s[f],o=!1;continue}if(t.i){if(c){if(s[f].match(/[a-z]/)){u?(r+=s[f],r+=`${s[f-2]}-${s[f]}`.toUpperCase(),u=!1):s[f+1]==="-"&&s[f+2]?.match(/[a-z]/)?(r+=s[f],u=!0):r+=`${s[f]}${s[f].toUpperCase()}`;continue}}else if(s[f].match(/[a-z]/)){r+=`[${s[f]}${s[f].toUpperCase()}]`;continue}}if(t.m){if(s[f]==="^"){r+=`(^|(?<=[\r
]))`;continue}else if(s[f]==="$"){r+=`($|(?=[\r
]))`;continue}}if(t.s&&s[f]==="."){r+=c?`${s[f]}\r
`:`[${s[f]}\r
]`;continue}r+=s[f],s[f]==="\\"?o=!0:c&&s[f]==="]"?c=!1:!c&&s[f]==="["&&(c=!0)}try{new RegExp(r)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),a.source}return r}function qm(a,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&a.keyType?._def.typeName===Y.ZodEnum)return{type:"object",required:a.keyType._def.values,properties:a.keyType._def.values.reduce((s,r)=>({...s,[r]:Ze(a.valueType._def,{...e,currentPath:[...e.currentPath,"properties",r]})??rr(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};let t={type:"object",additionalProperties:Ze(a.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return t;if(a.keyType?._def.typeName===Y.ZodString&&a.keyType._def.checks?.length){let{type:s,...r}=jm(a.keyType._def,e);return{...t,propertyNames:r}}else{if(a.keyType?._def.typeName===Y.ZodEnum)return{...t,propertyNames:{enum:a.keyType._def.values}};if(a.keyType?._def.typeName===Y.ZodBranded&&a.keyType._def.type._def.typeName===Y.ZodString&&a.keyType._def.type._def.checks?.length){let{type:s,...r}=Lm(a.keyType._def,e);return{...t,propertyNames:r}}}return t}function wS(a,e){if(e.mapStrategy==="record")return qm(a,e);let t=Ze(a.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||rr(e),s=Ze(a.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||rr(e);return{type:"array",maxItems:125,items:{type:"array",items:[t,s],minItems:2,maxItems:2}}}function ES(a){let e=a.values,s=Object.keys(a.values).filter(o=>typeof e[e[o]]!="number").map(o=>e[o]),r=Array.from(new Set(s.map(o=>typeof o)));return{type:r.length===1?r[0]==="string"?"string":"number":["string","number"],enum:s}}function xS(a){return a.target==="openAi"?void 0:{not:rr({...a,currentPath:[...a.currentPath,"not"]})}}function SS(a){return a.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var vo={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function PS(a,e){if(e.target==="openApi3")return ym(a,e);let t=a.options instanceof Map?Array.from(a.options.values()):a.options;if(t.every(s=>s._def.typeName in vo&&(!s._def.checks||!s._def.checks.length))){let s=t.reduce((r,o)=>{let c=vo[o._def.typeName];return c&&!r.includes(c)?[...r,c]:r},[]);return{type:s.length>1?s:s[0]}}else if(t.every(s=>s._def.typeName==="ZodLiteral"&&!s.description)){let s=t.reduce((r,o)=>{let c=typeof o._def.value;switch(c){case"string":case"number":case"boolean":return[...r,c];case"bigint":return[...r,"integer"];case"object":if(o._def.value===null)return[...r,"null"];case"symbol":case"undefined":case"function":default:return r}},[]);if(s.length===t.length){let r=s.filter((o,c,u)=>u.indexOf(o)===c);return{type:r.length>1?r:r[0],enum:t.reduce((o,c)=>o.includes(c._def.value)?o:[...o,c._def.value],[])}}}else if(t.every(s=>s._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((s,r)=>[...s,...r._def.values.filter(o=>!s.includes(o))],[])};return ym(a,e)}var ym=(a,e)=>{let t=(a.options instanceof Map?Array.from(a.options.values()):a.options).map((s,r)=>Ze(s._def,{...e,currentPath:[...e.currentPath,"anyOf",`${r}`]})).filter(s=>!!s&&(!e.strictUnions||typeof s=="object"&&Object.keys(s).length>0));return t.length?{anyOf:t}:void 0};function RS(a,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(a.innerType._def.typeName)&&(!a.innerType._def.checks||!a.innerType._def.checks.length))return e.target==="openApi3"?{type:vo[a.innerType._def.typeName],nullable:!0}:{type:[vo[a.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let s=Ze(a.innerType._def,{...e,currentPath:[...e.currentPath]});return s&&"$ref"in s?{allOf:[s],nullable:!0}:s&&{...s,nullable:!0}}let t=Ze(a.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function AS(a,e){let t={type:"number"};if(!a.checks)return t;for(let s of a.checks)switch(s.kind){case"int":t.type="integer",Sm(t,"type",s.message,e);break;case"min":e.target==="jsonSchema7"?s.inclusive?Ge(t,"minimum",s.value,s.message,e):Ge(t,"exclusiveMinimum",s.value,s.message,e):(s.inclusive||(t.exclusiveMinimum=!0),Ge(t,"minimum",s.value,s.message,e));break;case"max":e.target==="jsonSchema7"?s.inclusive?Ge(t,"maximum",s.value,s.message,e):Ge(t,"exclusiveMaximum",s.value,s.message,e):(s.inclusive||(t.exclusiveMaximum=!0),Ge(t,"maximum",s.value,s.message,e));break;case"multipleOf":Ge(t,"multipleOf",s.value,s.message,e);break}return t}function TS(a,e){let t=e.target==="openAi",s={type:"object",properties:{}},r=[],o=a.shape();for(let u in o){let f=o[u];if(f===void 0||f._def===void 0)continue;let h=OS(f);h&&t&&(f._def.typeName==="ZodOptional"&&(f=f._def.innerType),f.isNullable()||(f=f.nullable()),h=!1);let m=Ze(f._def,{...e,currentPath:[...e.currentPath,"properties",u],propertyPath:[...e.currentPath,"properties",u]});m!==void 0&&(s.properties[u]=m,h||r.push(u))}r.length&&(s.required=r);let c=kS(a,e);return c!==void 0&&(s.additionalProperties=c),s}function kS(a,e){if(a.catchall._def.typeName!=="ZodNever")return Ze(a.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(a.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function OS(a){try{return a.isOptional()}catch{return!0}}var CS=(a,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return Ze(a.innerType._def,e);let t=Ze(a.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:rr(e)},t]}:rr(e)},DS=(a,e)=>{if(e.pipeStrategy==="input")return Ze(a.in._def,e);if(e.pipeStrategy==="output")return Ze(a.out._def,e);let t=Ze(a.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),s=Ze(a.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,s].filter(r=>r!==void 0)}};function IS(a,e){return Ze(a.type._def,e)}function $S(a,e){let s={type:"array",uniqueItems:!0,items:Ze(a.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return a.minSize&&Ge(s,"minItems",a.minSize.value,a.minSize.message,e),a.maxSize&&Ge(s,"maxItems",a.maxSize.value,a.maxSize.message,e),s}function MS(a,e){return a.rest?{type:"array",minItems:a.items.length,items:a.items.map((t,s)=>Ze(t._def,{...e,currentPath:[...e.currentPath,"items",`${s}`]})).reduce((t,s)=>s===void 0?t:[...t,s],[]),additionalItems:Ze(a.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:a.items.length,maxItems:a.items.length,items:a.items.map((t,s)=>Ze(t._def,{...e,currentPath:[...e.currentPath,"items",`${s}`]})).reduce((t,s)=>s===void 0?t:[...t,s],[])}}function NS(a){return{not:rr(a)}}function LS(a){return rr(a)}var FS=(a,e)=>Ze(a.innerType._def,e),jS=(a,e,t)=>{switch(e){case Y.ZodString:return jm(a,t);case Y.ZodNumber:return AS(a,t);case Y.ZodObject:return TS(a,t);case Y.ZodBigInt:return cS(a,t);case Y.ZodBoolean:return uS();case Y.ZodDate:return Fm(a,t);case Y.ZodUndefined:return NS(t);case Y.ZodNull:return SS(t);case Y.ZodArray:return lS(a,t);case Y.ZodUnion:case Y.ZodDiscriminatedUnion:return PS(a,t);case Y.ZodIntersection:return vS(a,t);case Y.ZodTuple:return MS(a,t);case Y.ZodRecord:return qm(a,t);case Y.ZodLiteral:return _S(a,t);case Y.ZodEnum:return mS(a);case Y.ZodNativeEnum:return ES(a);case Y.ZodNullable:return RS(a,t);case Y.ZodOptional:return CS(a,t);case Y.ZodMap:return wS(a,t);case Y.ZodSet:return $S(a,t);case Y.ZodLazy:return()=>a.getter()._def;case Y.ZodPromise:return IS(a,t);case Y.ZodNaN:case Y.ZodNever:return xS(t);case Y.ZodEffects:return pS(a,t);case Y.ZodAny:return rr(t);case Y.ZodUnknown:return LS(t);case Y.ZodDefault:return hS(a,t);case Y.ZodBranded:return Lm(a,t);case Y.ZodReadonly:return FS(a,t);case Y.ZodCatch:return fS(a,t);case Y.ZodPipeline:return DS(a,t);case Y.ZodFunction:case Y.ZodVoid:case Y.ZodSymbol:return;default:return(s=>{})(e)}};function Ze(a,e,t=!1){let s=e.seen.get(a);if(e.override){let u=e.override?.(a,e,s,t);if(u!==Dx)return u}if(s&&!t){let u=qS(s,e);if(u!==void 0)return u}let r={def:a,path:e.currentPath,jsonSchema:void 0};e.seen.set(a,r);let o=jS(a,a.typeName,e),c=typeof o=="function"?Ze(o(),e):o;if(c&&zS(a,e,c),e.postProcess){let u=e.postProcess(c,a,e);return r.jsonSchema=c,u}return r.jsonSchema=c,c}var qS=(a,e)=>{switch(e.$refStrategy){case"root":return{$ref:a.path.join("/")};case"relative":return{$ref:Pm(e.currentPath,a.path)};case"none":case"seen":return a.path.length<e.currentPath.length&&a.path.every((t,s)=>e.currentPath[s]===t)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),rr(e)):e.$refStrategy==="seen"?rr(e):void 0}},zS=(a,e,t)=>(a.description&&(t.description=a.description,e.markdownDescription&&(t.markdownDescription=a.description)),t),US=(a,e)=>{let t=$x(e),s=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((f,[h,m])=>({...f,[h]:Ze(m._def,{...t,currentPath:[...t.basePath,t.definitionPath,h]},!0)??rr(t)}),{}):void 0,r=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,o=Ze(a._def,r===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,r]},!1)??rr(t),c=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;c!==void 0&&(o.title=c),t.flags.hasReferencedOpenAiAnyType&&(s||(s={}),s[t.openAiAnyTypeName]||(s[t.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:t.$refStrategy==="relative"?"1":[...t.basePath,t.definitionPath,t.openAiAnyTypeName].join("/")}}));let u=r===void 0?s?{...o,[t.definitionPath]:s}:o:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,r].join("/"),[t.definitionPath]:{...s,[r]:o}};return t.target==="jsonSchema7"?u.$schema="http://json-schema.org/draft-07/schema#":(t.target==="jsonSchema2019-09"||t.target==="openAi")&&(u.$schema="https://json-schema.org/draft/2019-09/schema#"),t.target==="openAi"&&("anyOf"in u||"oneOf"in u||"allOf"in u||"type"in u&&Array.isArray(u.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),u},to=Ec;function HS(a,e){let t={};for(let s of a){let r=s.match(/^([^=]+)=(.*)$/);if(!r)continue;let[,o,c]=r,u=o.split("."),f=c;try{f=JSON.parse(c)}catch{}Cx.default.set(t,u,f)}if(e){let s=e.safeParse(t);if(!s.success){let r=US(e),o=s.error.issues.map(c=>{let u=c.path.join("."),f=c.message,h=t;for(let m of c.path)if(h&&typeof h=="object"&&m in h)h=h[m];else{h=void 0;break}return`  ${u}: ${f} (received: ${JSON.stringify(h)})`});return console.error(`
${Vn.default.red("[smithery]")} Configuration validation failed:`),console.error(o.join(`
`)),console.error(`
Expected schema:`),console.error(JSON.stringify(r,null,2)),console.error(`
Example usage:`),console.error("  node server.js server.host=localhost server.port=8080 debug=true"),{config:t,errors:o}}return{config:s.data,errors:void 0}}return{config:t,errors:void 0}}async function ZS(){try{console.error(`${Vn.default.blue("[smithery]")} Starting MCP server with stdio transport`);let a=process.argv.slice(2),{config:e,errors:t}=HS(a,to.configSchema);t&&process.exit(1);let s;if(to.default&&typeof to.default=="function"){let o=`stdio-${Date.now()}-${Math.random().toString(36).substring(2)}`;console.error(`${Vn.default.blue("[smithery]")} Creating server.`),s=to.default({sessionId:o,config:e})}else throw new Error(`No valid server export found. Please export:
- export default function({ sessionId, config }) { ... }`);let r=new eo;await s.connect(r),console.error(`${Vn.default.green("[smithery]")} MCP server connected to stdio transport`),Object.keys(e).length>0&&console.error(`${Vn.default.blue("[smithery]")} Configuration loaded:`,e)}catch(a){console.error(`${Vn.default.red("[smithery]")} Failed to start MCP server:`,a),process.exit(1)}}ZS().catch(a=>{console.error(`${Vn.default.red("[smithery]")} Unhandled error:`,a),process.exit(1)});
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
/*! Bundled license information:

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)
*/
